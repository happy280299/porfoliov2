(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();function getDefaultExportFromCjs$1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,n){var a=null;if(n!==void 0&&(a=""+n),s.key!==void 0&&(a=""+s.key),"key"in s){n={};for(var l in s)l!=="key"&&(n[l]=s[l])}else n=s;return s=n.ref,{$$typeof:i,type:r,key:a,ref:s!==void 0?s:null,props:n}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(i){function e(vt,xt){var gt=vt.length;vt.push(xt);e:for(;0<gt;){var _t=gt-1>>>1,yt=vt[_t];if(0<s(yt,xt))vt[_t]=xt,vt[gt]=yt,gt=_t;else break e}}function t(vt){return vt.length===0?null:vt[0]}function r(vt){if(vt.length===0)return null;var xt=vt[0],gt=vt.pop();if(gt!==xt){vt[0]=gt;e:for(var _t=0,yt=vt.length,At=yt>>>1;_t<At;){var wt=2*(_t+1)-1,It=vt[wt],Ft=wt+1,zt=vt[Ft];if(0>s(It,gt))Ft<yt&&0>s(zt,It)?(vt[_t]=zt,vt[Ft]=gt,_t=Ft):(vt[_t]=It,vt[wt]=gt,_t=wt);else if(Ft<yt&&0>s(zt,gt))vt[_t]=zt,vt[Ft]=gt,_t=Ft;else break e}}return xt}function s(vt,xt){var gt=vt.sortIndex-xt.sortIndex;return gt!==0?gt:vt.id-xt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;i.unstable_now=function(){return n.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],c=[],p=1,b=null,P=3,N=!1,de=!1,me=!1,Ye=!1,Le=typeof setTimeout=="function"?setTimeout:null,tt=typeof clearTimeout=="function"?clearTimeout:null,Be=typeof setImmediate<"u"?setImmediate:null;function nt(vt){for(var xt=t(c);xt!==null;){if(xt.callback===null)r(c);else if(xt.startTime<=vt)r(c),xt.sortIndex=xt.expirationTime,e(u,xt);else break;xt=t(c)}}function ft(vt){if(me=!1,nt(vt),!de)if(t(u)!==null)de=!0,mt||(mt=!0,Rt());else{var xt=t(c);xt!==null&&Lt(ft,xt.startTime-vt)}}var mt=!1,ht=-1,Et=5,St=-1;function bt(){return Ye?!0:!(i.unstable_now()-St<Et)}function Pt(){if(Ye=!1,mt){var vt=i.unstable_now();St=vt;var xt=!0;try{e:{de=!1,me&&(me=!1,tt(ht),ht=-1),N=!0;var gt=P;try{t:{for(nt(vt),b=t(u);b!==null&&!(b.expirationTime>vt&&bt());){var _t=b.callback;if(typeof _t=="function"){b.callback=null,P=b.priorityLevel;var yt=_t(b.expirationTime<=vt);if(vt=i.unstable_now(),typeof yt=="function"){b.callback=yt,nt(vt),xt=!0;break t}b===t(u)&&r(u),nt(vt)}else r(u);b=t(u)}if(b!==null)xt=!0;else{var At=t(c);At!==null&&Lt(ft,At.startTime-vt),xt=!1}}break e}finally{b=null,P=gt,N=!1}xt=void 0}}finally{xt?Rt():mt=!1}}}var Rt;if(typeof Be=="function")Rt=function(){Be(Pt)};else if(typeof MessageChannel<"u"){var Dt=new MessageChannel,kt=Dt.port2;Dt.port1.onmessage=Pt,Rt=function(){kt.postMessage(null)}}else Rt=function(){Le(Pt,0)};function Lt(vt,xt){ht=Le(function(){vt(i.unstable_now())},xt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(vt){vt.callback=null},i.unstable_forceFrameRate=function(vt){0>vt||125<vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<vt?Math.floor(1e3/vt):5},i.unstable_getCurrentPriorityLevel=function(){return P},i.unstable_next=function(vt){switch(P){case 1:case 2:case 3:var xt=3;break;default:xt=P}var gt=P;P=xt;try{return vt()}finally{P=gt}},i.unstable_requestPaint=function(){Ye=!0},i.unstable_runWithPriority=function(vt,xt){switch(vt){case 1:case 2:case 3:case 4:case 5:break;default:vt=3}var gt=P;P=vt;try{return xt()}finally{P=gt}},i.unstable_scheduleCallback=function(vt,xt,gt){var _t=i.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?_t+gt:_t):gt=_t,vt){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=gt+yt,vt={id:p++,callback:xt,priorityLevel:vt,startTime:gt,expirationTime:yt,sortIndex:-1},gt>_t?(vt.sortIndex=gt,e(c,vt),t(u)===null&&vt===t(c)&&(me?(tt(ht),ht=-1):me=!0,Lt(ft,gt-_t))):(vt.sortIndex=yt,e(u,vt),de||N||(de=!0,mt||(mt=!0,Rt()))),vt},i.unstable_shouldYield=bt,i.unstable_wrapCallback=function(vt){var xt=P;return function(){var gt=P;P=xt;try{return vt.apply(this,arguments)}finally{P=gt}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function P(yt){return yt===null||typeof yt!="object"?null:(yt=b&&yt[b]||yt["@@iterator"],typeof yt=="function"?yt:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,me={};function Ye(yt,At,wt){this.props=yt,this.context=At,this.refs=me,this.updater=wt||N}Ye.prototype.isReactComponent={},Ye.prototype.setState=function(yt,At){if(typeof yt!="object"&&typeof yt!="function"&&yt!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,yt,At,"setState")},Ye.prototype.forceUpdate=function(yt){this.updater.enqueueForceUpdate(this,yt,"forceUpdate")};function Le(){}Le.prototype=Ye.prototype;function tt(yt,At,wt){this.props=yt,this.context=At,this.refs=me,this.updater=wt||N}var Be=tt.prototype=new Le;Be.constructor=tt,de(Be,Ye.prototype),Be.isPureReactComponent=!0;var nt=Array.isArray,ft={H:null,A:null,T:null,S:null,V:null},mt=Object.prototype.hasOwnProperty;function ht(yt,At,wt,It,Ft,zt){return wt=zt.ref,{$$typeof:i,type:yt,key:At,ref:wt!==void 0?wt:null,props:zt}}function Et(yt,At){return ht(yt.type,At,void 0,void 0,void 0,yt.props)}function St(yt){return typeof yt=="object"&&yt!==null&&yt.$$typeof===i}function bt(yt){var At={"=":"=0",":":"=2"};return"$"+yt.replace(/[=:]/g,function(wt){return At[wt]})}var Pt=/\/+/g;function Rt(yt,At){return typeof yt=="object"&&yt!==null&&yt.key!=null?bt(""+yt.key):At.toString(36)}function Dt(){}function kt(yt){switch(yt.status){case"fulfilled":return yt.value;case"rejected":throw yt.reason;default:switch(typeof yt.status=="string"?yt.then(Dt,Dt):(yt.status="pending",yt.then(function(At){yt.status==="pending"&&(yt.status="fulfilled",yt.value=At)},function(At){yt.status==="pending"&&(yt.status="rejected",yt.reason=At)})),yt.status){case"fulfilled":return yt.value;case"rejected":throw yt.reason}}throw yt}function Lt(yt,At,wt,It,Ft){var zt=typeof yt;(zt==="undefined"||zt==="boolean")&&(yt=null);var Ut=!1;if(yt===null)Ut=!0;else switch(zt){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(yt.$$typeof){case i:case e:Ut=!0;break;case p:return Ut=yt._init,Lt(Ut(yt._payload),At,wt,It,Ft)}}if(Ut)return Ft=Ft(yt),Ut=It===""?"."+Rt(yt,0):It,nt(Ft)?(wt="",Ut!=null&&(wt=Ut.replace(Pt,"$&/")+"/"),Lt(Ft,At,wt,"",function(Jt){return Jt})):Ft!=null&&(St(Ft)&&(Ft=Et(Ft,wt+(Ft.key==null||yt&&yt.key===Ft.key?"":(""+Ft.key).replace(Pt,"$&/")+"/")+Ut)),At.push(Ft)),1;Ut=0;var Qt=It===""?".":It+":";if(nt(yt))for(var Xt=0;Xt<yt.length;Xt++)It=yt[Xt],zt=Qt+Rt(It,Xt),Ut+=Lt(It,At,wt,zt,Ft);else if(Xt=P(yt),typeof Xt=="function")for(yt=Xt.call(yt),Xt=0;!(It=yt.next()).done;)It=It.value,zt=Qt+Rt(It,Xt++),Ut+=Lt(It,At,wt,zt,Ft);else if(zt==="object"){if(typeof yt.then=="function")return Lt(kt(yt),At,wt,It,Ft);throw At=String(yt),Error("Objects are not valid as a React child (found: "+(At==="[object Object]"?"object with keys {"+Object.keys(yt).join(", ")+"}":At)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function vt(yt,At,wt){if(yt==null)return yt;var It=[],Ft=0;return Lt(yt,It,"","",function(zt){return At.call(wt,zt,Ft++)}),It}function xt(yt){if(yt._status===-1){var At=yt._result;At=At(),At.then(function(wt){(yt._status===0||yt._status===-1)&&(yt._status=1,yt._result=wt)},function(wt){(yt._status===0||yt._status===-1)&&(yt._status=2,yt._result=wt)}),yt._status===-1&&(yt._status=0,yt._result=At)}if(yt._status===1)return yt._result.default;throw yt._result}var gt=typeof reportError=="function"?reportError:function(yt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var At=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof yt=="object"&&yt!==null&&typeof yt.message=="string"?String(yt.message):String(yt),error:yt});if(!window.dispatchEvent(At))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",yt);return}console.error(yt)};function _t(){}return react_production.Children={map:vt,forEach:function(yt,At,wt){vt(yt,function(){At.apply(this,arguments)},wt)},count:function(yt){var At=0;return vt(yt,function(){At++}),At},toArray:function(yt){return vt(yt,function(At){return At})||[]},only:function(yt){if(!St(yt))throw Error("React.Children.only expected to receive a single React element child.");return yt}},react_production.Component=Ye,react_production.Fragment=t,react_production.Profiler=s,react_production.PureComponent=tt,react_production.StrictMode=r,react_production.Suspense=u,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(yt){return ft.H.useMemoCache(yt)}},react_production.cache=function(yt){return function(){return yt.apply(null,arguments)}},react_production.cloneElement=function(yt,At,wt){if(yt==null)throw Error("The argument must be a React element, but you passed "+yt+".");var It=de({},yt.props),Ft=yt.key,zt=void 0;if(At!=null)for(Ut in At.ref!==void 0&&(zt=void 0),At.key!==void 0&&(Ft=""+At.key),At)!mt.call(At,Ut)||Ut==="key"||Ut==="__self"||Ut==="__source"||Ut==="ref"&&At.ref===void 0||(It[Ut]=At[Ut]);var Ut=arguments.length-2;if(Ut===1)It.children=wt;else if(1<Ut){for(var Qt=Array(Ut),Xt=0;Xt<Ut;Xt++)Qt[Xt]=arguments[Xt+2];It.children=Qt}return ht(yt.type,Ft,void 0,void 0,zt,It)},react_production.createContext=function(yt){return yt={$$typeof:a,_currentValue:yt,_currentValue2:yt,_threadCount:0,Provider:null,Consumer:null},yt.Provider=yt,yt.Consumer={$$typeof:n,_context:yt},yt},react_production.createElement=function(yt,At,wt){var It,Ft={},zt=null;if(At!=null)for(It in At.key!==void 0&&(zt=""+At.key),At)mt.call(At,It)&&It!=="key"&&It!=="__self"&&It!=="__source"&&(Ft[It]=At[It]);var Ut=arguments.length-2;if(Ut===1)Ft.children=wt;else if(1<Ut){for(var Qt=Array(Ut),Xt=0;Xt<Ut;Xt++)Qt[Xt]=arguments[Xt+2];Ft.children=Qt}if(yt&&yt.defaultProps)for(It in Ut=yt.defaultProps,Ut)Ft[It]===void 0&&(Ft[It]=Ut[It]);return ht(yt,zt,void 0,void 0,null,Ft)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(yt){return{$$typeof:l,render:yt}},react_production.isValidElement=St,react_production.lazy=function(yt){return{$$typeof:p,_payload:{_status:-1,_result:yt},_init:xt}},react_production.memo=function(yt,At){return{$$typeof:c,type:yt,compare:At===void 0?null:At}},react_production.startTransition=function(yt){var At=ft.T,wt={};ft.T=wt;try{var It=yt(),Ft=ft.S;Ft!==null&&Ft(wt,It),typeof It=="object"&&It!==null&&typeof It.then=="function"&&It.then(_t,gt)}catch(zt){gt(zt)}finally{ft.T=At}},react_production.unstable_useCacheRefresh=function(){return ft.H.useCacheRefresh()},react_production.use=function(yt){return ft.H.use(yt)},react_production.useActionState=function(yt,At,wt){return ft.H.useActionState(yt,At,wt)},react_production.useCallback=function(yt,At){return ft.H.useCallback(yt,At)},react_production.useContext=function(yt){return ft.H.useContext(yt)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(yt,At){return ft.H.useDeferredValue(yt,At)},react_production.useEffect=function(yt,At,wt){var It=ft.H;if(typeof wt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return It.useEffect(yt,At)},react_production.useId=function(){return ft.H.useId()},react_production.useImperativeHandle=function(yt,At,wt){return ft.H.useImperativeHandle(yt,At,wt)},react_production.useInsertionEffect=function(yt,At){return ft.H.useInsertionEffect(yt,At)},react_production.useLayoutEffect=function(yt,At){return ft.H.useLayoutEffect(yt,At)},react_production.useMemo=function(yt,At){return ft.H.useMemo(yt,At)},react_production.useOptimistic=function(yt,At){return ft.H.useOptimistic(yt,At)},react_production.useReducer=function(yt,At,wt){return ft.H.useReducer(yt,At,wt)},react_production.useRef=function(yt){return ft.H.useRef(yt)},react_production.useState=function(yt){return ft.H.useState(yt)},react_production.useSyncExternalStore=function(yt,At,wt){return ft.H.useSyncExternalStore(yt,At,wt)},react_production.useTransition=function(){return ft.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var i=requireReact();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function n(u,c,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:u,containerInfo:c,implementation:p}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(u,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return n(u,c,null,p)},reactDom_production.flushSync=function(u){var c=a.T,p=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=c,r.p=p,r.d.f()}},reactDom_production.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},reactDom_production.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},reactDom_production.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var p=c.as,b=l(p,c.crossOrigin),P=typeof c.integrity=="string"?c.integrity:void 0,N=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;p==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:b,integrity:P,fetchPriority:N}):p==="script"&&r.d.X(u,{crossOrigin:b,integrity:P,fetchPriority:N,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},reactDom_production.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var p=l(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},reactDom_production.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var p=c.as,b=l(p,c.crossOrigin);r.d.L(u,p,{crossOrigin:b,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},reactDom_production.preloadModule=function(u,c){if(typeof u=="string")if(c){var p=l(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},reactDom_production.requestFormReset=function(u){r.d.r(u)},reactDom_production.unstable_batchedUpdates=function(u,c){return u(c)},reactDom_production.useFormState=function(u,c,p){return a.H.useFormState(u,c,p)},reactDom_production.useFormStatus=function(){return a.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var i=requireScheduler(),e=requireReact(),t=requireReactDom();function r(o){var d="https://react.dev/errors/"+o;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)d+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+o+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function n(o){var d=o,E=o;if(o.alternate)for(;d.return;)d=d.return;else{o=d;do d=o,(d.flags&4098)!==0&&(E=d.return),o=d.return;while(o)}return d.tag===3?E:null}function a(o){if(o.tag===13){var d=o.memoizedState;if(d===null&&(o=o.alternate,o!==null&&(d=o.memoizedState)),d!==null)return d.dehydrated}return null}function l(o){if(n(o)!==o)throw Error(r(188))}function u(o){var d=o.alternate;if(!d){if(d=n(o),d===null)throw Error(r(188));return d!==o?null:o}for(var E=o,pe=d;;){var st=E.return;if(st===null)break;var ot=st.alternate;if(ot===null){if(pe=st.return,pe!==null){E=pe;continue}break}if(st.child===ot.child){for(ot=st.child;ot;){if(ot===E)return l(st),o;if(ot===pe)return l(st),d;ot=ot.sibling}throw Error(r(188))}if(E.return!==pe.return)E=st,pe=ot;else{for(var Tt=!1,Ct=st.child;Ct;){if(Ct===E){Tt=!0,E=st,pe=ot;break}if(Ct===pe){Tt=!0,pe=st,E=ot;break}Ct=Ct.sibling}if(!Tt){for(Ct=ot.child;Ct;){if(Ct===E){Tt=!0,E=ot,pe=st;break}if(Ct===pe){Tt=!0,pe=ot,E=st;break}Ct=Ct.sibling}if(!Tt)throw Error(r(189))}}if(E.alternate!==pe)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?o:d}function c(o){var d=o.tag;if(d===5||d===26||d===27||d===6)return o;for(o=o.child;o!==null;){if(d=c(o),d!==null)return d;o=o.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),Ye=Symbol.for("react.profiler"),Le=Symbol.for("react.provider"),tt=Symbol.for("react.consumer"),Be=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),Et=Symbol.for("react.lazy"),St=Symbol.for("react.activity"),bt=Symbol.for("react.memo_cache_sentinel"),Pt=Symbol.iterator;function Rt(o){return o===null||typeof o!="object"?null:(o=Pt&&o[Pt]||o["@@iterator"],typeof o=="function"?o:null)}var Dt=Symbol.for("react.client.reference");function kt(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Dt?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case de:return"Fragment";case Ye:return"Profiler";case me:return"StrictMode";case ft:return"Suspense";case mt:return"SuspenseList";case St:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case N:return"Portal";case Be:return(o.displayName||"Context")+".Provider";case tt:return(o._context.displayName||"Context")+".Consumer";case nt:var d=o.render;return o=o.displayName,o||(o=d.displayName||d.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ht:return d=o.displayName||null,d!==null?d:kt(o.type)||"Memo";case Et:d=o._payload,o=o._init;try{return kt(o(d))}catch{}}return null}var Lt=Array.isArray,vt=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},_t=[],yt=-1;function At(o){return{current:o}}function wt(o){0>yt||(o.current=_t[yt],_t[yt]=null,yt--)}function It(o,d){yt++,_t[yt]=o.current,o.current=d}var Ft=At(null),zt=At(null),Ut=At(null),Qt=At(null);function Xt(o,d){switch(It(Ut,d),It(zt,o),It(Ft,null),d.nodeType){case 9:case 11:o=(o=d.documentElement)&&(o=o.namespaceURI)?vd(o):0;break;default:if(o=d.tagName,d=d.namespaceURI)d=vd(d),o=Ed(d,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}wt(Ft),It(Ft,o)}function Jt(){wt(Ft),wt(zt),wt(Ut)}function mi(o){o.memoizedState!==null&&It(Qt,o);var d=Ft.current,E=Ed(d,o.type);d!==E&&(It(zt,o),It(Ft,E))}function ni(o){zt.current===o&&(wt(Ft),wt(zt)),Qt.current===o&&(wt(Qt),Ka._currentValue=gt)}var pi=Object.prototype.hasOwnProperty,Zt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,ji=i.unstable_shouldYield,ri=i.unstable_requestPaint,Bt=i.unstable_now,vi=i.unstable_getCurrentPriorityLevel,Oi=i.unstable_ImmediatePriority,Ri=i.unstable_UserBlockingPriority,ui=i.unstable_NormalPriority,Vi=i.unstable_LowPriority,Zi=i.unstable_IdlePriority,Ki=i.log,wi=i.unstable_setDisableYieldValue,Li=null,hi=null;function zi(o){if(typeof Ki=="function"&&wi(o),hi&&typeof hi.setStrictMode=="function")try{hi.setStrictMode(Li,o)}catch{}}var Ai=Math.clz32?Math.clz32:tr,dr=Math.log,Fr=Math.LN2;function tr(o){return o>>>=0,o===0?32:31-(dr(o)/Fr|0)|0}var ys=256,wr=4194304;function Lr(o){var d=o&42;if(d!==0)return d;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function as(o,d,E){var pe=o.pendingLanes;if(pe===0)return 0;var st=0,ot=o.suspendedLanes,Tt=o.pingedLanes;o=o.warmLanes;var Ct=pe&134217727;return Ct!==0?(pe=Ct&~ot,pe!==0?st=Lr(pe):(Tt&=Ct,Tt!==0?st=Lr(Tt):E||(E=Ct&~o,E!==0&&(st=Lr(E))))):(Ct=pe&~ot,Ct!==0?st=Lr(Ct):Tt!==0?st=Lr(Tt):E||(E=pe&~o,E!==0&&(st=Lr(E)))),st===0?0:d!==0&&d!==st&&(d&ot)===0&&(ot=st&-st,E=d&-d,ot>=E||ot===32&&(E&4194048)!==0)?d:st}function Mr(o,d){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&d)===0}function vs(o,d){switch(o){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gi(){var o=ys;return ys<<=1,(ys&4194048)===0&&(ys=256),o}function cs(){var o=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),o}function Cr(o){for(var d=[],E=0;31>E;E++)d.push(o);return d}function _r(o,d){o.pendingLanes|=d,d!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Nr(o,d,E,pe,st,ot){var Tt=o.pendingLanes;o.pendingLanes=E,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=E,o.entangledLanes&=E,o.errorRecoveryDisabledLanes&=E,o.shellSuspendCounter=0;var Ct=o.entanglements,Mt=o.expirationTimes,$t=o.hiddenUpdates;for(E=Tt&~E;0<E;){var Ht=31-Ai(E),qt=1<<Ht;Ct[Ht]=0,Mt[Ht]=-1;var Gt=$t[Ht];if(Gt!==null)for($t[Ht]=null,Ht=0;Ht<Gt.length;Ht++){var jt=Gt[Ht];jt!==null&&(jt.lane&=-536870913)}E&=~qt}pe!==0&&fs(o,pe,0),ot!==0&&st===0&&o.tag!==0&&(o.suspendedLanes|=ot&~(Tt&~d))}function fs(o,d,E){o.pendingLanes|=d,o.suspendedLanes&=~d;var pe=31-Ai(d);o.entangledLanes|=d,o.entanglements[pe]=o.entanglements[pe]|1073741824|E&4194090}function Es(o,d){var E=o.entangledLanes|=d;for(o=o.entanglements;E;){var pe=31-Ai(E),st=1<<pe;st&d|o[pe]&d&&(o[pe]|=d),E&=~st}}function Br(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function _s(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function di(){var o=xt.p;return o!==0?o:(o=window.event,o===void 0?32:Bd(o.type))}function ai(o,d){var E=xt.p;try{return xt.p=o,d()}finally{xt.p=E}}var yi=Math.random().toString(36).slice(2),Wt="__reactFiber$"+yi,ii="__reactProps$"+yi,ti="__reactContainer$"+yi,fi="__reactEvents$"+yi,lr="__reactListeners$"+yi,xi="__reactHandles$"+yi,Xi="__reactResources$"+yi,ir="__reactMarker$"+yi;function qi(o){delete o[Wt],delete o[ii],delete o[fi],delete o[lr],delete o[xi]}function Ii(o){var d=o[Wt];if(d)return d;for(var E=o.parentNode;E;){if(d=E[ti]||E[Wt]){if(E=d.alternate,d.child!==null||E!==null&&E.child!==null)for(o=Td(o);o!==null;){if(E=o[Wt])return E;o=Td(o)}return d}o=E,E=o.parentNode}return null}function Ci(o){if(o=o[Wt]||o[ti]){var d=o.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return o}return null}function Sr(o){var d=o.tag;if(d===5||d===26||d===27||d===6)return o.stateNode;throw Error(r(33))}function Fi(o){var d=o[Xi];return d||(d=o[Xi]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Mi(o){o[ir]=!0}var Vr=new Set,ur={};function Wi(o,d){Ji(o,d),Ji(o+"Capture",d)}function Ji(o,d){for(ur[o]=d,o=0;o<d.length;o++)Vr.add(d[o])}var Ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),un={},pr={};function nr(o){return pi.call(pr,o)?!0:pi.call(un,o)?!1:Ss.test(o)?pr[o]=!0:(un[o]=!0,!1)}function Pr(o,d,E){if(nr(d))if(E===null)o.removeAttribute(d);else{switch(typeof E){case"undefined":case"function":case"symbol":o.removeAttribute(d);return;case"boolean":var pe=d.toLowerCase().slice(0,5);if(pe!=="data-"&&pe!=="aria-"){o.removeAttribute(d);return}}o.setAttribute(d,""+E)}}function Bs(o,d,E){if(E===null)o.removeAttribute(d);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttribute(d,""+E)}}function Yr(o,d,E,pe){if(pe===null)o.removeAttribute(E);else{switch(typeof pe){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(E);return}o.setAttributeNS(d,E,""+pe)}}var xs,$r;function Wr(o){if(xs===void 0)try{throw Error()}catch(E){var d=E.stack.trim().match(/\n( *(at )?)/);xs=d&&d[1]||"",$r=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+o+$r}var Vs=!1;function Xr(o,d){if(!o||Vs)return"";Vs=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var pe={DetermineComponentFrameRoot:function(){try{if(d){var qt=function(){throw Error()};if(Object.defineProperty(qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qt,[])}catch(jt){var Gt=jt}Reflect.construct(o,[],qt)}else{try{qt.call()}catch(jt){Gt=jt}o.call(qt.prototype)}}else{try{throw Error()}catch(jt){Gt=jt}(qt=o())&&typeof qt.catch=="function"&&qt.catch(function(){})}}catch(jt){if(jt&&Gt&&typeof jt.stack=="string")return[jt.stack,Gt.stack]}return[null,null]}};pe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var st=Object.getOwnPropertyDescriptor(pe.DetermineComponentFrameRoot,"name");st&&st.configurable&&Object.defineProperty(pe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ot=pe.DetermineComponentFrameRoot(),Tt=ot[0],Ct=ot[1];if(Tt&&Ct){var Mt=Tt.split(`
`),$t=Ct.split(`
`);for(st=pe=0;pe<Mt.length&&!Mt[pe].includes("DetermineComponentFrameRoot");)pe++;for(;st<$t.length&&!$t[st].includes("DetermineComponentFrameRoot");)st++;if(pe===Mt.length||st===$t.length)for(pe=Mt.length-1,st=$t.length-1;1<=pe&&0<=st&&Mt[pe]!==$t[st];)st--;for(;1<=pe&&0<=st;pe--,st--)if(Mt[pe]!==$t[st]){if(pe!==1||st!==1)do if(pe--,st--,0>st||Mt[pe]!==$t[st]){var Ht=`
`+Mt[pe].replace(" at new "," at ");return o.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",o.displayName)),Ht}while(1<=pe&&0<=st);break}}}finally{Vs=!1,Error.prepareStackTrace=E}return(E=o?o.displayName||o.name:"")?Wr(E):""}function zd(o){switch(o.tag){case 26:case 27:case 5:return Wr(o.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return Xr(o.type,!1);case 11:return Xr(o.type.render,!1);case 1:return Xr(o.type,!0);case 31:return Wr("Activity");default:return""}}function uc(o){try{var d="";do d+=zd(o),o=o.return;while(o);return d}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function Qr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function cc(o){var d=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Hd(o){var d=cc(o)?"checked":"value",E=Object.getOwnPropertyDescriptor(o.constructor.prototype,d),pe=""+o[d];if(!o.hasOwnProperty(d)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var st=E.get,ot=E.set;return Object.defineProperty(o,d,{configurable:!0,get:function(){return st.call(this)},set:function(Tt){pe=""+Tt,ot.call(this,Tt)}}),Object.defineProperty(o,d,{enumerable:E.enumerable}),{getValue:function(){return pe},setValue:function(Tt){pe=""+Tt},stopTracking:function(){o._valueTracker=null,delete o[d]}}}}function Qa(o){o._valueTracker||(o._valueTracker=Hd(o))}function fc(o){if(!o)return!1;var d=o._valueTracker;if(!d)return!0;var E=d.getValue(),pe="";return o&&(pe=cc(o)?o.checked?"true":"false":o.value),o=pe,o!==E?(d.setValue(o),!0):!1}function Za(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Kd=/[\n"\\]/g;function Zr(o){return o.replace(Kd,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function al(o,d,E,pe,st,ot,Tt,Ct){o.name="",Tt!=null&&typeof Tt!="function"&&typeof Tt!="symbol"&&typeof Tt!="boolean"?o.type=Tt:o.removeAttribute("type"),d!=null?Tt==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+Qr(d)):o.value!==""+Qr(d)&&(o.value=""+Qr(d)):Tt!=="submit"&&Tt!=="reset"||o.removeAttribute("value"),d!=null?ol(o,Tt,Qr(d)):E!=null?ol(o,Tt,Qr(E)):pe!=null&&o.removeAttribute("value"),st==null&&ot!=null&&(o.defaultChecked=!!ot),st!=null&&(o.checked=st&&typeof st!="function"&&typeof st!="symbol"),Ct!=null&&typeof Ct!="function"&&typeof Ct!="symbol"&&typeof Ct!="boolean"?o.name=""+Qr(Ct):o.removeAttribute("name")}function hc(o,d,E,pe,st,ot,Tt,Ct){if(ot!=null&&typeof ot!="function"&&typeof ot!="symbol"&&typeof ot!="boolean"&&(o.type=ot),d!=null||E!=null){if(!(ot!=="submit"&&ot!=="reset"||d!=null))return;E=E!=null?""+Qr(E):"",d=d!=null?""+Qr(d):E,Ct||d===o.value||(o.value=d),o.defaultValue=d}pe=pe??st,pe=typeof pe!="function"&&typeof pe!="symbol"&&!!pe,o.checked=Ct?o.checked:!!pe,o.defaultChecked=!!pe,Tt!=null&&typeof Tt!="function"&&typeof Tt!="symbol"&&typeof Tt!="boolean"&&(o.name=Tt)}function ol(o,d,E){d==="number"&&Za(o.ownerDocument)===o||o.defaultValue===""+E||(o.defaultValue=""+E)}function Cn(o,d,E,pe){if(o=o.options,d){d={};for(var st=0;st<E.length;st++)d["$"+E[st]]=!0;for(E=0;E<o.length;E++)st=d.hasOwnProperty("$"+o[E].value),o[E].selected!==st&&(o[E].selected=st),st&&pe&&(o[E].defaultSelected=!0)}else{for(E=""+Qr(E),d=null,st=0;st<o.length;st++){if(o[st].value===E){o[st].selected=!0,pe&&(o[st].defaultSelected=!0);return}d!==null||o[st].disabled||(d=o[st])}d!==null&&(d.selected=!0)}}function dc(o,d,E){if(d!=null&&(d=""+Qr(d),d!==o.value&&(o.value=d),E==null)){o.defaultValue!==d&&(o.defaultValue=d);return}o.defaultValue=E!=null?""+Qr(E):""}function pc(o,d,E,pe){if(d==null){if(pe!=null){if(E!=null)throw Error(r(92));if(Lt(pe)){if(1<pe.length)throw Error(r(93));pe=pe[0]}E=pe}E==null&&(E=""),d=E}E=Qr(d),o.defaultValue=E,pe=o.textContent,pe===E&&pe!==""&&pe!==null&&(o.value=pe)}function Pn(o,d){if(d){var E=o.firstChild;if(E&&E===o.lastChild&&E.nodeType===3){E.nodeValue=d;return}}o.textContent=d}var qd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mc(o,d,E){var pe=d.indexOf("--")===0;E==null||typeof E=="boolean"||E===""?pe?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="":pe?o.setProperty(d,E):typeof E!="number"||E===0||qd.has(d)?d==="float"?o.cssFloat=E:o[d]=(""+E).trim():o[d]=E+"px"}function gc(o,d,E){if(d!=null&&typeof d!="object")throw Error(r(62));if(o=o.style,E!=null){for(var pe in E)!E.hasOwnProperty(pe)||d!=null&&d.hasOwnProperty(pe)||(pe.indexOf("--")===0?o.setProperty(pe,""):pe==="float"?o.cssFloat="":o[pe]="");for(var st in d)pe=d[st],d.hasOwnProperty(st)&&E[st]!==pe&&mc(o,st,pe)}else for(var ot in d)d.hasOwnProperty(ot)&&mc(o,ot,d[ot])}function ll(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(o){return Wd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ul=null;function cl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Rn=null,wn=null;function yc(o){var d=Ci(o);if(d&&(o=d.stateNode)){var E=o[ii]||null;e:switch(o=d.stateNode,d.type){case"input":if(al(o,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name),d=E.name,E.type==="radio"&&d!=null){for(E=o;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll('input[name="'+Zr(""+d)+'"][type="radio"]'),d=0;d<E.length;d++){var pe=E[d];if(pe!==o&&pe.form===o.form){var st=pe[ii]||null;if(!st)throw Error(r(90));al(pe,st.value,st.defaultValue,st.defaultValue,st.checked,st.defaultChecked,st.type,st.name)}}for(d=0;d<E.length;d++)pe=E[d],pe.form===o.form&&fc(pe)}break e;case"textarea":dc(o,E.value,E.defaultValue);break e;case"select":d=E.value,d!=null&&Cn(o,!!E.multiple,d,!1)}}}var fl=!1;function vc(o,d,E){if(fl)return o(d,E);fl=!0;try{var pe=o(d);return pe}finally{if(fl=!1,(Rn!==null||wn!==null)&&(Vo(),Rn&&(d=Rn,o=wn,wn=Rn=null,yc(d),o)))for(d=0;d<o.length;d++)yc(o[d])}}function na(o,d){var E=o.stateNode;if(E===null)return null;var pe=E[ii]||null;if(pe===null)return null;E=pe[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(pe=!pe.disabled)||(o=o.type,pe=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!pe;break e;default:o=!1}if(o)return null;if(E&&typeof E!="function")throw Error(r(231,d,typeof E));return E}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=!1;if(Ts)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){hl=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{hl=!1}var $s=null,dl=null,eo=null;function Ec(){if(eo)return eo;var o,d=dl,E=d.length,pe,st="value"in $s?$s.value:$s.textContent,ot=st.length;for(o=0;o<E&&d[o]===st[o];o++);var Tt=E-o;for(pe=1;pe<=Tt&&d[E-pe]===st[ot-pe];pe++);return eo=st.slice(o,1<pe?1-pe:void 0)}function to(o){var d=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&d===13&&(o=13)):o=d,o===10&&(o=13),32<=o||o===13?o:0}function io(){return!0}function _c(){return!1}function Dr(o){function d(E,pe,st,ot,Tt){this._reactName=E,this._targetInst=st,this.type=pe,this.nativeEvent=ot,this.target=Tt,this.currentTarget=null;for(var Ct in o)o.hasOwnProperty(Ct)&&(E=o[Ct],this[Ct]=E?E(ot):ot[Ct]);return this.isDefaultPrevented=(ot.defaultPrevented!=null?ot.defaultPrevented:ot.returnValue===!1)?io:_c,this.isPropagationStopped=_c,this}return p(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),d}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=Dr(cn),oa=p({},cn,{view:0,detail:0}),Xd=Dr(oa),pl,ml,la,so=p({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==la&&(la&&o.type==="mousemove"?(pl=o.screenX-la.screenX,ml=o.screenY-la.screenY):ml=pl=0,la=o),pl)},movementY:function(o){return"movementY"in o?o.movementY:ml}}),Sc=Dr(so),Qd=p({},so,{dataTransfer:0}),Zd=Dr(Qd),Jd=p({},oa,{relatedTarget:0}),gl=Dr(Jd),ep=p({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),tp=Dr(ep),rp=p({},cn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sp=Dr(rp),np=p({},cn,{data:0}),xc=Dr(np),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(o){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(o):(o=up[o])?!!d[o]:!1}function yl(){return cp}var fp=p({},oa,{key:function(o){if(o.key){var d=ap[o.key]||o.key;if(d!=="Unidentified")return d}return o.type==="keypress"?(o=to(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?lp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(o){return o.type==="keypress"?to(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?to(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),hp=Dr(fp),dp=p({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tc=Dr(dp),pp=p({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),mp=Dr(pp),gp=p({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),yp=Dr(gp),vp=p({},so,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ep=Dr(vp),_p=p({},cn,{newState:0,oldState:0}),Sp=Dr(_p),xp=[9,13,27,32],vl=Ts&&"CompositionEvent"in window,ua=null;Ts&&"documentMode"in document&&(ua=document.documentMode);var Tp=Ts&&"TextEvent"in window&&!ua,bc=Ts&&(!vl||ua&&8<ua&&11>=ua),Ac=" ",Cc=!1;function Pc(o,d){switch(o){case"keyup":return xp.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ln=!1;function bp(o,d){switch(o){case"compositionend":return Rc(d);case"keypress":return d.which!==32?null:(Cc=!0,Ac);case"textInput":return o=d.data,o===Ac&&Cc?null:o;default:return null}}function Ap(o,d){if(Ln)return o==="compositionend"||!vl&&Pc(o,d)?(o=Ec(),eo=dl=$s=null,Ln=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return bc&&d.locale!=="ko"?null:d.data;default:return null}}var Cp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(o){var d=o&&o.nodeName&&o.nodeName.toLowerCase();return d==="input"?!!Cp[o.type]:d==="textarea"}function Lc(o,d,E,pe){Rn?wn?wn.push(pe):wn=[pe]:Rn=pe,d=Ho(d,"onChange"),0<d.length&&(E=new ro("onChange","change",null,E,pe),o.push({event:E,listeners:d}))}var ca=null,fa=null;function Pp(o){dd(o,0)}function no(o){var d=Sr(o);if(fc(d))return o}function Mc(o,d){if(o==="change")return d}var Dc=!1;if(Ts){var El;if(Ts){var _l="oninput"in document;if(!_l){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),_l=typeof Ic.oninput=="function"}El=_l}else El=!1;Dc=El&&(!document.documentMode||9<document.documentMode)}function kc(){ca&&(ca.detachEvent("onpropertychange",Oc),fa=ca=null)}function Oc(o){if(o.propertyName==="value"&&no(fa)){var d=[];Lc(d,fa,o,cl(o)),vc(Pp,d)}}function Rp(o,d,E){o==="focusin"?(kc(),ca=d,fa=E,ca.attachEvent("onpropertychange",Oc)):o==="focusout"&&kc()}function wp(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return no(fa)}function Lp(o,d){if(o==="click")return no(d)}function Mp(o,d){if(o==="input"||o==="change")return no(d)}function Dp(o,d){return o===d&&(o!==0||1/o===1/d)||o!==o&&d!==d}var Ur=typeof Object.is=="function"?Object.is:Dp;function ha(o,d){if(Ur(o,d))return!0;if(typeof o!="object"||o===null||typeof d!="object"||d===null)return!1;var E=Object.keys(o),pe=Object.keys(d);if(E.length!==pe.length)return!1;for(pe=0;pe<E.length;pe++){var st=E[pe];if(!pi.call(d,st)||!Ur(o[st],d[st]))return!1}return!0}function Fc(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Nc(o,d){var E=Fc(o);o=0;for(var pe;E;){if(E.nodeType===3){if(pe=o+E.textContent.length,o<=d&&pe>=d)return{node:E,offset:d-o};o=pe}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Fc(E)}}function Bc(o,d){return o&&d?o===d?!0:o&&o.nodeType===3?!1:d&&d.nodeType===3?Bc(o,d.parentNode):"contains"in o?o.contains(d):o.compareDocumentPosition?!!(o.compareDocumentPosition(d)&16):!1:!1}function Vc(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var d=Za(o.document);d instanceof o.HTMLIFrameElement;){try{var E=typeof d.contentWindow.location.href=="string"}catch{E=!1}if(E)o=d.contentWindow;else break;d=Za(o.document)}return d}function Sl(o){var d=o&&o.nodeName&&o.nodeName.toLowerCase();return d&&(d==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||d==="textarea"||o.contentEditable==="true")}var Ip=Ts&&"documentMode"in document&&11>=document.documentMode,Mn=null,xl=null,da=null,Tl=!1;function $c(o,d,E){var pe=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Tl||Mn==null||Mn!==Za(pe)||(pe=Mn,"selectionStart"in pe&&Sl(pe)?pe={start:pe.selectionStart,end:pe.selectionEnd}:(pe=(pe.ownerDocument&&pe.ownerDocument.defaultView||window).getSelection(),pe={anchorNode:pe.anchorNode,anchorOffset:pe.anchorOffset,focusNode:pe.focusNode,focusOffset:pe.focusOffset}),da&&ha(da,pe)||(da=pe,pe=Ho(xl,"onSelect"),0<pe.length&&(d=new ro("onSelect","select",null,d,E),o.push({event:d,listeners:pe}),d.target=Mn)))}function fn(o,d){var E={};return E[o.toLowerCase()]=d.toLowerCase(),E["Webkit"+o]="webkit"+d,E["Moz"+o]="moz"+d,E}var Dn={animationend:fn("Animation","AnimationEnd"),animationiteration:fn("Animation","AnimationIteration"),animationstart:fn("Animation","AnimationStart"),transitionrun:fn("Transition","TransitionRun"),transitionstart:fn("Transition","TransitionStart"),transitioncancel:fn("Transition","TransitionCancel"),transitionend:fn("Transition","TransitionEnd")},bl={},Uc={};Ts&&(Uc=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function hn(o){if(bl[o])return bl[o];if(!Dn[o])return o;var d=Dn[o],E;for(E in d)if(d.hasOwnProperty(E)&&E in Uc)return bl[o]=d[E];return o}var Gc=hn("animationend"),jc=hn("animationiteration"),zc=hn("animationstart"),kp=hn("transitionrun"),Op=hn("transitionstart"),Fp=hn("transitioncancel"),Hc=hn("transitionend"),Kc=new Map,Al="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Al.push("scrollEnd");function os(o,d){Kc.set(o,d),Wi(d,[o])}var qc=new WeakMap;function Jr(o,d){if(typeof o=="object"&&o!==null){var E=qc.get(o);return E!==void 0?E:(d={value:o,source:d,stack:uc(d)},qc.set(o,d),d)}return{value:o,source:d,stack:uc(d)}}var es=[],In=0,Cl=0;function ao(){for(var o=In,d=Cl=In=0;d<o;){var E=es[d];es[d++]=null;var pe=es[d];es[d++]=null;var st=es[d];es[d++]=null;var ot=es[d];if(es[d++]=null,pe!==null&&st!==null){var Tt=pe.pending;Tt===null?st.next=st:(st.next=Tt.next,Tt.next=st),pe.pending=st}ot!==0&&Yc(E,st,ot)}}function oo(o,d,E,pe){es[In++]=o,es[In++]=d,es[In++]=E,es[In++]=pe,Cl|=pe,o.lanes|=pe,o=o.alternate,o!==null&&(o.lanes|=pe)}function Pl(o,d,E,pe){return oo(o,d,E,pe),lo(o)}function kn(o,d){return oo(o,null,null,d),lo(o)}function Yc(o,d,E){o.lanes|=E;var pe=o.alternate;pe!==null&&(pe.lanes|=E);for(var st=!1,ot=o.return;ot!==null;)ot.childLanes|=E,pe=ot.alternate,pe!==null&&(pe.childLanes|=E),ot.tag===22&&(o=ot.stateNode,o===null||o._visibility&1||(st=!0)),o=ot,ot=ot.return;return o.tag===3?(ot=o.stateNode,st&&d!==null&&(st=31-Ai(E),o=ot.hiddenUpdates,pe=o[st],pe===null?o[st]=[d]:pe.push(d),d.lane=E|536870912),ot):null}function lo(o){if(50<Ba)throw Ba=0,Iu=null,Error(r(185));for(var d=o.return;d!==null;)o=d,d=o.return;return o.tag===3?o.stateNode:null}var On={};function Np(o,d,E,pe){this.tag=o,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=pe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(o,d,E,pe){return new Np(o,d,E,pe)}function Rl(o){return o=o.prototype,!(!o||!o.isReactComponent)}function bs(o,d){var E=o.alternate;return E===null?(E=Gr(o.tag,d,o.key,o.mode),E.elementType=o.elementType,E.type=o.type,E.stateNode=o.stateNode,E.alternate=o,o.alternate=E):(E.pendingProps=d,E.type=o.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=o.flags&65011712,E.childLanes=o.childLanes,E.lanes=o.lanes,E.child=o.child,E.memoizedProps=o.memoizedProps,E.memoizedState=o.memoizedState,E.updateQueue=o.updateQueue,d=o.dependencies,E.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},E.sibling=o.sibling,E.index=o.index,E.ref=o.ref,E.refCleanup=o.refCleanup,E}function Wc(o,d){o.flags&=65011714;var E=o.alternate;return E===null?(o.childLanes=0,o.lanes=d,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=E.childLanes,o.lanes=E.lanes,o.child=E.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=E.memoizedProps,o.memoizedState=E.memoizedState,o.updateQueue=E.updateQueue,o.type=E.type,d=E.dependencies,o.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),o}function uo(o,d,E,pe,st,ot){var Tt=0;if(pe=o,typeof o=="function")Rl(o)&&(Tt=1);else if(typeof o=="string")Tt=$m(o,E,Ft.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case St:return o=Gr(31,E,d,st),o.elementType=St,o.lanes=ot,o;case de:return dn(E.children,st,ot,d);case me:Tt=8,st|=24;break;case Ye:return o=Gr(12,E,d,st|2),o.elementType=Ye,o.lanes=ot,o;case ft:return o=Gr(13,E,d,st),o.elementType=ft,o.lanes=ot,o;case mt:return o=Gr(19,E,d,st),o.elementType=mt,o.lanes=ot,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Le:case Be:Tt=10;break e;case tt:Tt=9;break e;case nt:Tt=11;break e;case ht:Tt=14;break e;case Et:Tt=16,pe=null;break e}Tt=29,E=Error(r(130,o===null?"null":typeof o,"")),pe=null}return d=Gr(Tt,E,d,st),d.elementType=o,d.type=pe,d.lanes=ot,d}function dn(o,d,E,pe){return o=Gr(7,o,pe,d),o.lanes=E,o}function wl(o,d,E){return o=Gr(6,o,null,d),o.lanes=E,o}function Ll(o,d,E){return d=Gr(4,o.children!==null?o.children:[],o.key,d),d.lanes=E,d.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},d}var Fn=[],Nn=0,co=null,fo=0,ts=[],is=0,pn=null,As=1,Cs="";function mn(o,d){Fn[Nn++]=fo,Fn[Nn++]=co,co=o,fo=d}function Xc(o,d,E){ts[is++]=As,ts[is++]=Cs,ts[is++]=pn,pn=o;var pe=As;o=Cs;var st=32-Ai(pe)-1;pe&=~(1<<st),E+=1;var ot=32-Ai(d)+st;if(30<ot){var Tt=st-st%5;ot=(pe&(1<<Tt)-1).toString(32),pe>>=Tt,st-=Tt,As=1<<32-Ai(d)+st|E<<st|pe,Cs=ot+o}else As=1<<ot|E<<st|pe,Cs=o}function Ml(o){o.return!==null&&(mn(o,1),Xc(o,1,0))}function Dl(o){for(;o===co;)co=Fn[--Nn],Fn[Nn]=null,fo=Fn[--Nn],Fn[Nn]=null;for(;o===pn;)pn=ts[--is],ts[is]=null,Cs=ts[--is],ts[is]=null,As=ts[--is],ts[is]=null}var Rr=null,rr=null,ki=!1,gn=null,hs=!1,Il=Error(r(519));function yn(o){var d=Error(r(418,""));throw ga(Jr(d,o)),Il}function Qc(o){var d=o.stateNode,E=o.type,pe=o.memoizedProps;switch(d[Wt]=o,d[ii]=pe,E){case"dialog":bi("cancel",d),bi("close",d);break;case"iframe":case"object":case"embed":bi("load",d);break;case"video":case"audio":for(E=0;E<$a.length;E++)bi($a[E],d);break;case"source":bi("error",d);break;case"img":case"image":case"link":bi("error",d),bi("load",d);break;case"details":bi("toggle",d);break;case"input":bi("invalid",d),hc(d,pe.value,pe.defaultValue,pe.checked,pe.defaultChecked,pe.type,pe.name,!0),Qa(d);break;case"select":bi("invalid",d);break;case"textarea":bi("invalid",d),pc(d,pe.value,pe.defaultValue,pe.children),Qa(d)}E=pe.children,typeof E!="string"&&typeof E!="number"&&typeof E!="bigint"||d.textContent===""+E||pe.suppressHydrationWarning===!0||yd(d.textContent,E)?(pe.popover!=null&&(bi("beforetoggle",d),bi("toggle",d)),pe.onScroll!=null&&bi("scroll",d),pe.onScrollEnd!=null&&bi("scrollend",d),pe.onClick!=null&&(d.onclick=Ko),d=!0):d=!1,d||yn(o)}function Zc(o){for(Rr=o.return;Rr;)switch(Rr.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Rr=Rr.return}}function pa(o){if(o!==Rr)return!1;if(!ki)return Zc(o),ki=!0,!1;var d=o.tag,E;if((E=d!==3&&d!==27)&&((E=d===5)&&(E=o.type,E=!(E!=="form"&&E!=="button")||Wu(o.type,o.memoizedProps)),E=!E),E&&rr&&yn(o),Zc(o),d===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,d=0;o;){if(o.nodeType===8)if(E=o.data,E==="/$"){if(d===0){rr=us(o.nextSibling);break e}d--}else E!=="$"&&E!=="$!"&&E!=="$?"||d++;o=o.nextSibling}rr=null}}else d===27?(d=rr,rn(o.type)?(o=Ju,Ju=null,rr=o):rr=d):rr=Rr?us(o.stateNode.nextSibling):null;return!0}function ma(){rr=Rr=null,ki=!1}function Jc(){var o=gn;return o!==null&&(Or===null?Or=o:Or.push.apply(Or,o),gn=null),o}function ga(o){gn===null?gn=[o]:gn.push(o)}var kl=At(null),vn=null,Ps=null;function Us(o,d,E){It(kl,d._currentValue),d._currentValue=E}function Rs(o){o._currentValue=kl.current,wt(kl)}function Ol(o,d,E){for(;o!==null;){var pe=o.alternate;if((o.childLanes&d)!==d?(o.childLanes|=d,pe!==null&&(pe.childLanes|=d)):pe!==null&&(pe.childLanes&d)!==d&&(pe.childLanes|=d),o===E)break;o=o.return}}function Fl(o,d,E,pe){var st=o.child;for(st!==null&&(st.return=o);st!==null;){var ot=st.dependencies;if(ot!==null){var Tt=st.child;ot=ot.firstContext;e:for(;ot!==null;){var Ct=ot;ot=st;for(var Mt=0;Mt<d.length;Mt++)if(Ct.context===d[Mt]){ot.lanes|=E,Ct=ot.alternate,Ct!==null&&(Ct.lanes|=E),Ol(ot.return,E,o),pe||(Tt=null);break e}ot=Ct.next}}else if(st.tag===18){if(Tt=st.return,Tt===null)throw Error(r(341));Tt.lanes|=E,ot=Tt.alternate,ot!==null&&(ot.lanes|=E),Ol(Tt,E,o),Tt=null}else Tt=st.child;if(Tt!==null)Tt.return=st;else for(Tt=st;Tt!==null;){if(Tt===o){Tt=null;break}if(st=Tt.sibling,st!==null){st.return=Tt.return,Tt=st;break}Tt=Tt.return}st=Tt}}function ya(o,d,E,pe){o=null;for(var st=d,ot=!1;st!==null;){if(!ot){if((st.flags&524288)!==0)ot=!0;else if((st.flags&262144)!==0)break}if(st.tag===10){var Tt=st.alternate;if(Tt===null)throw Error(r(387));if(Tt=Tt.memoizedProps,Tt!==null){var Ct=st.type;Ur(st.pendingProps.value,Tt.value)||(o!==null?o.push(Ct):o=[Ct])}}else if(st===Qt.current){if(Tt=st.alternate,Tt===null)throw Error(r(387));Tt.memoizedState.memoizedState!==st.memoizedState.memoizedState&&(o!==null?o.push(Ka):o=[Ka])}st=st.return}o!==null&&Fl(d,o,E,pe),d.flags|=262144}function ho(o){for(o=o.firstContext;o!==null;){if(!Ur(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function En(o){vn=o,Ps=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ar(o){return ef(vn,o)}function po(o,d){return vn===null&&En(o),ef(o,d)}function ef(o,d){var E=d._currentValue;if(d={context:d,memoizedValue:E,next:null},Ps===null){if(o===null)throw Error(r(308));Ps=d,o.dependencies={lanes:0,firstContext:d},o.flags|=524288}else Ps=Ps.next=d;return E}var Bp=typeof AbortController<"u"?AbortController:function(){var o=[],d=this.signal={aborted:!1,addEventListener:function(E,pe){o.push(pe)}};this.abort=function(){d.aborted=!0,o.forEach(function(E){return E()})}},Vp=i.unstable_scheduleCallback,$p=i.unstable_NormalPriority,mr={$$typeof:Be,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nl(){return{controller:new Bp,data:new Map,refCount:0}}function va(o){o.refCount--,o.refCount===0&&Vp($p,function(){o.controller.abort()})}var Ea=null,Bl=0,Bn=0,Vn=null;function Up(o,d){if(Ea===null){var E=Ea=[];Bl=0,Bn=$u(),Vn={status:"pending",value:void 0,then:function(pe){E.push(pe)}}}return Bl++,d.then(tf,tf),d}function tf(){if(--Bl===0&&Ea!==null){Vn!==null&&(Vn.status="fulfilled");var o=Ea;Ea=null,Bn=0,Vn=null;for(var d=0;d<o.length;d++)(0,o[d])()}}function Gp(o,d){var E=[],pe={status:"pending",value:null,reason:null,then:function(st){E.push(st)}};return o.then(function(){pe.status="fulfilled",pe.value=d;for(var st=0;st<E.length;st++)(0,E[st])(d)},function(st){for(pe.status="rejected",pe.reason=st,st=0;st<E.length;st++)(0,E[st])(void 0)}),pe}var rf=vt.S;vt.S=function(o,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&Up(o,d),rf!==null&&rf(o,d)};var _n=At(null);function Vl(){var o=_n.current;return o!==null?o:Yi.pooledCache}function mo(o,d){d===null?It(_n,_n.current):It(_n,d.pool)}function sf(){var o=Vl();return o===null?null:{parent:mr._currentValue,pool:o}}var _a=Error(r(460)),nf=Error(r(474)),go=Error(r(542)),$l={then:function(){}};function af(o){return o=o.status,o==="fulfilled"||o==="rejected"}function yo(){}function of(o,d,E){switch(E=o[E],E===void 0?o.push(d):E!==d&&(d.then(yo,yo),d=E),d.status){case"fulfilled":return d.value;case"rejected":throw o=d.reason,uf(o),o;default:if(typeof d.status=="string")d.then(yo,yo);else{if(o=Yi,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=d,o.status="pending",o.then(function(pe){if(d.status==="pending"){var st=d;st.status="fulfilled",st.value=pe}},function(pe){if(d.status==="pending"){var st=d;st.status="rejected",st.reason=pe}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw o=d.reason,uf(o),o}throw Sa=d,_a}}var Sa=null;function lf(){if(Sa===null)throw Error(r(459));var o=Sa;return Sa=null,o}function uf(o){if(o===_a||o===go)throw Error(r(483))}var Gs=!1;function Ul(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gl(o,d){o=o.updateQueue,d.updateQueue===o&&(d.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function js(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function zs(o,d,E){var pe=o.updateQueue;if(pe===null)return null;if(pe=pe.shared,(Ni&2)!==0){var st=pe.pending;return st===null?d.next=d:(d.next=st.next,st.next=d),pe.pending=d,d=lo(o),Yc(o,null,E),d}return oo(o,pe,d,E),lo(o)}function xa(o,d,E){if(d=d.updateQueue,d!==null&&(d=d.shared,(E&4194048)!==0)){var pe=d.lanes;pe&=o.pendingLanes,E|=pe,d.lanes=E,Es(o,E)}}function jl(o,d){var E=o.updateQueue,pe=o.alternate;if(pe!==null&&(pe=pe.updateQueue,E===pe)){var st=null,ot=null;if(E=E.firstBaseUpdate,E!==null){do{var Tt={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};ot===null?st=ot=Tt:ot=ot.next=Tt,E=E.next}while(E!==null);ot===null?st=ot=d:ot=ot.next=d}else st=ot=d;E={baseState:pe.baseState,firstBaseUpdate:st,lastBaseUpdate:ot,shared:pe.shared,callbacks:pe.callbacks},o.updateQueue=E;return}o=E.lastBaseUpdate,o===null?E.firstBaseUpdate=d:o.next=d,E.lastBaseUpdate=d}var zl=!1;function Ta(){if(zl){var o=Vn;if(o!==null)throw o}}function ba(o,d,E,pe){zl=!1;var st=o.updateQueue;Gs=!1;var ot=st.firstBaseUpdate,Tt=st.lastBaseUpdate,Ct=st.shared.pending;if(Ct!==null){st.shared.pending=null;var Mt=Ct,$t=Mt.next;Mt.next=null,Tt===null?ot=$t:Tt.next=$t,Tt=Mt;var Ht=o.alternate;Ht!==null&&(Ht=Ht.updateQueue,Ct=Ht.lastBaseUpdate,Ct!==Tt&&(Ct===null?Ht.firstBaseUpdate=$t:Ct.next=$t,Ht.lastBaseUpdate=Mt))}if(ot!==null){var qt=st.baseState;Tt=0,Ht=$t=Mt=null,Ct=ot;do{var Gt=Ct.lane&-536870913,jt=Gt!==Ct.lane;if(jt?(Pi&Gt)===Gt:(pe&Gt)===Gt){Gt!==0&&Gt===Bn&&(zl=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:Ct.tag,payload:Ct.payload,callback:null,next:null});e:{var ci=o,oi=Ct;Gt=d;var Gi=E;switch(oi.tag){case 1:if(ci=oi.payload,typeof ci=="function"){qt=ci.call(Gi,qt,Gt);break e}qt=ci;break e;case 3:ci.flags=ci.flags&-65537|128;case 0:if(ci=oi.payload,Gt=typeof ci=="function"?ci.call(Gi,qt,Gt):ci,Gt==null)break e;qt=p({},qt,Gt);break e;case 2:Gs=!0}}Gt=Ct.callback,Gt!==null&&(o.flags|=64,jt&&(o.flags|=8192),jt=st.callbacks,jt===null?st.callbacks=[Gt]:jt.push(Gt))}else jt={lane:Gt,tag:Ct.tag,payload:Ct.payload,callback:Ct.callback,next:null},Ht===null?($t=Ht=jt,Mt=qt):Ht=Ht.next=jt,Tt|=Gt;if(Ct=Ct.next,Ct===null){if(Ct=st.shared.pending,Ct===null)break;jt=Ct,Ct=jt.next,jt.next=null,st.lastBaseUpdate=jt,st.shared.pending=null}}while(!0);Ht===null&&(Mt=qt),st.baseState=Mt,st.firstBaseUpdate=$t,st.lastBaseUpdate=Ht,ot===null&&(st.shared.lanes=0),Zs|=Tt,o.lanes=Tt,o.memoizedState=qt}}function cf(o,d){if(typeof o!="function")throw Error(r(191,o));o.call(d)}function ff(o,d){var E=o.callbacks;if(E!==null)for(o.callbacks=null,o=0;o<E.length;o++)cf(E[o],d)}var $n=At(null),vo=At(0);function hf(o,d){o=Os,It(vo,o),It($n,d),Os=o|d.baseLanes}function Hl(){It(vo,Os),It($n,$n.current)}function Kl(){Os=vo.current,wt($n),wt(vo)}var Hs=0,Ei=null,$i=null,cr=null,Eo=!1,Un=!1,Sn=!1,_o=0,Aa=0,Gn=null,jp=0;function ar(){throw Error(r(321))}function ql(o,d){if(d===null)return!1;for(var E=0;E<d.length&&E<o.length;E++)if(!Ur(o[E],d[E]))return!1;return!0}function Yl(o,d,E,pe,st,ot){return Hs=ot,Ei=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,vt.H=o===null||o.memoizedState===null?Wf:Xf,Sn=!1,ot=E(pe,st),Sn=!1,Un&&(ot=pf(d,E,pe,st)),df(o),ot}function df(o){vt.H=Co;var d=$i!==null&&$i.next!==null;if(Hs=0,cr=$i=Ei=null,Eo=!1,Aa=0,Gn=null,d)throw Error(r(300));o===null||yr||(o=o.dependencies,o!==null&&ho(o)&&(yr=!0))}function pf(o,d,E,pe){Ei=o;var st=0;do{if(Un&&(Gn=null),Aa=0,Un=!1,25<=st)throw Error(r(301));if(st+=1,cr=$i=null,o.updateQueue!=null){var ot=o.updateQueue;ot.lastEffect=null,ot.events=null,ot.stores=null,ot.memoCache!=null&&(ot.memoCache.index=0)}vt.H=Xp,ot=d(E,pe)}while(Un);return ot}function zp(){var o=vt.H,d=o.useState()[0];return d=typeof d.then=="function"?Ca(d):d,o=o.useState()[0],($i!==null?$i.memoizedState:null)!==o&&(Ei.flags|=1024),d}function Wl(){var o=_o!==0;return _o=0,o}function Xl(o,d,E){d.updateQueue=o.updateQueue,d.flags&=-2053,o.lanes&=~E}function Ql(o){if(Eo){for(o=o.memoizedState;o!==null;){var d=o.queue;d!==null&&(d.pending=null),o=o.next}Eo=!1}Hs=0,cr=$i=Ei=null,Un=!1,Aa=_o=0,Gn=null}function Ir(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Ei.memoizedState=cr=o:cr=cr.next=o,cr}function hr(){if($i===null){var o=Ei.alternate;o=o!==null?o.memoizedState:null}else o=$i.next;var d=cr===null?Ei.memoizedState:cr.next;if(d!==null)cr=d,$i=o;else{if(o===null)throw Ei.alternate===null?Error(r(467)):Error(r(310));$i=o,o={memoizedState:$i.memoizedState,baseState:$i.baseState,baseQueue:$i.baseQueue,queue:$i.queue,next:null},cr===null?Ei.memoizedState=cr=o:cr=cr.next=o}return cr}function Zl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ca(o){var d=Aa;return Aa+=1,Gn===null&&(Gn=[]),o=of(Gn,o,d),d=Ei,(cr===null?d.memoizedState:cr.next)===null&&(d=d.alternate,vt.H=d===null||d.memoizedState===null?Wf:Xf),o}function So(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ca(o);if(o.$$typeof===Be)return Ar(o)}throw Error(r(438,String(o)))}function Jl(o){var d=null,E=Ei.updateQueue;if(E!==null&&(d=E.memoCache),d==null){var pe=Ei.alternate;pe!==null&&(pe=pe.updateQueue,pe!==null&&(pe=pe.memoCache,pe!=null&&(d={data:pe.data.map(function(st){return st.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),E===null&&(E=Zl(),Ei.updateQueue=E),E.memoCache=d,E=d.data[d.index],E===void 0)for(E=d.data[d.index]=Array(o),pe=0;pe<o;pe++)E[pe]=bt;return d.index++,E}function ws(o,d){return typeof d=="function"?d(o):d}function xo(o){var d=hr();return eu(d,$i,o)}function eu(o,d,E){var pe=o.queue;if(pe===null)throw Error(r(311));pe.lastRenderedReducer=E;var st=o.baseQueue,ot=pe.pending;if(ot!==null){if(st!==null){var Tt=st.next;st.next=ot.next,ot.next=Tt}d.baseQueue=st=ot,pe.pending=null}if(ot=o.baseState,st===null)o.memoizedState=ot;else{d=st.next;var Ct=Tt=null,Mt=null,$t=d,Ht=!1;do{var qt=$t.lane&-536870913;if(qt!==$t.lane?(Pi&qt)===qt:(Hs&qt)===qt){var Gt=$t.revertLane;if(Gt===0)Mt!==null&&(Mt=Mt.next={lane:0,revertLane:0,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),qt===Bn&&(Ht=!0);else if((Hs&Gt)===Gt){$t=$t.next,Gt===Bn&&(Ht=!0);continue}else qt={lane:0,revertLane:$t.revertLane,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},Mt===null?(Ct=Mt=qt,Tt=ot):Mt=Mt.next=qt,Ei.lanes|=Gt,Zs|=Gt;qt=$t.action,Sn&&E(ot,qt),ot=$t.hasEagerState?$t.eagerState:E(ot,qt)}else Gt={lane:qt,revertLane:$t.revertLane,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},Mt===null?(Ct=Mt=Gt,Tt=ot):Mt=Mt.next=Gt,Ei.lanes|=qt,Zs|=qt;$t=$t.next}while($t!==null&&$t!==d);if(Mt===null?Tt=ot:Mt.next=Ct,!Ur(ot,o.memoizedState)&&(yr=!0,Ht&&(E=Vn,E!==null)))throw E;o.memoizedState=ot,o.baseState=Tt,o.baseQueue=Mt,pe.lastRenderedState=ot}return st===null&&(pe.lanes=0),[o.memoizedState,pe.dispatch]}function tu(o){var d=hr(),E=d.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=o;var pe=E.dispatch,st=E.pending,ot=d.memoizedState;if(st!==null){E.pending=null;var Tt=st=st.next;do ot=o(ot,Tt.action),Tt=Tt.next;while(Tt!==st);Ur(ot,d.memoizedState)||(yr=!0),d.memoizedState=ot,d.baseQueue===null&&(d.baseState=ot),E.lastRenderedState=ot}return[ot,pe]}function mf(o,d,E){var pe=Ei,st=hr(),ot=ki;if(ot){if(E===void 0)throw Error(r(407));E=E()}else E=d();var Tt=!Ur(($i||st).memoizedState,E);Tt&&(st.memoizedState=E,yr=!0),st=st.queue;var Ct=vf.bind(null,pe,st,o);if(Pa(2048,8,Ct,[o]),st.getSnapshot!==d||Tt||cr!==null&&cr.memoizedState.tag&1){if(pe.flags|=2048,jn(9,To(),yf.bind(null,pe,st,E,d),null),Yi===null)throw Error(r(349));ot||(Hs&124)!==0||gf(pe,d,E)}return E}function gf(o,d,E){o.flags|=16384,o={getSnapshot:d,value:E},d=Ei.updateQueue,d===null?(d=Zl(),Ei.updateQueue=d,d.stores=[o]):(E=d.stores,E===null?d.stores=[o]:E.push(o))}function yf(o,d,E,pe){d.value=E,d.getSnapshot=pe,Ef(d)&&_f(o)}function vf(o,d,E){return E(function(){Ef(d)&&_f(o)})}function Ef(o){var d=o.getSnapshot;o=o.value;try{var E=d();return!Ur(o,E)}catch{return!0}}function _f(o){var d=kn(o,2);d!==null&&qr(d,o,2)}function iu(o){var d=Ir();if(typeof o=="function"){var E=o;if(o=E(),Sn){zi(!0);try{E()}finally{zi(!1)}}}return d.memoizedState=d.baseState=o,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:o},d}function Sf(o,d,E,pe){return o.baseState=E,eu(o,$i,typeof pe=="function"?pe:ws)}function Hp(o,d,E,pe,st){if(Ao(o))throw Error(r(485));if(o=d.action,o!==null){var ot={payload:st,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Tt){ot.listeners.push(Tt)}};vt.T!==null?E(!0):ot.isTransition=!1,pe(ot),E=d.pending,E===null?(ot.next=d.pending=ot,xf(d,ot)):(ot.next=E.next,d.pending=E.next=ot)}}function xf(o,d){var E=d.action,pe=d.payload,st=o.state;if(d.isTransition){var ot=vt.T,Tt={};vt.T=Tt;try{var Ct=E(st,pe),Mt=vt.S;Mt!==null&&Mt(Tt,Ct),Tf(o,d,Ct)}catch($t){ru(o,d,$t)}finally{vt.T=ot}}else try{ot=E(st,pe),Tf(o,d,ot)}catch($t){ru(o,d,$t)}}function Tf(o,d,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(pe){bf(o,d,pe)},function(pe){return ru(o,d,pe)}):bf(o,d,E)}function bf(o,d,E){d.status="fulfilled",d.value=E,Af(d),o.state=E,d=o.pending,d!==null&&(E=d.next,E===d?o.pending=null:(E=E.next,d.next=E,xf(o,E)))}function ru(o,d,E){var pe=o.pending;if(o.pending=null,pe!==null){pe=pe.next;do d.status="rejected",d.reason=E,Af(d),d=d.next;while(d!==pe)}o.action=null}function Af(o){o=o.listeners;for(var d=0;d<o.length;d++)(0,o[d])()}function Cf(o,d){return d}function Pf(o,d){if(ki){var E=Yi.formState;if(E!==null){e:{var pe=Ei;if(ki){if(rr){t:{for(var st=rr,ot=hs;st.nodeType!==8;){if(!ot){st=null;break t}if(st=us(st.nextSibling),st===null){st=null;break t}}ot=st.data,st=ot==="F!"||ot==="F"?st:null}if(st){rr=us(st.nextSibling),pe=st.data==="F!";break e}}yn(pe)}pe=!1}pe&&(d=E[0])}}return E=Ir(),E.memoizedState=E.baseState=d,pe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:d},E.queue=pe,E=Kf.bind(null,Ei,pe),pe.dispatch=E,pe=iu(!1),ot=lu.bind(null,Ei,!1,pe.queue),pe=Ir(),st={state:d,dispatch:null,action:o,pending:null},pe.queue=st,E=Hp.bind(null,Ei,st,ot,E),st.dispatch=E,pe.memoizedState=o,[d,E,!1]}function Rf(o){var d=hr();return wf(d,$i,o)}function wf(o,d,E){if(d=eu(o,d,Cf)[0],o=xo(ws)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var pe=Ca(d)}catch(Tt){throw Tt===_a?go:Tt}else pe=d;d=hr();var st=d.queue,ot=st.dispatch;return E!==d.memoizedState&&(Ei.flags|=2048,jn(9,To(),Kp.bind(null,st,E),null)),[pe,ot,o]}function Kp(o,d){o.action=d}function Lf(o){var d=hr(),E=$i;if(E!==null)return wf(d,E,o);hr(),d=d.memoizedState,E=hr();var pe=E.queue.dispatch;return E.memoizedState=o,[d,pe,!1]}function jn(o,d,E,pe){return o={tag:o,create:E,deps:pe,inst:d,next:null},d=Ei.updateQueue,d===null&&(d=Zl(),Ei.updateQueue=d),E=d.lastEffect,E===null?d.lastEffect=o.next=o:(pe=E.next,E.next=o,o.next=pe,d.lastEffect=o),o}function To(){return{destroy:void 0,resource:void 0}}function Mf(){return hr().memoizedState}function bo(o,d,E,pe){var st=Ir();pe=pe===void 0?null:pe,Ei.flags|=o,st.memoizedState=jn(1|d,To(),E,pe)}function Pa(o,d,E,pe){var st=hr();pe=pe===void 0?null:pe;var ot=st.memoizedState.inst;$i!==null&&pe!==null&&ql(pe,$i.memoizedState.deps)?st.memoizedState=jn(d,ot,E,pe):(Ei.flags|=o,st.memoizedState=jn(1|d,ot,E,pe))}function Df(o,d){bo(8390656,8,o,d)}function If(o,d){Pa(2048,8,o,d)}function kf(o,d){return Pa(4,2,o,d)}function Of(o,d){return Pa(4,4,o,d)}function Ff(o,d){if(typeof d=="function"){o=o();var E=d(o);return function(){typeof E=="function"?E():d(null)}}if(d!=null)return o=o(),d.current=o,function(){d.current=null}}function Nf(o,d,E){E=E!=null?E.concat([o]):null,Pa(4,4,Ff.bind(null,d,o),E)}function su(){}function Bf(o,d){var E=hr();d=d===void 0?null:d;var pe=E.memoizedState;return d!==null&&ql(d,pe[1])?pe[0]:(E.memoizedState=[o,d],o)}function Vf(o,d){var E=hr();d=d===void 0?null:d;var pe=E.memoizedState;if(d!==null&&ql(d,pe[1]))return pe[0];if(pe=o(),Sn){zi(!0);try{o()}finally{zi(!1)}}return E.memoizedState=[pe,d],pe}function nu(o,d,E){return E===void 0||(Hs&1073741824)!==0?o.memoizedState=d:(o.memoizedState=E,o=jh(),Ei.lanes|=o,Zs|=o,E)}function $f(o,d,E,pe){return Ur(E,d)?E:$n.current!==null?(o=nu(o,E,pe),Ur(o,d)||(yr=!0),o):(Hs&42)===0?(yr=!0,o.memoizedState=E):(o=jh(),Ei.lanes|=o,Zs|=o,d)}function Uf(o,d,E,pe,st){var ot=xt.p;xt.p=ot!==0&&8>ot?ot:8;var Tt=vt.T,Ct={};vt.T=Ct,lu(o,!1,d,E);try{var Mt=st(),$t=vt.S;if($t!==null&&$t(Ct,Mt),Mt!==null&&typeof Mt=="object"&&typeof Mt.then=="function"){var Ht=Gp(Mt,pe);Ra(o,d,Ht,Kr(o))}else Ra(o,d,pe,Kr(o))}catch(qt){Ra(o,d,{then:function(){},status:"rejected",reason:qt},Kr())}finally{xt.p=ot,vt.T=Tt}}function qp(){}function au(o,d,E,pe){if(o.tag!==5)throw Error(r(476));var st=Gf(o).queue;Uf(o,st,d,gt,E===null?qp:function(){return jf(o),E(pe)})}function Gf(o){var d=o.memoizedState;if(d!==null)return d;d={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:gt},next:null};var E={};return d.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:E},next:null},o.memoizedState=d,o=o.alternate,o!==null&&(o.memoizedState=d),d}function jf(o){var d=Gf(o).next.queue;Ra(o,d,{},Kr())}function ou(){return Ar(Ka)}function zf(){return hr().memoizedState}function Hf(){return hr().memoizedState}function Yp(o){for(var d=o.return;d!==null;){switch(d.tag){case 24:case 3:var E=Kr();o=js(E);var pe=zs(d,o,E);pe!==null&&(qr(pe,d,E),xa(pe,d,E)),d={cache:Nl()},o.payload=d;return}d=d.return}}function Wp(o,d,E){var pe=Kr();E={lane:pe,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},Ao(o)?qf(d,E):(E=Pl(o,d,E,pe),E!==null&&(qr(E,o,pe),Yf(E,d,pe)))}function Kf(o,d,E){var pe=Kr();Ra(o,d,E,pe)}function Ra(o,d,E,pe){var st={lane:pe,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(Ao(o))qf(d,st);else{var ot=o.alternate;if(o.lanes===0&&(ot===null||ot.lanes===0)&&(ot=d.lastRenderedReducer,ot!==null))try{var Tt=d.lastRenderedState,Ct=ot(Tt,E);if(st.hasEagerState=!0,st.eagerState=Ct,Ur(Ct,Tt))return oo(o,d,st,0),Yi===null&&ao(),!1}catch{}finally{}if(E=Pl(o,d,st,pe),E!==null)return qr(E,o,pe),Yf(E,d,pe),!0}return!1}function lu(o,d,E,pe){if(pe={lane:2,revertLane:$u(),action:pe,hasEagerState:!1,eagerState:null,next:null},Ao(o)){if(d)throw Error(r(479))}else d=Pl(o,E,pe,2),d!==null&&qr(d,o,2)}function Ao(o){var d=o.alternate;return o===Ei||d!==null&&d===Ei}function qf(o,d){Un=Eo=!0;var E=o.pending;E===null?d.next=d:(d.next=E.next,E.next=d),o.pending=d}function Yf(o,d,E){if((E&4194048)!==0){var pe=d.lanes;pe&=o.pendingLanes,E|=pe,d.lanes=E,Es(o,E)}}var Co={readContext:Ar,use:So,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useLayoutEffect:ar,useInsertionEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useSyncExternalStore:ar,useId:ar,useHostTransitionStatus:ar,useFormState:ar,useActionState:ar,useOptimistic:ar,useMemoCache:ar,useCacheRefresh:ar},Wf={readContext:Ar,use:So,useCallback:function(o,d){return Ir().memoizedState=[o,d===void 0?null:d],o},useContext:Ar,useEffect:Df,useImperativeHandle:function(o,d,E){E=E!=null?E.concat([o]):null,bo(4194308,4,Ff.bind(null,d,o),E)},useLayoutEffect:function(o,d){return bo(4194308,4,o,d)},useInsertionEffect:function(o,d){bo(4,2,o,d)},useMemo:function(o,d){var E=Ir();d=d===void 0?null:d;var pe=o();if(Sn){zi(!0);try{o()}finally{zi(!1)}}return E.memoizedState=[pe,d],pe},useReducer:function(o,d,E){var pe=Ir();if(E!==void 0){var st=E(d);if(Sn){zi(!0);try{E(d)}finally{zi(!1)}}}else st=d;return pe.memoizedState=pe.baseState=st,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:st},pe.queue=o,o=o.dispatch=Wp.bind(null,Ei,o),[pe.memoizedState,o]},useRef:function(o){var d=Ir();return o={current:o},d.memoizedState=o},useState:function(o){o=iu(o);var d=o.queue,E=Kf.bind(null,Ei,d);return d.dispatch=E,[o.memoizedState,E]},useDebugValue:su,useDeferredValue:function(o,d){var E=Ir();return nu(E,o,d)},useTransition:function(){var o=iu(!1);return o=Uf.bind(null,Ei,o.queue,!0,!1),Ir().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,d,E){var pe=Ei,st=Ir();if(ki){if(E===void 0)throw Error(r(407));E=E()}else{if(E=d(),Yi===null)throw Error(r(349));(Pi&124)!==0||gf(pe,d,E)}st.memoizedState=E;var ot={value:E,getSnapshot:d};return st.queue=ot,Df(vf.bind(null,pe,ot,o),[o]),pe.flags|=2048,jn(9,To(),yf.bind(null,pe,ot,E,d),null),E},useId:function(){var o=Ir(),d=Yi.identifierPrefix;if(ki){var E=Cs,pe=As;E=(pe&~(1<<32-Ai(pe)-1)).toString(32)+E,d="«"+d+"R"+E,E=_o++,0<E&&(d+="H"+E.toString(32)),d+="»"}else E=jp++,d="«"+d+"r"+E.toString(32)+"»";return o.memoizedState=d},useHostTransitionStatus:ou,useFormState:Pf,useActionState:Pf,useOptimistic:function(o){var d=Ir();d.memoizedState=d.baseState=o;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=E,d=lu.bind(null,Ei,!0,E),E.dispatch=d,[o,d]},useMemoCache:Jl,useCacheRefresh:function(){return Ir().memoizedState=Yp.bind(null,Ei)}},Xf={readContext:Ar,use:So,useCallback:Bf,useContext:Ar,useEffect:If,useImperativeHandle:Nf,useInsertionEffect:kf,useLayoutEffect:Of,useMemo:Vf,useReducer:xo,useRef:Mf,useState:function(){return xo(ws)},useDebugValue:su,useDeferredValue:function(o,d){var E=hr();return $f(E,$i.memoizedState,o,d)},useTransition:function(){var o=xo(ws)[0],d=hr().memoizedState;return[typeof o=="boolean"?o:Ca(o),d]},useSyncExternalStore:mf,useId:zf,useHostTransitionStatus:ou,useFormState:Rf,useActionState:Rf,useOptimistic:function(o,d){var E=hr();return Sf(E,$i,o,d)},useMemoCache:Jl,useCacheRefresh:Hf},Xp={readContext:Ar,use:So,useCallback:Bf,useContext:Ar,useEffect:If,useImperativeHandle:Nf,useInsertionEffect:kf,useLayoutEffect:Of,useMemo:Vf,useReducer:tu,useRef:Mf,useState:function(){return tu(ws)},useDebugValue:su,useDeferredValue:function(o,d){var E=hr();return $i===null?nu(E,o,d):$f(E,$i.memoizedState,o,d)},useTransition:function(){var o=tu(ws)[0],d=hr().memoizedState;return[typeof o=="boolean"?o:Ca(o),d]},useSyncExternalStore:mf,useId:zf,useHostTransitionStatus:ou,useFormState:Lf,useActionState:Lf,useOptimistic:function(o,d){var E=hr();return $i!==null?Sf(E,$i,o,d):(E.baseState=o,[o,E.queue.dispatch])},useMemoCache:Jl,useCacheRefresh:Hf},zn=null,wa=0;function Po(o){var d=wa;return wa+=1,zn===null&&(zn=[]),of(zn,o,d)}function La(o,d){d=d.props.ref,o.ref=d!==void 0?d:null}function Ro(o,d){throw d.$$typeof===b?Error(r(525)):(o=Object.prototype.toString.call(d),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":o)))}function Qf(o){var d=o._init;return d(o._payload)}function Zf(o){function d(Nt,Ot){if(o){var Vt=Nt.deletions;Vt===null?(Nt.deletions=[Ot],Nt.flags|=16):Vt.push(Ot)}}function E(Nt,Ot){if(!o)return null;for(;Ot!==null;)d(Nt,Ot),Ot=Ot.sibling;return null}function pe(Nt){for(var Ot=new Map;Nt!==null;)Nt.key!==null?Ot.set(Nt.key,Nt):Ot.set(Nt.index,Nt),Nt=Nt.sibling;return Ot}function st(Nt,Ot){return Nt=bs(Nt,Ot),Nt.index=0,Nt.sibling=null,Nt}function ot(Nt,Ot,Vt){return Nt.index=Vt,o?(Vt=Nt.alternate,Vt!==null?(Vt=Vt.index,Vt<Ot?(Nt.flags|=67108866,Ot):Vt):(Nt.flags|=67108866,Ot)):(Nt.flags|=1048576,Ot)}function Tt(Nt){return o&&Nt.alternate===null&&(Nt.flags|=67108866),Nt}function Ct(Nt,Ot,Vt,Kt){return Ot===null||Ot.tag!==6?(Ot=wl(Vt,Nt.mode,Kt),Ot.return=Nt,Ot):(Ot=st(Ot,Vt),Ot.return=Nt,Ot)}function Mt(Nt,Ot,Vt,Kt){var ei=Vt.type;return ei===de?Ht(Nt,Ot,Vt.props.children,Kt,Vt.key):Ot!==null&&(Ot.elementType===ei||typeof ei=="object"&&ei!==null&&ei.$$typeof===Et&&Qf(ei)===Ot.type)?(Ot=st(Ot,Vt.props),La(Ot,Vt),Ot.return=Nt,Ot):(Ot=uo(Vt.type,Vt.key,Vt.props,null,Nt.mode,Kt),La(Ot,Vt),Ot.return=Nt,Ot)}function $t(Nt,Ot,Vt,Kt){return Ot===null||Ot.tag!==4||Ot.stateNode.containerInfo!==Vt.containerInfo||Ot.stateNode.implementation!==Vt.implementation?(Ot=Ll(Vt,Nt.mode,Kt),Ot.return=Nt,Ot):(Ot=st(Ot,Vt.children||[]),Ot.return=Nt,Ot)}function Ht(Nt,Ot,Vt,Kt,ei){return Ot===null||Ot.tag!==7?(Ot=dn(Vt,Nt.mode,Kt,ei),Ot.return=Nt,Ot):(Ot=st(Ot,Vt),Ot.return=Nt,Ot)}function qt(Nt,Ot,Vt){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Ot=wl(""+Ot,Nt.mode,Vt),Ot.return=Nt,Ot;if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case P:return Vt=uo(Ot.type,Ot.key,Ot.props,null,Nt.mode,Vt),La(Vt,Ot),Vt.return=Nt,Vt;case N:return Ot=Ll(Ot,Nt.mode,Vt),Ot.return=Nt,Ot;case Et:var Kt=Ot._init;return Ot=Kt(Ot._payload),qt(Nt,Ot,Vt)}if(Lt(Ot)||Rt(Ot))return Ot=dn(Ot,Nt.mode,Vt,null),Ot.return=Nt,Ot;if(typeof Ot.then=="function")return qt(Nt,Po(Ot),Vt);if(Ot.$$typeof===Be)return qt(Nt,po(Nt,Ot),Vt);Ro(Nt,Ot)}return null}function Gt(Nt,Ot,Vt,Kt){var ei=Ot!==null?Ot.key:null;if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return ei!==null?null:Ct(Nt,Ot,""+Vt,Kt);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case P:return Vt.key===ei?Mt(Nt,Ot,Vt,Kt):null;case N:return Vt.key===ei?$t(Nt,Ot,Vt,Kt):null;case Et:return ei=Vt._init,Vt=ei(Vt._payload),Gt(Nt,Ot,Vt,Kt)}if(Lt(Vt)||Rt(Vt))return ei!==null?null:Ht(Nt,Ot,Vt,Kt,null);if(typeof Vt.then=="function")return Gt(Nt,Ot,Po(Vt),Kt);if(Vt.$$typeof===Be)return Gt(Nt,Ot,po(Nt,Vt),Kt);Ro(Nt,Vt)}return null}function jt(Nt,Ot,Vt,Kt,ei){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return Nt=Nt.get(Vt)||null,Ct(Ot,Nt,""+Kt,ei);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case P:return Nt=Nt.get(Kt.key===null?Vt:Kt.key)||null,Mt(Ot,Nt,Kt,ei);case N:return Nt=Nt.get(Kt.key===null?Vt:Kt.key)||null,$t(Ot,Nt,Kt,ei);case Et:var Si=Kt._init;return Kt=Si(Kt._payload),jt(Nt,Ot,Vt,Kt,ei)}if(Lt(Kt)||Rt(Kt))return Nt=Nt.get(Vt)||null,Ht(Ot,Nt,Kt,ei,null);if(typeof Kt.then=="function")return jt(Nt,Ot,Vt,Po(Kt),ei);if(Kt.$$typeof===Be)return jt(Nt,Ot,Vt,po(Ot,Kt),ei);Ro(Ot,Kt)}return null}function ci(Nt,Ot,Vt,Kt){for(var ei=null,Si=null,si=Ot,li=Ot=0,Er=null;si!==null&&li<Vt.length;li++){si.index>li?(Er=si,si=null):Er=si.sibling;var Di=Gt(Nt,si,Vt[li],Kt);if(Di===null){si===null&&(si=Er);break}o&&si&&Di.alternate===null&&d(Nt,si),Ot=ot(Di,Ot,li),Si===null?ei=Di:Si.sibling=Di,Si=Di,si=Er}if(li===Vt.length)return E(Nt,si),ki&&mn(Nt,li),ei;if(si===null){for(;li<Vt.length;li++)si=qt(Nt,Vt[li],Kt),si!==null&&(Ot=ot(si,Ot,li),Si===null?ei=si:Si.sibling=si,Si=si);return ki&&mn(Nt,li),ei}for(si=pe(si);li<Vt.length;li++)Er=jt(si,Nt,li,Vt[li],Kt),Er!==null&&(o&&Er.alternate!==null&&si.delete(Er.key===null?li:Er.key),Ot=ot(Er,Ot,li),Si===null?ei=Er:Si.sibling=Er,Si=Er);return o&&si.forEach(function(ln){return d(Nt,ln)}),ki&&mn(Nt,li),ei}function oi(Nt,Ot,Vt,Kt){if(Vt==null)throw Error(r(151));for(var ei=null,Si=null,si=Ot,li=Ot=0,Er=null,Di=Vt.next();si!==null&&!Di.done;li++,Di=Vt.next()){si.index>li?(Er=si,si=null):Er=si.sibling;var ln=Gt(Nt,si,Di.value,Kt);if(ln===null){si===null&&(si=Er);break}o&&si&&ln.alternate===null&&d(Nt,si),Ot=ot(ln,Ot,li),Si===null?ei=ln:Si.sibling=ln,Si=ln,si=Er}if(Di.done)return E(Nt,si),ki&&mn(Nt,li),ei;if(si===null){for(;!Di.done;li++,Di=Vt.next())Di=qt(Nt,Di.value,Kt),Di!==null&&(Ot=ot(Di,Ot,li),Si===null?ei=Di:Si.sibling=Di,Si=Di);return ki&&mn(Nt,li),ei}for(si=pe(si);!Di.done;li++,Di=Vt.next())Di=jt(si,Nt,li,Di.value,Kt),Di!==null&&(o&&Di.alternate!==null&&si.delete(Di.key===null?li:Di.key),Ot=ot(Di,Ot,li),Si===null?ei=Di:Si.sibling=Di,Si=Di);return o&&si.forEach(function(Zm){return d(Nt,Zm)}),ki&&mn(Nt,li),ei}function Gi(Nt,Ot,Vt,Kt){if(typeof Vt=="object"&&Vt!==null&&Vt.type===de&&Vt.key===null&&(Vt=Vt.props.children),typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case P:e:{for(var ei=Vt.key;Ot!==null;){if(Ot.key===ei){if(ei=Vt.type,ei===de){if(Ot.tag===7){E(Nt,Ot.sibling),Kt=st(Ot,Vt.props.children),Kt.return=Nt,Nt=Kt;break e}}else if(Ot.elementType===ei||typeof ei=="object"&&ei!==null&&ei.$$typeof===Et&&Qf(ei)===Ot.type){E(Nt,Ot.sibling),Kt=st(Ot,Vt.props),La(Kt,Vt),Kt.return=Nt,Nt=Kt;break e}E(Nt,Ot);break}else d(Nt,Ot);Ot=Ot.sibling}Vt.type===de?(Kt=dn(Vt.props.children,Nt.mode,Kt,Vt.key),Kt.return=Nt,Nt=Kt):(Kt=uo(Vt.type,Vt.key,Vt.props,null,Nt.mode,Kt),La(Kt,Vt),Kt.return=Nt,Nt=Kt)}return Tt(Nt);case N:e:{for(ei=Vt.key;Ot!==null;){if(Ot.key===ei)if(Ot.tag===4&&Ot.stateNode.containerInfo===Vt.containerInfo&&Ot.stateNode.implementation===Vt.implementation){E(Nt,Ot.sibling),Kt=st(Ot,Vt.children||[]),Kt.return=Nt,Nt=Kt;break e}else{E(Nt,Ot);break}else d(Nt,Ot);Ot=Ot.sibling}Kt=Ll(Vt,Nt.mode,Kt),Kt.return=Nt,Nt=Kt}return Tt(Nt);case Et:return ei=Vt._init,Vt=ei(Vt._payload),Gi(Nt,Ot,Vt,Kt)}if(Lt(Vt))return ci(Nt,Ot,Vt,Kt);if(Rt(Vt)){if(ei=Rt(Vt),typeof ei!="function")throw Error(r(150));return Vt=ei.call(Vt),oi(Nt,Ot,Vt,Kt)}if(typeof Vt.then=="function")return Gi(Nt,Ot,Po(Vt),Kt);if(Vt.$$typeof===Be)return Gi(Nt,Ot,po(Nt,Vt),Kt);Ro(Nt,Vt)}return typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint"?(Vt=""+Vt,Ot!==null&&Ot.tag===6?(E(Nt,Ot.sibling),Kt=st(Ot,Vt),Kt.return=Nt,Nt=Kt):(E(Nt,Ot),Kt=wl(Vt,Nt.mode,Kt),Kt.return=Nt,Nt=Kt),Tt(Nt)):E(Nt,Ot)}return function(Nt,Ot,Vt,Kt){try{wa=0;var ei=Gi(Nt,Ot,Vt,Kt);return zn=null,ei}catch(si){if(si===_a||si===go)throw si;var Si=Gr(29,si,null,Nt.mode);return Si.lanes=Kt,Si.return=Nt,Si}finally{}}}var Hn=Zf(!0),Jf=Zf(!1),rs=At(null),ds=null;function Ks(o){var d=o.alternate;It(gr,gr.current&1),It(rs,o),ds===null&&(d===null||$n.current!==null||d.memoizedState!==null)&&(ds=o)}function eh(o){if(o.tag===22){if(It(gr,gr.current),It(rs,o),ds===null){var d=o.alternate;d!==null&&d.memoizedState!==null&&(ds=o)}}else qs()}function qs(){It(gr,gr.current),It(rs,rs.current)}function Ls(o){wt(rs),ds===o&&(ds=null),wt(gr)}var gr=At(0);function wo(o){for(var d=o;d!==null;){if(d.tag===13){var E=d.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||Zu(E)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function uu(o,d,E,pe){d=o.memoizedState,E=E(pe,d),E=E==null?d:p({},d,E),o.memoizedState=E,o.lanes===0&&(o.updateQueue.baseState=E)}var cu={enqueueSetState:function(o,d,E){o=o._reactInternals;var pe=Kr(),st=js(pe);st.payload=d,E!=null&&(st.callback=E),d=zs(o,st,pe),d!==null&&(qr(d,o,pe),xa(d,o,pe))},enqueueReplaceState:function(o,d,E){o=o._reactInternals;var pe=Kr(),st=js(pe);st.tag=1,st.payload=d,E!=null&&(st.callback=E),d=zs(o,st,pe),d!==null&&(qr(d,o,pe),xa(d,o,pe))},enqueueForceUpdate:function(o,d){o=o._reactInternals;var E=Kr(),pe=js(E);pe.tag=2,d!=null&&(pe.callback=d),d=zs(o,pe,E),d!==null&&(qr(d,o,E),xa(d,o,E))}};function th(o,d,E,pe,st,ot,Tt){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(pe,ot,Tt):d.prototype&&d.prototype.isPureReactComponent?!ha(E,pe)||!ha(st,ot):!0}function ih(o,d,E,pe){o=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(E,pe),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(E,pe),d.state!==o&&cu.enqueueReplaceState(d,d.state,null)}function xn(o,d){var E=d;if("ref"in d){E={};for(var pe in d)pe!=="ref"&&(E[pe]=d[pe])}if(o=o.defaultProps){E===d&&(E=p({},E));for(var st in o)E[st]===void 0&&(E[st]=o[st])}return E}var Lo=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function rh(o){Lo(o)}function sh(o){console.error(o)}function nh(o){Lo(o)}function Mo(o,d){try{var E=o.onUncaughtError;E(d.value,{componentStack:d.stack})}catch(pe){setTimeout(function(){throw pe})}}function ah(o,d,E){try{var pe=o.onCaughtError;pe(E.value,{componentStack:E.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(st){setTimeout(function(){throw st})}}function fu(o,d,E){return E=js(E),E.tag=3,E.payload={element:null},E.callback=function(){Mo(o,d)},E}function oh(o){return o=js(o),o.tag=3,o}function lh(o,d,E,pe){var st=E.type.getDerivedStateFromError;if(typeof st=="function"){var ot=pe.value;o.payload=function(){return st(ot)},o.callback=function(){ah(d,E,pe)}}var Tt=E.stateNode;Tt!==null&&typeof Tt.componentDidCatch=="function"&&(o.callback=function(){ah(d,E,pe),typeof st!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var Ct=pe.stack;this.componentDidCatch(pe.value,{componentStack:Ct!==null?Ct:""})})}function Qp(o,d,E,pe,st){if(E.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){if(d=E.alternate,d!==null&&ya(d,E,st,!0),E=rs.current,E!==null){switch(E.tag){case 13:return ds===null?Ou():E.alternate===null&&sr===0&&(sr=3),E.flags&=-257,E.flags|=65536,E.lanes=st,pe===$l?E.flags|=16384:(d=E.updateQueue,d===null?E.updateQueue=new Set([pe]):d.add(pe),Nu(o,pe,st)),!1;case 22:return E.flags|=65536,pe===$l?E.flags|=16384:(d=E.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([pe])},E.updateQueue=d):(E=d.retryQueue,E===null?d.retryQueue=new Set([pe]):E.add(pe)),Nu(o,pe,st)),!1}throw Error(r(435,E.tag))}return Nu(o,pe,st),Ou(),!1}if(ki)return d=rs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=st,pe!==Il&&(o=Error(r(422),{cause:pe}),ga(Jr(o,E)))):(pe!==Il&&(d=Error(r(423),{cause:pe}),ga(Jr(d,E))),o=o.current.alternate,o.flags|=65536,st&=-st,o.lanes|=st,pe=Jr(pe,E),st=fu(o.stateNode,pe,st),jl(o,st),sr!==4&&(sr=2)),!1;var ot=Error(r(520),{cause:pe});if(ot=Jr(ot,E),Na===null?Na=[ot]:Na.push(ot),sr!==4&&(sr=2),d===null)return!0;pe=Jr(pe,E),E=d;do{switch(E.tag){case 3:return E.flags|=65536,o=st&-st,E.lanes|=o,o=fu(E.stateNode,pe,o),jl(E,o),!1;case 1:if(d=E.type,ot=E.stateNode,(E.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(Js===null||!Js.has(ot))))return E.flags|=65536,st&=-st,E.lanes|=st,st=oh(st),lh(st,o,E,pe),jl(E,st),!1}E=E.return}while(E!==null);return!1}var uh=Error(r(461)),yr=!1;function xr(o,d,E,pe){d.child=o===null?Jf(d,null,E,pe):Hn(d,o.child,E,pe)}function ch(o,d,E,pe,st){E=E.render;var ot=d.ref;if("ref"in pe){var Tt={};for(var Ct in pe)Ct!=="ref"&&(Tt[Ct]=pe[Ct])}else Tt=pe;return En(d),pe=Yl(o,d,E,Tt,ot,st),Ct=Wl(),o!==null&&!yr?(Xl(o,d,st),Ms(o,d,st)):(ki&&Ct&&Ml(d),d.flags|=1,xr(o,d,pe,st),d.child)}function fh(o,d,E,pe,st){if(o===null){var ot=E.type;return typeof ot=="function"&&!Rl(ot)&&ot.defaultProps===void 0&&E.compare===null?(d.tag=15,d.type=ot,hh(o,d,ot,pe,st)):(o=uo(E.type,null,pe,d,d.mode,st),o.ref=d.ref,o.return=d,d.child=o)}if(ot=o.child,!Eu(o,st)){var Tt=ot.memoizedProps;if(E=E.compare,E=E!==null?E:ha,E(Tt,pe)&&o.ref===d.ref)return Ms(o,d,st)}return d.flags|=1,o=bs(ot,pe),o.ref=d.ref,o.return=d,d.child=o}function hh(o,d,E,pe,st){if(o!==null){var ot=o.memoizedProps;if(ha(ot,pe)&&o.ref===d.ref)if(yr=!1,d.pendingProps=pe=ot,Eu(o,st))(o.flags&131072)!==0&&(yr=!0);else return d.lanes=o.lanes,Ms(o,d,st)}return hu(o,d,E,pe,st)}function dh(o,d,E){var pe=d.pendingProps,st=pe.children,ot=o!==null?o.memoizedState:null;if(pe.mode==="hidden"){if((d.flags&128)!==0){if(pe=ot!==null?ot.baseLanes|E:E,o!==null){for(st=d.child=o.child,ot=0;st!==null;)ot=ot|st.lanes|st.childLanes,st=st.sibling;d.childLanes=ot&~pe}else d.childLanes=0,d.child=null;return ph(o,d,pe,E)}if((E&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},o!==null&&mo(d,ot!==null?ot.cachePool:null),ot!==null?hf(d,ot):Hl(),eh(d);else return d.lanes=d.childLanes=536870912,ph(o,d,ot!==null?ot.baseLanes|E:E,E)}else ot!==null?(mo(d,ot.cachePool),hf(d,ot),qs(),d.memoizedState=null):(o!==null&&mo(d,null),Hl(),qs());return xr(o,d,st,E),d.child}function ph(o,d,E,pe){var st=Vl();return st=st===null?null:{parent:mr._currentValue,pool:st},d.memoizedState={baseLanes:E,cachePool:st},o!==null&&mo(d,null),Hl(),eh(d),o!==null&&ya(o,d,pe,!0),null}function Do(o,d){var E=d.ref;if(E===null)o!==null&&o.ref!==null&&(d.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(r(284));(o===null||o.ref!==E)&&(d.flags|=4194816)}}function hu(o,d,E,pe,st){return En(d),E=Yl(o,d,E,pe,void 0,st),pe=Wl(),o!==null&&!yr?(Xl(o,d,st),Ms(o,d,st)):(ki&&pe&&Ml(d),d.flags|=1,xr(o,d,E,st),d.child)}function mh(o,d,E,pe,st,ot){return En(d),d.updateQueue=null,E=pf(d,pe,E,st),df(o),pe=Wl(),o!==null&&!yr?(Xl(o,d,ot),Ms(o,d,ot)):(ki&&pe&&Ml(d),d.flags|=1,xr(o,d,E,ot),d.child)}function gh(o,d,E,pe,st){if(En(d),d.stateNode===null){var ot=On,Tt=E.contextType;typeof Tt=="object"&&Tt!==null&&(ot=Ar(Tt)),ot=new E(pe,ot),d.memoizedState=ot.state!==null&&ot.state!==void 0?ot.state:null,ot.updater=cu,d.stateNode=ot,ot._reactInternals=d,ot=d.stateNode,ot.props=pe,ot.state=d.memoizedState,ot.refs={},Ul(d),Tt=E.contextType,ot.context=typeof Tt=="object"&&Tt!==null?Ar(Tt):On,ot.state=d.memoizedState,Tt=E.getDerivedStateFromProps,typeof Tt=="function"&&(uu(d,E,Tt,pe),ot.state=d.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof ot.getSnapshotBeforeUpdate=="function"||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(Tt=ot.state,typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount(),Tt!==ot.state&&cu.enqueueReplaceState(ot,ot.state,null),ba(d,pe,ot,st),Ta(),ot.state=d.memoizedState),typeof ot.componentDidMount=="function"&&(d.flags|=4194308),pe=!0}else if(o===null){ot=d.stateNode;var Ct=d.memoizedProps,Mt=xn(E,Ct);ot.props=Mt;var $t=ot.context,Ht=E.contextType;Tt=On,typeof Ht=="object"&&Ht!==null&&(Tt=Ar(Ht));var qt=E.getDerivedStateFromProps;Ht=typeof qt=="function"||typeof ot.getSnapshotBeforeUpdate=="function",Ct=d.pendingProps!==Ct,Ht||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(Ct||$t!==Tt)&&ih(d,ot,pe,Tt),Gs=!1;var Gt=d.memoizedState;ot.state=Gt,ba(d,pe,ot,st),Ta(),$t=d.memoizedState,Ct||Gt!==$t||Gs?(typeof qt=="function"&&(uu(d,E,qt,pe),$t=d.memoizedState),(Mt=Gs||th(d,E,Mt,pe,Gt,$t,Tt))?(Ht||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(d.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=pe,d.memoizedState=$t),ot.props=pe,ot.state=$t,ot.context=Tt,pe=Mt):(typeof ot.componentDidMount=="function"&&(d.flags|=4194308),pe=!1)}else{ot=d.stateNode,Gl(o,d),Tt=d.memoizedProps,Ht=xn(E,Tt),ot.props=Ht,qt=d.pendingProps,Gt=ot.context,$t=E.contextType,Mt=On,typeof $t=="object"&&$t!==null&&(Mt=Ar($t)),Ct=E.getDerivedStateFromProps,($t=typeof Ct=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(Tt!==qt||Gt!==Mt)&&ih(d,ot,pe,Mt),Gs=!1,Gt=d.memoizedState,ot.state=Gt,ba(d,pe,ot,st),Ta();var jt=d.memoizedState;Tt!==qt||Gt!==jt||Gs||o!==null&&o.dependencies!==null&&ho(o.dependencies)?(typeof Ct=="function"&&(uu(d,E,Ct,pe),jt=d.memoizedState),(Ht=Gs||th(d,E,Ht,pe,Gt,jt,Mt)||o!==null&&o.dependencies!==null&&ho(o.dependencies))?($t||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(pe,jt,Mt),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(pe,jt,Mt)),typeof ot.componentDidUpdate=="function"&&(d.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof ot.componentDidUpdate!="function"||Tt===o.memoizedProps&&Gt===o.memoizedState||(d.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||Tt===o.memoizedProps&&Gt===o.memoizedState||(d.flags|=1024),d.memoizedProps=pe,d.memoizedState=jt),ot.props=pe,ot.state=jt,ot.context=Mt,pe=Ht):(typeof ot.componentDidUpdate!="function"||Tt===o.memoizedProps&&Gt===o.memoizedState||(d.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||Tt===o.memoizedProps&&Gt===o.memoizedState||(d.flags|=1024),pe=!1)}return ot=pe,Do(o,d),pe=(d.flags&128)!==0,ot||pe?(ot=d.stateNode,E=pe&&typeof E.getDerivedStateFromError!="function"?null:ot.render(),d.flags|=1,o!==null&&pe?(d.child=Hn(d,o.child,null,st),d.child=Hn(d,null,E,st)):xr(o,d,E,st),d.memoizedState=ot.state,o=d.child):o=Ms(o,d,st),o}function yh(o,d,E,pe){return ma(),d.flags|=256,xr(o,d,E,pe),d.child}var du={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pu(o){return{baseLanes:o,cachePool:sf()}}function mu(o,d,E){return o=o!==null?o.childLanes&~E:0,d&&(o|=ss),o}function Eh(o,d,E){var pe=d.pendingProps,st=!1,ot=(d.flags&128)!==0,Tt;if((Tt=ot)||(Tt=o!==null&&o.memoizedState===null?!1:(gr.current&2)!==0),Tt&&(st=!0,d.flags&=-129),Tt=(d.flags&32)!==0,d.flags&=-33,o===null){if(ki){if(st?Ks(d):qs(),ki){var Ct=rr,Mt;if(Mt=Ct){e:{for(Mt=Ct,Ct=hs;Mt.nodeType!==8;){if(!Ct){Ct=null;break e}if(Mt=us(Mt.nextSibling),Mt===null){Ct=null;break e}}Ct=Mt}Ct!==null?(d.memoizedState={dehydrated:Ct,treeContext:pn!==null?{id:As,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},Mt=Gr(18,null,null,0),Mt.stateNode=Ct,Mt.return=d,d.child=Mt,Rr=d,rr=null,Mt=!0):Mt=!1}Mt||yn(d)}if(Ct=d.memoizedState,Ct!==null&&(Ct=Ct.dehydrated,Ct!==null))return Zu(Ct)?d.lanes=32:d.lanes=536870912,null;Ls(d)}return Ct=pe.children,pe=pe.fallback,st?(qs(),st=d.mode,Ct=Io({mode:"hidden",children:Ct},st),pe=dn(pe,st,E,null),Ct.return=d,pe.return=d,Ct.sibling=pe,d.child=Ct,st=d.child,st.memoizedState=pu(E),st.childLanes=mu(o,Tt,E),d.memoizedState=du,pe):(Ks(d),gu(d,Ct))}if(Mt=o.memoizedState,Mt!==null&&(Ct=Mt.dehydrated,Ct!==null)){if(ot)d.flags&256?(Ks(d),d.flags&=-257,d=yu(o,d,E)):d.memoizedState!==null?(qs(),d.child=o.child,d.flags|=128,d=null):(qs(),st=pe.fallback,Ct=d.mode,pe=Io({mode:"visible",children:pe.children},Ct),st=dn(st,Ct,E,null),st.flags|=2,pe.return=d,st.return=d,pe.sibling=st,d.child=pe,Hn(d,o.child,null,E),pe=d.child,pe.memoizedState=pu(E),pe.childLanes=mu(o,Tt,E),d.memoizedState=du,d=st);else if(Ks(d),Zu(Ct)){if(Tt=Ct.nextSibling&&Ct.nextSibling.dataset,Tt)var $t=Tt.dgst;Tt=$t,pe=Error(r(419)),pe.stack="",pe.digest=Tt,ga({value:pe,source:null,stack:null}),d=yu(o,d,E)}else if(yr||ya(o,d,E,!1),Tt=(E&o.childLanes)!==0,yr||Tt){if(Tt=Yi,Tt!==null&&(pe=E&-E,pe=(pe&42)!==0?1:Br(pe),pe=(pe&(Tt.suspendedLanes|E))!==0?0:pe,pe!==0&&pe!==Mt.retryLane))throw Mt.retryLane=pe,kn(o,pe),qr(Tt,o,pe),uh;Ct.data==="$?"||Ou(),d=yu(o,d,E)}else Ct.data==="$?"?(d.flags|=192,d.child=o.child,d=null):(o=Mt.treeContext,rr=us(Ct.nextSibling),Rr=d,ki=!0,gn=null,hs=!1,o!==null&&(ts[is++]=As,ts[is++]=Cs,ts[is++]=pn,As=o.id,Cs=o.overflow,pn=d),d=gu(d,pe.children),d.flags|=4096);return d}return st?(qs(),st=pe.fallback,Ct=d.mode,Mt=o.child,$t=Mt.sibling,pe=bs(Mt,{mode:"hidden",children:pe.children}),pe.subtreeFlags=Mt.subtreeFlags&65011712,$t!==null?st=bs($t,st):(st=dn(st,Ct,E,null),st.flags|=2),st.return=d,pe.return=d,pe.sibling=st,d.child=pe,pe=st,st=d.child,Ct=o.child.memoizedState,Ct===null?Ct=pu(E):(Mt=Ct.cachePool,Mt!==null?($t=mr._currentValue,Mt=Mt.parent!==$t?{parent:$t,pool:$t}:Mt):Mt=sf(),Ct={baseLanes:Ct.baseLanes|E,cachePool:Mt}),st.memoizedState=Ct,st.childLanes=mu(o,Tt,E),d.memoizedState=du,pe):(Ks(d),E=o.child,o=E.sibling,E=bs(E,{mode:"visible",children:pe.children}),E.return=d,E.sibling=null,o!==null&&(Tt=d.deletions,Tt===null?(d.deletions=[o],d.flags|=16):Tt.push(o)),d.child=E,d.memoizedState=null,E)}function gu(o,d){return d=Io({mode:"visible",children:d},o.mode),d.return=o,o.child=d}function Io(o,d){return o=Gr(22,o,null,d),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function yu(o,d,E){return Hn(d,o.child,null,E),o=gu(d,d.pendingProps.children),o.flags|=2,d.memoizedState=null,o}function _h(o,d,E){o.lanes|=d;var pe=o.alternate;pe!==null&&(pe.lanes|=d),Ol(o.return,d,E)}function vu(o,d,E,pe,st){var ot=o.memoizedState;ot===null?o.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:pe,tail:E,tailMode:st}:(ot.isBackwards=d,ot.rendering=null,ot.renderingStartTime=0,ot.last=pe,ot.tail=E,ot.tailMode=st)}function Sh(o,d,E){var pe=d.pendingProps,st=pe.revealOrder,ot=pe.tail;if(xr(o,d,pe.children,E),pe=gr.current,(pe&2)!==0)pe=pe&1|2,d.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=d.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&_h(o,E,d);else if(o.tag===19)_h(o,E,d);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===d)break e;for(;o.sibling===null;){if(o.return===null||o.return===d)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}pe&=1}switch(It(gr,pe),st){case"forwards":for(E=d.child,st=null;E!==null;)o=E.alternate,o!==null&&wo(o)===null&&(st=E),E=E.sibling;E=st,E===null?(st=d.child,d.child=null):(st=E.sibling,E.sibling=null),vu(d,!1,st,E,ot);break;case"backwards":for(E=null,st=d.child,d.child=null;st!==null;){if(o=st.alternate,o!==null&&wo(o)===null){d.child=st;break}o=st.sibling,st.sibling=E,E=st,st=o}vu(d,!0,E,null,ot);break;case"together":vu(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ms(o,d,E){if(o!==null&&(d.dependencies=o.dependencies),Zs|=d.lanes,(E&d.childLanes)===0)if(o!==null){if(ya(o,d,E,!1),(E&d.childLanes)===0)return null}else return null;if(o!==null&&d.child!==o.child)throw Error(r(153));if(d.child!==null){for(o=d.child,E=bs(o,o.pendingProps),d.child=E,E.return=d;o.sibling!==null;)o=o.sibling,E=E.sibling=bs(o,o.pendingProps),E.return=d;E.sibling=null}return d.child}function Eu(o,d){return(o.lanes&d)!==0?!0:(o=o.dependencies,!!(o!==null&&ho(o)))}function Zp(o,d,E){switch(d.tag){case 3:Xt(d,d.stateNode.containerInfo),Us(d,mr,o.memoizedState.cache),ma();break;case 27:case 5:mi(d);break;case 4:Xt(d,d.stateNode.containerInfo);break;case 10:Us(d,d.type,d.memoizedProps.value);break;case 13:var pe=d.memoizedState;if(pe!==null)return pe.dehydrated!==null?(Ks(d),d.flags|=128,null):(E&d.child.childLanes)!==0?Eh(o,d,E):(Ks(d),o=Ms(o,d,E),o!==null?o.sibling:null);Ks(d);break;case 19:var st=(o.flags&128)!==0;if(pe=(E&d.childLanes)!==0,pe||(ya(o,d,E,!1),pe=(E&d.childLanes)!==0),st){if(pe)return Sh(o,d,E);d.flags|=128}if(st=d.memoizedState,st!==null&&(st.rendering=null,st.tail=null,st.lastEffect=null),It(gr,gr.current),pe)break;return null;case 22:case 23:return d.lanes=0,dh(o,d,E);case 24:Us(d,mr,o.memoizedState.cache)}return Ms(o,d,E)}function xh(o,d,E){if(o!==null)if(o.memoizedProps!==d.pendingProps)yr=!0;else{if(!Eu(o,E)&&(d.flags&128)===0)return yr=!1,Zp(o,d,E);yr=(o.flags&131072)!==0}else yr=!1,ki&&(d.flags&1048576)!==0&&Xc(d,fo,d.index);switch(d.lanes=0,d.tag){case 16:e:{o=d.pendingProps;var pe=d.elementType,st=pe._init;if(pe=st(pe._payload),d.type=pe,typeof pe=="function")Rl(pe)?(o=xn(pe,o),d.tag=1,d=gh(null,d,pe,o,E)):(d.tag=0,d=hu(null,d,pe,o,E));else{if(pe!=null){if(st=pe.$$typeof,st===nt){d.tag=11,d=ch(null,d,pe,o,E);break e}else if(st===ht){d.tag=14,d=fh(null,d,pe,o,E);break e}}throw d=kt(pe)||pe,Error(r(306,d,""))}}return d;case 0:return hu(o,d,d.type,d.pendingProps,E);case 1:return pe=d.type,st=xn(pe,d.pendingProps),gh(o,d,pe,st,E);case 3:e:{if(Xt(d,d.stateNode.containerInfo),o===null)throw Error(r(387));pe=d.pendingProps;var ot=d.memoizedState;st=ot.element,Gl(o,d),ba(d,pe,null,E);var Tt=d.memoizedState;if(pe=Tt.cache,Us(d,mr,pe),pe!==ot.cache&&Fl(d,[mr],E,!0),Ta(),pe=Tt.element,ot.isDehydrated)if(ot={element:pe,isDehydrated:!1,cache:Tt.cache},d.updateQueue.baseState=ot,d.memoizedState=ot,d.flags&256){d=yh(o,d,pe,E);break e}else if(pe!==st){st=Jr(Error(r(424)),d),ga(st),d=yh(o,d,pe,E);break e}else{switch(o=d.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(rr=us(o.firstChild),Rr=d,ki=!0,gn=null,hs=!0,E=Jf(d,null,pe,E),d.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling}else{if(ma(),pe===st){d=Ms(o,d,E);break e}xr(o,d,pe,E)}d=d.child}return d;case 26:return Do(o,d),o===null?(E=Pd(d.type,null,d.pendingProps,null))?d.memoizedState=E:ki||(E=d.type,o=d.pendingProps,pe=qo(Ut.current).createElement(E),pe[Wt]=d,pe[ii]=o,br(pe,E,o),Mi(pe),d.stateNode=pe):d.memoizedState=Pd(d.type,o.memoizedProps,d.pendingProps,o.memoizedState),null;case 27:return mi(d),o===null&&ki&&(pe=d.stateNode=bd(d.type,d.pendingProps,Ut.current),Rr=d,hs=!0,st=rr,rn(d.type)?(Ju=st,rr=us(pe.firstChild)):rr=st),xr(o,d,d.pendingProps.children,E),Do(o,d),o===null&&(d.flags|=4194304),d.child;case 5:return o===null&&ki&&((st=pe=rr)&&(pe=Pm(pe,d.type,d.pendingProps,hs),pe!==null?(d.stateNode=pe,Rr=d,rr=us(pe.firstChild),hs=!1,st=!0):st=!1),st||yn(d)),mi(d),st=d.type,ot=d.pendingProps,Tt=o!==null?o.memoizedProps:null,pe=ot.children,Wu(st,ot)?pe=null:Tt!==null&&Wu(st,Tt)&&(d.flags|=32),d.memoizedState!==null&&(st=Yl(o,d,zp,null,null,E),Ka._currentValue=st),Do(o,d),xr(o,d,pe,E),d.child;case 6:return o===null&&ki&&((o=E=rr)&&(E=Rm(E,d.pendingProps,hs),E!==null?(d.stateNode=E,Rr=d,rr=null,o=!0):o=!1),o||yn(d)),null;case 13:return Eh(o,d,E);case 4:return Xt(d,d.stateNode.containerInfo),pe=d.pendingProps,o===null?d.child=Hn(d,null,pe,E):xr(o,d,pe,E),d.child;case 11:return ch(o,d,d.type,d.pendingProps,E);case 7:return xr(o,d,d.pendingProps,E),d.child;case 8:return xr(o,d,d.pendingProps.children,E),d.child;case 12:return xr(o,d,d.pendingProps.children,E),d.child;case 10:return pe=d.pendingProps,Us(d,d.type,pe.value),xr(o,d,pe.children,E),d.child;case 9:return st=d.type._context,pe=d.pendingProps.children,En(d),st=Ar(st),pe=pe(st),d.flags|=1,xr(o,d,pe,E),d.child;case 14:return fh(o,d,d.type,d.pendingProps,E);case 15:return hh(o,d,d.type,d.pendingProps,E);case 19:return Sh(o,d,E);case 31:return pe=d.pendingProps,E=d.mode,pe={mode:pe.mode,children:pe.children},o===null?(E=Io(pe,E),E.ref=d.ref,d.child=E,E.return=d,d=E):(E=bs(o.child,pe),E.ref=d.ref,d.child=E,E.return=d,d=E),d;case 22:return dh(o,d,E);case 24:return En(d),pe=Ar(mr),o===null?(st=Vl(),st===null&&(st=Yi,ot=Nl(),st.pooledCache=ot,ot.refCount++,ot!==null&&(st.pooledCacheLanes|=E),st=ot),d.memoizedState={parent:pe,cache:st},Ul(d),Us(d,mr,st)):((o.lanes&E)!==0&&(Gl(o,d),ba(d,null,null,E),Ta()),st=o.memoizedState,ot=d.memoizedState,st.parent!==pe?(st={parent:pe,cache:pe},d.memoizedState=st,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=st),Us(d,mr,pe)):(pe=ot.cache,Us(d,mr,pe),pe!==st.cache&&Fl(d,[mr],E,!0))),xr(o,d,d.pendingProps.children,E),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Ds(o){o.flags|=4}function Th(o,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Dd(d)){if(d=rs.current,d!==null&&((Pi&4194048)===Pi?ds!==null:(Pi&62914560)!==Pi&&(Pi&536870912)===0||d!==ds))throw Sa=$l,nf;o.flags|=8192}}function ko(o,d){d!==null&&(o.flags|=4),o.flags&16384&&(d=o.tag!==22?cs():536870912,o.lanes|=d,Wn|=d)}function Ma(o,d){if(!ki)switch(o.tailMode){case"hidden":d=o.tail;for(var E=null;d!==null;)d.alternate!==null&&(E=d),d=d.sibling;E===null?o.tail=null:E.sibling=null;break;case"collapsed":E=o.tail;for(var pe=null;E!==null;)E.alternate!==null&&(pe=E),E=E.sibling;pe===null?d||o.tail===null?o.tail=null:o.tail.sibling=null:pe.sibling=null}}function er(o){var d=o.alternate!==null&&o.alternate.child===o.child,E=0,pe=0;if(d)for(var st=o.child;st!==null;)E|=st.lanes|st.childLanes,pe|=st.subtreeFlags&65011712,pe|=st.flags&65011712,st.return=o,st=st.sibling;else for(st=o.child;st!==null;)E|=st.lanes|st.childLanes,pe|=st.subtreeFlags,pe|=st.flags,st.return=o,st=st.sibling;return o.subtreeFlags|=pe,o.childLanes=E,d}function Jp(o,d,E){var pe=d.pendingProps;switch(Dl(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(d),null;case 1:return er(d),null;case 3:return E=d.stateNode,pe=null,o!==null&&(pe=o.memoizedState.cache),d.memoizedState.cache!==pe&&(d.flags|=2048),Rs(mr),Jt(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(o===null||o.child===null)&&(pa(d)?Ds(d):o===null||o.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Jc())),er(d),null;case 26:return E=d.memoizedState,o===null?(Ds(d),E!==null?(er(d),Th(d,E)):(er(d),d.flags&=-16777217)):E?E!==o.memoizedState?(Ds(d),er(d),Th(d,E)):(er(d),d.flags&=-16777217):(o.memoizedProps!==pe&&Ds(d),er(d),d.flags&=-16777217),null;case 27:ni(d),E=Ut.current;var st=d.type;if(o!==null&&d.stateNode!=null)o.memoizedProps!==pe&&Ds(d);else{if(!pe){if(d.stateNode===null)throw Error(r(166));return er(d),null}o=Ft.current,pa(d)?Qc(d):(o=bd(st,pe,E),d.stateNode=o,Ds(d))}return er(d),null;case 5:if(ni(d),E=d.type,o!==null&&d.stateNode!=null)o.memoizedProps!==pe&&Ds(d);else{if(!pe){if(d.stateNode===null)throw Error(r(166));return er(d),null}if(o=Ft.current,pa(d))Qc(d);else{switch(st=qo(Ut.current),o){case 1:o=st.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:o=st.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":o=st.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":o=st.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":o=st.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof pe.is=="string"?st.createElement("select",{is:pe.is}):st.createElement("select"),pe.multiple?o.multiple=!0:pe.size&&(o.size=pe.size);break;default:o=typeof pe.is=="string"?st.createElement(E,{is:pe.is}):st.createElement(E)}}o[Wt]=d,o[ii]=pe;e:for(st=d.child;st!==null;){if(st.tag===5||st.tag===6)o.appendChild(st.stateNode);else if(st.tag!==4&&st.tag!==27&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===d)break e;for(;st.sibling===null;){if(st.return===null||st.return===d)break e;st=st.return}st.sibling.return=st.return,st=st.sibling}d.stateNode=o;e:switch(br(o,E,pe),E){case"button":case"input":case"select":case"textarea":o=!!pe.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ds(d)}}return er(d),d.flags&=-16777217,null;case 6:if(o&&d.stateNode!=null)o.memoizedProps!==pe&&Ds(d);else{if(typeof pe!="string"&&d.stateNode===null)throw Error(r(166));if(o=Ut.current,pa(d)){if(o=d.stateNode,E=d.memoizedProps,pe=null,st=Rr,st!==null)switch(st.tag){case 27:case 5:pe=st.memoizedProps}o[Wt]=d,o=!!(o.nodeValue===E||pe!==null&&pe.suppressHydrationWarning===!0||yd(o.nodeValue,E)),o||yn(d)}else o=qo(o).createTextNode(pe),o[Wt]=d,d.stateNode=o}return er(d),null;case 13:if(pe=d.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(st=pa(d),pe!==null&&pe.dehydrated!==null){if(o===null){if(!st)throw Error(r(318));if(st=d.memoizedState,st=st!==null?st.dehydrated:null,!st)throw Error(r(317));st[Wt]=d}else ma(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;er(d),st=!1}else st=Jc(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=st),st=!0;if(!st)return d.flags&256?(Ls(d),d):(Ls(d),null)}if(Ls(d),(d.flags&128)!==0)return d.lanes=E,d;if(E=pe!==null,o=o!==null&&o.memoizedState!==null,E){pe=d.child,st=null,pe.alternate!==null&&pe.alternate.memoizedState!==null&&pe.alternate.memoizedState.cachePool!==null&&(st=pe.alternate.memoizedState.cachePool.pool);var ot=null;pe.memoizedState!==null&&pe.memoizedState.cachePool!==null&&(ot=pe.memoizedState.cachePool.pool),ot!==st&&(pe.flags|=2048)}return E!==o&&E&&(d.child.flags|=8192),ko(d,d.updateQueue),er(d),null;case 4:return Jt(),o===null&&zu(d.stateNode.containerInfo),er(d),null;case 10:return Rs(d.type),er(d),null;case 19:if(wt(gr),st=d.memoizedState,st===null)return er(d),null;if(pe=(d.flags&128)!==0,ot=st.rendering,ot===null)if(pe)Ma(st,!1);else{if(sr!==0||o!==null&&(o.flags&128)!==0)for(o=d.child;o!==null;){if(ot=wo(o),ot!==null){for(d.flags|=128,Ma(st,!1),o=ot.updateQueue,d.updateQueue=o,ko(d,o),d.subtreeFlags=0,o=E,E=d.child;E!==null;)Wc(E,o),E=E.sibling;return It(gr,gr.current&1|2),d.child}o=o.sibling}st.tail!==null&&Bt()>No&&(d.flags|=128,pe=!0,Ma(st,!1),d.lanes=4194304)}else{if(!pe)if(o=wo(ot),o!==null){if(d.flags|=128,pe=!0,o=o.updateQueue,d.updateQueue=o,ko(d,o),Ma(st,!0),st.tail===null&&st.tailMode==="hidden"&&!ot.alternate&&!ki)return er(d),null}else 2*Bt()-st.renderingStartTime>No&&E!==536870912&&(d.flags|=128,pe=!0,Ma(st,!1),d.lanes=4194304);st.isBackwards?(ot.sibling=d.child,d.child=ot):(o=st.last,o!==null?o.sibling=ot:d.child=ot,st.last=ot)}return st.tail!==null?(d=st.tail,st.rendering=d,st.tail=d.sibling,st.renderingStartTime=Bt(),d.sibling=null,o=gr.current,It(gr,pe?o&1|2:o&1),d):(er(d),null);case 22:case 23:return Ls(d),Kl(),pe=d.memoizedState!==null,o!==null?o.memoizedState!==null!==pe&&(d.flags|=8192):pe&&(d.flags|=8192),pe?(E&536870912)!==0&&(d.flags&128)===0&&(er(d),d.subtreeFlags&6&&(d.flags|=8192)):er(d),E=d.updateQueue,E!==null&&ko(d,E.retryQueue),E=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(E=o.memoizedState.cachePool.pool),pe=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(pe=d.memoizedState.cachePool.pool),pe!==E&&(d.flags|=2048),o!==null&&wt(_n),null;case 24:return E=null,o!==null&&(E=o.memoizedState.cache),d.memoizedState.cache!==E&&(d.flags|=2048),Rs(mr),er(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function em(o,d){switch(Dl(d),d.tag){case 1:return o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 3:return Rs(mr),Jt(),o=d.flags,(o&65536)!==0&&(o&128)===0?(d.flags=o&-65537|128,d):null;case 26:case 27:case 5:return ni(d),null;case 13:if(Ls(d),o=d.memoizedState,o!==null&&o.dehydrated!==null){if(d.alternate===null)throw Error(r(340));ma()}return o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 19:return wt(gr),null;case 4:return Jt(),null;case 10:return Rs(d.type),null;case 22:case 23:return Ls(d),Kl(),o!==null&&wt(_n),o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 24:return Rs(mr),null;case 25:return null;default:return null}}function bh(o,d){switch(Dl(d),d.tag){case 3:Rs(mr),Jt();break;case 26:case 27:case 5:ni(d);break;case 4:Jt();break;case 13:Ls(d);break;case 19:wt(gr);break;case 10:Rs(d.type);break;case 22:case 23:Ls(d),Kl(),o!==null&&wt(_n);break;case 24:Rs(mr)}}function Da(o,d){try{var E=d.updateQueue,pe=E!==null?E.lastEffect:null;if(pe!==null){var st=pe.next;E=st;do{if((E.tag&o)===o){pe=void 0;var ot=E.create,Tt=E.inst;pe=ot(),Tt.destroy=pe}E=E.next}while(E!==st)}}catch(Ct){Hi(d,d.return,Ct)}}function Ys(o,d,E){try{var pe=d.updateQueue,st=pe!==null?pe.lastEffect:null;if(st!==null){var ot=st.next;pe=ot;do{if((pe.tag&o)===o){var Tt=pe.inst,Ct=Tt.destroy;if(Ct!==void 0){Tt.destroy=void 0,st=d;var Mt=E,$t=Ct;try{$t()}catch(Ht){Hi(st,Mt,Ht)}}}pe=pe.next}while(pe!==ot)}}catch(Ht){Hi(d,d.return,Ht)}}function Ah(o){var d=o.updateQueue;if(d!==null){var E=o.stateNode;try{ff(d,E)}catch(pe){Hi(o,o.return,pe)}}}function Ch(o,d,E){E.props=xn(o.type,o.memoizedProps),E.state=o.memoizedState;try{E.componentWillUnmount()}catch(pe){Hi(o,d,pe)}}function Ia(o,d){try{var E=o.ref;if(E!==null){switch(o.tag){case 26:case 27:case 5:var pe=o.stateNode;break;case 30:pe=o.stateNode;break;default:pe=o.stateNode}typeof E=="function"?o.refCleanup=E(pe):E.current=pe}}catch(st){Hi(o,d,st)}}function ps(o,d){var E=o.ref,pe=o.refCleanup;if(E!==null)if(typeof pe=="function")try{pe()}catch(st){Hi(o,d,st)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(st){Hi(o,d,st)}else E.current=null}function Ph(o){var d=o.type,E=o.memoizedProps,pe=o.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":E.autoFocus&&pe.focus();break e;case"img":E.src?pe.src=E.src:E.srcSet&&(pe.srcset=E.srcSet)}}catch(st){Hi(o,o.return,st)}}function _u(o,d,E){try{var pe=o.stateNode;xm(pe,o.type,E,d),pe[ii]=d}catch(st){Hi(o,o.return,st)}}function Rh(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&rn(o.type)||o.tag===4}function Su(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Rh(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&rn(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function xu(o,d,E){var pe=o.tag;if(pe===5||pe===6)o=o.stateNode,d?(E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E).insertBefore(o,d):(d=E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E,d.appendChild(o),E=E._reactRootContainer,E!=null||d.onclick!==null||(d.onclick=Ko));else if(pe!==4&&(pe===27&&rn(o.type)&&(E=o.stateNode,d=null),o=o.child,o!==null))for(xu(o,d,E),o=o.sibling;o!==null;)xu(o,d,E),o=o.sibling}function Oo(o,d,E){var pe=o.tag;if(pe===5||pe===6)o=o.stateNode,d?E.insertBefore(o,d):E.appendChild(o);else if(pe!==4&&(pe===27&&rn(o.type)&&(E=o.stateNode),o=o.child,o!==null))for(Oo(o,d,E),o=o.sibling;o!==null;)Oo(o,d,E),o=o.sibling}function wh(o){var d=o.stateNode,E=o.memoizedProps;try{for(var pe=o.type,st=d.attributes;st.length;)d.removeAttributeNode(st[0]);br(d,pe,E),d[Wt]=o,d[ii]=E}catch(ot){Hi(o,o.return,ot)}}var Is=!1,or=!1,Tu=!1,Lh=typeof WeakSet=="function"?WeakSet:Set,vr=null;function tm(o,d){if(o=o.containerInfo,qu=Jo,o=Vc(o),Sl(o)){if("selectionStart"in o)var E={start:o.selectionStart,end:o.selectionEnd};else e:{E=(E=o.ownerDocument)&&E.defaultView||window;var pe=E.getSelection&&E.getSelection();if(pe&&pe.rangeCount!==0){E=pe.anchorNode;var st=pe.anchorOffset,ot=pe.focusNode;pe=pe.focusOffset;try{E.nodeType,ot.nodeType}catch{E=null;break e}var Tt=0,Ct=-1,Mt=-1,$t=0,Ht=0,qt=o,Gt=null;t:for(;;){for(var jt;qt!==E||st!==0&&qt.nodeType!==3||(Ct=Tt+st),qt!==ot||pe!==0&&qt.nodeType!==3||(Mt=Tt+pe),qt.nodeType===3&&(Tt+=qt.nodeValue.length),(jt=qt.firstChild)!==null;)Gt=qt,qt=jt;for(;;){if(qt===o)break t;if(Gt===E&&++$t===st&&(Ct=Tt),Gt===ot&&++Ht===pe&&(Mt=Tt),(jt=qt.nextSibling)!==null)break;qt=Gt,Gt=qt.parentNode}qt=jt}E=Ct===-1||Mt===-1?null:{start:Ct,end:Mt}}else E=null}E=E||{start:0,end:0}}else E=null;for(Yu={focusedElem:o,selectionRange:E},Jo=!1,vr=d;vr!==null;)if(d=vr,o=d.child,(d.subtreeFlags&1024)!==0&&o!==null)o.return=d,vr=o;else for(;vr!==null;){switch(d=vr,ot=d.alternate,o=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&ot!==null){o=void 0,E=d,st=ot.memoizedProps,ot=ot.memoizedState,pe=E.stateNode;try{var ci=xn(E.type,st,E.elementType===E.type);o=pe.getSnapshotBeforeUpdate(ci,ot),pe.__reactInternalSnapshotBeforeUpdate=o}catch(oi){Hi(E,E.return,oi)}}break;case 3:if((o&1024)!==0){if(o=d.stateNode.containerInfo,E=o.nodeType,E===9)Qu(o);else if(E===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Qu(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=d.sibling,o!==null){o.return=d.return,vr=o;break}vr=d.return}}function Mh(o,d,E){var pe=E.flags;switch(E.tag){case 0:case 11:case 15:Ws(o,E),pe&4&&Da(5,E);break;case 1:if(Ws(o,E),pe&4)if(o=E.stateNode,d===null)try{o.componentDidMount()}catch(Tt){Hi(E,E.return,Tt)}else{var st=xn(E.type,d.memoizedProps);d=d.memoizedState;try{o.componentDidUpdate(st,d,o.__reactInternalSnapshotBeforeUpdate)}catch(Tt){Hi(E,E.return,Tt)}}pe&64&&Ah(E),pe&512&&Ia(E,E.return);break;case 3:if(Ws(o,E),pe&64&&(o=E.updateQueue,o!==null)){if(d=null,E.child!==null)switch(E.child.tag){case 27:case 5:d=E.child.stateNode;break;case 1:d=E.child.stateNode}try{ff(o,d)}catch(Tt){Hi(E,E.return,Tt)}}break;case 27:d===null&&pe&4&&wh(E);case 26:case 5:Ws(o,E),d===null&&pe&4&&Ph(E),pe&512&&Ia(E,E.return);break;case 12:Ws(o,E);break;case 13:Ws(o,E),pe&4&&kh(o,E),pe&64&&(o=E.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(E=fm.bind(null,E),wm(o,E))));break;case 22:if(pe=E.memoizedState!==null||Is,!pe){d=d!==null&&d.memoizedState!==null||or,st=Is;var ot=or;Is=pe,(or=d)&&!ot?Xs(o,E,(E.subtreeFlags&8772)!==0):Ws(o,E),Is=st,or=ot}break;case 30:break;default:Ws(o,E)}}function Dh(o){var d=o.alternate;d!==null&&(o.alternate=null,Dh(d)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(d=o.stateNode,d!==null&&qi(d)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Qi=null,kr=!1;function ks(o,d,E){for(E=E.child;E!==null;)Ih(o,d,E),E=E.sibling}function Ih(o,d,E){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(Li,E)}catch{}switch(E.tag){case 26:or||ps(E,d),ks(o,d,E),E.memoizedState?E.memoizedState.count--:E.stateNode&&(E=E.stateNode,E.parentNode.removeChild(E));break;case 27:or||ps(E,d);var pe=Qi,st=kr;rn(E.type)&&(Qi=E.stateNode,kr=!1),ks(o,d,E),Ga(E.stateNode),Qi=pe,kr=st;break;case 5:or||ps(E,d);case 6:if(pe=Qi,st=kr,Qi=null,ks(o,d,E),Qi=pe,kr=st,Qi!==null)if(kr)try{(Qi.nodeType===9?Qi.body:Qi.nodeName==="HTML"?Qi.ownerDocument.body:Qi).removeChild(E.stateNode)}catch(ot){Hi(E,d,ot)}else try{Qi.removeChild(E.stateNode)}catch(ot){Hi(E,d,ot)}break;case 18:Qi!==null&&(kr?(o=Qi,xd(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,E.stateNode),Xa(o)):xd(Qi,E.stateNode));break;case 4:pe=Qi,st=kr,Qi=E.stateNode.containerInfo,kr=!0,ks(o,d,E),Qi=pe,kr=st;break;case 0:case 11:case 14:case 15:or||Ys(2,E,d),or||Ys(4,E,d),ks(o,d,E);break;case 1:or||(ps(E,d),pe=E.stateNode,typeof pe.componentWillUnmount=="function"&&Ch(E,d,pe)),ks(o,d,E);break;case 21:ks(o,d,E);break;case 22:or=(pe=or)||E.memoizedState!==null,ks(o,d,E),or=pe;break;default:ks(o,d,E)}}function kh(o,d){if(d.memoizedState===null&&(o=d.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Xa(o)}catch(E){Hi(d,d.return,E)}}function im(o){switch(o.tag){case 13:case 19:var d=o.stateNode;return d===null&&(d=o.stateNode=new Lh),d;case 22:return o=o.stateNode,d=o._retryCache,d===null&&(d=o._retryCache=new Lh),d;default:throw Error(r(435,o.tag))}}function bu(o,d){var E=im(o);d.forEach(function(pe){var st=hm.bind(null,o,pe);E.has(pe)||(E.add(pe),pe.then(st,st))})}function jr(o,d){var E=d.deletions;if(E!==null)for(var pe=0;pe<E.length;pe++){var st=E[pe],ot=o,Tt=d,Ct=Tt;e:for(;Ct!==null;){switch(Ct.tag){case 27:if(rn(Ct.type)){Qi=Ct.stateNode,kr=!1;break e}break;case 5:Qi=Ct.stateNode,kr=!1;break e;case 3:case 4:Qi=Ct.stateNode.containerInfo,kr=!0;break e}Ct=Ct.return}if(Qi===null)throw Error(r(160));Ih(ot,Tt,st),Qi=null,kr=!1,ot=st.alternate,ot!==null&&(ot.return=null),st.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Oh(d,o),d=d.sibling}var ls=null;function Oh(o,d){var E=o.alternate,pe=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:jr(d,o),zr(o),pe&4&&(Ys(3,o,o.return),Da(3,o),Ys(5,o,o.return));break;case 1:jr(d,o),zr(o),pe&512&&(or||E===null||ps(E,E.return)),pe&64&&Is&&(o=o.updateQueue,o!==null&&(pe=o.callbacks,pe!==null&&(E=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=E===null?pe:E.concat(pe))));break;case 26:var st=ls;if(jr(d,o),zr(o),pe&512&&(or||E===null||ps(E,E.return)),pe&4){var ot=E!==null?E.memoizedState:null;if(pe=o.memoizedState,E===null)if(pe===null)if(o.stateNode===null){e:{pe=o.type,E=o.memoizedProps,st=st.ownerDocument||st;t:switch(pe){case"title":ot=st.getElementsByTagName("title")[0],(!ot||ot[ir]||ot[Wt]||ot.namespaceURI==="http://www.w3.org/2000/svg"||ot.hasAttribute("itemprop"))&&(ot=st.createElement(pe),st.head.insertBefore(ot,st.querySelector("head > title"))),br(ot,pe,E),ot[Wt]=o,Mi(ot),pe=ot;break e;case"link":var Tt=Ld("link","href",st).get(pe+(E.href||""));if(Tt){for(var Ct=0;Ct<Tt.length;Ct++)if(ot=Tt[Ct],ot.getAttribute("href")===(E.href==null||E.href===""?null:E.href)&&ot.getAttribute("rel")===(E.rel==null?null:E.rel)&&ot.getAttribute("title")===(E.title==null?null:E.title)&&ot.getAttribute("crossorigin")===(E.crossOrigin==null?null:E.crossOrigin)){Tt.splice(Ct,1);break t}}ot=st.createElement(pe),br(ot,pe,E),st.head.appendChild(ot);break;case"meta":if(Tt=Ld("meta","content",st).get(pe+(E.content||""))){for(Ct=0;Ct<Tt.length;Ct++)if(ot=Tt[Ct],ot.getAttribute("content")===(E.content==null?null:""+E.content)&&ot.getAttribute("name")===(E.name==null?null:E.name)&&ot.getAttribute("property")===(E.property==null?null:E.property)&&ot.getAttribute("http-equiv")===(E.httpEquiv==null?null:E.httpEquiv)&&ot.getAttribute("charset")===(E.charSet==null?null:E.charSet)){Tt.splice(Ct,1);break t}}ot=st.createElement(pe),br(ot,pe,E),st.head.appendChild(ot);break;default:throw Error(r(468,pe))}ot[Wt]=o,Mi(ot),pe=ot}o.stateNode=pe}else Md(st,o.type,o.stateNode);else o.stateNode=wd(st,pe,o.memoizedProps);else ot!==pe?(ot===null?E.stateNode!==null&&(E=E.stateNode,E.parentNode.removeChild(E)):ot.count--,pe===null?Md(st,o.type,o.stateNode):wd(st,pe,o.memoizedProps)):pe===null&&o.stateNode!==null&&_u(o,o.memoizedProps,E.memoizedProps)}break;case 27:jr(d,o),zr(o),pe&512&&(or||E===null||ps(E,E.return)),E!==null&&pe&4&&_u(o,o.memoizedProps,E.memoizedProps);break;case 5:if(jr(d,o),zr(o),pe&512&&(or||E===null||ps(E,E.return)),o.flags&32){st=o.stateNode;try{Pn(st,"")}catch(jt){Hi(o,o.return,jt)}}pe&4&&o.stateNode!=null&&(st=o.memoizedProps,_u(o,st,E!==null?E.memoizedProps:st)),pe&1024&&(Tu=!0);break;case 6:if(jr(d,o),zr(o),pe&4){if(o.stateNode===null)throw Error(r(162));pe=o.memoizedProps,E=o.stateNode;try{E.nodeValue=pe}catch(jt){Hi(o,o.return,jt)}}break;case 3:if(Xo=null,st=ls,ls=Yo(d.containerInfo),jr(d,o),ls=st,zr(o),pe&4&&E!==null&&E.memoizedState.isDehydrated)try{Xa(d.containerInfo)}catch(jt){Hi(o,o.return,jt)}Tu&&(Tu=!1,Fh(o));break;case 4:pe=ls,ls=Yo(o.stateNode.containerInfo),jr(d,o),zr(o),ls=pe;break;case 12:jr(d,o),zr(o);break;case 13:jr(d,o),zr(o),o.child.flags&8192&&o.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(Lu=Bt()),pe&4&&(pe=o.updateQueue,pe!==null&&(o.updateQueue=null,bu(o,pe)));break;case 22:st=o.memoizedState!==null;var Mt=E!==null&&E.memoizedState!==null,$t=Is,Ht=or;if(Is=$t||st,or=Ht||Mt,jr(d,o),or=Ht,Is=$t,zr(o),pe&8192)e:for(d=o.stateNode,d._visibility=st?d._visibility&-2:d._visibility|1,st&&(E===null||Mt||Is||or||Tn(o)),E=null,d=o;;){if(d.tag===5||d.tag===26){if(E===null){Mt=E=d;try{if(ot=Mt.stateNode,st)Tt=ot.style,typeof Tt.setProperty=="function"?Tt.setProperty("display","none","important"):Tt.display="none";else{Ct=Mt.stateNode;var qt=Mt.memoizedProps.style,Gt=qt!=null&&qt.hasOwnProperty("display")?qt.display:null;Ct.style.display=Gt==null||typeof Gt=="boolean"?"":(""+Gt).trim()}}catch(jt){Hi(Mt,Mt.return,jt)}}}else if(d.tag===6){if(E===null){Mt=d;try{Mt.stateNode.nodeValue=st?"":Mt.memoizedProps}catch(jt){Hi(Mt,Mt.return,jt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===o)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break e;for(;d.sibling===null;){if(d.return===null||d.return===o)break e;E===d&&(E=null),d=d.return}E===d&&(E=null),d.sibling.return=d.return,d=d.sibling}pe&4&&(pe=o.updateQueue,pe!==null&&(E=pe.retryQueue,E!==null&&(pe.retryQueue=null,bu(o,E))));break;case 19:jr(d,o),zr(o),pe&4&&(pe=o.updateQueue,pe!==null&&(o.updateQueue=null,bu(o,pe)));break;case 30:break;case 21:break;default:jr(d,o),zr(o)}}function zr(o){var d=o.flags;if(d&2){try{for(var E,pe=o.return;pe!==null;){if(Rh(pe)){E=pe;break}pe=pe.return}if(E==null)throw Error(r(160));switch(E.tag){case 27:var st=E.stateNode,ot=Su(o);Oo(o,ot,st);break;case 5:var Tt=E.stateNode;E.flags&32&&(Pn(Tt,""),E.flags&=-33);var Ct=Su(o);Oo(o,Ct,Tt);break;case 3:case 4:var Mt=E.stateNode.containerInfo,$t=Su(o);xu(o,$t,Mt);break;default:throw Error(r(161))}}catch(Ht){Hi(o,o.return,Ht)}o.flags&=-3}d&4096&&(o.flags&=-4097)}function Fh(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var d=o;Fh(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),o=o.sibling}}function Ws(o,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Mh(o,d.alternate,d),d=d.sibling}function Tn(o){for(o=o.child;o!==null;){var d=o;switch(d.tag){case 0:case 11:case 14:case 15:Ys(4,d,d.return),Tn(d);break;case 1:ps(d,d.return);var E=d.stateNode;typeof E.componentWillUnmount=="function"&&Ch(d,d.return,E),Tn(d);break;case 27:Ga(d.stateNode);case 26:case 5:ps(d,d.return),Tn(d);break;case 22:d.memoizedState===null&&Tn(d);break;case 30:Tn(d);break;default:Tn(d)}o=o.sibling}}function Xs(o,d,E){for(E=E&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var pe=d.alternate,st=o,ot=d,Tt=ot.flags;switch(ot.tag){case 0:case 11:case 15:Xs(st,ot,E),Da(4,ot);break;case 1:if(Xs(st,ot,E),pe=ot,st=pe.stateNode,typeof st.componentDidMount=="function")try{st.componentDidMount()}catch($t){Hi(pe,pe.return,$t)}if(pe=ot,st=pe.updateQueue,st!==null){var Ct=pe.stateNode;try{var Mt=st.shared.hiddenCallbacks;if(Mt!==null)for(st.shared.hiddenCallbacks=null,st=0;st<Mt.length;st++)cf(Mt[st],Ct)}catch($t){Hi(pe,pe.return,$t)}}E&&Tt&64&&Ah(ot),Ia(ot,ot.return);break;case 27:wh(ot);case 26:case 5:Xs(st,ot,E),E&&pe===null&&Tt&4&&Ph(ot),Ia(ot,ot.return);break;case 12:Xs(st,ot,E);break;case 13:Xs(st,ot,E),E&&Tt&4&&kh(st,ot);break;case 22:ot.memoizedState===null&&Xs(st,ot,E),Ia(ot,ot.return);break;case 30:break;default:Xs(st,ot,E)}d=d.sibling}}function Au(o,d){var E=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(E=o.memoizedState.cachePool.pool),o=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(o=d.memoizedState.cachePool.pool),o!==E&&(o!=null&&o.refCount++,E!=null&&va(E))}function Cu(o,d){o=null,d.alternate!==null&&(o=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==o&&(d.refCount++,o!=null&&va(o))}function ms(o,d,E,pe){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Nh(o,d,E,pe),d=d.sibling}function Nh(o,d,E,pe){var st=d.flags;switch(d.tag){case 0:case 11:case 15:ms(o,d,E,pe),st&2048&&Da(9,d);break;case 1:ms(o,d,E,pe);break;case 3:ms(o,d,E,pe),st&2048&&(o=null,d.alternate!==null&&(o=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==o&&(d.refCount++,o!=null&&va(o)));break;case 12:if(st&2048){ms(o,d,E,pe),o=d.stateNode;try{var ot=d.memoizedProps,Tt=ot.id,Ct=ot.onPostCommit;typeof Ct=="function"&&Ct(Tt,d.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Mt){Hi(d,d.return,Mt)}}else ms(o,d,E,pe);break;case 13:ms(o,d,E,pe);break;case 23:break;case 22:ot=d.stateNode,Tt=d.alternate,d.memoizedState!==null?ot._visibility&2?ms(o,d,E,pe):ka(o,d):ot._visibility&2?ms(o,d,E,pe):(ot._visibility|=2,Kn(o,d,E,pe,(d.subtreeFlags&10256)!==0)),st&2048&&Au(Tt,d);break;case 24:ms(o,d,E,pe),st&2048&&Cu(d.alternate,d);break;default:ms(o,d,E,pe)}}function Kn(o,d,E,pe,st){for(st=st&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var ot=o,Tt=d,Ct=E,Mt=pe,$t=Tt.flags;switch(Tt.tag){case 0:case 11:case 15:Kn(ot,Tt,Ct,Mt,st),Da(8,Tt);break;case 23:break;case 22:var Ht=Tt.stateNode;Tt.memoizedState!==null?Ht._visibility&2?Kn(ot,Tt,Ct,Mt,st):ka(ot,Tt):(Ht._visibility|=2,Kn(ot,Tt,Ct,Mt,st)),st&&$t&2048&&Au(Tt.alternate,Tt);break;case 24:Kn(ot,Tt,Ct,Mt,st),st&&$t&2048&&Cu(Tt.alternate,Tt);break;default:Kn(ot,Tt,Ct,Mt,st)}d=d.sibling}}function ka(o,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var E=o,pe=d,st=pe.flags;switch(pe.tag){case 22:ka(E,pe),st&2048&&Au(pe.alternate,pe);break;case 24:ka(E,pe),st&2048&&Cu(pe.alternate,pe);break;default:ka(E,pe)}d=d.sibling}}var Oa=8192;function qn(o){if(o.subtreeFlags&Oa)for(o=o.child;o!==null;)Bh(o),o=o.sibling}function Bh(o){switch(o.tag){case 26:qn(o),o.flags&Oa&&o.memoizedState!==null&&Gm(ls,o.memoizedState,o.memoizedProps);break;case 5:qn(o);break;case 3:case 4:var d=ls;ls=Yo(o.stateNode.containerInfo),qn(o),ls=d;break;case 22:o.memoizedState===null&&(d=o.alternate,d!==null&&d.memoizedState!==null?(d=Oa,Oa=16777216,qn(o),Oa=d):qn(o));break;default:qn(o)}}function Vh(o){var d=o.alternate;if(d!==null&&(o=d.child,o!==null)){d.child=null;do d=o.sibling,o.sibling=null,o=d;while(o!==null)}}function Fa(o){var d=o.deletions;if((o.flags&16)!==0){if(d!==null)for(var E=0;E<d.length;E++){var pe=d[E];vr=pe,Uh(pe,o)}Vh(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)$h(o),o=o.sibling}function $h(o){switch(o.tag){case 0:case 11:case 15:Fa(o),o.flags&2048&&Ys(9,o,o.return);break;case 3:Fa(o);break;case 12:Fa(o);break;case 22:var d=o.stateNode;o.memoizedState!==null&&d._visibility&2&&(o.return===null||o.return.tag!==13)?(d._visibility&=-3,Fo(o)):Fa(o);break;default:Fa(o)}}function Fo(o){var d=o.deletions;if((o.flags&16)!==0){if(d!==null)for(var E=0;E<d.length;E++){var pe=d[E];vr=pe,Uh(pe,o)}Vh(o)}for(o=o.child;o!==null;){switch(d=o,d.tag){case 0:case 11:case 15:Ys(8,d,d.return),Fo(d);break;case 22:E=d.stateNode,E._visibility&2&&(E._visibility&=-3,Fo(d));break;default:Fo(d)}o=o.sibling}}function Uh(o,d){for(;vr!==null;){var E=vr;switch(E.tag){case 0:case 11:case 15:Ys(8,E,d);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var pe=E.memoizedState.cachePool.pool;pe!=null&&pe.refCount++}break;case 24:va(E.memoizedState.cache)}if(pe=E.child,pe!==null)pe.return=E,vr=pe;else e:for(E=o;vr!==null;){pe=vr;var st=pe.sibling,ot=pe.return;if(Dh(pe),pe===E){vr=null;break e}if(st!==null){st.return=ot,vr=st;break e}vr=ot}}}var rm={getCacheForType:function(o){var d=Ar(mr),E=d.data.get(o);return E===void 0&&(E=o(),d.data.set(o,E)),E}},sm=typeof WeakMap=="function"?WeakMap:Map,Ni=0,Yi=null,Ti=null,Pi=0,Bi=0,Hr=null,Qs=!1,Yn=!1,Pu=!1,Os=0,sr=0,Zs=0,bn=0,Ru=0,ss=0,Wn=0,Na=null,Or=null,wu=!1,Lu=0,No=1/0,Bo=null,Js=null,Tr=0,en=null,Xn=null,Qn=0,Mu=0,Du=null,Gh=null,Ba=0,Iu=null;function Kr(){if((Ni&2)!==0&&Pi!==0)return Pi&-Pi;if(vt.T!==null){var o=Bn;return o!==0?o:$u()}return di()}function jh(){ss===0&&(ss=(Pi&536870912)===0||ki?gi():536870912);var o=rs.current;return o!==null&&(o.flags|=32),ss}function qr(o,d,E){(o===Yi&&(Bi===2||Bi===9)||o.cancelPendingCommit!==null)&&(Zn(o,0),tn(o,Pi,ss,!1)),_r(o,E),((Ni&2)===0||o!==Yi)&&(o===Yi&&((Ni&2)===0&&(bn|=E),sr===4&&tn(o,Pi,ss,!1)),gs(o))}function zh(o,d,E){if((Ni&6)!==0)throw Error(r(327));var pe=!E&&(d&124)===0&&(d&o.expiredLanes)===0||Mr(o,d),st=pe?lm(o,d):Fu(o,d,!0),ot=pe;do{if(st===0){Yn&&!pe&&tn(o,d,0,!1);break}else{if(E=o.current.alternate,ot&&!am(E)){st=Fu(o,d,!1),ot=!1;continue}if(st===2){if(ot=d,o.errorRecoveryDisabledLanes&ot)var Tt=0;else Tt=o.pendingLanes&-536870913,Tt=Tt!==0?Tt:Tt&536870912?536870912:0;if(Tt!==0){d=Tt;e:{var Ct=o;st=Na;var Mt=Ct.current.memoizedState.isDehydrated;if(Mt&&(Zn(Ct,Tt).flags|=256),Tt=Fu(Ct,Tt,!1),Tt!==2){if(Pu&&!Mt){Ct.errorRecoveryDisabledLanes|=ot,bn|=ot,st=4;break e}ot=Or,Or=st,ot!==null&&(Or===null?Or=ot:Or.push.apply(Or,ot))}st=Tt}if(ot=!1,st!==2)continue}}if(st===1){Zn(o,0),tn(o,d,0,!0);break}e:{switch(pe=o,ot=st,ot){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:tn(pe,d,ss,!Qs);break e;case 2:Or=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(st=Lu+300-Bt(),10<st)){if(tn(pe,d,ss,!Qs),as(pe,0,!0)!==0)break e;pe.timeoutHandle=_d(Hh.bind(null,pe,E,Or,Bo,wu,d,ss,bn,Wn,Qs,ot,2,-0,0),st);break e}Hh(pe,E,Or,Bo,wu,d,ss,bn,Wn,Qs,ot,0,-0,0)}}break}while(!0);gs(o)}function Hh(o,d,E,pe,st,ot,Tt,Ct,Mt,$t,Ht,qt,Gt,jt){if(o.timeoutHandle=-1,qt=d.subtreeFlags,(qt&8192||(qt&16785408)===16785408)&&(Ha={stylesheets:null,count:0,unsuspend:Um},Bh(d),qt=jm(),qt!==null)){o.cancelPendingCommit=qt(Zh.bind(null,o,d,ot,E,pe,st,Tt,Ct,Mt,Ht,1,Gt,jt)),tn(o,ot,Tt,!$t);return}Zh(o,d,ot,E,pe,st,Tt,Ct,Mt)}function am(o){for(var d=o;;){var E=d.tag;if((E===0||E===11||E===15)&&d.flags&16384&&(E=d.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var pe=0;pe<E.length;pe++){var st=E[pe],ot=st.getSnapshot;st=st.value;try{if(!Ur(ot(),st))return!1}catch{return!1}}if(E=d.child,d.subtreeFlags&16384&&E!==null)E.return=d,d=E;else{if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function tn(o,d,E,pe){d&=~Ru,d&=~bn,o.suspendedLanes|=d,o.pingedLanes&=~d,pe&&(o.warmLanes|=d),pe=o.expirationTimes;for(var st=d;0<st;){var ot=31-Ai(st),Tt=1<<ot;pe[ot]=-1,st&=~Tt}E!==0&&fs(o,E,d)}function Vo(){return(Ni&6)===0?(Va(0),!1):!0}function ku(){if(Ti!==null){if(Bi===0)var o=Ti.return;else o=Ti,Ps=vn=null,Ql(o),zn=null,wa=0,o=Ti;for(;o!==null;)bh(o.alternate,o),o=o.return;Ti=null}}function Zn(o,d){var E=o.timeoutHandle;E!==-1&&(o.timeoutHandle=-1,bm(E)),E=o.cancelPendingCommit,E!==null&&(o.cancelPendingCommit=null,E()),ku(),Yi=o,Ti=E=bs(o.current,null),Pi=d,Bi=0,Hr=null,Qs=!1,Yn=Mr(o,d),Pu=!1,Wn=ss=Ru=bn=Zs=sr=0,Or=Na=null,wu=!1,(d&8)!==0&&(d|=d&32);var pe=o.entangledLanes;if(pe!==0)for(o=o.entanglements,pe&=d;0<pe;){var st=31-Ai(pe),ot=1<<st;d|=o[st],pe&=~ot}return Os=d,ao(),E}function Kh(o,d){Ei=null,vt.H=Co,d===_a||d===go?(d=lf(),Bi=3):d===nf?(d=lf(),Bi=4):Bi=d===uh?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Hr=d,Ti===null&&(sr=1,Mo(o,Jr(d,o.current)))}function qh(){var o=vt.H;return vt.H=Co,o===null?Co:o}function Yh(){var o=vt.A;return vt.A=rm,o}function Ou(){sr=4,Qs||(Pi&4194048)!==Pi&&rs.current!==null||(Yn=!0),(Zs&134217727)===0&&(bn&134217727)===0||Yi===null||tn(Yi,Pi,ss,!1)}function Fu(o,d,E){var pe=Ni;Ni|=2;var st=qh(),ot=Yh();(Yi!==o||Pi!==d)&&(Bo=null,Zn(o,d)),d=!1;var Tt=sr;e:do try{if(Bi!==0&&Ti!==null){var Ct=Ti,Mt=Hr;switch(Bi){case 8:ku(),Tt=6;break e;case 3:case 2:case 9:case 6:rs.current===null&&(d=!0);var $t=Bi;if(Bi=0,Hr=null,Jn(o,Ct,Mt,$t),E&&Yn){Tt=0;break e}break;default:$t=Bi,Bi=0,Hr=null,Jn(o,Ct,Mt,$t)}}om(),Tt=sr;break}catch(Ht){Kh(o,Ht)}while(!0);return d&&o.shellSuspendCounter++,Ps=vn=null,Ni=pe,vt.H=st,vt.A=ot,Ti===null&&(Yi=null,Pi=0,ao()),Tt}function om(){for(;Ti!==null;)Wh(Ti)}function lm(o,d){var E=Ni;Ni|=2;var pe=qh(),st=Yh();Yi!==o||Pi!==d?(Bo=null,No=Bt()+500,Zn(o,d)):Yn=Mr(o,d);e:do try{if(Bi!==0&&Ti!==null){d=Ti;var ot=Hr;t:switch(Bi){case 1:Bi=0,Hr=null,Jn(o,d,ot,1);break;case 2:case 9:if(af(ot)){Bi=0,Hr=null,Xh(d);break}d=function(){Bi!==2&&Bi!==9||Yi!==o||(Bi=7),gs(o)},ot.then(d,d);break e;case 3:Bi=7;break e;case 4:Bi=5;break e;case 7:af(ot)?(Bi=0,Hr=null,Xh(d)):(Bi=0,Hr=null,Jn(o,d,ot,7));break;case 5:var Tt=null;switch(Ti.tag){case 26:Tt=Ti.memoizedState;case 5:case 27:var Ct=Ti;if(!Tt||Dd(Tt)){Bi=0,Hr=null;var Mt=Ct.sibling;if(Mt!==null)Ti=Mt;else{var $t=Ct.return;$t!==null?(Ti=$t,$o($t)):Ti=null}break t}}Bi=0,Hr=null,Jn(o,d,ot,5);break;case 6:Bi=0,Hr=null,Jn(o,d,ot,6);break;case 8:ku(),sr=6;break e;default:throw Error(r(462))}}um();break}catch(Ht){Kh(o,Ht)}while(!0);return Ps=vn=null,vt.H=pe,vt.A=st,Ni=E,Ti!==null?0:(Yi=null,Pi=0,ao(),sr)}function um(){for(;Ti!==null&&!ji();)Wh(Ti)}function Wh(o){var d=xh(o.alternate,o,Os);o.memoizedProps=o.pendingProps,d===null?$o(o):Ti=d}function Xh(o){var d=o,E=d.alternate;switch(d.tag){case 15:case 0:d=mh(E,d,d.pendingProps,d.type,void 0,Pi);break;case 11:d=mh(E,d,d.pendingProps,d.type.render,d.ref,Pi);break;case 5:Ql(d);default:bh(E,d),d=Ti=Wc(d,Os),d=xh(E,d,Os)}o.memoizedProps=o.pendingProps,d===null?$o(o):Ti=d}function Jn(o,d,E,pe){Ps=vn=null,Ql(d),zn=null,wa=0;var st=d.return;try{if(Qp(o,st,d,E,Pi)){sr=1,Mo(o,Jr(E,o.current)),Ti=null;return}}catch(ot){if(st!==null)throw Ti=st,ot;sr=1,Mo(o,Jr(E,o.current)),Ti=null;return}d.flags&32768?(ki||pe===1?o=!0:Yn||(Pi&536870912)!==0?o=!1:(Qs=o=!0,(pe===2||pe===9||pe===3||pe===6)&&(pe=rs.current,pe!==null&&pe.tag===13&&(pe.flags|=16384))),Qh(d,o)):$o(d)}function $o(o){var d=o;do{if((d.flags&32768)!==0){Qh(d,Qs);return}o=d.return;var E=Jp(d.alternate,d,Os);if(E!==null){Ti=E;return}if(d=d.sibling,d!==null){Ti=d;return}Ti=d=o}while(d!==null);sr===0&&(sr=5)}function Qh(o,d){do{var E=em(o.alternate,o);if(E!==null){E.flags&=32767,Ti=E;return}if(E=o.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!d&&(o=o.sibling,o!==null)){Ti=o;return}Ti=o=E}while(o!==null);sr=6,Ti=null}function Zh(o,d,E,pe,st,ot,Tt,Ct,Mt){o.cancelPendingCommit=null;do Uo();while(Tr!==0);if((Ni&6)!==0)throw Error(r(327));if(d!==null){if(d===o.current)throw Error(r(177));if(ot=d.lanes|d.childLanes,ot|=Cl,Nr(o,E,ot,Tt,Ct,Mt),o===Yi&&(Ti=Yi=null,Pi=0),Xn=d,en=o,Qn=E,Mu=ot,Du=st,Gh=pe,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,dm(ui,function(){return sd(),null})):(o.callbackNode=null,o.callbackPriority=0),pe=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||pe){pe=vt.T,vt.T=null,st=xt.p,xt.p=2,Tt=Ni,Ni|=4;try{tm(o,d,E)}finally{Ni=Tt,xt.p=st,vt.T=pe}}Tr=1,Jh(),ed(),td()}}function Jh(){if(Tr===1){Tr=0;var o=en,d=Xn,E=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||E){E=vt.T,vt.T=null;var pe=xt.p;xt.p=2;var st=Ni;Ni|=4;try{Oh(d,o);var ot=Yu,Tt=Vc(o.containerInfo),Ct=ot.focusedElem,Mt=ot.selectionRange;if(Tt!==Ct&&Ct&&Ct.ownerDocument&&Bc(Ct.ownerDocument.documentElement,Ct)){if(Mt!==null&&Sl(Ct)){var $t=Mt.start,Ht=Mt.end;if(Ht===void 0&&(Ht=$t),"selectionStart"in Ct)Ct.selectionStart=$t,Ct.selectionEnd=Math.min(Ht,Ct.value.length);else{var qt=Ct.ownerDocument||document,Gt=qt&&qt.defaultView||window;if(Gt.getSelection){var jt=Gt.getSelection(),ci=Ct.textContent.length,oi=Math.min(Mt.start,ci),Gi=Mt.end===void 0?oi:Math.min(Mt.end,ci);!jt.extend&&oi>Gi&&(Tt=Gi,Gi=oi,oi=Tt);var Nt=Nc(Ct,oi),Ot=Nc(Ct,Gi);if(Nt&&Ot&&(jt.rangeCount!==1||jt.anchorNode!==Nt.node||jt.anchorOffset!==Nt.offset||jt.focusNode!==Ot.node||jt.focusOffset!==Ot.offset)){var Vt=qt.createRange();Vt.setStart(Nt.node,Nt.offset),jt.removeAllRanges(),oi>Gi?(jt.addRange(Vt),jt.extend(Ot.node,Ot.offset)):(Vt.setEnd(Ot.node,Ot.offset),jt.addRange(Vt))}}}}for(qt=[],jt=Ct;jt=jt.parentNode;)jt.nodeType===1&&qt.push({element:jt,left:jt.scrollLeft,top:jt.scrollTop});for(typeof Ct.focus=="function"&&Ct.focus(),Ct=0;Ct<qt.length;Ct++){var Kt=qt[Ct];Kt.element.scrollLeft=Kt.left,Kt.element.scrollTop=Kt.top}}Jo=!!qu,Yu=qu=null}finally{Ni=st,xt.p=pe,vt.T=E}}o.current=d,Tr=2}}function ed(){if(Tr===2){Tr=0;var o=en,d=Xn,E=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||E){E=vt.T,vt.T=null;var pe=xt.p;xt.p=2;var st=Ni;Ni|=4;try{Mh(o,d.alternate,d)}finally{Ni=st,xt.p=pe,vt.T=E}}Tr=3}}function td(){if(Tr===4||Tr===3){Tr=0,ri();var o=en,d=Xn,E=Qn,pe=Gh;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Tr=5:(Tr=0,Xn=en=null,rd(o,o.pendingLanes));var st=o.pendingLanes;if(st===0&&(Js=null),_s(E),d=d.stateNode,hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(Li,d,void 0,(d.current.flags&128)===128)}catch{}if(pe!==null){d=vt.T,st=xt.p,xt.p=2,vt.T=null;try{for(var ot=o.onRecoverableError,Tt=0;Tt<pe.length;Tt++){var Ct=pe[Tt];ot(Ct.value,{componentStack:Ct.stack})}}finally{vt.T=d,xt.p=st}}(Qn&3)!==0&&Uo(),gs(o),st=o.pendingLanes,(E&4194090)!==0&&(st&42)!==0?o===Iu?Ba++:(Ba=0,Iu=o):Ba=0,Va(0)}}function rd(o,d){(o.pooledCacheLanes&=d)===0&&(d=o.pooledCache,d!=null&&(o.pooledCache=null,va(d)))}function Uo(o){return Jh(),ed(),td(),sd()}function sd(){if(Tr!==5)return!1;var o=en,d=Mu;Mu=0;var E=_s(Qn),pe=vt.T,st=xt.p;try{xt.p=32>E?32:E,vt.T=null,E=Du,Du=null;var ot=en,Tt=Qn;if(Tr=0,Xn=en=null,Qn=0,(Ni&6)!==0)throw Error(r(331));var Ct=Ni;if(Ni|=4,$h(ot.current),Nh(ot,ot.current,Tt,E),Ni=Ct,Va(0,!1),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(Li,ot)}catch{}return!0}finally{xt.p=st,vt.T=pe,rd(o,d)}}function nd(o,d,E){d=Jr(E,d),d=fu(o.stateNode,d,2),o=zs(o,d,2),o!==null&&(_r(o,2),gs(o))}function Hi(o,d,E){if(o.tag===3)nd(o,o,E);else for(;d!==null;){if(d.tag===3){nd(d,o,E);break}else if(d.tag===1){var pe=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof pe.componentDidCatch=="function"&&(Js===null||!Js.has(pe))){o=Jr(E,o),E=oh(2),pe=zs(d,E,2),pe!==null&&(lh(E,pe,d,o),_r(pe,2),gs(pe));break}}d=d.return}}function Nu(o,d,E){var pe=o.pingCache;if(pe===null){pe=o.pingCache=new sm;var st=new Set;pe.set(d,st)}else st=pe.get(d),st===void 0&&(st=new Set,pe.set(d,st));st.has(E)||(Pu=!0,st.add(E),o=cm.bind(null,o,d,E),d.then(o,o))}function cm(o,d,E){var pe=o.pingCache;pe!==null&&pe.delete(d),o.pingedLanes|=o.suspendedLanes&E,o.warmLanes&=~E,Yi===o&&(Pi&E)===E&&(sr===4||sr===3&&(Pi&62914560)===Pi&&300>Bt()-Lu?(Ni&2)===0&&Zn(o,0):Ru|=E,Wn===Pi&&(Wn=0)),gs(o)}function ad(o,d){d===0&&(d=cs()),o=kn(o,d),o!==null&&(_r(o,d),gs(o))}function fm(o){var d=o.memoizedState,E=0;d!==null&&(E=d.retryLane),ad(o,E)}function hm(o,d){var E=0;switch(o.tag){case 13:var pe=o.stateNode,st=o.memoizedState;st!==null&&(E=st.retryLane);break;case 19:pe=o.stateNode;break;case 22:pe=o.stateNode._retryCache;break;default:throw Error(r(314))}pe!==null&&pe.delete(d),ad(o,E)}function dm(o,d){return Zt(o,d)}var Go=null,ea=null,Bu=!1,jo=!1,Vu=!1,An=0;function gs(o){o!==ea&&o.next===null&&(ea===null?Go=ea=o:ea=ea.next=o),jo=!0,Bu||(Bu=!0,mm())}function Va(o,d){if(!Vu&&jo){Vu=!0;do for(var E=!1,pe=Go;pe!==null;){if(o!==0){var st=pe.pendingLanes;if(st===0)var ot=0;else{var Tt=pe.suspendedLanes,Ct=pe.pingedLanes;ot=(1<<31-Ai(42|o)+1)-1,ot&=st&~(Tt&~Ct),ot=ot&201326741?ot&201326741|1:ot?ot|2:0}ot!==0&&(E=!0,cd(pe,ot))}else ot=Pi,ot=as(pe,pe===Yi?ot:0,pe.cancelPendingCommit!==null||pe.timeoutHandle!==-1),(ot&3)===0||Mr(pe,ot)||(E=!0,cd(pe,ot));pe=pe.next}while(E);Vu=!1}}function pm(){od()}function od(){jo=Bu=!1;var o=0;An!==0&&(Tm()&&(o=An),An=0);for(var d=Bt(),E=null,pe=Go;pe!==null;){var st=pe.next,ot=ld(pe,d);ot===0?(pe.next=null,E===null?Go=st:E.next=st,st===null&&(ea=E)):(E=pe,(o!==0||(ot&3)!==0)&&(jo=!0)),pe=st}Va(o)}function ld(o,d){for(var E=o.suspendedLanes,pe=o.pingedLanes,st=o.expirationTimes,ot=o.pendingLanes&-62914561;0<ot;){var Tt=31-Ai(ot),Ct=1<<Tt,Mt=st[Tt];Mt===-1?((Ct&E)===0||(Ct&pe)!==0)&&(st[Tt]=vs(Ct,d)):Mt<=d&&(o.expiredLanes|=Ct),ot&=~Ct}if(d=Yi,E=Pi,E=as(o,o===d?E:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),pe=o.callbackNode,E===0||o===d&&(Bi===2||Bi===9)||o.cancelPendingCommit!==null)return pe!==null&&pe!==null&&Yt(pe),o.callbackNode=null,o.callbackPriority=0;if((E&3)===0||Mr(o,E)){if(d=E&-E,d===o.callbackPriority)return d;switch(pe!==null&&Yt(pe),_s(E)){case 2:case 8:E=Ri;break;case 32:E=ui;break;case 268435456:E=Zi;break;default:E=ui}return pe=ud.bind(null,o),E=Zt(E,pe),o.callbackPriority=d,o.callbackNode=E,d}return pe!==null&&pe!==null&&Yt(pe),o.callbackPriority=2,o.callbackNode=null,2}function ud(o,d){if(Tr!==0&&Tr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var E=o.callbackNode;if(Uo()&&o.callbackNode!==E)return null;var pe=Pi;return pe=as(o,o===Yi?pe:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),pe===0?null:(zh(o,pe,d),ld(o,Bt()),o.callbackNode!=null&&o.callbackNode===E?ud.bind(null,o):null)}function cd(o,d){if(Uo())return null;zh(o,d,!0)}function mm(){Am(function(){(Ni&6)!==0?Zt(Oi,pm):od()})}function $u(){return An===0&&(An=gi()),An}function fd(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ja(""+o)}function hd(o,d){var E=d.ownerDocument.createElement("input");return E.name=d.name,E.value=d.value,o.id&&E.setAttribute("form",o.id),d.parentNode.insertBefore(E,d),o=new FormData(o),E.parentNode.removeChild(E),o}function gm(o,d,E,pe,st){if(d==="submit"&&E&&E.stateNode===st){var ot=fd((st[ii]||null).action),Tt=pe.submitter;Tt&&(d=(d=Tt[ii]||null)?fd(d.formAction):Tt.getAttribute("formAction"),d!==null&&(ot=d,Tt=null));var Ct=new ro("action","action",null,pe,st);o.push({event:Ct,listeners:[{instance:null,listener:function(){if(pe.defaultPrevented){if(An!==0){var Mt=Tt?hd(st,Tt):new FormData(st);au(E,{pending:!0,data:Mt,method:st.method,action:ot},null,Mt)}}else typeof ot=="function"&&(Ct.preventDefault(),Mt=Tt?hd(st,Tt):new FormData(st),au(E,{pending:!0,data:Mt,method:st.method,action:ot},ot,Mt))},currentTarget:st}]})}}for(var Uu=0;Uu<Al.length;Uu++){var Gu=Al[Uu],ym=Gu.toLowerCase(),vm=Gu[0].toUpperCase()+Gu.slice(1);os(ym,"on"+vm)}os(Gc,"onAnimationEnd"),os(jc,"onAnimationIteration"),os(zc,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(kp,"onTransitionRun"),os(Op,"onTransitionStart"),os(Fp,"onTransitionCancel"),os(Hc,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function dd(o,d){d=(d&4)!==0;for(var E=0;E<o.length;E++){var pe=o[E],st=pe.event;pe=pe.listeners;e:{var ot=void 0;if(d)for(var Tt=pe.length-1;0<=Tt;Tt--){var Ct=pe[Tt],Mt=Ct.instance,$t=Ct.currentTarget;if(Ct=Ct.listener,Mt!==ot&&st.isPropagationStopped())break e;ot=Ct,st.currentTarget=$t;try{ot(st)}catch(Ht){Lo(Ht)}st.currentTarget=null,ot=Mt}else for(Tt=0;Tt<pe.length;Tt++){if(Ct=pe[Tt],Mt=Ct.instance,$t=Ct.currentTarget,Ct=Ct.listener,Mt!==ot&&st.isPropagationStopped())break e;ot=Ct,st.currentTarget=$t;try{ot(st)}catch(Ht){Lo(Ht)}st.currentTarget=null,ot=Mt}}}}function bi(o,d){var E=d[fi];E===void 0&&(E=d[fi]=new Set);var pe=o+"__bubble";E.has(pe)||(pd(d,o,2,!1),E.add(pe))}function ju(o,d,E){var pe=0;d&&(pe|=4),pd(E,o,pe,d)}var zo="_reactListening"+Math.random().toString(36).slice(2);function zu(o){if(!o[zo]){o[zo]=!0,Vr.forEach(function(E){E!=="selectionchange"&&(Em.has(E)||ju(E,!1,o),ju(E,!0,o))});var d=o.nodeType===9?o:o.ownerDocument;d===null||d[zo]||(d[zo]=!0,ju("selectionchange",!1,d))}}function pd(o,d,E,pe){switch(Bd(d)){case 2:var st=Km;break;case 8:st=qm;break;default:st=sc}E=st.bind(null,d,E,o),st=void 0,!hl||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(st=!0),pe?st!==void 0?o.addEventListener(d,E,{capture:!0,passive:st}):o.addEventListener(d,E,!0):st!==void 0?o.addEventListener(d,E,{passive:st}):o.addEventListener(d,E,!1)}function Hu(o,d,E,pe,st){var ot=pe;if((d&1)===0&&(d&2)===0&&pe!==null)e:for(;;){if(pe===null)return;var Tt=pe.tag;if(Tt===3||Tt===4){var Ct=pe.stateNode.containerInfo;if(Ct===st)break;if(Tt===4)for(Tt=pe.return;Tt!==null;){var Mt=Tt.tag;if((Mt===3||Mt===4)&&Tt.stateNode.containerInfo===st)return;Tt=Tt.return}for(;Ct!==null;){if(Tt=Ii(Ct),Tt===null)return;if(Mt=Tt.tag,Mt===5||Mt===6||Mt===26||Mt===27){pe=ot=Tt;continue e}Ct=Ct.parentNode}}pe=pe.return}vc(function(){var $t=ot,Ht=cl(E),qt=[];e:{var Gt=Kc.get(o);if(Gt!==void 0){var jt=ro,ci=o;switch(o){case"keypress":if(to(E)===0)break e;case"keydown":case"keyup":jt=hp;break;case"focusin":ci="focus",jt=gl;break;case"focusout":ci="blur",jt=gl;break;case"beforeblur":case"afterblur":jt=gl;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=Zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=mp;break;case Gc:case jc:case zc:jt=tp;break;case Hc:jt=yp;break;case"scroll":case"scrollend":jt=Xd;break;case"wheel":jt=Ep;break;case"copy":case"cut":case"paste":jt=sp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=Tc;break;case"toggle":case"beforetoggle":jt=Sp}var oi=(d&4)!==0,Gi=!oi&&(o==="scroll"||o==="scrollend"),Nt=oi?Gt!==null?Gt+"Capture":null:Gt;oi=[];for(var Ot=$t,Vt;Ot!==null;){var Kt=Ot;if(Vt=Kt.stateNode,Kt=Kt.tag,Kt!==5&&Kt!==26&&Kt!==27||Vt===null||Nt===null||(Kt=na(Ot,Nt),Kt!=null&&oi.push(Ua(Ot,Kt,Vt))),Gi)break;Ot=Ot.return}0<oi.length&&(Gt=new jt(Gt,ci,null,E,Ht),qt.push({event:Gt,listeners:oi}))}}if((d&7)===0){e:{if(Gt=o==="mouseover"||o==="pointerover",jt=o==="mouseout"||o==="pointerout",Gt&&E!==ul&&(ci=E.relatedTarget||E.fromElement)&&(Ii(ci)||ci[ti]))break e;if((jt||Gt)&&(Gt=Ht.window===Ht?Ht:(Gt=Ht.ownerDocument)?Gt.defaultView||Gt.parentWindow:window,jt?(ci=E.relatedTarget||E.toElement,jt=$t,ci=ci?Ii(ci):null,ci!==null&&(Gi=n(ci),oi=ci.tag,ci!==Gi||oi!==5&&oi!==27&&oi!==6)&&(ci=null)):(jt=null,ci=$t),jt!==ci)){if(oi=Sc,Kt="onMouseLeave",Nt="onMouseEnter",Ot="mouse",(o==="pointerout"||o==="pointerover")&&(oi=Tc,Kt="onPointerLeave",Nt="onPointerEnter",Ot="pointer"),Gi=jt==null?Gt:Sr(jt),Vt=ci==null?Gt:Sr(ci),Gt=new oi(Kt,Ot+"leave",jt,E,Ht),Gt.target=Gi,Gt.relatedTarget=Vt,Kt=null,Ii(Ht)===$t&&(oi=new oi(Nt,Ot+"enter",ci,E,Ht),oi.target=Vt,oi.relatedTarget=Gi,Kt=oi),Gi=Kt,jt&&ci)t:{for(oi=jt,Nt=ci,Ot=0,Vt=oi;Vt;Vt=ta(Vt))Ot++;for(Vt=0,Kt=Nt;Kt;Kt=ta(Kt))Vt++;for(;0<Ot-Vt;)oi=ta(oi),Ot--;for(;0<Vt-Ot;)Nt=ta(Nt),Vt--;for(;Ot--;){if(oi===Nt||Nt!==null&&oi===Nt.alternate)break t;oi=ta(oi),Nt=ta(Nt)}oi=null}else oi=null;jt!==null&&md(qt,Gt,jt,oi,!1),ci!==null&&Gi!==null&&md(qt,Gi,ci,oi,!0)}}e:{if(Gt=$t?Sr($t):window,jt=Gt.nodeName&&Gt.nodeName.toLowerCase(),jt==="select"||jt==="input"&&Gt.type==="file")var ei=Mc;else if(wc(Gt))if(Dc)ei=Mp;else{ei=wp;var Si=Rp}else jt=Gt.nodeName,!jt||jt.toLowerCase()!=="input"||Gt.type!=="checkbox"&&Gt.type!=="radio"?$t&&ll($t.elementType)&&(ei=Mc):ei=Lp;if(ei&&(ei=ei(o,$t))){Lc(qt,ei,E,Ht);break e}Si&&Si(o,Gt,$t),o==="focusout"&&$t&&Gt.type==="number"&&$t.memoizedProps.value!=null&&ol(Gt,"number",Gt.value)}switch(Si=$t?Sr($t):window,o){case"focusin":(wc(Si)||Si.contentEditable==="true")&&(Mn=Si,xl=$t,da=null);break;case"focusout":da=xl=Mn=null;break;case"mousedown":Tl=!0;break;case"contextmenu":case"mouseup":case"dragend":Tl=!1,$c(qt,E,Ht);break;case"selectionchange":if(Ip)break;case"keydown":case"keyup":$c(qt,E,Ht)}var si;if(vl)e:{switch(o){case"compositionstart":var li="onCompositionStart";break e;case"compositionend":li="onCompositionEnd";break e;case"compositionupdate":li="onCompositionUpdate";break e}li=void 0}else Ln?Pc(o,E)&&(li="onCompositionEnd"):o==="keydown"&&E.keyCode===229&&(li="onCompositionStart");li&&(bc&&E.locale!=="ko"&&(Ln||li!=="onCompositionStart"?li==="onCompositionEnd"&&Ln&&(si=Ec()):($s=Ht,dl="value"in $s?$s.value:$s.textContent,Ln=!0)),Si=Ho($t,li),0<Si.length&&(li=new xc(li,o,null,E,Ht),qt.push({event:li,listeners:Si}),si?li.data=si:(si=Rc(E),si!==null&&(li.data=si)))),(si=Tp?bp(o,E):Ap(o,E))&&(li=Ho($t,"onBeforeInput"),0<li.length&&(Si=new xc("onBeforeInput","beforeinput",null,E,Ht),qt.push({event:Si,listeners:li}),Si.data=si)),gm(qt,o,$t,E,Ht)}dd(qt,d)})}function Ua(o,d,E){return{instance:o,listener:d,currentTarget:E}}function Ho(o,d){for(var E=d+"Capture",pe=[];o!==null;){var st=o,ot=st.stateNode;if(st=st.tag,st!==5&&st!==26&&st!==27||ot===null||(st=na(o,E),st!=null&&pe.unshift(Ua(o,st,ot)),st=na(o,d),st!=null&&pe.push(Ua(o,st,ot))),o.tag===3)return pe;o=o.return}return[]}function ta(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function md(o,d,E,pe,st){for(var ot=d._reactName,Tt=[];E!==null&&E!==pe;){var Ct=E,Mt=Ct.alternate,$t=Ct.stateNode;if(Ct=Ct.tag,Mt!==null&&Mt===pe)break;Ct!==5&&Ct!==26&&Ct!==27||$t===null||(Mt=$t,st?($t=na(E,ot),$t!=null&&Tt.unshift(Ua(E,$t,Mt))):st||($t=na(E,ot),$t!=null&&Tt.push(Ua(E,$t,Mt)))),E=E.return}Tt.length!==0&&o.push({event:d,listeners:Tt})}var _m=/\r\n?/g,Sm=/\u0000|\uFFFD/g;function gd(o){return(typeof o=="string"?o:""+o).replace(_m,`
`).replace(Sm,"")}function yd(o,d){return d=gd(d),gd(o)===d}function Ko(){}function Ui(o,d,E,pe,st,ot){switch(E){case"children":typeof pe=="string"?d==="body"||d==="textarea"&&pe===""||Pn(o,pe):(typeof pe=="number"||typeof pe=="bigint")&&d!=="body"&&Pn(o,""+pe);break;case"className":Bs(o,"class",pe);break;case"tabIndex":Bs(o,"tabindex",pe);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(o,E,pe);break;case"style":gc(o,pe,ot);break;case"data":if(d!=="object"){Bs(o,"data",pe);break}case"src":case"href":if(pe===""&&(d!=="a"||E!=="href")){o.removeAttribute(E);break}if(pe==null||typeof pe=="function"||typeof pe=="symbol"||typeof pe=="boolean"){o.removeAttribute(E);break}pe=Ja(""+pe),o.setAttribute(E,pe);break;case"action":case"formAction":if(typeof pe=="function"){o.setAttribute(E,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ot=="function"&&(E==="formAction"?(d!=="input"&&Ui(o,d,"name",st.name,st,null),Ui(o,d,"formEncType",st.formEncType,st,null),Ui(o,d,"formMethod",st.formMethod,st,null),Ui(o,d,"formTarget",st.formTarget,st,null)):(Ui(o,d,"encType",st.encType,st,null),Ui(o,d,"method",st.method,st,null),Ui(o,d,"target",st.target,st,null)));if(pe==null||typeof pe=="symbol"||typeof pe=="boolean"){o.removeAttribute(E);break}pe=Ja(""+pe),o.setAttribute(E,pe);break;case"onClick":pe!=null&&(o.onclick=Ko);break;case"onScroll":pe!=null&&bi("scroll",o);break;case"onScrollEnd":pe!=null&&bi("scrollend",o);break;case"dangerouslySetInnerHTML":if(pe!=null){if(typeof pe!="object"||!("__html"in pe))throw Error(r(61));if(E=pe.__html,E!=null){if(st.children!=null)throw Error(r(60));o.innerHTML=E}}break;case"multiple":o.multiple=pe&&typeof pe!="function"&&typeof pe!="symbol";break;case"muted":o.muted=pe&&typeof pe!="function"&&typeof pe!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(pe==null||typeof pe=="function"||typeof pe=="boolean"||typeof pe=="symbol"){o.removeAttribute("xlink:href");break}E=Ja(""+pe),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",E);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":pe!=null&&typeof pe!="function"&&typeof pe!="symbol"?o.setAttribute(E,""+pe):o.removeAttribute(E);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":pe&&typeof pe!="function"&&typeof pe!="symbol"?o.setAttribute(E,""):o.removeAttribute(E);break;case"capture":case"download":pe===!0?o.setAttribute(E,""):pe!==!1&&pe!=null&&typeof pe!="function"&&typeof pe!="symbol"?o.setAttribute(E,pe):o.removeAttribute(E);break;case"cols":case"rows":case"size":case"span":pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&!isNaN(pe)&&1<=pe?o.setAttribute(E,pe):o.removeAttribute(E);break;case"rowSpan":case"start":pe==null||typeof pe=="function"||typeof pe=="symbol"||isNaN(pe)?o.removeAttribute(E):o.setAttribute(E,pe);break;case"popover":bi("beforetoggle",o),bi("toggle",o),Pr(o,"popover",pe);break;case"xlinkActuate":Yr(o,"http://www.w3.org/1999/xlink","xlink:actuate",pe);break;case"xlinkArcrole":Yr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",pe);break;case"xlinkRole":Yr(o,"http://www.w3.org/1999/xlink","xlink:role",pe);break;case"xlinkShow":Yr(o,"http://www.w3.org/1999/xlink","xlink:show",pe);break;case"xlinkTitle":Yr(o,"http://www.w3.org/1999/xlink","xlink:title",pe);break;case"xlinkType":Yr(o,"http://www.w3.org/1999/xlink","xlink:type",pe);break;case"xmlBase":Yr(o,"http://www.w3.org/XML/1998/namespace","xml:base",pe);break;case"xmlLang":Yr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",pe);break;case"xmlSpace":Yr(o,"http://www.w3.org/XML/1998/namespace","xml:space",pe);break;case"is":Pr(o,"is",pe);break;case"innerText":case"textContent":break;default:(!(2<E.length)||E[0]!=="o"&&E[0]!=="O"||E[1]!=="n"&&E[1]!=="N")&&(E=Yd.get(E)||E,Pr(o,E,pe))}}function Ku(o,d,E,pe,st,ot){switch(E){case"style":gc(o,pe,ot);break;case"dangerouslySetInnerHTML":if(pe!=null){if(typeof pe!="object"||!("__html"in pe))throw Error(r(61));if(E=pe.__html,E!=null){if(st.children!=null)throw Error(r(60));o.innerHTML=E}}break;case"children":typeof pe=="string"?Pn(o,pe):(typeof pe=="number"||typeof pe=="bigint")&&Pn(o,""+pe);break;case"onScroll":pe!=null&&bi("scroll",o);break;case"onScrollEnd":pe!=null&&bi("scrollend",o);break;case"onClick":pe!=null&&(o.onclick=Ko);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ur.hasOwnProperty(E))e:{if(E[0]==="o"&&E[1]==="n"&&(st=E.endsWith("Capture"),d=E.slice(2,st?E.length-7:void 0),ot=o[ii]||null,ot=ot!=null?ot[E]:null,typeof ot=="function"&&o.removeEventListener(d,ot,st),typeof pe=="function")){typeof ot!="function"&&ot!==null&&(E in o?o[E]=null:o.hasAttribute(E)&&o.removeAttribute(E)),o.addEventListener(d,pe,st);break e}E in o?o[E]=pe:pe===!0?o.setAttribute(E,""):Pr(o,E,pe)}}}function br(o,d,E){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bi("error",o),bi("load",o);var pe=!1,st=!1,ot;for(ot in E)if(E.hasOwnProperty(ot)){var Tt=E[ot];if(Tt!=null)switch(ot){case"src":pe=!0;break;case"srcSet":st=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Ui(o,d,ot,Tt,E,null)}}st&&Ui(o,d,"srcSet",E.srcSet,E,null),pe&&Ui(o,d,"src",E.src,E,null);return;case"input":bi("invalid",o);var Ct=ot=Tt=st=null,Mt=null,$t=null;for(pe in E)if(E.hasOwnProperty(pe)){var Ht=E[pe];if(Ht!=null)switch(pe){case"name":st=Ht;break;case"type":Tt=Ht;break;case"checked":Mt=Ht;break;case"defaultChecked":$t=Ht;break;case"value":ot=Ht;break;case"defaultValue":Ct=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(r(137,d));break;default:Ui(o,d,pe,Ht,E,null)}}hc(o,ot,Ct,Mt,$t,Tt,st,!1),Qa(o);return;case"select":bi("invalid",o),pe=Tt=ot=null;for(st in E)if(E.hasOwnProperty(st)&&(Ct=E[st],Ct!=null))switch(st){case"value":ot=Ct;break;case"defaultValue":Tt=Ct;break;case"multiple":pe=Ct;default:Ui(o,d,st,Ct,E,null)}d=ot,E=Tt,o.multiple=!!pe,d!=null?Cn(o,!!pe,d,!1):E!=null&&Cn(o,!!pe,E,!0);return;case"textarea":bi("invalid",o),ot=st=pe=null;for(Tt in E)if(E.hasOwnProperty(Tt)&&(Ct=E[Tt],Ct!=null))switch(Tt){case"value":pe=Ct;break;case"defaultValue":st=Ct;break;case"children":ot=Ct;break;case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(91));break;default:Ui(o,d,Tt,Ct,E,null)}pc(o,pe,st,ot),Qa(o);return;case"option":for(Mt in E)if(E.hasOwnProperty(Mt)&&(pe=E[Mt],pe!=null))switch(Mt){case"selected":o.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Ui(o,d,Mt,pe,E,null)}return;case"dialog":bi("beforetoggle",o),bi("toggle",o),bi("cancel",o),bi("close",o);break;case"iframe":case"object":bi("load",o);break;case"video":case"audio":for(pe=0;pe<$a.length;pe++)bi($a[pe],o);break;case"image":bi("error",o),bi("load",o);break;case"details":bi("toggle",o);break;case"embed":case"source":case"link":bi("error",o),bi("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($t in E)if(E.hasOwnProperty($t)&&(pe=E[$t],pe!=null))switch($t){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Ui(o,d,$t,pe,E,null)}return;default:if(ll(d)){for(Ht in E)E.hasOwnProperty(Ht)&&(pe=E[Ht],pe!==void 0&&Ku(o,d,Ht,pe,E,void 0));return}}for(Ct in E)E.hasOwnProperty(Ct)&&(pe=E[Ct],pe!=null&&Ui(o,d,Ct,pe,E,null))}function xm(o,d,E,pe){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var st=null,ot=null,Tt=null,Ct=null,Mt=null,$t=null,Ht=null;for(jt in E){var qt=E[jt];if(E.hasOwnProperty(jt)&&qt!=null)switch(jt){case"checked":break;case"value":break;case"defaultValue":Mt=qt;default:pe.hasOwnProperty(jt)||Ui(o,d,jt,null,pe,qt)}}for(var Gt in pe){var jt=pe[Gt];if(qt=E[Gt],pe.hasOwnProperty(Gt)&&(jt!=null||qt!=null))switch(Gt){case"type":ot=jt;break;case"name":st=jt;break;case"checked":$t=jt;break;case"defaultChecked":Ht=jt;break;case"value":Tt=jt;break;case"defaultValue":Ct=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(r(137,d));break;default:jt!==qt&&Ui(o,d,Gt,jt,pe,qt)}}al(o,Tt,Ct,Mt,$t,Ht,ot,st);return;case"select":jt=Tt=Ct=Gt=null;for(ot in E)if(Mt=E[ot],E.hasOwnProperty(ot)&&Mt!=null)switch(ot){case"value":break;case"multiple":jt=Mt;default:pe.hasOwnProperty(ot)||Ui(o,d,ot,null,pe,Mt)}for(st in pe)if(ot=pe[st],Mt=E[st],pe.hasOwnProperty(st)&&(ot!=null||Mt!=null))switch(st){case"value":Gt=ot;break;case"defaultValue":Ct=ot;break;case"multiple":Tt=ot;default:ot!==Mt&&Ui(o,d,st,ot,pe,Mt)}d=Ct,E=Tt,pe=jt,Gt!=null?Cn(o,!!E,Gt,!1):!!pe!=!!E&&(d!=null?Cn(o,!!E,d,!0):Cn(o,!!E,E?[]:"",!1));return;case"textarea":jt=Gt=null;for(Ct in E)if(st=E[Ct],E.hasOwnProperty(Ct)&&st!=null&&!pe.hasOwnProperty(Ct))switch(Ct){case"value":break;case"children":break;default:Ui(o,d,Ct,null,pe,st)}for(Tt in pe)if(st=pe[Tt],ot=E[Tt],pe.hasOwnProperty(Tt)&&(st!=null||ot!=null))switch(Tt){case"value":Gt=st;break;case"defaultValue":jt=st;break;case"children":break;case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(91));break;default:st!==ot&&Ui(o,d,Tt,st,pe,ot)}dc(o,Gt,jt);return;case"option":for(var ci in E)if(Gt=E[ci],E.hasOwnProperty(ci)&&Gt!=null&&!pe.hasOwnProperty(ci))switch(ci){case"selected":o.selected=!1;break;default:Ui(o,d,ci,null,pe,Gt)}for(Mt in pe)if(Gt=pe[Mt],jt=E[Mt],pe.hasOwnProperty(Mt)&&Gt!==jt&&(Gt!=null||jt!=null))switch(Mt){case"selected":o.selected=Gt&&typeof Gt!="function"&&typeof Gt!="symbol";break;default:Ui(o,d,Mt,Gt,pe,jt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oi in E)Gt=E[oi],E.hasOwnProperty(oi)&&Gt!=null&&!pe.hasOwnProperty(oi)&&Ui(o,d,oi,null,pe,Gt);for($t in pe)if(Gt=pe[$t],jt=E[$t],pe.hasOwnProperty($t)&&Gt!==jt&&(Gt!=null||jt!=null))switch($t){case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(r(137,d));break;default:Ui(o,d,$t,Gt,pe,jt)}return;default:if(ll(d)){for(var Gi in E)Gt=E[Gi],E.hasOwnProperty(Gi)&&Gt!==void 0&&!pe.hasOwnProperty(Gi)&&Ku(o,d,Gi,void 0,pe,Gt);for(Ht in pe)Gt=pe[Ht],jt=E[Ht],!pe.hasOwnProperty(Ht)||Gt===jt||Gt===void 0&&jt===void 0||Ku(o,d,Ht,Gt,pe,jt);return}}for(var Nt in E)Gt=E[Nt],E.hasOwnProperty(Nt)&&Gt!=null&&!pe.hasOwnProperty(Nt)&&Ui(o,d,Nt,null,pe,Gt);for(qt in pe)Gt=pe[qt],jt=E[qt],!pe.hasOwnProperty(qt)||Gt===jt||Gt==null&&jt==null||Ui(o,d,qt,Gt,pe,jt)}var qu=null,Yu=null;function qo(o){return o.nodeType===9?o:o.ownerDocument}function vd(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ed(o,d){if(o===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&d==="foreignObject"?0:o}function Wu(o,d){return o==="textarea"||o==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Xu=null;function Tm(){var o=window.event;return o&&o.type==="popstate"?o===Xu?!1:(Xu=o,!0):(Xu=null,!1)}var _d=typeof setTimeout=="function"?setTimeout:void 0,bm=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,Am=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(o){return Sd.resolve(null).then(o).catch(Cm)}:_d;function Cm(o){setTimeout(function(){throw o})}function rn(o){return o==="head"}function xd(o,d){var E=d,pe=0,st=0;do{var ot=E.nextSibling;if(o.removeChild(E),ot&&ot.nodeType===8)if(E=ot.data,E==="/$"){if(0<pe&&8>pe){E=pe;var Tt=o.ownerDocument;if(E&1&&Ga(Tt.documentElement),E&2&&Ga(Tt.body),E&4)for(E=Tt.head,Ga(E),Tt=E.firstChild;Tt;){var Ct=Tt.nextSibling,Mt=Tt.nodeName;Tt[ir]||Mt==="SCRIPT"||Mt==="STYLE"||Mt==="LINK"&&Tt.rel.toLowerCase()==="stylesheet"||E.removeChild(Tt),Tt=Ct}}if(st===0){o.removeChild(ot),Xa(d);return}st--}else E==="$"||E==="$?"||E==="$!"?st++:pe=E.charCodeAt(0)-48;else pe=0;E=ot}while(E);Xa(d)}function Qu(o){var d=o.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var E=d;switch(d=d.nextSibling,E.nodeName){case"HTML":case"HEAD":case"BODY":Qu(E),qi(E);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(E.rel.toLowerCase()==="stylesheet")continue}o.removeChild(E)}}function Pm(o,d,E,pe){for(;o.nodeType===1;){var st=E;if(o.nodeName.toLowerCase()!==d.toLowerCase()){if(!pe&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(pe){if(!o[ir])switch(d){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(ot=o.getAttribute("rel"),ot==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(ot!==st.rel||o.getAttribute("href")!==(st.href==null||st.href===""?null:st.href)||o.getAttribute("crossorigin")!==(st.crossOrigin==null?null:st.crossOrigin)||o.getAttribute("title")!==(st.title==null?null:st.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(ot=o.getAttribute("src"),(ot!==(st.src==null?null:st.src)||o.getAttribute("type")!==(st.type==null?null:st.type)||o.getAttribute("crossorigin")!==(st.crossOrigin==null?null:st.crossOrigin))&&ot&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(d==="input"&&o.type==="hidden"){var ot=st.name==null?null:""+st.name;if(st.type==="hidden"&&o.getAttribute("name")===ot)return o}else return o;if(o=us(o.nextSibling),o===null)break}return null}function Rm(o,d,E){if(d==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!E||(o=us(o.nextSibling),o===null))return null;return o}function Zu(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function wm(o,d){var E=o.ownerDocument;if(o.data!=="$?"||E.readyState==="complete")d();else{var pe=function(){d(),E.removeEventListener("DOMContentLoaded",pe)};E.addEventListener("DOMContentLoaded",pe),o._reactRetry=pe}}function us(o){for(;o!=null;o=o.nextSibling){var d=o.nodeType;if(d===1||d===3)break;if(d===8){if(d=o.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return o}var Ju=null;function Td(o){o=o.previousSibling;for(var d=0;o;){if(o.nodeType===8){var E=o.data;if(E==="$"||E==="$!"||E==="$?"){if(d===0)return o;d--}else E==="/$"&&d++}o=o.previousSibling}return null}function bd(o,d,E){switch(d=qo(E),o){case"html":if(o=d.documentElement,!o)throw Error(r(452));return o;case"head":if(o=d.head,!o)throw Error(r(453));return o;case"body":if(o=d.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Ga(o){for(var d=o.attributes;d.length;)o.removeAttributeNode(d[0]);qi(o)}var ns=new Map,Ad=new Set;function Yo(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Fs=xt.d;xt.d={f:Lm,r:Mm,D:Dm,C:Im,L:km,m:Om,X:Nm,S:Fm,M:Bm};function Lm(){var o=Fs.f(),d=Vo();return o||d}function Mm(o){var d=Ci(o);d!==null&&d.tag===5&&d.type==="form"?jf(d):Fs.r(o)}var ia=typeof document>"u"?null:document;function Cd(o,d,E){var pe=ia;if(pe&&typeof d=="string"&&d){var st=Zr(d);st='link[rel="'+o+'"][href="'+st+'"]',typeof E=="string"&&(st+='[crossorigin="'+E+'"]'),Ad.has(st)||(Ad.add(st),o={rel:o,crossOrigin:E,href:d},pe.querySelector(st)===null&&(d=pe.createElement("link"),br(d,"link",o),Mi(d),pe.head.appendChild(d)))}}function Dm(o){Fs.D(o),Cd("dns-prefetch",o,null)}function Im(o,d){Fs.C(o,d),Cd("preconnect",o,d)}function km(o,d,E){Fs.L(o,d,E);var pe=ia;if(pe&&o&&d){var st='link[rel="preload"][as="'+Zr(d)+'"]';d==="image"&&E&&E.imageSrcSet?(st+='[imagesrcset="'+Zr(E.imageSrcSet)+'"]',typeof E.imageSizes=="string"&&(st+='[imagesizes="'+Zr(E.imageSizes)+'"]')):st+='[href="'+Zr(o)+'"]';var ot=st;switch(d){case"style":ot=ra(o);break;case"script":ot=sa(o)}ns.has(ot)||(o=p({rel:"preload",href:d==="image"&&E&&E.imageSrcSet?void 0:o,as:d},E),ns.set(ot,o),pe.querySelector(st)!==null||d==="style"&&pe.querySelector(ja(ot))||d==="script"&&pe.querySelector(za(ot))||(d=pe.createElement("link"),br(d,"link",o),Mi(d),pe.head.appendChild(d)))}}function Om(o,d){Fs.m(o,d);var E=ia;if(E&&o){var pe=d&&typeof d.as=="string"?d.as:"script",st='link[rel="modulepreload"][as="'+Zr(pe)+'"][href="'+Zr(o)+'"]',ot=st;switch(pe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ot=sa(o)}if(!ns.has(ot)&&(o=p({rel:"modulepreload",href:o},d),ns.set(ot,o),E.querySelector(st)===null)){switch(pe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(E.querySelector(za(ot)))return}pe=E.createElement("link"),br(pe,"link",o),Mi(pe),E.head.appendChild(pe)}}}function Fm(o,d,E){Fs.S(o,d,E);var pe=ia;if(pe&&o){var st=Fi(pe).hoistableStyles,ot=ra(o);d=d||"default";var Tt=st.get(ot);if(!Tt){var Ct={loading:0,preload:null};if(Tt=pe.querySelector(ja(ot)))Ct.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":d},E),(E=ns.get(ot))&&ec(o,E);var Mt=Tt=pe.createElement("link");Mi(Mt),br(Mt,"link",o),Mt._p=new Promise(function($t,Ht){Mt.onload=$t,Mt.onerror=Ht}),Mt.addEventListener("load",function(){Ct.loading|=1}),Mt.addEventListener("error",function(){Ct.loading|=2}),Ct.loading|=4,Wo(Tt,d,pe)}Tt={type:"stylesheet",instance:Tt,count:1,state:Ct},st.set(ot,Tt)}}}function Nm(o,d){Fs.X(o,d);var E=ia;if(E&&o){var pe=Fi(E).hoistableScripts,st=sa(o),ot=pe.get(st);ot||(ot=E.querySelector(za(st)),ot||(o=p({src:o,async:!0},d),(d=ns.get(st))&&tc(o,d),ot=E.createElement("script"),Mi(ot),br(ot,"link",o),E.head.appendChild(ot)),ot={type:"script",instance:ot,count:1,state:null},pe.set(st,ot))}}function Bm(o,d){Fs.M(o,d);var E=ia;if(E&&o){var pe=Fi(E).hoistableScripts,st=sa(o),ot=pe.get(st);ot||(ot=E.querySelector(za(st)),ot||(o=p({src:o,async:!0,type:"module"},d),(d=ns.get(st))&&tc(o,d),ot=E.createElement("script"),Mi(ot),br(ot,"link",o),E.head.appendChild(ot)),ot={type:"script",instance:ot,count:1,state:null},pe.set(st,ot))}}function Pd(o,d,E,pe){var st=(st=Ut.current)?Yo(st):null;if(!st)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof E.precedence=="string"&&typeof E.href=="string"?(d=ra(E.href),E=Fi(st).hoistableStyles,pe=E.get(d),pe||(pe={type:"style",instance:null,count:0,state:null},E.set(d,pe)),pe):{type:"void",instance:null,count:0,state:null};case"link":if(E.rel==="stylesheet"&&typeof E.href=="string"&&typeof E.precedence=="string"){o=ra(E.href);var ot=Fi(st).hoistableStyles,Tt=ot.get(o);if(Tt||(st=st.ownerDocument||st,Tt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ot.set(o,Tt),(ot=st.querySelector(ja(o)))&&!ot._p&&(Tt.instance=ot,Tt.state.loading=5),ns.has(o)||(E={rel:"preload",as:"style",href:E.href,crossOrigin:E.crossOrigin,integrity:E.integrity,media:E.media,hrefLang:E.hrefLang,referrerPolicy:E.referrerPolicy},ns.set(o,E),ot||Vm(st,o,E,Tt.state))),d&&pe===null)throw Error(r(528,""));return Tt}if(d&&pe!==null)throw Error(r(529,""));return null;case"script":return d=E.async,E=E.src,typeof E=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=sa(E),E=Fi(st).hoistableScripts,pe=E.get(d),pe||(pe={type:"script",instance:null,count:0,state:null},E.set(d,pe)),pe):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function ra(o){return'href="'+Zr(o)+'"'}function ja(o){return'link[rel="stylesheet"]['+o+"]"}function Rd(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function Vm(o,d,E,pe){o.querySelector('link[rel="preload"][as="style"]['+d+"]")?pe.loading=1:(d=o.createElement("link"),pe.preload=d,d.addEventListener("load",function(){return pe.loading|=1}),d.addEventListener("error",function(){return pe.loading|=2}),br(d,"link",E),Mi(d),o.head.appendChild(d))}function sa(o){return'[src="'+Zr(o)+'"]'}function za(o){return"script[async]"+o}function wd(o,d,E){if(d.count++,d.instance===null)switch(d.type){case"style":var pe=o.querySelector('style[data-href~="'+Zr(E.href)+'"]');if(pe)return d.instance=pe,Mi(pe),pe;var st=p({},E,{"data-href":E.href,"data-precedence":E.precedence,href:null,precedence:null});return pe=(o.ownerDocument||o).createElement("style"),Mi(pe),br(pe,"style",st),Wo(pe,E.precedence,o),d.instance=pe;case"stylesheet":st=ra(E.href);var ot=o.querySelector(ja(st));if(ot)return d.state.loading|=4,d.instance=ot,Mi(ot),ot;pe=Rd(E),(st=ns.get(st))&&ec(pe,st),ot=(o.ownerDocument||o).createElement("link"),Mi(ot);var Tt=ot;return Tt._p=new Promise(function(Ct,Mt){Tt.onload=Ct,Tt.onerror=Mt}),br(ot,"link",pe),d.state.loading|=4,Wo(ot,E.precedence,o),d.instance=ot;case"script":return ot=sa(E.src),(st=o.querySelector(za(ot)))?(d.instance=st,Mi(st),st):(pe=E,(st=ns.get(ot))&&(pe=p({},E),tc(pe,st)),o=o.ownerDocument||o,st=o.createElement("script"),Mi(st),br(st,"link",pe),o.head.appendChild(st),d.instance=st);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(pe=d.instance,d.state.loading|=4,Wo(pe,E.precedence,o));return d.instance}function Wo(o,d,E){for(var pe=E.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),st=pe.length?pe[pe.length-1]:null,ot=st,Tt=0;Tt<pe.length;Tt++){var Ct=pe[Tt];if(Ct.dataset.precedence===d)ot=Ct;else if(ot!==st)break}ot?ot.parentNode.insertBefore(o,ot.nextSibling):(d=E.nodeType===9?E.head:E,d.insertBefore(o,d.firstChild))}function ec(o,d){o.crossOrigin==null&&(o.crossOrigin=d.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=d.referrerPolicy),o.title==null&&(o.title=d.title)}function tc(o,d){o.crossOrigin==null&&(o.crossOrigin=d.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=d.referrerPolicy),o.integrity==null&&(o.integrity=d.integrity)}var Xo=null;function Ld(o,d,E){if(Xo===null){var pe=new Map,st=Xo=new Map;st.set(E,pe)}else st=Xo,pe=st.get(E),pe||(pe=new Map,st.set(E,pe));if(pe.has(o))return pe;for(pe.set(o,null),E=E.getElementsByTagName(o),st=0;st<E.length;st++){var ot=E[st];if(!(ot[ir]||ot[Wt]||o==="link"&&ot.getAttribute("rel")==="stylesheet")&&ot.namespaceURI!=="http://www.w3.org/2000/svg"){var Tt=ot.getAttribute(d)||"";Tt=o+Tt;var Ct=pe.get(Tt);Ct?Ct.push(ot):pe.set(Tt,[ot])}}return pe}function Md(o,d,E){o=o.ownerDocument||o,o.head.insertBefore(E,d==="title"?o.querySelector("head > title"):null)}function $m(o,d,E){if(E===1||d.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return o=d.disabled,typeof d.precedence=="string"&&o==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function Dd(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Ha=null;function Um(){}function Gm(o,d,E){if(Ha===null)throw Error(r(475));var pe=Ha;if(d.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var st=ra(E.href),ot=o.querySelector(ja(st));if(ot){o=ot._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(pe.count++,pe=Qo.bind(pe),o.then(pe,pe)),d.state.loading|=4,d.instance=ot,Mi(ot);return}ot=o.ownerDocument||o,E=Rd(E),(st=ns.get(st))&&ec(E,st),ot=ot.createElement("link"),Mi(ot);var Tt=ot;Tt._p=new Promise(function(Ct,Mt){Tt.onload=Ct,Tt.onerror=Mt}),br(ot,"link",E),d.instance=ot}pe.stylesheets===null&&(pe.stylesheets=new Map),pe.stylesheets.set(d,o),(o=d.state.preload)&&(d.state.loading&3)===0&&(pe.count++,d=Qo.bind(pe),o.addEventListener("load",d),o.addEventListener("error",d))}}function jm(){if(Ha===null)throw Error(r(475));var o=Ha;return o.stylesheets&&o.count===0&&ic(o,o.stylesheets),0<o.count?function(d){var E=setTimeout(function(){if(o.stylesheets&&ic(o,o.stylesheets),o.unsuspend){var pe=o.unsuspend;o.unsuspend=null,pe()}},6e4);return o.unsuspend=d,function(){o.unsuspend=null,clearTimeout(E)}}:null}function Qo(){if(this.count--,this.count===0){if(this.stylesheets)ic(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Zo=null;function ic(o,d){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Zo=new Map,d.forEach(zm,o),Zo=null,Qo.call(o))}function zm(o,d){if(!(d.state.loading&4)){var E=Zo.get(o);if(E)var pe=E.get(null);else{E=new Map,Zo.set(o,E);for(var st=o.querySelectorAll("link[data-precedence],style[data-precedence]"),ot=0;ot<st.length;ot++){var Tt=st[ot];(Tt.nodeName==="LINK"||Tt.getAttribute("media")!=="not all")&&(E.set(Tt.dataset.precedence,Tt),pe=Tt)}pe&&E.set(null,pe)}st=d.instance,Tt=st.getAttribute("data-precedence"),ot=E.get(Tt)||pe,ot===pe&&E.set(null,st),E.set(Tt,st),this.count++,pe=Qo.bind(this),st.addEventListener("load",pe),st.addEventListener("error",pe),ot?ot.parentNode.insertBefore(st,ot.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(st,o.firstChild)),d.state.loading|=4}}var Ka={$$typeof:Be,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function Hm(o,d,E,pe,st,ot,Tt,Ct){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.hiddenUpdates=Cr(null),this.identifierPrefix=pe,this.onUncaughtError=st,this.onCaughtError=ot,this.onRecoverableError=Tt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ct,this.incompleteTransitions=new Map}function Id(o,d,E,pe,st,ot,Tt,Ct,Mt,$t,Ht,qt){return o=new Hm(o,d,E,Tt,Ct,Mt,$t,qt),d=1,ot===!0&&(d|=24),ot=Gr(3,null,null,d),o.current=ot,ot.stateNode=o,d=Nl(),d.refCount++,o.pooledCache=d,d.refCount++,ot.memoizedState={element:pe,isDehydrated:E,cache:d},Ul(ot),o}function kd(o){return o?(o=On,o):On}function Od(o,d,E,pe,st,ot){st=kd(st),pe.context===null?pe.context=st:pe.pendingContext=st,pe=js(d),pe.payload={element:E},ot=ot===void 0?null:ot,ot!==null&&(pe.callback=ot),E=zs(o,pe,d),E!==null&&(qr(E,o,d),xa(E,o,d))}function Fd(o,d){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var E=o.retryLane;o.retryLane=E!==0&&E<d?E:d}}function rc(o,d){Fd(o,d),(o=o.alternate)&&Fd(o,d)}function Nd(o){if(o.tag===13){var d=kn(o,67108864);d!==null&&qr(d,o,67108864),rc(o,67108864)}}var Jo=!0;function Km(o,d,E,pe){var st=vt.T;vt.T=null;var ot=xt.p;try{xt.p=2,sc(o,d,E,pe)}finally{xt.p=ot,vt.T=st}}function qm(o,d,E,pe){var st=vt.T;vt.T=null;var ot=xt.p;try{xt.p=8,sc(o,d,E,pe)}finally{xt.p=ot,vt.T=st}}function sc(o,d,E,pe){if(Jo){var st=nc(pe);if(st===null)Hu(o,d,pe,el,E),Vd(o,pe);else if(Wm(st,o,d,E,pe))pe.stopPropagation();else if(Vd(o,pe),d&4&&-1<Ym.indexOf(o)){for(;st!==null;){var ot=Ci(st);if(ot!==null)switch(ot.tag){case 3:if(ot=ot.stateNode,ot.current.memoizedState.isDehydrated){var Tt=Lr(ot.pendingLanes);if(Tt!==0){var Ct=ot;for(Ct.pendingLanes|=2,Ct.entangledLanes|=2;Tt;){var Mt=1<<31-Ai(Tt);Ct.entanglements[1]|=Mt,Tt&=~Mt}gs(ot),(Ni&6)===0&&(No=Bt()+500,Va(0))}}break;case 13:Ct=kn(ot,2),Ct!==null&&qr(Ct,ot,2),Vo(),rc(ot,2)}if(ot=nc(pe),ot===null&&Hu(o,d,pe,el,E),ot===st)break;st=ot}st!==null&&pe.stopPropagation()}else Hu(o,d,pe,null,E)}}function nc(o){return o=cl(o),ac(o)}var el=null;function ac(o){if(el=null,o=Ii(o),o!==null){var d=n(o);if(d===null)o=null;else{var E=d.tag;if(E===13){if(o=a(d),o!==null)return o;o=null}else if(E===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;o=null}else d!==o&&(o=null)}}return el=o,null}function Bd(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vi()){case Oi:return 2;case Ri:return 8;case ui:case Vi:return 32;case Zi:return 268435456;default:return 32}default:return 32}}var oc=!1,sn=null,nn=null,an=null,qa=new Map,Ya=new Map,on=[],Ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vd(o,d){switch(o){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":qa.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(d.pointerId)}}function Wa(o,d,E,pe,st,ot){return o===null||o.nativeEvent!==ot?(o={blockedOn:d,domEventName:E,eventSystemFlags:pe,nativeEvent:ot,targetContainers:[st]},d!==null&&(d=Ci(d),d!==null&&Nd(d)),o):(o.eventSystemFlags|=pe,d=o.targetContainers,st!==null&&d.indexOf(st)===-1&&d.push(st),o)}function Wm(o,d,E,pe,st){switch(d){case"focusin":return sn=Wa(sn,o,d,E,pe,st),!0;case"dragenter":return nn=Wa(nn,o,d,E,pe,st),!0;case"mouseover":return an=Wa(an,o,d,E,pe,st),!0;case"pointerover":var ot=st.pointerId;return qa.set(ot,Wa(qa.get(ot)||null,o,d,E,pe,st)),!0;case"gotpointercapture":return ot=st.pointerId,Ya.set(ot,Wa(Ya.get(ot)||null,o,d,E,pe,st)),!0}return!1}function $d(o){var d=Ii(o.target);if(d!==null){var E=n(d);if(E!==null){if(d=E.tag,d===13){if(d=a(E),d!==null){o.blockedOn=d,ai(o.priority,function(){if(E.tag===13){var pe=Kr();pe=Br(pe);var st=kn(E,pe);st!==null&&qr(st,E,pe),rc(E,pe)}});return}}else if(d===3&&E.stateNode.current.memoizedState.isDehydrated){o.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}o.blockedOn=null}function tl(o){if(o.blockedOn!==null)return!1;for(var d=o.targetContainers;0<d.length;){var E=nc(o.nativeEvent);if(E===null){E=o.nativeEvent;var pe=new E.constructor(E.type,E);ul=pe,E.target.dispatchEvent(pe),ul=null}else return d=Ci(E),d!==null&&Nd(d),o.blockedOn=E,!1;d.shift()}return!0}function Ud(o,d,E){tl(o)&&E.delete(d)}function Xm(){oc=!1,sn!==null&&tl(sn)&&(sn=null),nn!==null&&tl(nn)&&(nn=null),an!==null&&tl(an)&&(an=null),qa.forEach(Ud),Ya.forEach(Ud)}function il(o,d){o.blockedOn===d&&(o.blockedOn=null,oc||(oc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Xm)))}var rl=null;function Gd(o){rl!==o&&(rl=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){rl===o&&(rl=null);for(var d=0;d<o.length;d+=3){var E=o[d],pe=o[d+1],st=o[d+2];if(typeof pe!="function"){if(ac(pe||E)===null)continue;break}var ot=Ci(E);ot!==null&&(o.splice(d,3),d-=3,au(ot,{pending:!0,data:st,method:E.method,action:pe},pe,st))}}))}function Xa(o){function d(Mt){return il(Mt,o)}sn!==null&&il(sn,o),nn!==null&&il(nn,o),an!==null&&il(an,o),qa.forEach(d),Ya.forEach(d);for(var E=0;E<on.length;E++){var pe=on[E];pe.blockedOn===o&&(pe.blockedOn=null)}for(;0<on.length&&(E=on[0],E.blockedOn===null);)$d(E),E.blockedOn===null&&on.shift();if(E=(o.ownerDocument||o).$$reactFormReplay,E!=null)for(pe=0;pe<E.length;pe+=3){var st=E[pe],ot=E[pe+1],Tt=st[ii]||null;if(typeof ot=="function")Tt||Gd(E);else if(Tt){var Ct=null;if(ot&&ot.hasAttribute("formAction")){if(st=ot,Tt=ot[ii]||null)Ct=Tt.formAction;else if(ac(st)!==null)continue}else Ct=Tt.action;typeof Ct=="function"?E[pe+1]=Ct:(E.splice(pe,3),pe-=3),Gd(E)}}}function lc(o){this._internalRoot=o}sl.prototype.render=lc.prototype.render=function(o){var d=this._internalRoot;if(d===null)throw Error(r(409));var E=d.current,pe=Kr();Od(E,pe,o,d,null,null)},sl.prototype.unmount=lc.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var d=o.containerInfo;Od(o.current,2,null,o,null,null),Vo(),d[ti]=null}};function sl(o){this._internalRoot=o}sl.prototype.unstable_scheduleHydration=function(o){if(o){var d=di();o={blockedOn:null,target:o,priority:d};for(var E=0;E<on.length&&d!==0&&d<on[E].priority;E++);on.splice(E,0,o),E===0&&$d(o)}};var jd=e.version;if(jd!=="19.1.1")throw Error(r(527,jd,"19.1.1"));xt.findDOMNode=function(o){var d=o._reactInternals;if(d===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=u(d),o=o!==null?c(o):null,o=o===null?null:o.stateNode,o};var Qm={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:vt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Li=nl.inject(Qm),hi=nl}catch{}}return reactDomClient_production.createRoot=function(o,d){if(!s(o))throw Error(r(299));var E=!1,pe="",st=rh,ot=sh,Tt=nh,Ct=null;return d!=null&&(d.unstable_strictMode===!0&&(E=!0),d.identifierPrefix!==void 0&&(pe=d.identifierPrefix),d.onUncaughtError!==void 0&&(st=d.onUncaughtError),d.onCaughtError!==void 0&&(ot=d.onCaughtError),d.onRecoverableError!==void 0&&(Tt=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Ct=d.unstable_transitionCallbacks)),d=Id(o,1,!1,null,null,E,pe,st,ot,Tt,Ct,null),o[ti]=d.current,zu(o),new lc(d)},reactDomClient_production.hydrateRoot=function(o,d,E){if(!s(o))throw Error(r(299));var pe=!1,st="",ot=rh,Tt=sh,Ct=nh,Mt=null,$t=null;return E!=null&&(E.unstable_strictMode===!0&&(pe=!0),E.identifierPrefix!==void 0&&(st=E.identifierPrefix),E.onUncaughtError!==void 0&&(ot=E.onUncaughtError),E.onCaughtError!==void 0&&(Tt=E.onCaughtError),E.onRecoverableError!==void 0&&(Ct=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(Mt=E.unstable_transitionCallbacks),E.formState!==void 0&&($t=E.formState)),d=Id(o,1,!0,d,E??null,pe,st,ot,Tt,Ct,Mt,$t),d.context=kd(null),E=d.current,pe=Kr(),pe=Br(pe),st=js(pe),st.callback=null,zs(E,st,pe),E=pe,d.current.lanes=E,_r(d,E),gs(d),o[ti]=d.current,zu(o),new sl(d)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(i={}){function e(r,s){let{pathname:n,search:a,hash:l}=r.location;return createLocation("",{pathname:n,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:createPath(s)}return getUrlBasedHistory(e,t,null,i)}function invariant$1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:t,key:e&&e.key||r||createKey()}}function createPath({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function parsePath(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,t,r={}){let{window:s=document.defaultView,v5Compat:n=!1}=r,a=s.history,l="POP",u=null,c=p();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function p(){return(a.state||{idx:null}).idx}function b(){l="POP";let Ye=p(),Le=Ye==null?null:Ye-c;c=Ye,u&&u({action:l,location:me.location,delta:Le})}function P(Ye,Le){l="PUSH";let tt=createLocation(me.location,Ye,Le);c=p()+1;let Be=getHistoryState(tt,c),nt=me.createHref(tt);try{a.pushState(Be,"",nt)}catch(ft){if(ft instanceof DOMException&&ft.name==="DataCloneError")throw ft;s.location.assign(nt)}n&&u&&u({action:l,location:me.location,delta:1})}function N(Ye,Le){l="REPLACE";let tt=createLocation(me.location,Ye,Le);c=p();let Be=getHistoryState(tt,c),nt=me.createHref(tt);a.replaceState(Be,"",nt),n&&u&&u({action:l,location:me.location,delta:0})}function de(Ye){return createBrowserURLImpl(Ye)}let me={get action(){return l},get location(){return i(s,a)},listen(Ye){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,b),u=Ye,()=>{s.removeEventListener(PopStateEventType,b),u=null}},createHref(Ye){return e(s,Ye)},createURL:de,encodeLocation(Ye){let Le=de(Ye);return{pathname:Le.pathname,search:Le.search,hash:Le.hash}},push:P,replace:N,go(Ye){return a.go(Ye)}};return me}function createBrowserURLImpl(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:createPath(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function matchRoutes(i,e,t="/"){return matchRoutesImpl(i,e,t,!1)}function matchRoutesImpl(i,e,t,r){let s=typeof e=="string"?parsePath(e):e,n=stripBasename(s.pathname||"/",t);if(n==null)return null;let a=flattenRoutes(i);rankRouteBranches(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=decodePath(n);l=matchRouteBranch(a[u],c,r)}return l}function flattenRoutes(i,e=[],t=[],r=""){let s=(n,a,l)=>{let u={relativePath:l===void 0?n.path||"":l,caseSensitive:n.caseSensitive===!0,childrenIndex:a,route:n};u.relativePath.startsWith("/")&&(invariant$1(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let c=joinPaths([r,u.relativePath]),p=t.concat(u);n.children&&n.children.length>0&&(invariant$1(n.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),flattenRoutes(n.children,e,p,c)),!(n.path==null&&!n.index)&&e.push({path:c,score:computeScore(c,n.index),routesMeta:p})};return i.forEach((n,a)=>{if(n.path===""||!n.path?.includes("?"))s(n,a);else for(let l of explodeOptionalSegments(n.path))s(n,a,l)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),n=t.replace(/\?$/,"");if(r.length===0)return s?[n,""]:[n];let a=explodeOptionalSegments(r.join("/")),l=[];return l.push(...a.map(u=>u===""?n:[n,u].join("/"))),s&&l.push(...a),l.map(u=>i.startsWith("/")&&u===""?"/":u)}function rankRouteBranches(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let t=i.split("/"),r=t.length;return t.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),t.filter(s=>!isSplat(s)).reduce((s,n)=>s+(paramRe.test(n)?dynamicSegmentValue:n===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((r,s)=>r===e[s])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e,t=!1){let{routesMeta:r}=i,s={},n="/",a=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,p=n==="/"?e:e.slice(n.length)||"/",b=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},p),P=u.route;if(!b&&c&&t&&!r[r.length-1].route.index&&(b=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!b)return null;Object.assign(s,b.params),a.push({params:s,pathname:joinPaths([n,b.pathname]),pathnameBase:normalizePathname(joinPaths([n,b.pathnameBase])),route:P}),b.pathnameBase!=="/"&&(n=joinPaths([n,b.pathnameBase]))}return a}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=compilePath(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let n=s[0],a=n.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,{paramName:p,isOptional:b},P)=>{if(p==="*"){let de=l[P]||"";a=n.slice(0,n.length-de.length).replace(/(.)\/+$/,"$1")}const N=l[P];return b&&!N?c[p]=void 0:c[p]=(N||"").replace(/%2F/g,"/"),c},{}),pathname:n,pathnameBase:a,pattern:i}}function compilePath(i,e=!1,t=!0){warning(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function decodePath(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function resolvePath(i,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof i=="string"?parsePath(i):i;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(r),hash:normalizeHash(s)}}function resolvePathname(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i){let e=getPathContributingMatches(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function resolveTo(i,e,t,r=!1){let s;typeof i=="string"?s=parsePath(i):(s={...i},invariant$1(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant$1(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant$1(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let n=i===""||s.pathname==="",a=n?"/":s.pathname,l;if(a==null)l=t;else{let b=e.length-1;if(!r&&a.startsWith("..")){let P=a.split("/");for(;P[0]==="..";)P.shift(),b-=1;s.pathname=P.join("/")}l=b>=0?e[b]:"/"}let u=resolvePath(s,l),c=a&&a!=="/"&&a.endsWith("/"),p=(n||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(c||p)&&(u.pathname+="/"),u}var joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(i,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=reactExports.useContext(NavigationContext),{hash:s,pathname:n,search:a}=useResolvedPath(i,{relative:e}),l=n;return t!=="/"&&(l=n==="/"?t:joinPaths([t,n])),r.createHref({pathname:l,search:a,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$2(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let i=reactExports.useContext(DataRouterContext),{basename:e,navigator:t}=reactExports.useContext(NavigationContext),{matches:r}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),n=JSON.stringify(getResolveToMatches(r)),a=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{a.current=!0}),reactExports.useCallback((u,c={})=>{if(warning(a.current,navigateEffectWarning),!a.current)return;if(typeof u=="number"){t.go(u);return}let p=resolveTo(u,JSON.parse(n),s,c.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:joinPaths([e,p.pathname])),(c.replace?t.replace:t.push)(p,c.state,c)},[e,t,n,s,i])}var OutletContext=reactExports.createContext(null);function useOutlet(i){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:i},e)}function useResolvedPath(i,{relative:e}={}){let{matches:t}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),s=JSON.stringify(getResolveToMatches(t));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(s),r,e==="path"),[i,s,r,e])}function useRoutes(i,e){return useRoutesImpl(i)}function useRoutesImpl(i,e,t,r){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),a=n[n.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",p=a&&a.route;{let Le=p&&p.path||"";warningOnce(u,!p||Le.endsWith("*")||Le.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${Le}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Le}"> to <Route path="${Le==="/"?"*":`${Le}/*`}">.`)}let b=useLocation(),P;P=b;let N=P.pathname||"/",de=N;if(c!=="/"){let Le=c.replace(/^\//,"").split("/");de="/"+N.replace(/^\//,"").split("/").slice(Le.length).join("/")}let me=matchRoutes(i,{pathname:de});return warning(p||me!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),warning(me==null||me[me.length-1].route.element!==void 0||me[me.length-1].route.Component!==void 0||me[me.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(me&&me.map(Le=>Object.assign({},Le,{params:Object.assign({},l,Le.params),pathname:joinPaths([c,s.encodeLocation?s.encodeLocation(Le.pathname).pathname:Le.pathname]),pathnameBase:Le.pathnameBase==="/"?c:joinPaths([c,s.encodeLocation?s.encodeLocation(Le.pathnameBase).pathname:Le.pathnameBase])})),n,t,r)}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},n={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:n},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:n},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:s},t):null,a)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:i,match:e,children:t}){let r=reactExports.useContext(DataRouterContext);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:i},t)}function _renderMatches(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,n=t?.errors;if(n!=null){let u=s.findIndex(c=>c.route.id&&n?.[c.route.id]!==void 0);invariant$1(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(n).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(t)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:p,errors:b}=t,P=c.route.loader&&!p.hasOwnProperty(c.route.id)&&(!b||b[c.route.id]===void 0);if(c.route.lazy||P){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,p)=>{let b,P=!1,N=null,de=null;t&&(b=n&&c.route.id?n[c.route.id]:void 0,N=c.route.errorElement||defaultErrorElement,a&&(l<0&&p===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,de=null):l===p&&(P=!0,de=c.route.hydrateFallbackElement||null)));let me=e.concat(s.slice(0,p+1)),Ye=()=>{let Le;return b?Le=N:P?Le=de:c.route.Component?Le=reactExports.createElement(c.route.Component,null):c.route.element?Le=c.route.element:Le=u,reactExports.createElement(RenderedRoute,{match:c,routeContext:{outlet:u,matches:me,isDataRoute:t!=null},children:Le})};return t&&(c.route.ErrorBoundary||c.route.errorElement||p===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:N,error:b,children:Ye(),routeContext:{outlet:null,matches:me,isDataRoute:!0}}):Ye()},null)}function getDataRouterConsoleError(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(i){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(i)),e}function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(i)),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(i)),e}function useCurrentRouteId(i){let e=useRouteContext(i),t=e.matches[e.matches.length-1];return invariant$1(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let i=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),t=useCurrentRouteId("useRouteError");return i!==void 0?i:e.errors?.[t]}function useNavigateStable(){let{router:i}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{t.current=!0}),reactExports.useCallback(async(s,n={})=>{warning(t.current,navigateEffectWarning),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...n}))},[i,e])}var alreadyWarned={};function warningOnce(i,e,t){!e&&!alreadyWarned[i]&&(alreadyWarned[i]=!0,warning(!1,t))}reactExports.memo(DataRoutes);function DataRoutes({routes:i,future:e,state:t}){return useRoutesImpl(i,void 0,t,e)}function Navigate({to:i,replace:e,state:t,relative:r}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=reactExports.useContext(NavigationContext);warning(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:n}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),l=useNavigate(),u=resolveTo(i,getResolveToMatches(n),a,r==="path"),c=JSON.stringify(u);return reactExports.useEffect(()=>{l(JSON.parse(c),{replace:e,state:t,relative:r})},[l,c,r,e,t]),null}function Outlet(i){return useOutlet(i.context)}function Router$1({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:n=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),l=reactExports.useMemo(()=>({basename:a,navigator:s,static:n,future:{}}),[a,s,n]);typeof t=="string"&&(t=parsePath(t));let{pathname:u="/",search:c="",hash:p="",state:b=null,key:P="default"}=t,N=reactExports.useMemo(()=>{let de=stripBasename(u,a);return de==null?null:{location:{pathname:de,search:c,hash:p,state:b,key:P},navigationType:r}},[a,u,c,p,b,P,r]);return warning(N!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${p}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:reactExports.createElement(NavigationContext.Provider,{value:l},reactExports.createElement(LocationContext.Provider,{children:e,value:N}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(i){return i!=null&&typeof i.tagName=="string"}function isButtonElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="button"}function isFormElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="form"}function isInputElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="input"}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,e){return i.button===0&&(!e||e==="_self")&&!isModifiedEvent(i)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(i){return i!=null&&!supportedFormEncTypes.has(i)?(warning(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):i}function getFormSubmissionInfo(i,e){let t,r,s,n,a;if(isFormElement(i)){let l=i.getAttribute("action");r=l?stripBasename(l,e):null,t=i.getAttribute("method")||defaultMethod,s=getFormEncType(i.getAttribute("enctype"))||defaultEncType,n=new FormData(i)}else if(isButtonElement(i)||isInputElement(i)&&(i.type==="submit"||i.type==="image")){let l=i.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=i.getAttribute("formaction")||l.getAttribute("action");if(r=u?stripBasename(u,e):null,t=i.getAttribute("formmethod")||l.getAttribute("method")||defaultMethod,s=getFormEncType(i.getAttribute("formenctype"))||getFormEncType(l.getAttribute("enctype"))||defaultEncType,n=new FormData(l,i),!isFormDataSubmitterSupported()){let{name:c,type:p,value:b}=i;if(p==="image"){let P=c?`${c}.`:"";n.append(`${P}x`,"0"),n.append(`${P}y`,"0")}else c&&n.append(c,b)}}else{if(isHtmlElement(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=defaultMethod,r=null,s=defaultEncType,a=i}return n&&s==="text/plain"&&(a=n,n=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:n,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function singleFetchUrl(i,e,t){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&stripBasename(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function loadRouteModule(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function getKeyedPrefetchLinks(i,e,t){let r=await Promise.all(i.map(async s=>{let n=e.routes[s.route.id];if(n){let a=await loadRouteModule(n,t);return a.links?a.links():[]}return[]}));return dedupeLinkDescriptors(r.flat(1).filter(isHtmlLinkDescriptor).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function getNewMatchesForLinks(i,e,t,r,s,n){let a=(u,c)=>t[c]?u.route.id!==t[c].route.id:!0,l=(u,c)=>t[c].pathname!==u.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==u.params["*"];return n==="assets"?e.filter((u,c)=>a(u,c)||l(u,c)):n==="data"?e.filter((u,c)=>{let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(a(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let b=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function getModuleLinkHrefs(i,e,{includeHydrateFallback:t}={}){return dedupeHrefs(i.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let n=[s.module];return s.clientActionModule&&(n=n.concat(s.clientActionModule)),s.clientLoaderModule&&(n=n.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(n=n.concat(s.hydrateFallbackModule)),s.imports&&(n=n.concat(s.imports)),n}).flat(1))}function dedupeHrefs(i){return[...new Set(i)]}function sortKeys(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function dedupeLinkDescriptors(i,e){let t=new Set;return new Set(e),i.reduce((r,s)=>{let n=JSON.stringify(sortKeys(s));return t.has(n)||(t.add(n),r.push({key:n,link:s})),r},[])}function useDataRouterContext2(){let i=reactExports.useContext(DataRouterContext);return invariant2(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function useDataRouterStateContext(){let i=reactExports.useContext(DataRouterStateContext);return invariant2(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let i=reactExports.useContext(FrameworkContext);return invariant2(i,"You must render this element inside a <HydratedRouter> element"),i}function usePrefetchBehavior(i,e){let t=reactExports.useContext(FrameworkContext),[r,s]=reactExports.useState(!1),[n,a]=reactExports.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:p,onTouchStart:b}=e,P=reactExports.useRef(null);reactExports.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let me=Le=>{Le.forEach(tt=>{a(tt.isIntersecting)})},Ye=new IntersectionObserver(me,{threshold:.5});return P.current&&Ye.observe(P.current),()=>{Ye.disconnect()}}},[i]),reactExports.useEffect(()=>{if(r){let me=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(me)}}},[r]);let N=()=>{s(!0)},de=()=>{s(!1),a(!1)};return t?i!=="intent"?[n,P,{}]:[n,P,{onFocus:composeEventHandlers(l,N),onBlur:composeEventHandlers(u,de),onMouseEnter:composeEventHandlers(c,N),onMouseLeave:composeEventHandlers(p,de),onTouchStart:composeEventHandlers(b,N)}]:[!1,P,{}]}function composeEventHandlers(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function PrefetchPageLinks({page:i,...e}){let{router:t}=useDataRouterContext2(),r=reactExports.useMemo(()=>matchRoutes(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?reactExports.createElement(PrefetchPageLinksImpl,{page:i,matches:r,...e}):null}function useKeyedPrefetchLinks(i){let{manifest:e,routeModules:t}=useFrameworkContext(),[r,s]=reactExports.useState([]);return reactExports.useEffect(()=>{let n=!1;return getKeyedPrefetchLinks(i,e,t).then(a=>{n||s(a)}),()=>{n=!0}},[i,e,t]),r}function PrefetchPageLinksImpl({page:i,matches:e,...t}){let r=useLocation(),{manifest:s,routeModules:n}=useFrameworkContext(),{basename:a}=useDataRouterContext2(),{loaderData:l,matches:u}=useDataRouterStateContext(),c=reactExports.useMemo(()=>getNewMatchesForLinks(i,e,u,s,r,"data"),[i,e,u,s,r]),p=reactExports.useMemo(()=>getNewMatchesForLinks(i,e,u,s,r,"assets"),[i,e,u,s,r]),b=reactExports.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let de=new Set,me=!1;if(e.forEach(Le=>{let tt=s.routes[Le.route.id];!tt||!tt.hasLoader||(!c.some(Be=>Be.route.id===Le.route.id)&&Le.route.id in l&&n[Le.route.id]?.shouldRevalidate||tt.hasClientLoader?me=!0:de.add(Le.route.id))}),de.size===0)return[];let Ye=singleFetchUrl(i,a,"data");return me&&de.size>0&&Ye.searchParams.set("_routes",e.filter(Le=>de.has(Le.route.id)).map(Le=>Le.route.id).join(",")),[Ye.pathname+Ye.search]},[a,l,r,s,c,e,i,n]),P=reactExports.useMemo(()=>getModuleLinkHrefs(p,s),[p,s]),N=useKeyedPrefetchLinks(p);return reactExports.createElement(reactExports.Fragment,null,b.map(de=>reactExports.createElement("link",{key:de,rel:"prefetch",as:"fetch",href:de,...t})),P.map(de=>reactExports.createElement("link",{key:de,rel:"modulepreload",href:de,...t})),N.map(({key:de,link:me})=>reactExports.createElement("link",{key:de,nonce:t.nonce,...me})))}function mergeRefs(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.8.0")}catch{}function BrowserRouter({basename:i,children:e,window:t}){let r=reactExports.useRef();r.current==null&&(r.current=createBrowserHistory({window:t,v5Compat:!0}));let s=r.current,[n,a]=reactExports.useState({action:s.action,location:s.location}),l=reactExports.useCallback(u=>{reactExports.startTransition(()=>a(u))},[a]);return reactExports.useLayoutEffect(()=>s.listen(l),[s,l]),reactExports.createElement(Router$1,{basename:i,children:e,location:n.location,navigationType:n.action,navigator:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:n,replace:a,state:l,target:u,to:c,preventScrollReset:p,viewTransition:b,...P},N){let{basename:de}=reactExports.useContext(NavigationContext),me=typeof c=="string"&&ABSOLUTE_URL_REGEX2.test(c),Ye,Le=!1;if(typeof c=="string"&&me&&(Ye=c,isBrowser$1))try{let St=new URL(window.location.href),bt=c.startsWith("//")?new URL(St.protocol+c):new URL(c),Pt=stripBasename(bt.pathname,de);bt.origin===St.origin&&Pt!=null?c=Pt+bt.search+bt.hash:Le=!0}catch{warning(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let tt=useHref(c,{relative:s}),[Be,nt,ft]=usePrefetchBehavior(r,P),mt=useLinkClickHandler(c,{replace:a,state:l,target:u,preventScrollReset:p,relative:s,viewTransition:b});function ht(St){e&&e(St),St.defaultPrevented||mt(St)}let Et=reactExports.createElement("a",{...P,...ft,href:Ye||tt,onClick:Le||n?e:ht,ref:mergeRefs(N,nt),target:u,"data-discover":!me&&t==="render"?"true":void 0});return Be&&!me?reactExports.createElement(reactExports.Fragment,null,Et,reactExports.createElement(PrefetchPageLinks,{page:tt})):Et});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:n,to:a,viewTransition:l,children:u,...c},p){let b=useResolvedPath(a,{relative:c.relative}),P=useLocation(),N=reactExports.useContext(DataRouterStateContext),{navigator:de,basename:me}=reactExports.useContext(NavigationContext),Ye=N!=null&&useViewTransitionState(b)&&l===!0,Le=de.encodeLocation?de.encodeLocation(b).pathname:b.pathname,tt=P.pathname,Be=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(tt=tt.toLowerCase(),Be=Be?Be.toLowerCase():null,Le=Le.toLowerCase()),Be&&me&&(Be=stripBasename(Be,me)||Be);const nt=Le!=="/"&&Le.endsWith("/")?Le.length-1:Le.length;let ft=tt===Le||!s&&tt.startsWith(Le)&&tt.charAt(nt)==="/",mt=Be!=null&&(Be===Le||!s&&Be.startsWith(Le)&&Be.charAt(Le.length)==="/"),ht={isActive:ft,isPending:mt,isTransitioning:Ye},Et=ft?e:void 0,St;typeof r=="function"?St=r(ht):St=[r,ft?"active":null,mt?"pending":null,Ye?"transitioning":null].filter(Boolean).join(" ");let bt=typeof n=="function"?n(ht):n;return reactExports.createElement(Link,{...c,"aria-current":Et,className:St,ref:p,style:bt,to:a,viewTransition:l},typeof u=="function"?u(ht):u)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:n,method:a=defaultMethod,action:l,onSubmit:u,relative:c,preventScrollReset:p,viewTransition:b,...P},N)=>{let de=useSubmit(),me=useFormAction(l,{relative:c}),Ye=a.toLowerCase()==="get"?"get":"post",Le=typeof l=="string"&&ABSOLUTE_URL_REGEX2.test(l),tt=Be=>{if(u&&u(Be),Be.defaultPrevented)return;Be.preventDefault();let nt=Be.nativeEvent.submitter,ft=nt?.getAttribute("formmethod")||a;de(nt||Be.currentTarget,{fetcherKey:e,method:ft,navigate:t,replace:s,state:n,relative:c,preventScrollReset:p,viewTransition:b})};return reactExports.createElement("form",{ref:N,method:Ye,action:me,onSubmit:r?u:tt,...P,"data-discover":!Le&&i==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(i){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(i)),e}function useLinkClickHandler(i,{target:e,replace:t,state:r,preventScrollReset:s,relative:n,viewTransition:a}={}){let l=useNavigate(),u=useLocation(),c=useResolvedPath(i,{relative:n});return reactExports.useCallback(p=>{if(shouldProcessLinkClick(p,e)){p.preventDefault();let b=t!==void 0?t:createPath(u)===createPath(c);l(i,{replace:b,state:r,preventScrollReset:s,relative:n,viewTransition:a})}},[u,l,c,t,r,e,i,s,n,a])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:i}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),t=useRouteId();return reactExports.useCallback(async(r,s={})=>{let{action:n,method:a,encType:l,formData:u,body:c}=getFormSubmissionInfo(r,e);if(s.navigate===!1){let p=s.fetcherKey||getUniqueFetcherId();await i.fetch(p,t,s.action||n,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await i.navigate(s.action||n,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function useFormAction(i,{relative:e}={}){let{basename:t}=reactExports.useContext(NavigationContext),r=reactExports.useContext(RouteContext);invariant$1(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),n={...useResolvedPath(i||".",{relative:e})},a=useLocation();if(i==null){n.search=a.search;let l=new URLSearchParams(n.search),u=l.getAll("index");if(u.some(p=>p==="")){l.delete("index"),u.filter(b=>b).forEach(b=>l.append("index",b));let p=l.toString();n.search=p?`?${p}`:""}}return(!i||i===".")&&s.route.index&&(n.search=n.search?n.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(n.pathname=n.pathname==="/"?t:joinPaths([t,n.pathname])),createPath(n)}function useViewTransitionState(i,{relative:e}={}){let t=reactExports.useContext(ViewTransitionContext);invariant$1(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=useDataRouterContext3("useViewTransitionState"),s=useResolvedPath(i,{relative:e});if(!t.isTransitioning)return!1;let n=stripBasename(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=stripBasename(t.nextLocation.pathname,r)||t.nextLocation.pathname;return matchPath(s.pathname,a)!=null||matchPath(s.pathname,n)!=null}function ScrollToTop(){const{pathname:i}=useLocation();return reactExports.useEffect(()=>{window.scrollTo(0,0)},[i]),null}var __assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},__assign.apply(this,arguments)};function __spreadArray(i,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,n;r<s;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return i.concat(n||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$1(i,e){return charat(i,0)^45?(((e<<2^charat(i,0))<<2^charat(i,1))<<2^charat(i,2))<<2^charat(i,3):0}function trim(i){return i.trim()}function match(i,e){return(i=e.exec(i))?i[0]:i}function replace(i,e,t){return i.replace(e,t)}function indexof(i,e,t){return i.indexOf(e,t)}function charat(i,e){return i.charCodeAt(e)|0}function substr(i,e,t){return i.slice(e,t)}function strlen(i){return i.length}function sizeof(i){return i.length}function append(i,e){return e.push(i),i}function combine(i,e){return i.map(e).join("")}function filter$1(i,e){return i.filter(function(t){return!match(t,e)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(i,e,t,r,s,n,a,l){return{value:i,root:e,parent:t,type:r,props:s,children:n,line,column,length:a,return:"",siblings:l}}function copy(i,e){return assign(node("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},e)}function lift(i){for(;i.root;)i=copy(i.root,{children:[i]});append(i,i.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(i,e){return substr(characters,i,e)}function token(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(i){return line=column=1,length=strlen(characters=i),position=0,[]}function dealloc(i){return characters="",i}function delimit(i){return trim(slice(position-1,delimiter(i===91?i+2:i===40?i+1:i)))}function whitespace(i){for(;(character=peek())&&character<33;)next();return token(i)>2||token(character)>3?"":" "}function escaping(i,e){for(;--e&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(i,caret()+(e<6&&peek()==32&&next()==32))}function delimiter(i){for(;next();)switch(character){case i:return position;case 34:case 39:i!==34&&i!==39&&delimiter(character);break;case 40:i===41&&delimiter(i);break;case 92:next();break}return position}function commenter(i,e){for(;next()&&i+character!==57;)if(i+character===84&&peek()===47)break;return"/*"+slice(e,position-1)+"*"+from(i===47?i:next())}function identifier(i){for(;!token(peek());)next();return slice(i,position)}function compile(i){return dealloc(parse("",null,null,null,[""],i=alloc(i),0,[0],i))}function parse(i,e,t,r,s,n,a,l,u){for(var c=0,p=0,b=a,P=0,N=0,de=0,me=1,Ye=1,Le=1,tt=0,Be="",nt=s,ft=n,mt=r,ht=Be;Ye;)switch(de=tt,tt=next()){case 40:if(de!=108&&charat(ht,b-1)==58){indexof(ht+=replace(delimit(tt),"&","&\f"),"&\f",abs(c?l[c-1]:0))!=-1&&(Le=-1);break}case 34:case 39:case 91:ht+=delimit(tt);break;case 9:case 10:case 13:case 32:ht+=whitespace(de);break;case 92:ht+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),e,t,u),u);break;default:ht+="/"}break;case 123*me:l[c++]=strlen(ht)*Le;case 125*me:case 59:case 0:switch(tt){case 0:case 125:Ye=0;case 59+p:Le==-1&&(ht=replace(ht,/\f/g,"")),N>0&&strlen(ht)-b&&append(N>32?declaration(ht+";",r,t,b-1,u):declaration(replace(ht," ","")+";",r,t,b-2,u),u);break;case 59:ht+=";";default:if(append(mt=ruleset(ht,e,t,c,p,s,l,Be,nt=[],ft=[],b,n),n),tt===123)if(p===0)parse(ht,e,mt,mt,nt,n,b,l,ft);else switch(P===99&&charat(ht,3)===110?100:P){case 100:case 108:case 109:case 115:parse(i,mt,mt,r&&append(ruleset(i,mt,mt,0,0,s,l,Be,s,nt=[],b,ft),ft),s,ft,b,l,r?nt:ft);break;default:parse(ht,mt,mt,mt,[""],ft,0,l,ft)}}c=p=N=0,me=Le=1,Be=ht="",b=a;break;case 58:b=1+strlen(ht),N=de;default:if(me<1){if(tt==123)--me;else if(tt==125&&me++==0&&prev()==125)continue}switch(ht+=from(tt),tt*me){case 38:Le=p>0?1:(ht+="\f",-1);break;case 44:l[c++]=(strlen(ht)-1)*Le,Le=1;break;case 64:peek()===45&&(ht+=delimit(next())),P=peek(),p=b=strlen(Be=ht+=identifier(caret())),tt++;break;case 45:de===45&&strlen(ht)==2&&(me=0)}}return n}function ruleset(i,e,t,r,s,n,a,l,u,c,p,b){for(var P=s-1,N=s===0?n:[""],de=sizeof(N),me=0,Ye=0,Le=0;me<r;++me)for(var tt=0,Be=substr(i,P+1,P=abs(Ye=a[me])),nt=i;tt<de;++tt)(nt=trim(Ye>0?N[tt]+" "+Be:replace(Be,/&\f/g,N[tt])))&&(u[Le++]=nt);return node(i,e,t,s===0?RULESET:l,u,c,p,b)}function comment(i,e,t,r){return node(i,e,t,COMMENT,from(char()),substr(i,2,-2),0,r)}function declaration(i,e,t,r,s){return node(i,e,t,DECLARATION,substr(i,0,r),substr(i,r+1,-1),r,s)}function prefix(i,e,t){switch(hash$1(i,e)){case 5103:return WEBKIT+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+i+i;case 4789:return MOZ+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+i+MOZ+i+MS+i+i;case 5936:switch(charat(i,e+11)){case 114:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return WEBKIT+i+MS+i+i;case 6165:return WEBKIT+i+MS+"flex-"+i+i;case 5187:return WEBKIT+i+replace(i,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+i;case 5443:return WEBKIT+i+MS+"flex-item-"+replace(i,/flex-|-self/g,"")+(match(i,/flex-|baseline/)?"":MS+"grid-row-"+replace(i,/flex-|-self/g,""))+i;case 4675:return WEBKIT+i+MS+"flex-line-pack"+replace(i,/align-content|flex-|-self/g,"")+i;case 5548:return WEBKIT+i+MS+replace(i,"shrink","negative")+i;case 5292:return WEBKIT+i+MS+replace(i,"basis","preferred-size")+i;case 6060:return WEBKIT+"box-"+replace(i,"-grow","")+WEBKIT+i+MS+replace(i,"grow","positive")+i;case 4554:return WEBKIT+replace(i,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+i;case 6187:return replace(replace(replace(i,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),i,"")+i;case 5495:case 3959:return replace(i,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(i,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+i+i;case 4200:if(!match(i,/flex-|baseline/))return MS+"grid-column-align"+substr(i,e)+i;break;case 2592:case 3360:return MS+replace(i,"template-","")+i;case 4384:case 3616:return t&&t.some(function(r,s){return e=s,match(r.props,/grid-\w+-end/)})?~indexof(i+(t=t[e].value),"span",0)?i:MS+replace(i,"-start","")+i+MS+"grid-row-span:"+(~indexof(t,"span",0)?match(t,/\d+/):+match(t,/\d+/)-+match(i,/\d+/))+";":MS+replace(i,"-start","")+i;case 4896:case 4128:return t&&t.some(function(r){return match(r.props,/grid-\w+-start/)})?i:MS+replace(replace(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return replace(i,/(.+)-inline(.+)/,WEBKIT+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(i)-1-e>6)switch(charat(i,e+1)){case 109:if(charat(i,e+4)!==45)break;case 102:return replace(i,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~indexof(i,"stretch",0)?prefix(replace(i,"stretch","fill-available"),e,t)+i:i}break;case 5152:case 5920:return replace(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,n,a,l,u,c){return MS+s+":"+n+c+(a?MS+s+"-span:"+(l?u:+u-+n)+c:"")+i});case 4949:if(charat(i,e+6)===121)return replace(i,":",":"+WEBKIT)+i;break;case 6444:switch(charat(i,charat(i,14)===45?18:11)){case 120:return replace(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(i,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+i;case 100:return replace(i,":",":"+MS)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(i,"scroll-","scroll-snap-")+i}return i}function serialize(i,e){for(var t="",r=0;r<i.length;r++)t+=e(i[r],r,i,e)||"";return t}function stringify$1(i,e,t,r){switch(i.type){case LAYER:if(i.children.length)break;case IMPORT:case DECLARATION:return i.return=i.return||i.value;case COMMENT:return"";case KEYFRAMES:return i.return=i.value+"{"+serialize(i.children,r)+"}";case RULESET:if(!strlen(i.value=i.props.join(",")))return""}return strlen(t=serialize(i.children,r))?i.return=i.value+"{"+t+"}":""}function middleware(i){var e=sizeof(i);return function(t,r,s,n){for(var a="",l=0;l<e;l++)a+=i[l](t,r,s,n)||"";return a}}function rulesheet(i){return function(e){e.root||(e=e.return)&&i(e)}}function prefixer(i,e,t,r){if(i.length>-1&&!i.return)switch(i.type){case DECLARATION:i.return=prefix(i.value,i.length,t);return;case KEYFRAMES:return serialize([copy(i,{value:replace(i.value,"@","@"+WEBKIT)})],r);case RULESET:if(i.length)return combine(t=i.props,function(s){switch(match(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(i,{props:[replace(s,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(i,{props:[s]})),assign(i,{props:filter$1(t,r)});break;case"::placeholder":lift(copy(i,{props:[replace(s,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(i,{props:[replace(s,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(i,{props:[replace(s,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(i,{props:[s]})),assign(i,{props:filter$1(t,r)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m="active",y="data-styled-version",v$1="6.1.19",g=`/*!sc*/
`,S=typeof window<"u"&&typeof document<"u",w$1=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_=Object.freeze([]),C=Object.freeze({});function I(i,e,t){return t===void 0&&(t=C),i.theme!==t.theme&&i.theme||e||t.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D=/(^-|-$)/g;function R(i){return i.replace(O,"-").replace(D,"")}var T=/(a)(d)/gi,k=52,j=function(i){return String.fromCharCode(i+(i>25?39:97))};function x(i){var e,t="";for(e=Math.abs(i);e>k;e=e/k|0)t=j(e%k)+t;return(j(e%k)+t).replace(T,"$1-$2")}var V,F=5381,M=function(i,e){for(var t=e.length;t;)i=33*i^e.charCodeAt(--t);return i},z=function(i){return M(F,i)};function $(i){return x(z(i)>>>0)}function B(i){return i.displayName||i.name||"Component"}function L(i){return typeof i=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(i){return("type"in(e=i)&&e.type.$$typeof)===Y?U:"$$typeof"in i?J[i.$$typeof]:q;var e}var Z=Object.defineProperty,K=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(i,e,t){if(typeof e!="string"){if(ne){var r=te(e);r&&r!==ne&&oe(i,r,t)}var s=K(e);Q&&(s=s.concat(Q(e)));for(var n=X(i),a=X(e),l=0;l<s.length;++l){var u=s[l];if(!(u in H||t&&t[u]||a&&u in a||n&&u in n)){var c=ee(e,u);try{Z(i,u,c)}catch{}}}}return i}function re(i){return typeof i=="function"}function se(i){return typeof i=="object"&&"styledComponentId"in i}function ie(i,e){return i&&e?"".concat(i," ").concat(e):i||e||""}function ae(i,e){if(i.length===0)return"";for(var t=i[0],r=1;r<i.length;r++)t+=i[r];return t}function ce(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function le(i,e,t){if(t===void 0&&(t=!1),!t&&!ce(i)&&!Array.isArray(i))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)i[r]=le(i[r],e[r]);else if(ce(e))for(var r in e)i[r]=le(i[r],e[r]);return i}function ue(i,e){Object.defineProperty(i,"toString",{value:e})}function he(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var fe=function(){function i(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return i.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},i.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,n=s;e>=n;)if((n<<=1)<0)throw he(16,"".concat(e));this.groupSizes=new Uint32Array(n),this.groupSizes.set(r),this.length=n;for(var a=s;a<n;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(e+1),u=(a=0,t.length);a<u;a++)this.tag.insertRule(l,t[a])&&(this.groupSizes[e]++,l++)},i.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),s=r+t;this.groupSizes[e]=0;for(var n=r;n<s;n++)this.tag.deleteRule(r)}},i.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],s=this.indexOfGroup(e),n=s+r,a=s;a<n;a++)t+="".concat(this.tag.getRule(a)).concat(g);return t},i}(),ye=new Map,ve=new Map,ge=1,Se=function(i){if(ye.has(i))return ye.get(i);for(;ve.has(ge);)ge++;var e=ge++;return ye.set(i,e),ve.set(e,i),e},we=function(i,e){ge=e+1,ye.set(i,e),ve.set(e,i)},be="style[".concat(f,"][").concat(y,'="').concat(v$1,'"]'),Ee=new RegExp("^".concat(f,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(i,e,t){for(var r,s=t.split(","),n=0,a=s.length;n<a;n++)(r=s[n])&&i.registerName(e,r)},Pe=function(i,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(g),s=[],n=0,a=r.length;n<a;n++){var l=r[n].trim();if(l){var u=l.match(Ee);if(u){var c=0|parseInt(u[1],10),p=u[2];c!==0&&(we(p,c),Ne(i,p,u[3]),i.getTag().insertRules(c,s)),s.length=0}else s.push(l)}}},_e=function(i){for(var e=document.querySelectorAll(be),t=0,r=e.length;t<r;t++){var s=e[t];s&&s.getAttribute(f)!==m&&(Pe(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(i){var e=document.head,t=i||e,r=document.createElement("style"),s=function(l){var u=Array.from(l.querySelectorAll("style[".concat(f,"]")));return u[u.length-1]}(t),n=s!==void 0?s.nextSibling:null;r.setAttribute(f,m),r.setAttribute(y,v$1);var a=Ce();return a&&r.setAttribute("nonce",a),t.insertBefore(r,n),r},Ae=function(){function i(e){this.element=Ie(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,s=0,n=r.length;s<n;s++){var a=r[s];if(a.ownerNode===t)return a}throw he(17)}(this.element),this.length=0}return i.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},i.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},i}(),Oe=function(){function i(e){this.element=Ie(e),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},i.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},i}(),De=function(){function i(e){this.rules=[],this.length=0}return i.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},i.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},i.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},i}(),Re=S,Te={isServer:!S,useCSSOMInjection:!w$1},ke=function(){function i(e,t,r){e===void 0&&(e=C),t===void 0&&(t={});var s=this;this.options=__assign(__assign({},Te),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&S&&Re&&(Re=!1,_e(this)),ue(this,function(){return function(n){for(var a=n.getTag(),l=a.length,u="",c=function(b){var P=function(Le){return ve.get(Le)}(b);if(P===void 0)return"continue";var N=n.names.get(P),de=a.getGroup(b);if(N===void 0||!N.size||de.length===0)return"continue";var me="".concat(f,".g").concat(b,'[id="').concat(P,'"]'),Ye="";N!==void 0&&N.forEach(function(Le){Le.length>0&&(Ye+="".concat(Le,","))}),u+="".concat(de).concat(me,'{content:"').concat(Ye,'"}').concat(g)},p=0;p<l;p++)c(p);return u}(s)})}return i.registerId=function(e){return Se(e)},i.prototype.rehydrate=function(){!this.server&&S&&_e(this)},i.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new i(__assign(__assign({},this.options),e),this.gs,t&&this.names||void 0)},i.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,s=t.target;return t.isServer?new De(s):r?new Ae(s):new Oe(s)}(this.options),new fe(e)));var e},i.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},i.prototype.registerName=function(e,t){if(Se(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},i.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(Se(e),r)},i.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},i.prototype.clearRules=function(e){this.getTag().clearGroup(Se(e)),this.clearNames(e)},i.prototype.clearTag=function(){this.tag=void 0},i}(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(i,e){return i.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=Ve(t.children,e)),t})}function Fe(i){var e,t,r,s=C,n=s.options,a=n===void 0?C:n,l=s.plugins,u=l===void 0?_:l,c=function(P,N,de){return de.startsWith(t)&&de.endsWith(t)&&de.replaceAll(t,"").length>0?".".concat(e):P},p=u.slice();p.push(function(P){P.type===RULESET&&P.value.includes("&")&&(P.props[0]=P.props[0].replace(je,t).replace(r,c))}),a.prefix&&p.push(prefixer),p.push(stringify$1);var b=function(P,N,de,me){N===void 0&&(N=""),de===void 0&&(de=""),me===void 0&&(me="&"),e=me,t=N,r=new RegExp("\\".concat(t,"\\b"),"g");var Ye=P.replace(xe,""),Le=compile(de||N?"".concat(de," ").concat(N," { ").concat(Ye," }"):Ye);a.namespace&&(Le=Ve(Le,a.namespace));var tt=[];return serialize(Le,middleware(p.concat(rulesheet(function(Be){return tt.push(Be)})))),tt};return b.hash=u.length?u.reduce(function(P,N){return N.name||he(15),M(P,N.name)},F).toString():"",b}var Me=new ke,ze=Fe(),$e=React.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;React.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=function(){function i(e,t){var r=this;this.inject=function(s,n){n===void 0&&(n=ze);var a=r.name+n.hash;s.hasNameForId(r.id,a)||s.insertRules(r.id,a,n(r.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,ue(this,function(){throw he(12,String(r.name))})}return i.prototype.getName=function(e){return e===void 0&&(e=ze),this.name+e.hash},i}(),qe=function(i){return i>="A"&&i<="Z"};function He(i){for(var e="",t=0;t<i.length;t++){var r=i[t];if(t===1&&r==="-"&&i[0]==="-")return i;qe(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var Ue=function(i){return i==null||i===!1||i===""},Je=function(i){var e,t,r=[];for(var s in i){var n=i[s];i.hasOwnProperty(s)&&!Ue(n)&&(Array.isArray(n)&&n.isCss||re(n)?r.push("".concat(He(s),":"),n,";"):ce(n)?r.push.apply(r,__spreadArray(__spreadArray(["".concat(s," {")],Je(n),!1),["}"],!1)):r.push("".concat(He(s),": ").concat((e=s,(t=n)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in unitlessKeys||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function Xe(i,e,t,r){if(Ue(i))return[];if(se(i))return[".".concat(i.styledComponentId)];if(re(i)){if(!re(n=i)||n.prototype&&n.prototype.isReactComponent||!e)return[i];var s=i(e);return Xe(s,e,t,r)}var n;return i instanceof We?t?(i.inject(t,r),[i.getName(r)]):[i]:ce(i)?Je(i):Array.isArray(i)?Array.prototype.concat.apply(_,i.map(function(a){return Xe(a,e,t,r)})):[i.toString()]}function Ze(i){for(var e=0;e<i.length;e+=1){var t=i[e];if(re(t)&&!se(t))return!1}return!0}var Ke=z(v$1),Qe=function(){function i(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Ze(e),this.componentId=t,this.baseHash=M(Ke,t),this.baseStyle=r,ke.registerId(t)}return i.prototype.generateAndInjectStyles=function(e,t,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))s=ie(s,this.staticRulesId);else{var n=ae(Xe(this.rules,e,t,r)),a=x(M(this.baseHash,n)>>>0);if(!t.hasNameForId(this.componentId,a)){var l=r(n,".".concat(a),void 0,this.componentId);t.insertRules(this.componentId,a,l)}s=ie(s,a),this.staticRulesId=a}else{for(var u=M(this.baseHash,r.hash),c="",p=0;p<this.rules.length;p++){var b=this.rules[p];if(typeof b=="string")c+=b;else if(b){var P=ae(Xe(b,e,t,r));u=M(u,P+p),c+=P}}if(c){var N=x(u>>>0);t.hasNameForId(this.componentId,N)||t.insertRules(this.componentId,N,r(c,".".concat(N),void 0,this.componentId)),s=ie(s,N)}}return s},i}(),et=React.createContext(void 0);et.Consumer;var rt={};function it(i,e,t){var r=se(i),s=i,n=!L(i),a=e.attrs,l=a===void 0?_:a,u=e.componentId,c=u===void 0?function(nt,ft){var mt=typeof nt!="string"?"sc":R(nt);rt[mt]=(rt[mt]||0)+1;var ht="".concat(mt,"-").concat($(v$1+mt+rt[mt]));return ft?"".concat(ft,"-").concat(ht):ht}(e.displayName,e.parentComponentId):u,p=e.displayName,b=p===void 0?function(nt){return L(nt)?"styled.".concat(nt):"Styled(".concat(B(nt),")")}(i):p,P=e.displayName&&e.componentId?"".concat(R(e.displayName),"-").concat(e.componentId):e.componentId||c,N=r&&s.attrs?s.attrs.concat(l).filter(Boolean):l,de=e.shouldForwardProp;if(r&&s.shouldForwardProp){var me=s.shouldForwardProp;if(e.shouldForwardProp){var Ye=e.shouldForwardProp;de=function(nt,ft){return me(nt,ft)&&Ye(nt,ft)}}else de=me}var Le=new Qe(t,P,r?s.componentStyle:void 0);function tt(nt,ft){return function(mt,ht,Et){var St=mt.attrs,bt=mt.componentStyle,Pt=mt.defaultProps,Rt=mt.foldedComponentIds,Dt=mt.styledComponentId,kt=mt.target,Lt=React.useContext(et),vt=Ge(),xt=mt.shouldForwardProp||vt.shouldForwardProp,gt=I(ht,Lt,Pt)||C,_t=function(zt,Ut,Qt){for(var Xt,Jt=__assign(__assign({},Ut),{className:void 0,theme:Qt}),mi=0;mi<zt.length;mi+=1){var ni=re(Xt=zt[mi])?Xt(Jt):Xt;for(var pi in ni)Jt[pi]=pi==="className"?ie(Jt[pi],ni[pi]):pi==="style"?__assign(__assign({},Jt[pi]),ni[pi]):ni[pi]}return Ut.className&&(Jt.className=ie(Jt.className,Ut.className)),Jt}(St,ht,gt),yt=_t.as||kt,At={};for(var wt in _t)_t[wt]===void 0||wt[0]==="$"||wt==="as"||wt==="theme"&&_t.theme===gt||(wt==="forwardedAs"?At.as=_t.forwardedAs:xt&&!xt(wt,yt)||(At[wt]=_t[wt]));var It=function(zt,Ut){var Qt=Ge(),Xt=zt.generateAndInjectStyles(Ut,Qt.styleSheet,Qt.stylis);return Xt}(bt,_t),Ft=ie(Rt,Dt);return It&&(Ft+=" "+It),_t.className&&(Ft+=" "+_t.className),At[L(yt)&&!A.has(yt)?"class":"className"]=Ft,Et&&(At.ref=Et),reactExports.createElement(yt,At)}(Be,nt,ft)}tt.displayName=b;var Be=React.forwardRef(tt);return Be.attrs=N,Be.componentStyle=Le,Be.displayName=b,Be.shouldForwardProp=de,Be.foldedComponentIds=r?ie(s.foldedComponentIds,s.styledComponentId):"",Be.styledComponentId=P,Be.target=r?s.target:i,Object.defineProperty(Be,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(nt){this._foldedDefaultProps=r?function(ft){for(var mt=[],ht=1;ht<arguments.length;ht++)mt[ht-1]=arguments[ht];for(var Et=0,St=mt;Et<St.length;Et++)le(ft,St[Et],!0);return ft}({},s.defaultProps,nt):nt}}),ue(Be,function(){return".".concat(Be.styledComponentId)}),n&&oe(Be,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Be}function at(i,e){for(var t=[i[0]],r=0,s=e.length;r<s;r+=1)t.push(e[r],i[r+1]);return t}var ct=function(i){return Object.assign(i,{isCss:!0})};function lt(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(re(i)||ce(i))return ct(Xe(at(_,__spreadArray([i],e,!0))));var r=i;return e.length===0&&r.length===1&&typeof r[0]=="string"?Xe(r):ct(Xe(at(r,e)))}function ut(i,e,t){if(t===void 0&&(t=C),!e)throw he(1,e);var r=function(s){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return i(e,t,lt.apply(void 0,__spreadArray([s],n,!1)))};return r.attrs=function(s){return ut(i,e,__assign(__assign({},t),{attrs:Array.prototype.concat(t.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return ut(i,e,__assign(__assign({},t),s))},r}var pt=function(i){return ut(it,i)},dt=pt;A.forEach(function(i){dt[i]=pt(i)});const MainContainer=dt.div``;var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(i,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(i){return document.createElement(i)}function extendPrototype(i,e){var t,r=i.length,s;for(t=0;t<r;t+=1){s=i[t].prototype;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e.prototype[n]=s[n])}}function getDescriptor(i,e){return Object.getOwnPropertyDescriptor(i,e)}function createProxyFunction(i){function e(){}return e.prototype=i,e}var audioControllerFactory=function(){function i(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return i.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,r=this.audios.length;for(t=0;t<r;t+=1)this.audios[t].pause()},resume:function(){var t,r=this.audios.length;for(t=0;t<r;t+=1)this.audios[t].resume()},setRate:function(t){var r,s=this.audios.length;for(r=0;r<s;r+=1)this.audios[r].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,r=this.audios.length;for(t=0;t<r;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new i}}(),createTypedArray=function(){function i(t,r){var s=0,n=[],a;switch(t){case"int16":case"uint8c":a=1;break;default:a=1.1;break}for(s=0;s<r;s+=1)n.push(a);return n}function e(t,r){return t==="float32"?new Float32Array(r):t==="int16"?new Int16Array(r):t==="uint8c"?new Uint8ClampedArray(r):i(t,r)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:i}();function createSizedArray(i){return Array.apply(null,{length:i})}function _typeof$6(i){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(i)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var i=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,t=i.length;for(e=0;e<t;e+=1)BMMath[i[e]]=Math[i[e]]})(),BMMath.random=Math.random,BMMath.abs=function(i){var e=_typeof$6(i);if(e==="object"&&i.length){var t=createSizedArray(i.length),r,s=i.length;for(r=0;r<s;r+=1)t[r]=Math.abs(i[r]);return t}return Math.abs(i)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(i){i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.display="block",i.style.transformOrigin="0 0",i.style.webkitTransformOrigin="0 0",i.style.backfaceVisibility="visible",i.style.webkitBackfaceVisibility="visible",i.style.transformStyle="preserve-3d",i.style.webkitTransformStyle="preserve-3d",i.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(i,e,t,r){this.type=i,this.currentTime=e,this.totalTime=t,this.direction=r<0?-1:1}function BMCompleteEvent(i,e){this.type=i,this.direction=e<0?-1:1}function BMCompleteLoopEvent(i,e,t,r){this.type=i,this.currentLoop=t,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(i,e,t){this.type=i,this.firstFrame=e,this.totalFrames=t}function BMDestroyEvent(i,e){this.type=i,this.target=e}function BMRenderFrameErrorEvent(i,e){this.type="renderFrameError",this.nativeError=i,this.currentTime=e}function BMConfigErrorEvent(i){this.type="configError",this.nativeError=i}var createElementID=function(){var i=0;return function(){return i+=1,idPrefix$1+"__lottie_element_"+i}}();function HSVtoRGB(i,e,t){var r,s,n,a,l,u,c,p;switch(a=Math.floor(i*6),l=i*6-a,u=t*(1-e),c=t*(1-l*e),p=t*(1-(1-l)*e),a%6){case 0:r=t,s=p,n=u;break;case 1:r=c,s=t,n=u;break;case 2:r=u,s=t,n=p;break;case 3:r=u,s=c,n=t;break;case 4:r=p,s=u,n=t;break;case 5:r=t,s=u,n=c;break}return[r,s,n]}function RGBtoHSV(i,e,t){var r=Math.max(i,e,t),s=Math.min(i,e,t),n=r-s,a,l=r===0?0:n/r,u=r/255;switch(r){case s:a=0;break;case i:a=e-t+n*(e<t?6:0),a/=6*n;break;case e:a=t-i+n*2,a/=6*n;break;case t:a=i-e+n*4,a/=6*n;break}return[a,l,u]}function addSaturationToRGB(i,e){var t=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return t[1]+=e,t[1]>1?t[1]=1:t[1]<=0&&(t[1]=0),HSVtoRGB(t[0],t[1],t[2])}function addBrightnessToRGB(i,e){var t=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return t[2]+=e,t[2]>1?t[2]=1:t[2]<0&&(t[2]=0),HSVtoRGB(t[0],t[1],t[2])}function addHueToRGB(i,e){var t=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return t[0]+=e/360,t[0]>1?t[0]-=1:t[0]<0&&(t[0]+=1),HSVtoRGB(t[0],t[1],t[2])}var rgbToHex=function(){var i=[],e,t;for(e=0;e<256;e+=1)t=e.toString(16),i[e]=t.length===1?"0"+t:t;return function(r,s,n){return r<0&&(r=0),s<0&&(s=0),n<0&&(n=0),"#"+i[r]+i[s]+i[n]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(i){return document.createElementNS(svgNS,i)}function _typeof$5(i){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(i)}var dataManager=function(){var i=1,e=[],t,r,s={onmessage:function(){},postMessage:function(N){t({data:N})}},n={postMessage:function(N){s.onmessage({data:N})}};function a(P){if(window.Worker&&window.Blob&&getWebWorker()){var N=new Blob(["var _workerSelf = self; self.onmessage = ",P.toString()],{type:"text/javascript"}),de=URL.createObjectURL(N);return new Worker(de)}return t=P,s}function l(){r||(r=a(function(N){function de(){function Ye(Lt,vt){var xt,gt,_t=Lt.length,yt,At,wt,It;for(gt=0;gt<_t;gt+=1)if(xt=Lt[gt],"ks"in xt&&!xt.completed){if(xt.completed=!0,xt.hasMask){var Ft=xt.masksProperties;for(At=Ft.length,yt=0;yt<At;yt+=1)if(Ft[yt].pt.k.i)ft(Ft[yt].pt.k);else for(It=Ft[yt].pt.k.length,wt=0;wt<It;wt+=1)Ft[yt].pt.k[wt].s&&ft(Ft[yt].pt.k[wt].s[0]),Ft[yt].pt.k[wt].e&&ft(Ft[yt].pt.k[wt].e[0])}xt.ty===0?(xt.layers=Be(xt.refId,vt),Ye(xt.layers,vt)):xt.ty===4?nt(xt.shapes):xt.ty===5&&Dt(xt)}}function Le(Lt,vt){if(Lt){var xt=0,gt=Lt.length;for(xt=0;xt<gt;xt+=1)Lt[xt].t===1&&(Lt[xt].data.layers=Be(Lt[xt].data.refId,vt),Ye(Lt[xt].data.layers,vt))}}function tt(Lt,vt){for(var xt=0,gt=vt.length;xt<gt;){if(vt[xt].id===Lt)return vt[xt];xt+=1}return null}function Be(Lt,vt){var xt=tt(Lt,vt);return xt?xt.layers.__used?JSON.parse(JSON.stringify(xt.layers)):(xt.layers.__used=!0,xt.layers):null}function nt(Lt){var vt,xt=Lt.length,gt,_t;for(vt=xt-1;vt>=0;vt-=1)if(Lt[vt].ty==="sh")if(Lt[vt].ks.k.i)ft(Lt[vt].ks.k);else for(_t=Lt[vt].ks.k.length,gt=0;gt<_t;gt+=1)Lt[vt].ks.k[gt].s&&ft(Lt[vt].ks.k[gt].s[0]),Lt[vt].ks.k[gt].e&&ft(Lt[vt].ks.k[gt].e[0]);else Lt[vt].ty==="gr"&&nt(Lt[vt].it)}function ft(Lt){var vt,xt=Lt.i.length;for(vt=0;vt<xt;vt+=1)Lt.i[vt][0]+=Lt.v[vt][0],Lt.i[vt][1]+=Lt.v[vt][1],Lt.o[vt][0]+=Lt.v[vt][0],Lt.o[vt][1]+=Lt.v[vt][1]}function mt(Lt,vt){var xt=vt?vt.split("."):[100,100,100];return Lt[0]>xt[0]?!0:xt[0]>Lt[0]?!1:Lt[1]>xt[1]?!0:xt[1]>Lt[1]?!1:Lt[2]>xt[2]?!0:xt[2]>Lt[2]?!1:null}var ht=function(){var Lt=[4,4,14];function vt(gt){var _t=gt.t.d;gt.t.d={k:[{s:_t,t:0}]}}function xt(gt){var _t,yt=gt.length;for(_t=0;_t<yt;_t+=1)gt[_t].ty===5&&vt(gt[_t])}return function(gt){if(mt(Lt,gt.v)&&(xt(gt.layers),gt.assets)){var _t,yt=gt.assets.length;for(_t=0;_t<yt;_t+=1)gt.assets[_t].layers&&xt(gt.assets[_t].layers)}}}(),Et=function(){var Lt=[4,7,99];return function(vt){if(vt.chars&&!mt(Lt,vt.v)){var xt,gt=vt.chars.length;for(xt=0;xt<gt;xt+=1){var _t=vt.chars[xt];_t.data&&_t.data.shapes&&(nt(_t.data.shapes),_t.data.ip=0,_t.data.op=99999,_t.data.st=0,_t.data.sr=1,_t.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},vt.chars[xt].t||(_t.data.shapes.push({ty:"no"}),_t.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),St=function(){var Lt=[5,7,15];function vt(gt){var _t=gt.t.p;typeof _t.a=="number"&&(_t.a={a:0,k:_t.a}),typeof _t.p=="number"&&(_t.p={a:0,k:_t.p}),typeof _t.r=="number"&&(_t.r={a:0,k:_t.r})}function xt(gt){var _t,yt=gt.length;for(_t=0;_t<yt;_t+=1)gt[_t].ty===5&&vt(gt[_t])}return function(gt){if(mt(Lt,gt.v)&&(xt(gt.layers),gt.assets)){var _t,yt=gt.assets.length;for(_t=0;_t<yt;_t+=1)gt.assets[_t].layers&&xt(gt.assets[_t].layers)}}}(),bt=function(){var Lt=[4,1,9];function vt(gt){var _t,yt=gt.length,At,wt;for(_t=0;_t<yt;_t+=1)if(gt[_t].ty==="gr")vt(gt[_t].it);else if(gt[_t].ty==="fl"||gt[_t].ty==="st")if(gt[_t].c.k&&gt[_t].c.k[0].i)for(wt=gt[_t].c.k.length,At=0;At<wt;At+=1)gt[_t].c.k[At].s&&(gt[_t].c.k[At].s[0]/=255,gt[_t].c.k[At].s[1]/=255,gt[_t].c.k[At].s[2]/=255,gt[_t].c.k[At].s[3]/=255),gt[_t].c.k[At].e&&(gt[_t].c.k[At].e[0]/=255,gt[_t].c.k[At].e[1]/=255,gt[_t].c.k[At].e[2]/=255,gt[_t].c.k[At].e[3]/=255);else gt[_t].c.k[0]/=255,gt[_t].c.k[1]/=255,gt[_t].c.k[2]/=255,gt[_t].c.k[3]/=255}function xt(gt){var _t,yt=gt.length;for(_t=0;_t<yt;_t+=1)gt[_t].ty===4&&vt(gt[_t].shapes)}return function(gt){if(mt(Lt,gt.v)&&(xt(gt.layers),gt.assets)){var _t,yt=gt.assets.length;for(_t=0;_t<yt;_t+=1)gt.assets[_t].layers&&xt(gt.assets[_t].layers)}}}(),Pt=function(){var Lt=[4,4,18];function vt(gt){var _t,yt=gt.length,At,wt;for(_t=yt-1;_t>=0;_t-=1)if(gt[_t].ty==="sh")if(gt[_t].ks.k.i)gt[_t].ks.k.c=gt[_t].closed;else for(wt=gt[_t].ks.k.length,At=0;At<wt;At+=1)gt[_t].ks.k[At].s&&(gt[_t].ks.k[At].s[0].c=gt[_t].closed),gt[_t].ks.k[At].e&&(gt[_t].ks.k[At].e[0].c=gt[_t].closed);else gt[_t].ty==="gr"&&vt(gt[_t].it)}function xt(gt){var _t,yt,At=gt.length,wt,It,Ft,zt;for(yt=0;yt<At;yt+=1){if(_t=gt[yt],_t.hasMask){var Ut=_t.masksProperties;for(It=Ut.length,wt=0;wt<It;wt+=1)if(Ut[wt].pt.k.i)Ut[wt].pt.k.c=Ut[wt].cl;else for(zt=Ut[wt].pt.k.length,Ft=0;Ft<zt;Ft+=1)Ut[wt].pt.k[Ft].s&&(Ut[wt].pt.k[Ft].s[0].c=Ut[wt].cl),Ut[wt].pt.k[Ft].e&&(Ut[wt].pt.k[Ft].e[0].c=Ut[wt].cl)}_t.ty===4&&vt(_t.shapes)}}return function(gt){if(mt(Lt,gt.v)&&(xt(gt.layers),gt.assets)){var _t,yt=gt.assets.length;for(_t=0;_t<yt;_t+=1)gt.assets[_t].layers&&xt(gt.assets[_t].layers)}}}();function Rt(Lt){Lt.__complete||(bt(Lt),ht(Lt),Et(Lt),St(Lt),Pt(Lt),Ye(Lt.layers,Lt.assets),Le(Lt.chars,Lt.assets),Lt.__complete=!0)}function Dt(Lt){Lt.t.a.length===0&&"m"in Lt.t.p}var kt={};return kt.completeData=Rt,kt.checkColors=bt,kt.checkChars=Et,kt.checkPathProperties=St,kt.checkShapes=Pt,kt.completeLayers=Ye,kt}if(n.dataManager||(n.dataManager=de()),n.assetLoader||(n.assetLoader=function(){function Ye(tt){var Be=tt.getResponseHeader("content-type");return Be&&tt.responseType==="json"&&Be.indexOf("json")!==-1||tt.response&&_typeof$5(tt.response)==="object"?tt.response:tt.response&&typeof tt.response=="string"?JSON.parse(tt.response):tt.responseText?JSON.parse(tt.responseText):null}function Le(tt,Be,nt,ft){var mt,ht=new XMLHttpRequest;try{ht.responseType="json"}catch{}ht.onreadystatechange=function(){if(ht.readyState===4)if(ht.status===200)mt=Ye(ht),nt(mt);else try{mt=Ye(ht),nt(mt)}catch(Et){ft&&ft(Et)}};try{ht.open(["G","E","T"].join(""),tt,!0)}catch{ht.open(["G","E","T"].join(""),Be+"/"+tt,!0)}ht.send()}return{load:Le}}()),N.data.type==="loadAnimation")n.assetLoader.load(N.data.path,N.data.fullPath,function(Ye){n.dataManager.completeData(Ye),n.postMessage({id:N.data.id,payload:Ye,status:"success"})},function(){n.postMessage({id:N.data.id,status:"error"})});else if(N.data.type==="complete"){var me=N.data.animation;n.dataManager.completeData(me),n.postMessage({id:N.data.id,payload:me,status:"success"})}else N.data.type==="loadData"&&n.assetLoader.load(N.data.path,N.data.fullPath,function(Ye){n.postMessage({id:N.data.id,payload:Ye,status:"success"})},function(){n.postMessage({id:N.data.id,status:"error"})})}),r.onmessage=function(P){var N=P.data,de=N.id,me=e[de];e[de]=null,N.status==="success"?me.onComplete(N.payload):me.onError&&me.onError()})}function u(P,N){i+=1;var de="processId_"+i;return e[de]={onComplete:P,onError:N},de}function c(P,N,de){l();var me=u(N,de);r.postMessage({type:"loadAnimation",path:P,fullPath:window.location.origin+window.location.pathname,id:me})}function p(P,N,de){l();var me=u(N,de);r.postMessage({type:"loadData",path:P,fullPath:window.location.origin+window.location.pathname,id:me})}function b(P,N,de){l();var me=u(N,de);r.postMessage({type:"complete",animation:P,id:me})}return{loadAnimation:c,loadData:p,completeAnimation:b}}(),ImagePreloader=function(){var i=function(){var Le=createTag("canvas");Le.width=1,Le.height=1;var tt=Le.getContext("2d");return tt.fillStyle="rgba(0,0,0,0)",tt.fillRect(0,0,1,1),Le}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function t(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(Le,tt,Be){var nt="";if(Le.e)nt=Le.p;else if(tt){var ft=Le.p;ft.indexOf("images/")!==-1&&(ft=ft.split("/")[1]),nt=tt+ft}else nt=Be,nt+=Le.u?Le.u:"",nt+=Le.p;return nt}function s(Le){var tt=0,Be=setInterval((function(){var nt=Le.getBBox();(nt.width||tt>500)&&(this._imageLoaded(),clearInterval(Be)),tt+=1}).bind(this),50)}function n(Le){var tt=r(Le,this.assetsPath,this.path),Be=createNS("image");isSafari?this.testImageLoaded(Be):Be.addEventListener("load",this._imageLoaded,!1),Be.addEventListener("error",(function(){nt.img=i,this._imageLoaded()}).bind(this),!1),Be.setAttributeNS("http://www.w3.org/1999/xlink","href",tt),this._elementHelper.append?this._elementHelper.append(Be):this._elementHelper.appendChild(Be);var nt={img:Be,assetData:Le};return nt}function a(Le){var tt=r(Le,this.assetsPath,this.path),Be=createTag("img");Be.crossOrigin="anonymous",Be.addEventListener("load",this._imageLoaded,!1),Be.addEventListener("error",(function(){nt.img=i,this._imageLoaded()}).bind(this),!1),Be.src=tt;var nt={img:Be,assetData:Le};return nt}function l(Le){var tt={assetData:Le},Be=r(Le,this.assetsPath,this.path);return dataManager.loadData(Be,(function(nt){tt.img=nt,this._footageLoaded()}).bind(this),(function(){tt.img={},this._footageLoaded()}).bind(this)),tt}function u(Le,tt){this.imagesLoadedCb=tt;var Be,nt=Le.length;for(Be=0;Be<nt;Be+=1)Le[Be].layers||(!Le[Be].t||Le[Be].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Le[Be]))):Le[Be].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Le[Be]))))}function c(Le){this.path=Le||""}function p(Le){this.assetsPath=Le||""}function b(Le){for(var tt=0,Be=this.images.length;tt<Be;){if(this.images[tt].assetData===Le)return this.images[tt].img;tt+=1}return null}function P(){this.imagesLoadedCb=null,this.images.length=0}function N(){return this.totalImages===this.loadedAssets}function de(){return this.totalFootages===this.loadedFootagesCount}function me(Le,tt){Le==="svg"?(this._elementHelper=tt,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ye(){this._imageLoaded=e.bind(this),this._footageLoaded=t.bind(this),this.testImageLoaded=s.bind(this),this.createFootageData=l.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ye.prototype={loadAssets:u,setAssetsPath:p,setPath:c,loadedImages:N,loadedFootages:de,destroy:P,getAsset:b,createImgData:a,createImageData:n,imageLoaded:e,footageLoaded:t,setCacheType:me},Ye}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var r=this._cbs[e],s=0;s<r.length;s+=1)r[s](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),(function(){this.removeEventListener(e,t)}).bind(this)},removeEventListener:function(e,t){if(!t)this._cbs[e]=null;else if(this._cbs[e]){for(var r=0,s=this._cbs[e].length;r<s;)this._cbs[e][r]===t&&(this._cbs[e].splice(r,1),r-=1,s-=1),r+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function i(e){for(var t=e.split(`\r
`),r={},s,n=0,a=0;a<t.length;a+=1)s=t[a].split(":"),s.length===2&&(r[s[0]]=s[1].trim(),n+=1);if(n===0)throw new Error;return r}return function(e){for(var t=[],r=0;r<e.length;r+=1){var s=e[r],n={time:s.tm,duration:s.dr};try{n.payload=JSON.parse(e[r].cm)}catch{try{n.payload=i(e[r].cm)}catch{n.payload={name:e[r].cm}}}t.push(n)}return t}}(),ProjectInterface=function(){function i(e){this.compositions.push(e)}return function(){function e(t){for(var r=0,s=this.compositions.length;r<s;){if(this.compositions[r].data&&this.compositions[r].data.nm===t)return this.compositions[r].prepareFrame&&this.compositions[r].data.xt&&this.compositions[r].prepareFrame(this.currentFrame),this.compositions[r].compInterface;r+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=i,e}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(i){return renderers[i]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var i in renderers)if(renderers[i])return i;return""}function _typeof$4(i){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(i)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(i){(i.wrapper||i.container)&&(this.wrapper=i.wrapper||i.container);var e="svg";i.animType?e=i.animType:i.renderer&&(e=i.renderer);var t=getRenderer(e);this.renderer=new t(this,i.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,i.loop===""||i.loop===null||i.loop===void 0||i.loop===!0?this.loop=!0:i.loop===!1?this.loop=!1:this.loop=parseInt(i.loop,10),this.autoplay="autoplay"in i?i.autoplay:!0,this.name=i.name?i.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(i,"autoloadSegments")?i.autoloadSegments:!0,this.assetsPath=i.assetsPath,this.initialSegment=i.initialSegment,i.audioFactory&&this.audioController.setAudioFactory(i.audioFactory),i.animationData?this.setupAnimation(i.animationData):i.path&&(i.path.lastIndexOf("\\")!==-1?this.path=i.path.substr(0,i.path.lastIndexOf("\\")+1):this.path=i.path.substr(0,i.path.lastIndexOf("/")+1),this.fileName=i.path.substr(i.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(i.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(i){dataManager.completeAnimation(i,this.configAnimation)},AnimationItem.prototype.setData=function(i,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var t={wrapper:i,animationData:e},r=i.attributes;t.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",t.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var s=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";s==="false"?t.loop=!1:s==="true"?t.loop=!0:s!==""&&(t.loop=parseInt(s,10));var n=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:r.getNamedItem("bm-autoplay")?r.getNamedItem("bm-autoplay").value:!0;t.autoplay=n!=="false",t.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"";var a=r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"";a==="false"&&(t.prerender=!1),t.path?this.setParams(t):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(i){i.op>this.animationData.op&&(this.animationData.op=i.op,this.totalFrames=Math.floor(i.op-this.animationData.ip));var e=this.animationData.layers,t,r=e.length,s=i.layers,n,a=s.length;for(n=0;n<a;n+=1)for(t=0;t<r;){if(e[t].id===s[n].id){e[t]=s[n];break}t+=1}if((i.chars||i.fonts)&&(this.renderer.globalData.fontManager.addChars(i.chars),this.renderer.globalData.fontManager.addFonts(i.fonts,this.renderer.globalData.defs)),i.assets)for(r=i.assets.length,t=0;t<r;t+=1)this.animationData.assets.push(i.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(i){this.animationData=i;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var i=this.animationData.segments;if(!i||i.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=i.shift();this.timeCompleted=e.time*this.frameRate;var t=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(t,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var i=this.animationData.segments;i||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(i){if(this.renderer)try{this.animationData=i,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(i),i.assets||(i.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(i.assets),this.markers=markerParser(i.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var i=getExpressionsPlugin();i&&i.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(i,e){var t=typeof i=="number"?i:void 0,r=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(t,r)},AnimationItem.prototype.setSubframe=function(i){this.isSubframeEnabled=!!i},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(i){this.triggerRenderFrameError(i)}},AnimationItem.prototype.play=function(i){i&&this.name!==i||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(i){i&&this.name!==i||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(i){i&&this.name!==i||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(i){i&&this.name!==i||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(i){for(var e,t=0;t<this.markers.length;t+=1)if(e=this.markers[t],e.payload&&e.payload.name===i)return e;return null},AnimationItem.prototype.goToAndStop=function(i,e,t){if(!(t&&this.name!==t)){var r=Number(i);if(isNaN(r)){var s=this.getMarkerData(i);s&&this.goToAndStop(s.time,!0)}else e?this.setCurrentRawFrameValue(i):this.setCurrentRawFrameValue(i*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(i,e,t){if(!(t&&this.name!==t)){var r=Number(i);if(isNaN(r)){var s=this.getMarkerData(i);s&&(s.duration?this.playSegments([s.time,s.time+s.duration],!0):this.goToAndStop(s.time,!0))}else this.goToAndStop(r,e,t);this.play()}},AnimationItem.prototype.advanceTime=function(i){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+i*this.frameModifier,t=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(t=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(t=!0,e=0)):this.setCurrentRawFrameValue(e),t&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(i,e){this.playCount=0,i[1]<i[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=i[0]-i[1],this.timeCompleted=this.totalFrames,this.firstFrame=i[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):i[1]>i[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=i[1]-i[0],this.timeCompleted=this.totalFrames,this.firstFrame=i[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(i,e){var t=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<i?t=i:this.currentRawFrame+this.firstFrame>e&&(t=e-i)),this.firstFrame=i,this.totalFrames=e-i,this.timeCompleted=this.totalFrames,t!==-1&&this.goToAndStop(t,!0)},AnimationItem.prototype.playSegments=function(i,e){if(e&&(this.segments.length=0),_typeof$4(i[0])==="object"){var t,r=i.length;for(t=0;t<r;t+=1)this.segments.push(i[t])}else this.segments.push(i);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(i){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),i&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(i){return this.segments.length?(this.adjustSegment(this.segments.shift(),i),!0):!1},AnimationItem.prototype.destroy=function(i){i&&this.name!==i||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(i){this.currentRawFrame=i,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(i){this.playSpeed=i,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(i){this.playDirection=i<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(i){this.loop=i},AnimationItem.prototype.setVolume=function(i,e){e&&this.name!==e||this.audioController.setVolume(i)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(i){i&&this.name!==i||this.audioController.mute()},AnimationItem.prototype.unmute=function(i){i&&this.name!==i||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(i){var e="";if(i.e)e=i.p;else if(this.assetsPath){var t=i.p;t.indexOf("images/")!==-1&&(t=t.split("/")[1]),e=this.assetsPath+t}else e=this.path,e+=i.u?i.u:"",e+=i.p;return e},AnimationItem.prototype.getAssetData=function(i){for(var e=0,t=this.assets.length;e<t;){if(i===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(i){return i?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(i,e,t){try{var r=this.renderer.getElementByPath(i);r.updateDocumentData(e,t)}catch{}},AnimationItem.prototype.trigger=function(i){if(this._cbs&&this._cbs[i])switch(i){case"enterFrame":this.triggerEvent(i,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(i,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(i,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(i,new BMCompleteEvent(i,this.frameMult));break;case"segmentStart":this.triggerEvent(i,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(i,new BMDestroyEvent(i,this));break;default:this.triggerEvent(i)}i==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameMult)),i==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult)),i==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(i,this.frameMult)),i==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames)),i==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(i,this))},AnimationItem.prototype.triggerRenderFrameError=function(i){var e=new BMRenderFrameErrorEvent(i,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(i){var e=new BMConfigErrorEvent(i,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var i={},e=[],t=0,r=0,s=0,n=!0,a=!1;function l(vt){for(var xt=0,gt=vt.target;xt<r;)e[xt].animation===gt&&(e.splice(xt,1),xt-=1,r-=1,gt.isPaused||b()),xt+=1}function u(vt,xt){if(!vt)return null;for(var gt=0;gt<r;){if(e[gt].elem===vt&&e[gt].elem!==null)return e[gt].animation;gt+=1}var _t=new AnimationItem;return P(_t,vt),_t.setData(vt,xt),_t}function c(){var vt,xt=e.length,gt=[];for(vt=0;vt<xt;vt+=1)gt.push(e[vt].animation);return gt}function p(){s+=1,bt()}function b(){s-=1}function P(vt,xt){vt.addEventListener("destroy",l),vt.addEventListener("_active",p),vt.addEventListener("_idle",b),e.push({elem:xt,animation:vt}),r+=1}function N(vt){var xt=new AnimationItem;return P(xt,null),xt.setParams(vt),xt}function de(vt,xt){var gt;for(gt=0;gt<r;gt+=1)e[gt].animation.setSpeed(vt,xt)}function me(vt,xt){var gt;for(gt=0;gt<r;gt+=1)e[gt].animation.setDirection(vt,xt)}function Ye(vt){var xt;for(xt=0;xt<r;xt+=1)e[xt].animation.play(vt)}function Le(vt){var xt=vt-t,gt;for(gt=0;gt<r;gt+=1)e[gt].animation.advanceTime(xt);t=vt,s&&!a?window.requestAnimationFrame(Le):n=!0}function tt(vt){t=vt,window.requestAnimationFrame(Le)}function Be(vt){var xt;for(xt=0;xt<r;xt+=1)e[xt].animation.pause(vt)}function nt(vt,xt,gt){var _t;for(_t=0;_t<r;_t+=1)e[_t].animation.goToAndStop(vt,xt,gt)}function ft(vt){var xt;for(xt=0;xt<r;xt+=1)e[xt].animation.stop(vt)}function mt(vt){var xt;for(xt=0;xt<r;xt+=1)e[xt].animation.togglePause(vt)}function ht(vt){var xt;for(xt=r-1;xt>=0;xt-=1)e[xt].animation.destroy(vt)}function Et(vt,xt,gt){var _t=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),yt,At=_t.length;for(yt=0;yt<At;yt+=1)gt&&_t[yt].setAttribute("data-bm-type",gt),u(_t[yt],vt);if(xt&&At===0){gt||(gt="svg");var wt=document.getElementsByTagName("body")[0];wt.innerText="";var It=createTag("div");It.style.width="100%",It.style.height="100%",It.setAttribute("data-bm-type",gt),wt.appendChild(It),u(It,vt)}}function St(){var vt;for(vt=0;vt<r;vt+=1)e[vt].animation.resize()}function bt(){!a&&s&&n&&(window.requestAnimationFrame(tt),n=!1)}function Pt(){a=!0}function Rt(){a=!1,bt()}function Dt(vt,xt){var gt;for(gt=0;gt<r;gt+=1)e[gt].animation.setVolume(vt,xt)}function kt(vt){var xt;for(xt=0;xt<r;xt+=1)e[xt].animation.mute(vt)}function Lt(vt){var xt;for(xt=0;xt<r;xt+=1)e[xt].animation.unmute(vt)}return i.registerAnimation=u,i.loadAnimation=N,i.setSpeed=de,i.setDirection=me,i.play=Ye,i.pause=Be,i.stop=ft,i.togglePause=mt,i.searchAnimations=Et,i.resize=St,i.goToAndStop=nt,i.destroy=ht,i.freeze=Pt,i.unfreeze=Rt,i.setVolume=Dt,i.mute=kt,i.unmute=Lt,i.getRegisteredAnimations=c,i}(),BezierFactory=function(){var i={};i.getBezierEasing=t;var e={};function t(tt,Be,nt,ft,mt){var ht=mt||("bez_"+tt+"_"+Be+"_"+nt+"_"+ft).replace(/\./g,"p");if(e[ht])return e[ht];var Et=new Le([tt,Be,nt,ft]);return e[ht]=Et,Et}var r=4,s=.001,n=1e-7,a=10,l=11,u=1/(l-1),c=typeof Float32Array=="function";function p(tt,Be){return 1-3*Be+3*tt}function b(tt,Be){return 3*Be-6*tt}function P(tt){return 3*tt}function N(tt,Be,nt){return((p(Be,nt)*tt+b(Be,nt))*tt+P(Be))*tt}function de(tt,Be,nt){return 3*p(Be,nt)*tt*tt+2*b(Be,nt)*tt+P(Be)}function me(tt,Be,nt,ft,mt){var ht,Et,St=0;do Et=Be+(nt-Be)/2,ht=N(Et,ft,mt)-tt,ht>0?nt=Et:Be=Et;while(Math.abs(ht)>n&&++St<a);return Et}function Ye(tt,Be,nt,ft){for(var mt=0;mt<r;++mt){var ht=de(Be,nt,ft);if(ht===0)return Be;var Et=N(Be,nt,ft)-tt;Be-=Et/ht}return Be}function Le(tt){this._p=tt,this._mSampleValues=c?new Float32Array(l):new Array(l),this._precomputed=!1,this.get=this.get.bind(this)}return Le.prototype={get:function(Be){var nt=this._p[0],ft=this._p[1],mt=this._p[2],ht=this._p[3];return this._precomputed||this._precompute(),nt===ft&&mt===ht?Be:Be===0?0:Be===1?1:N(this._getTForX(Be),ft,ht)},_precompute:function(){var Be=this._p[0],nt=this._p[1],ft=this._p[2],mt=this._p[3];this._precomputed=!0,(Be!==nt||ft!==mt)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Be=this._p[0],nt=this._p[2],ft=0;ft<l;++ft)this._mSampleValues[ft]=N(ft*u,Be,nt)},_getTForX:function(Be){for(var nt=this._p[0],ft=this._p[2],mt=this._mSampleValues,ht=0,Et=1,St=l-1;Et!==St&&mt[Et]<=Be;++Et)ht+=u;--Et;var bt=(Be-mt[Et])/(mt[Et+1]-mt[Et]),Pt=ht+bt*u,Rt=de(Pt,nt,ft);return Rt>=s?Ye(Be,Pt,nt,ft):Rt===0?Pt:me(Be,ht,ht+u,nt,ft)}},i}(),pooling=function(){function i(e){return e.concat(createSizedArray(e.length))}return{double:i}}(),poolFactory=function(){return function(i,e,t){var r=0,s=i,n=createSizedArray(s),a={newElement:l,release:u};function l(){var c;return r?(r-=1,c=n[r]):c=e(),c}function u(c){r===s&&(n=pooling.double(n),s*=2),t&&t(c),n[r]=c,r+=1}return a}}(),bezierLengthPool=function(){function i(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,i)}(),segmentsLengthPool=function(){function i(){return{lengths:[],totalLength:0}}function e(t){var r,s=t.lengths.length;for(r=0;r<s;r+=1)bezierLengthPool.release(t.lengths[r]);t.lengths.length=0}return poolFactory(8,i,e)}();function bezFunction(){var i=Math;function e(P,N,de,me,Ye,Le){var tt=P*me+N*Ye+de*Le-Ye*me-Le*P-de*N;return tt>-.001&&tt<.001}function t(P,N,de,me,Ye,Le,tt,Be,nt){if(de===0&&Le===0&&nt===0)return e(P,N,me,Ye,tt,Be);var ft=i.sqrt(i.pow(me-P,2)+i.pow(Ye-N,2)+i.pow(Le-de,2)),mt=i.sqrt(i.pow(tt-P,2)+i.pow(Be-N,2)+i.pow(nt-de,2)),ht=i.sqrt(i.pow(tt-me,2)+i.pow(Be-Ye,2)+i.pow(nt-Le,2)),Et;return ft>mt?ft>ht?Et=ft-mt-ht:Et=ht-mt-ft:ht>mt?Et=ht-mt-ft:Et=mt-ft-ht,Et>-1e-4&&Et<1e-4}var r=function(){return function(P,N,de,me){var Ye=getDefaultCurveSegments(),Le,tt,Be,nt,ft,mt=0,ht,Et=[],St=[],bt=bezierLengthPool.newElement();for(Be=de.length,Le=0;Le<Ye;Le+=1){for(ft=Le/(Ye-1),ht=0,tt=0;tt<Be;tt+=1)nt=bmPow(1-ft,3)*P[tt]+3*bmPow(1-ft,2)*ft*de[tt]+3*(1-ft)*bmPow(ft,2)*me[tt]+bmPow(ft,3)*N[tt],Et[tt]=nt,St[tt]!==null&&(ht+=bmPow(Et[tt]-St[tt],2)),St[tt]=Et[tt];ht&&(ht=bmSqrt(ht),mt+=ht),bt.percents[Le]=ft,bt.lengths[Le]=mt}return bt.addedLength=mt,bt}}();function s(P){var N=segmentsLengthPool.newElement(),de=P.c,me=P.v,Ye=P.o,Le=P.i,tt,Be=P._length,nt=N.lengths,ft=0;for(tt=0;tt<Be-1;tt+=1)nt[tt]=r(me[tt],me[tt+1],Ye[tt],Le[tt+1]),ft+=nt[tt].addedLength;return de&&Be&&(nt[tt]=r(me[tt],me[0],Ye[tt],Le[0]),ft+=nt[tt].addedLength),N.totalLength=ft,N}function n(P){this.segmentLength=0,this.points=new Array(P)}function a(P,N){this.partialLength=P,this.point=N}var l=function(){var P={};return function(N,de,me,Ye){var Le=(N[0]+"_"+N[1]+"_"+de[0]+"_"+de[1]+"_"+me[0]+"_"+me[1]+"_"+Ye[0]+"_"+Ye[1]).replace(/\./g,"p");if(!P[Le]){var tt=getDefaultCurveSegments(),Be,nt,ft,mt,ht,Et=0,St,bt,Pt=null;N.length===2&&(N[0]!==de[0]||N[1]!==de[1])&&e(N[0],N[1],de[0],de[1],N[0]+me[0],N[1]+me[1])&&e(N[0],N[1],de[0],de[1],de[0]+Ye[0],de[1]+Ye[1])&&(tt=2);var Rt=new n(tt);for(ft=me.length,Be=0;Be<tt;Be+=1){for(bt=createSizedArray(ft),ht=Be/(tt-1),St=0,nt=0;nt<ft;nt+=1)mt=bmPow(1-ht,3)*N[nt]+3*bmPow(1-ht,2)*ht*(N[nt]+me[nt])+3*(1-ht)*bmPow(ht,2)*(de[nt]+Ye[nt])+bmPow(ht,3)*de[nt],bt[nt]=mt,Pt!==null&&(St+=bmPow(bt[nt]-Pt[nt],2));St=bmSqrt(St),Et+=St,Rt.points[Be]=new a(St,bt),Pt=bt}Rt.segmentLength=Et,P[Le]=Rt}return P[Le]}}();function u(P,N){var de=N.percents,me=N.lengths,Ye=de.length,Le=bmFloor((Ye-1)*P),tt=P*N.addedLength,Be=0;if(Le===Ye-1||Le===0||tt===me[Le])return de[Le];for(var nt=me[Le]>tt?-1:1,ft=!0;ft;)if(me[Le]<=tt&&me[Le+1]>tt?(Be=(tt-me[Le])/(me[Le+1]-me[Le]),ft=!1):Le+=nt,Le<0||Le>=Ye-1){if(Le===Ye-1)return de[Le];ft=!1}return de[Le]+(de[Le+1]-de[Le])*Be}function c(P,N,de,me,Ye,Le){var tt=u(Ye,Le),Be=1-tt,nt=i.round((Be*Be*Be*P[0]+(tt*Be*Be+Be*tt*Be+Be*Be*tt)*de[0]+(tt*tt*Be+Be*tt*tt+tt*Be*tt)*me[0]+tt*tt*tt*N[0])*1e3)/1e3,ft=i.round((Be*Be*Be*P[1]+(tt*Be*Be+Be*tt*Be+Be*Be*tt)*de[1]+(tt*tt*Be+Be*tt*tt+tt*Be*tt)*me[1]+tt*tt*tt*N[1])*1e3)/1e3;return[nt,ft]}var p=createTypedArray("float32",8);function b(P,N,de,me,Ye,Le,tt){Ye<0?Ye=0:Ye>1&&(Ye=1);var Be=u(Ye,tt);Le=Le>1?1:Le;var nt=u(Le,tt),ft,mt=P.length,ht=1-Be,Et=1-nt,St=ht*ht*ht,bt=Be*ht*ht*3,Pt=Be*Be*ht*3,Rt=Be*Be*Be,Dt=ht*ht*Et,kt=Be*ht*Et+ht*Be*Et+ht*ht*nt,Lt=Be*Be*Et+ht*Be*nt+Be*ht*nt,vt=Be*Be*nt,xt=ht*Et*Et,gt=Be*Et*Et+ht*nt*Et+ht*Et*nt,_t=Be*nt*Et+ht*nt*nt+Be*Et*nt,yt=Be*nt*nt,At=Et*Et*Et,wt=nt*Et*Et+Et*nt*Et+Et*Et*nt,It=nt*nt*Et+Et*nt*nt+nt*Et*nt,Ft=nt*nt*nt;for(ft=0;ft<mt;ft+=1)p[ft*4]=i.round((St*P[ft]+bt*de[ft]+Pt*me[ft]+Rt*N[ft])*1e3)/1e3,p[ft*4+1]=i.round((Dt*P[ft]+kt*de[ft]+Lt*me[ft]+vt*N[ft])*1e3)/1e3,p[ft*4+2]=i.round((xt*P[ft]+gt*de[ft]+_t*me[ft]+yt*N[ft])*1e3)/1e3,p[ft*4+3]=i.round((At*P[ft]+wt*de[ft]+It*me[ft]+Ft*N[ft])*1e3)/1e3;return p}return{getSegmentsLength:s,getNewSegment:b,getPointInSegment:c,buildBezierData:l,pointOnLine2D:e,pointOnLine3D:t}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(i,e){var t=this.offsetTime,r;this.propType==="multidimensional"&&(r=createTypedArray("float32",this.pv.length));for(var s=e.lastIndex,n=s,a=this.keyframes.length-1,l=!0,u,c,p;l;){if(u=this.keyframes[n],c=this.keyframes[n+1],n===a-1&&i>=c.t-t){u.h&&(u=c),s=0;break}if(c.t-t>i){s=n;break}n<a-1?n+=1:(s=0,l=!1)}p=this.keyframesMetadata[n]||{};var b,P,N,de,me,Ye,Le=c.t-t,tt=u.t-t,Be;if(u.to){p.bezierData||(p.bezierData=bez.buildBezierData(u.s,c.s||u.e,u.to,u.ti));var nt=p.bezierData;if(i>=Le||i<tt){var ft=i>=Le?nt.points.length-1:0;for(P=nt.points[ft].point.length,b=0;b<P;b+=1)r[b]=nt.points[ft].point[b]}else{p.__fnct?Ye=p.__fnct:(Ye=BezierFactory.getBezierEasing(u.o.x,u.o.y,u.i.x,u.i.y,u.n).get,p.__fnct=Ye),N=Ye((i-tt)/(Le-tt));var mt=nt.segmentLength*N,ht,Et=e.lastFrame<i&&e._lastKeyframeIndex===n?e._lastAddedLength:0;for(me=e.lastFrame<i&&e._lastKeyframeIndex===n?e._lastPoint:0,l=!0,de=nt.points.length;l;){if(Et+=nt.points[me].partialLength,mt===0||N===0||me===nt.points.length-1){for(P=nt.points[me].point.length,b=0;b<P;b+=1)r[b]=nt.points[me].point[b];break}else if(mt>=Et&&mt<Et+nt.points[me+1].partialLength){for(ht=(mt-Et)/nt.points[me+1].partialLength,P=nt.points[me].point.length,b=0;b<P;b+=1)r[b]=nt.points[me].point[b]+(nt.points[me+1].point[b]-nt.points[me].point[b])*ht;break}me<de-1?me+=1:l=!1}e._lastPoint=me,e._lastAddedLength=Et-nt.points[me].partialLength,e._lastKeyframeIndex=n}}else{var St,bt,Pt,Rt,Dt;if(a=u.s.length,Be=c.s||u.e,this.sh&&u.h!==1)if(i>=Le)r[0]=Be[0],r[1]=Be[1],r[2]=Be[2];else if(i<=tt)r[0]=u.s[0],r[1]=u.s[1],r[2]=u.s[2];else{var kt=createQuaternion(u.s),Lt=createQuaternion(Be),vt=(i-tt)/(Le-tt);quaternionToEuler(r,slerp(kt,Lt,vt))}else for(n=0;n<a;n+=1)u.h!==1&&(i>=Le?N=1:i<tt?N=0:(u.o.x.constructor===Array?(p.__fnct||(p.__fnct=[]),p.__fnct[n]?Ye=p.__fnct[n]:(St=u.o.x[n]===void 0?u.o.x[0]:u.o.x[n],bt=u.o.y[n]===void 0?u.o.y[0]:u.o.y[n],Pt=u.i.x[n]===void 0?u.i.x[0]:u.i.x[n],Rt=u.i.y[n]===void 0?u.i.y[0]:u.i.y[n],Ye=BezierFactory.getBezierEasing(St,bt,Pt,Rt).get,p.__fnct[n]=Ye)):p.__fnct?Ye=p.__fnct:(St=u.o.x,bt=u.o.y,Pt=u.i.x,Rt=u.i.y,Ye=BezierFactory.getBezierEasing(St,bt,Pt,Rt).get,u.keyframeMetadata=Ye),N=Ye((i-tt)/(Le-tt)))),Be=c.s||u.e,Dt=u.h===1?u.s[n]:u.s[n]+(Be[n]-u.s[n])*N,this.propType==="multidimensional"?r[n]=Dt:r=Dt}return e.lastIndex=s,r}function slerp(i,e,t){var r=[],s=i[0],n=i[1],a=i[2],l=i[3],u=e[0],c=e[1],p=e[2],b=e[3],P,N,de,me,Ye;return N=s*u+n*c+a*p+l*b,N<0&&(N=-N,u=-u,c=-c,p=-p,b=-b),1-N>1e-6?(P=Math.acos(N),de=Math.sin(P),me=Math.sin((1-t)*P)/de,Ye=Math.sin(t*P)/de):(me=1-t,Ye=t),r[0]=me*s+Ye*u,r[1]=me*n+Ye*c,r[2]=me*a+Ye*p,r[3]=me*l+Ye*b,r}function quaternionToEuler(i,e){var t=e[0],r=e[1],s=e[2],n=e[3],a=Math.atan2(2*r*n-2*t*s,1-2*r*r-2*s*s),l=Math.asin(2*t*r+2*s*n),u=Math.atan2(2*t*n-2*r*s,1-2*t*t-2*s*s);i[0]=a/degToRads,i[1]=l/degToRads,i[2]=u/degToRads}function createQuaternion(i){var e=i[0]*degToRads,t=i[1]*degToRads,r=i[2]*degToRads,s=Math.cos(e/2),n=Math.cos(t/2),a=Math.cos(r/2),l=Math.sin(e/2),u=Math.sin(t/2),c=Math.sin(r/2),p=s*n*a-l*u*c,b=l*u*a+s*n*c,P=l*n*a+s*u*c,N=s*u*a-l*n*c;return[b,P,N,p]}function getValueAtCurrentTime(){var i=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,t=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(i===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=t&&i>=t||this._caching.lastFrame<e&&i<e))){this._caching.lastFrame>=i&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(i,this._caching);this.pv=r}return this._caching.lastFrame=i,this.pv}function setVValue(i){var e;if(this.propType==="unidimensional")e=i*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var t=0,r=this.v.length;t<r;)e=i[t]*this.mult,mathAbs(this.v[t]-e)>1e-5&&(this.v[t]=e,this._mdf=!0),t+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var i,e=this.effectsSequence.length,t=this.kf?this.pv:this.data.k;for(i=0;i<e;i+=1)t=this.effectsSequence[i](t);this.setVValue(t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(i){this.effectsSequence.push(i),this.container.addDynamicProperty(this)}function ValueProperty(i,e,t,r){this.propType="unidimensional",this.mult=t||1,this.data=e,this.v=t?e.k*t:e.k,this.pv=e.k,this._mdf=!1,this.elem=i,this.container=r,this.comp=i.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(i,e,t,r){this.propType="multidimensional",this.mult=t||1,this.data=e,this._mdf=!1,this.elem=i,this.container=r,this.comp=i.comp,this.k=!1,this.kf=!1,this.frameId=-1;var s,n=e.k.length;for(this.v=createTypedArray("float32",n),this.pv=createTypedArray("float32",n),this.vel=createTypedArray("float32",n),s=0;s<n;s+=1)this.v[s]=e.k[s]*this.mult,this.pv[s]=e.k[s];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(i,e,t,r){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=t||1,this.elem=i,this.container=r,this.comp=i.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(i,e,t,r){this.propType="multidimensional";var s,n=e.k.length,a,l,u,c;for(s=0;s<n-1;s+=1)e.k[s].to&&e.k[s].s&&e.k[s+1]&&e.k[s+1].s&&(a=e.k[s].s,l=e.k[s+1].s,u=e.k[s].to,c=e.k[s].ti,(a.length===2&&!(a[0]===l[0]&&a[1]===l[1])&&bez.pointOnLine2D(a[0],a[1],l[0],l[1],a[0]+u[0],a[1]+u[1])&&bez.pointOnLine2D(a[0],a[1],l[0],l[1],l[0]+c[0],l[1]+c[1])||a.length===3&&!(a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2])&&bez.pointOnLine3D(a[0],a[1],a[2],l[0],l[1],l[2],a[0]+u[0],a[1]+u[1],a[2]+u[2])&&bez.pointOnLine3D(a[0],a[1],a[2],l[0],l[1],l[2],l[0]+c[0],l[1]+c[1],l[2]+c[2]))&&(e.k[s].to=null,e.k[s].ti=null),a[0]===l[0]&&a[1]===l[1]&&u[0]===0&&u[1]===0&&c[0]===0&&c[1]===0&&(a.length===2||a[2]===l[2]&&u[2]===0&&c[2]===0)&&(e.k[s].to=null,e.k[s].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=t||1,this.elem=i,this.container=r,this.comp=i.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var p=e.k[0].s.length;for(this.v=createTypedArray("float32",p),this.pv=createTypedArray("float32",p),s=0;s<p;s+=1)this.v[s]=initFrame,this.pv[s]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",p)},this.addEffect=addEffect}var PropertyFactory=function(){function i(t,r,s,n,a){r.sid&&(r=t.globalData.slotManager.getProp(r));var l;if(!r.k.length)l=new ValueProperty(t,r,n,a);else if(typeof r.k[0]=="number")l=new MultiDimensionalProperty(t,r,n,a);else switch(s){case 0:l=new KeyframedValueProperty(t,r,n,a);break;case 1:l=new KeyframedMultidimensionalProperty(t,r,n,a);break}return l.effectsSequence.length&&a.addDynamicProperty(l),l}var e={getProp:i};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function i(){return createTypedArray("float32",2)}return poolFactory(8,i)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(i,e){this.c=i,this.setLength(e);for(var t=0;t<e;)this.v[t]=pointPool.newElement(),this.o[t]=pointPool.newElement(),this.i[t]=pointPool.newElement(),t+=1},ShapePath.prototype.setLength=function(i){for(;this._maxLength<i;)this.doubleArrayLength();this._length=i},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(i,e,t,r,s){var n;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),t){case"v":n=this.v;break;case"i":n=this.i;break;case"o":n=this.o;break;default:n=[];break}(!n[r]||n[r]&&!s)&&(n[r]=pointPool.newElement()),n[r][0]=i,n[r][1]=e},ShapePath.prototype.setTripleAt=function(i,e,t,r,s,n,a,l){this.setXYAt(i,e,"v",a,l),this.setXYAt(t,r,"o",a,l),this.setXYAt(s,n,"i",a,l)},ShapePath.prototype.reverse=function(){var i=new ShapePath;i.setPathData(this.c,this._length);var e=this.v,t=this.o,r=this.i,s=0;this.c&&(i.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],t[0][0],t[0][1],0,!1),s=1);var n=this._length-1,a=this._length,l;for(l=s;l<a;l+=1)i.setTripleAt(e[n][0],e[n][1],r[n][0],r[n][1],t[n][0],t[n][1],l,!1),n-=1;return i},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function i(){return new ShapePath}function e(s){var n=s._length,a;for(a=0;a<n;a+=1)pointPool.release(s.v[a]),pointPool.release(s.i[a]),pointPool.release(s.o[a]),s.v[a]=null,s.i[a]=null,s.o[a]=null;s._length=0,s.c=!1}function t(s){var n=r.newElement(),a,l=s._length===void 0?s.v.length:s._length;for(n.setLength(l),n.c=s.c,a=0;a<l;a+=1)n.setTripleAt(s.v[a][0],s.v[a][1],s.o[a][0],s.o[a][1],s.i[a][0],s.i[a][1],a);return n}var r=poolFactory(4,i,e);return r.clone=t,r}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(i){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=i,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1)shapePool.release(this.shapes[i]);this._length=0};var shapeCollectionPool=function(){var i={newShapeCollection:s,release:n},e=0,t=4,r=createSizedArray(t);function s(){var a;return e?(e-=1,a=r[e]):a=new ShapeCollection,a}function n(a){var l,u=a._length;for(l=0;l<u;l+=1)shapePool.release(a.shapes[l]);a._length=0,e===t&&(r=pooling.double(r),t*=2),r[e]=a,e+=1}return i}(),ShapePropertyFactory=function(){var i=-999999;function e(Le,tt,Be){var nt=Be.lastIndex,ft,mt,ht,Et,St,bt,Pt,Rt,Dt,kt=this.keyframes;if(Le<kt[0].t-this.offsetTime)ft=kt[0].s[0],ht=!0,nt=0;else if(Le>=kt[kt.length-1].t-this.offsetTime)ft=kt[kt.length-1].s?kt[kt.length-1].s[0]:kt[kt.length-2].e[0],ht=!0;else{for(var Lt=nt,vt=kt.length-1,xt=!0,gt,_t,yt;xt&&(gt=kt[Lt],_t=kt[Lt+1],!(_t.t-this.offsetTime>Le));)Lt<vt-1?Lt+=1:xt=!1;if(yt=this.keyframesMetadata[Lt]||{},ht=gt.h===1,nt=Lt,!ht){if(Le>=_t.t-this.offsetTime)Rt=1;else if(Le<gt.t-this.offsetTime)Rt=0;else{var At;yt.__fnct?At=yt.__fnct:(At=BezierFactory.getBezierEasing(gt.o.x,gt.o.y,gt.i.x,gt.i.y).get,yt.__fnct=At),Rt=At((Le-(gt.t-this.offsetTime))/(_t.t-this.offsetTime-(gt.t-this.offsetTime)))}mt=_t.s?_t.s[0]:gt.e[0]}ft=gt.s[0]}for(bt=tt._length,Pt=ft.i[0].length,Be.lastIndex=nt,Et=0;Et<bt;Et+=1)for(St=0;St<Pt;St+=1)Dt=ht?ft.i[Et][St]:ft.i[Et][St]+(mt.i[Et][St]-ft.i[Et][St])*Rt,tt.i[Et][St]=Dt,Dt=ht?ft.o[Et][St]:ft.o[Et][St]+(mt.o[Et][St]-ft.o[Et][St])*Rt,tt.o[Et][St]=Dt,Dt=ht?ft.v[Et][St]:ft.v[Et][St]+(mt.v[Et][St]-ft.v[Et][St])*Rt,tt.v[Et][St]=Dt}function t(){var Le=this.comp.renderedFrame-this.offsetTime,tt=this.keyframes[0].t-this.offsetTime,Be=this.keyframes[this.keyframes.length-1].t-this.offsetTime,nt=this._caching.lastFrame;return nt!==i&&(nt<tt&&Le<tt||nt>Be&&Le>Be)||(this._caching.lastIndex=nt<Le?this._caching.lastIndex:0,this.interpolateShape(Le,this.pv,this._caching)),this._caching.lastFrame=Le,this.pv}function r(){this.paths=this.localShapeCollection}function s(Le,tt){if(Le._length!==tt._length||Le.c!==tt.c)return!1;var Be,nt=Le._length;for(Be=0;Be<nt;Be+=1)if(Le.v[Be][0]!==tt.v[Be][0]||Le.v[Be][1]!==tt.v[Be][1]||Le.o[Be][0]!==tt.o[Be][0]||Le.o[Be][1]!==tt.o[Be][1]||Le.i[Be][0]!==tt.i[Be][0]||Le.i[Be][1]!==tt.i[Be][1])return!1;return!0}function n(Le){s(this.v,Le)||(this.v=shapePool.clone(Le),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Le;this.kf?Le=this.pv:this.data.ks?Le=this.data.ks.k:Le=this.data.pt.k;var tt,Be=this.effectsSequence.length;for(tt=0;tt<Be;tt+=1)Le=this.effectsSequence[tt](Le);this.setVValue(Le),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function l(Le,tt,Be){this.propType="shape",this.comp=Le.comp,this.container=Le,this.elem=Le,this.data=tt,this.k=!1,this.kf=!1,this._mdf=!1;var nt=Be===3?tt.pt.k:tt.ks.k;this.v=shapePool.clone(nt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function u(Le){this.effectsSequence.push(Le),this.container.addDynamicProperty(this)}l.prototype.interpolateShape=e,l.prototype.getValue=a,l.prototype.setVValue=n,l.prototype.addEffect=u;function c(Le,tt,Be){this.propType="shape",this.comp=Le.comp,this.elem=Le,this.container=Le,this.offsetTime=Le.data.st,this.keyframes=Be===3?tt.pt.k:tt.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var nt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,nt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=i,this.reset=r,this._caching={lastFrame:i,lastIndex:0},this.effectsSequence=[t.bind(this)]}c.prototype.getValue=a,c.prototype.interpolateShape=e,c.prototype.setVValue=n,c.prototype.addEffect=u;var p=function(){var Le=roundCorner;function tt(Be,nt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=nt.d,this.elem=Be,this.comp=Be.comp,this.frameId=-1,this.initDynamicPropertyContainer(Be),this.p=PropertyFactory.getProp(Be,nt.p,1,0,this),this.s=PropertyFactory.getProp(Be,nt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return tt.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var nt=this.p.v[0],ft=this.p.v[1],mt=this.s.v[0]/2,ht=this.s.v[1]/2,Et=this.d!==3,St=this.v;St.v[0][0]=nt,St.v[0][1]=ft-ht,St.v[1][0]=Et?nt+mt:nt-mt,St.v[1][1]=ft,St.v[2][0]=nt,St.v[2][1]=ft+ht,St.v[3][0]=Et?nt-mt:nt+mt,St.v[3][1]=ft,St.i[0][0]=Et?nt-mt*Le:nt+mt*Le,St.i[0][1]=ft-ht,St.i[1][0]=Et?nt+mt:nt-mt,St.i[1][1]=ft-ht*Le,St.i[2][0]=Et?nt+mt*Le:nt-mt*Le,St.i[2][1]=ft+ht,St.i[3][0]=Et?nt-mt:nt+mt,St.i[3][1]=ft+ht*Le,St.o[0][0]=Et?nt+mt*Le:nt-mt*Le,St.o[0][1]=ft-ht,St.o[1][0]=Et?nt+mt:nt-mt,St.o[1][1]=ft+ht*Le,St.o[2][0]=Et?nt-mt*Le:nt+mt*Le,St.o[2][1]=ft+ht,St.o[3][0]=Et?nt-mt:nt+mt,St.o[3][1]=ft-ht*Le}},extendPrototype([DynamicPropertyContainer],tt),tt}(),b=function(){function Le(tt,Be){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=tt,this.comp=tt.comp,this.data=Be,this.frameId=-1,this.d=Be.d,this.initDynamicPropertyContainer(tt),Be.sy===1?(this.ir=PropertyFactory.getProp(tt,Be.ir,0,0,this),this.is=PropertyFactory.getProp(tt,Be.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(tt,Be.pt,0,0,this),this.p=PropertyFactory.getProp(tt,Be.p,1,0,this),this.r=PropertyFactory.getProp(tt,Be.r,0,degToRads,this),this.or=PropertyFactory.getProp(tt,Be.or,0,0,this),this.os=PropertyFactory.getProp(tt,Be.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Le.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Be=Math.floor(this.pt.v)*2,nt=Math.PI*2/Be,ft=!0,mt=this.or.v,ht=this.ir.v,Et=this.os.v,St=this.is.v,bt=2*Math.PI*mt/(Be*2),Pt=2*Math.PI*ht/(Be*2),Rt,Dt,kt,Lt,vt=-Math.PI/2;vt+=this.r.v;var xt=this.data.d===3?-1:1;for(this.v._length=0,Rt=0;Rt<Be;Rt+=1){Dt=ft?mt:ht,kt=ft?Et:St,Lt=ft?bt:Pt;var gt=Dt*Math.cos(vt),_t=Dt*Math.sin(vt),yt=gt===0&&_t===0?0:_t/Math.sqrt(gt*gt+_t*_t),At=gt===0&&_t===0?0:-gt/Math.sqrt(gt*gt+_t*_t);gt+=+this.p.v[0],_t+=+this.p.v[1],this.v.setTripleAt(gt,_t,gt-yt*Lt*kt*xt,_t-At*Lt*kt*xt,gt+yt*Lt*kt*xt,_t+At*Lt*kt*xt,Rt,!0),ft=!ft,vt+=nt*xt}},convertPolygonToPath:function(){var Be=Math.floor(this.pt.v),nt=Math.PI*2/Be,ft=this.or.v,mt=this.os.v,ht=2*Math.PI*ft/(Be*4),Et,St=-Math.PI*.5,bt=this.data.d===3?-1:1;for(St+=this.r.v,this.v._length=0,Et=0;Et<Be;Et+=1){var Pt=ft*Math.cos(St),Rt=ft*Math.sin(St),Dt=Pt===0&&Rt===0?0:Rt/Math.sqrt(Pt*Pt+Rt*Rt),kt=Pt===0&&Rt===0?0:-Pt/Math.sqrt(Pt*Pt+Rt*Rt);Pt+=+this.p.v[0],Rt+=+this.p.v[1],this.v.setTripleAt(Pt,Rt,Pt-Dt*ht*mt*bt,Rt-kt*ht*mt*bt,Pt+Dt*ht*mt*bt,Rt+kt*ht*mt*bt,Et,!0),St+=nt*bt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Le),Le}(),P=function(){function Le(tt,Be){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=tt,this.comp=tt.comp,this.frameId=-1,this.d=Be.d,this.initDynamicPropertyContainer(tt),this.p=PropertyFactory.getProp(tt,Be.p,1,0,this),this.s=PropertyFactory.getProp(tt,Be.s,1,0,this),this.r=PropertyFactory.getProp(tt,Be.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Le.prototype={convertRectToPath:function(){var Be=this.p.v[0],nt=this.p.v[1],ft=this.s.v[0]/2,mt=this.s.v[1]/2,ht=bmMin(ft,mt,this.r.v),Et=ht*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Be+ft,nt-mt+ht,Be+ft,nt-mt+ht,Be+ft,nt-mt+Et,0,!0),this.v.setTripleAt(Be+ft,nt+mt-ht,Be+ft,nt+mt-Et,Be+ft,nt+mt-ht,1,!0),ht!==0?(this.v.setTripleAt(Be+ft-ht,nt+mt,Be+ft-ht,nt+mt,Be+ft-Et,nt+mt,2,!0),this.v.setTripleAt(Be-ft+ht,nt+mt,Be-ft+Et,nt+mt,Be-ft+ht,nt+mt,3,!0),this.v.setTripleAt(Be-ft,nt+mt-ht,Be-ft,nt+mt-ht,Be-ft,nt+mt-Et,4,!0),this.v.setTripleAt(Be-ft,nt-mt+ht,Be-ft,nt-mt+Et,Be-ft,nt-mt+ht,5,!0),this.v.setTripleAt(Be-ft+ht,nt-mt,Be-ft+ht,nt-mt,Be-ft+Et,nt-mt,6,!0),this.v.setTripleAt(Be+ft-ht,nt-mt,Be+ft-Et,nt-mt,Be+ft-ht,nt-mt,7,!0)):(this.v.setTripleAt(Be-ft,nt+mt,Be-ft+Et,nt+mt,Be-ft,nt+mt,2),this.v.setTripleAt(Be-ft,nt-mt,Be-ft,nt-mt+Et,Be-ft,nt-mt,3))):(this.v.setTripleAt(Be+ft,nt-mt+ht,Be+ft,nt-mt+Et,Be+ft,nt-mt+ht,0,!0),ht!==0?(this.v.setTripleAt(Be+ft-ht,nt-mt,Be+ft-ht,nt-mt,Be+ft-Et,nt-mt,1,!0),this.v.setTripleAt(Be-ft+ht,nt-mt,Be-ft+Et,nt-mt,Be-ft+ht,nt-mt,2,!0),this.v.setTripleAt(Be-ft,nt-mt+ht,Be-ft,nt-mt+ht,Be-ft,nt-mt+Et,3,!0),this.v.setTripleAt(Be-ft,nt+mt-ht,Be-ft,nt+mt-Et,Be-ft,nt+mt-ht,4,!0),this.v.setTripleAt(Be-ft+ht,nt+mt,Be-ft+ht,nt+mt,Be-ft+Et,nt+mt,5,!0),this.v.setTripleAt(Be+ft-ht,nt+mt,Be+ft-Et,nt+mt,Be+ft-ht,nt+mt,6,!0),this.v.setTripleAt(Be+ft,nt+mt-ht,Be+ft,nt+mt-ht,Be+ft,nt+mt-Et,7,!0)):(this.v.setTripleAt(Be-ft,nt-mt,Be-ft+Et,nt-mt,Be-ft,nt-mt,1,!0),this.v.setTripleAt(Be-ft,nt+mt,Be-ft,nt+mt-Et,Be-ft,nt+mt,2,!0),this.v.setTripleAt(Be+ft,nt+mt,Be+ft-Et,nt+mt,Be+ft,nt+mt,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],Le),Le}();function N(Le,tt,Be){var nt;if(Be===3||Be===4){var ft=Be===3?tt.pt:tt.ks,mt=ft.k;mt.length?nt=new c(Le,tt,Be):nt=new l(Le,tt,Be)}else Be===5?nt=new P(Le,tt):Be===6?nt=new p(Le,tt):Be===7&&(nt=new b(Le,tt));return nt.k&&Le.addDynamicProperty(nt),nt}function de(){return l}function me(){return c}var Ye={};return Ye.getShapeProp=N,Ye.getConstructorFunction=de,Ye.getKeyframedConstructorFunction=me,Ye}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var i=Math.cos,e=Math.sin,t=Math.tan,r=Math.round;function s(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function n(gt){if(gt===0)return this;var _t=i(gt),yt=e(gt);return this._t(_t,-yt,0,0,yt,_t,0,0,0,0,1,0,0,0,0,1)}function a(gt){if(gt===0)return this;var _t=i(gt),yt=e(gt);return this._t(1,0,0,0,0,_t,-yt,0,0,yt,_t,0,0,0,0,1)}function l(gt){if(gt===0)return this;var _t=i(gt),yt=e(gt);return this._t(_t,0,yt,0,0,1,0,0,-yt,0,_t,0,0,0,0,1)}function u(gt){if(gt===0)return this;var _t=i(gt),yt=e(gt);return this._t(_t,-yt,0,0,yt,_t,0,0,0,0,1,0,0,0,0,1)}function c(gt,_t){return this._t(1,_t,gt,1,0,0)}function p(gt,_t){return this.shear(t(gt),t(_t))}function b(gt,_t){var yt=i(_t),At=e(_t);return this._t(yt,At,0,0,-At,yt,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,t(gt),1,0,0,0,0,1,0,0,0,0,1)._t(yt,-At,0,0,At,yt,0,0,0,0,1,0,0,0,0,1)}function P(gt,_t,yt){return!yt&&yt!==0&&(yt=1),gt===1&&_t===1&&yt===1?this:this._t(gt,0,0,0,0,_t,0,0,0,0,yt,0,0,0,0,1)}function N(gt,_t,yt,At,wt,It,Ft,zt,Ut,Qt,Xt,Jt,mi,ni,pi,Zt){return this.props[0]=gt,this.props[1]=_t,this.props[2]=yt,this.props[3]=At,this.props[4]=wt,this.props[5]=It,this.props[6]=Ft,this.props[7]=zt,this.props[8]=Ut,this.props[9]=Qt,this.props[10]=Xt,this.props[11]=Jt,this.props[12]=mi,this.props[13]=ni,this.props[14]=pi,this.props[15]=Zt,this}function de(gt,_t,yt){return yt=yt||0,gt!==0||_t!==0||yt!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,gt,_t,yt,1):this}function me(gt,_t,yt,At,wt,It,Ft,zt,Ut,Qt,Xt,Jt,mi,ni,pi,Zt){var Yt=this.props;if(gt===1&&_t===0&&yt===0&&At===0&&wt===0&&It===1&&Ft===0&&zt===0&&Ut===0&&Qt===0&&Xt===1&&Jt===0)return Yt[12]=Yt[12]*gt+Yt[15]*mi,Yt[13]=Yt[13]*It+Yt[15]*ni,Yt[14]=Yt[14]*Xt+Yt[15]*pi,Yt[15]*=Zt,this._identityCalculated=!1,this;var ji=Yt[0],ri=Yt[1],Bt=Yt[2],vi=Yt[3],Oi=Yt[4],Ri=Yt[5],ui=Yt[6],Vi=Yt[7],Zi=Yt[8],Ki=Yt[9],wi=Yt[10],Li=Yt[11],hi=Yt[12],zi=Yt[13],Ai=Yt[14],dr=Yt[15];return Yt[0]=ji*gt+ri*wt+Bt*Ut+vi*mi,Yt[1]=ji*_t+ri*It+Bt*Qt+vi*ni,Yt[2]=ji*yt+ri*Ft+Bt*Xt+vi*pi,Yt[3]=ji*At+ri*zt+Bt*Jt+vi*Zt,Yt[4]=Oi*gt+Ri*wt+ui*Ut+Vi*mi,Yt[5]=Oi*_t+Ri*It+ui*Qt+Vi*ni,Yt[6]=Oi*yt+Ri*Ft+ui*Xt+Vi*pi,Yt[7]=Oi*At+Ri*zt+ui*Jt+Vi*Zt,Yt[8]=Zi*gt+Ki*wt+wi*Ut+Li*mi,Yt[9]=Zi*_t+Ki*It+wi*Qt+Li*ni,Yt[10]=Zi*yt+Ki*Ft+wi*Xt+Li*pi,Yt[11]=Zi*At+Ki*zt+wi*Jt+Li*Zt,Yt[12]=hi*gt+zi*wt+Ai*Ut+dr*mi,Yt[13]=hi*_t+zi*It+Ai*Qt+dr*ni,Yt[14]=hi*yt+zi*Ft+Ai*Xt+dr*pi,Yt[15]=hi*At+zi*zt+Ai*Jt+dr*Zt,this._identityCalculated=!1,this}function Ye(gt){var _t=gt.props;return this.transform(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5],_t[6],_t[7],_t[8],_t[9],_t[10],_t[11],_t[12],_t[13],_t[14],_t[15])}function Le(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function tt(gt){for(var _t=0;_t<16;){if(gt.props[_t]!==this.props[_t])return!1;_t+=1}return!0}function Be(gt){var _t;for(_t=0;_t<16;_t+=1)gt.props[_t]=this.props[_t];return gt}function nt(gt){var _t;for(_t=0;_t<16;_t+=1)this.props[_t]=gt[_t]}function ft(gt,_t,yt){return{x:gt*this.props[0]+_t*this.props[4]+yt*this.props[8]+this.props[12],y:gt*this.props[1]+_t*this.props[5]+yt*this.props[9]+this.props[13],z:gt*this.props[2]+_t*this.props[6]+yt*this.props[10]+this.props[14]}}function mt(gt,_t,yt){return gt*this.props[0]+_t*this.props[4]+yt*this.props[8]+this.props[12]}function ht(gt,_t,yt){return gt*this.props[1]+_t*this.props[5]+yt*this.props[9]+this.props[13]}function Et(gt,_t,yt){return gt*this.props[2]+_t*this.props[6]+yt*this.props[10]+this.props[14]}function St(){var gt=this.props[0]*this.props[5]-this.props[1]*this.props[4],_t=this.props[5]/gt,yt=-this.props[1]/gt,At=-this.props[4]/gt,wt=this.props[0]/gt,It=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/gt,Ft=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/gt,zt=new Matrix;return zt.props[0]=_t,zt.props[1]=yt,zt.props[4]=At,zt.props[5]=wt,zt.props[12]=It,zt.props[13]=Ft,zt}function bt(gt){var _t=this.getInverseMatrix();return _t.applyToPointArray(gt[0],gt[1],gt[2]||0)}function Pt(gt){var _t,yt=gt.length,At=[];for(_t=0;_t<yt;_t+=1)At[_t]=bt(gt[_t]);return At}function Rt(gt,_t,yt){var At=createTypedArray("float32",6);if(this.isIdentity())At[0]=gt[0],At[1]=gt[1],At[2]=_t[0],At[3]=_t[1],At[4]=yt[0],At[5]=yt[1];else{var wt=this.props[0],It=this.props[1],Ft=this.props[4],zt=this.props[5],Ut=this.props[12],Qt=this.props[13];At[0]=gt[0]*wt+gt[1]*Ft+Ut,At[1]=gt[0]*It+gt[1]*zt+Qt,At[2]=_t[0]*wt+_t[1]*Ft+Ut,At[3]=_t[0]*It+_t[1]*zt+Qt,At[4]=yt[0]*wt+yt[1]*Ft+Ut,At[5]=yt[0]*It+yt[1]*zt+Qt}return At}function Dt(gt,_t,yt){var At;return this.isIdentity()?At=[gt,_t,yt]:At=[gt*this.props[0]+_t*this.props[4]+yt*this.props[8]+this.props[12],gt*this.props[1]+_t*this.props[5]+yt*this.props[9]+this.props[13],gt*this.props[2]+_t*this.props[6]+yt*this.props[10]+this.props[14]],At}function kt(gt,_t){if(this.isIdentity())return gt+","+_t;var yt=this.props;return Math.round((gt*yt[0]+_t*yt[4]+yt[12])*100)/100+","+Math.round((gt*yt[1]+_t*yt[5]+yt[13])*100)/100}function Lt(){for(var gt=0,_t=this.props,yt="matrix3d(",At=1e4;gt<16;)yt+=r(_t[gt]*At)/At,yt+=gt===15?")":",",gt+=1;return yt}function vt(gt){var _t=1e4;return gt<1e-6&&gt>0||gt>-1e-6&&gt<0?r(gt*_t)/_t:gt}function xt(){var gt=this.props,_t=vt(gt[0]),yt=vt(gt[1]),At=vt(gt[4]),wt=vt(gt[5]),It=vt(gt[12]),Ft=vt(gt[13]);return"matrix("+_t+","+yt+","+At+","+wt+","+It+","+Ft+")"}return function(){this.reset=s,this.rotate=n,this.rotateX=a,this.rotateY=l,this.rotateZ=u,this.skew=p,this.skewFromAxis=b,this.shear=c,this.scale=P,this.setTransform=N,this.translate=de,this.transform=me,this.multiply=Ye,this.applyToPoint=ft,this.applyToX=mt,this.applyToY=ht,this.applyToZ=Et,this.applyToPointArray=Dt,this.applyToTriplePoints=Rt,this.applyToPointStringified=kt,this.toCSS=Lt,this.to2dCSS=xt,this.clone=Be,this.cloneFromProps=nt,this.equals=tt,this.inversePoints=Pt,this.inversePoint=bt,this.getInverseMatrix=St,this._t=this.transform,this.isIdentity=Le,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(i){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(i)}var lottie={};function setLocation(i){setLocationHref(i)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(i){setSubframeEnabled(i)}function setPrefix(i){setIdPrefix(i)}function loadAnimation(i){return animationManager.loadAnimation(i)}function setQuality(i){if(typeof i=="string")switch(i){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(i)&&i>1&&setDefaultCurveSegments(i)}function inBrowser(){return typeof navigator<"u"}function installPlugin(i,e){i==="expressions"&&setExpressionsPlugin(e)}function getFactory(i){switch(i){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(i){for(var e=queryString.split("&"),t=0;t<e.length;t+=1){var r=e[t].split("=");if(decodeURIComponent(r[0])==i)return decodeURIComponent(r[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(i){}var ShapeModifiers=function(){var i={},e={};i.registerModifier=t,i.getModifier=r;function t(s,n){e[s]||(e[s]=n)}function r(s,n,a){return new e[s](n,a)}return i}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(i){if(!this.closed){i.sh.container.addDynamicProperty(i.sh);var e={shape:i.sh,data:i,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&i.setAsAnimated()}},ShapeModifier.prototype.init=function(i,e){this.shapes=[],this.elem=i,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(i,e){this.s=PropertyFactory.getProp(i,e.s,0,.01,this),this.e=PropertyFactory.getProp(i,e.e,0,.01,this),this.o=PropertyFactory.getProp(i,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(i){i.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(i,e,t,r,s){var n=[];e<=1?n.push({s:i,e}):i>=1?n.push({s:i-1,e:e-1}):(n.push({s:i,e:1}),n.push({s:0,e:e-1}));var a=[],l,u=n.length,c;for(l=0;l<u;l+=1)if(c=n[l],!(c.e*s<r||c.s*s>r+t)){var p,b;c.s*s<=r?p=0:p=(c.s*s-r)/t,c.e*s>=r+t?b=1:b=(c.e*s-r)/t,a.push([p,b])}return a.length||a.push([0,0]),a},TrimModifier.prototype.releasePathsData=function(i){var e,t=i.length;for(e=0;e<t;e+=1)segmentsLengthPool.release(i[e]);return i.length=0,i},TrimModifier.prototype.processShapes=function(i){var e,t;if(this._mdf||i){var r=this.o.v%360/360;if(r<0&&(r+=1),this.s.v>1?e=1+r:this.s.v<0?e=0+r:e=this.s.v+r,this.e.v>1?t=1+r:this.e.v<0?t=0+r:t=this.e.v+r,e>t){var s=e;e=t,t=s}e=Math.round(e*1e4)*1e-4,t=Math.round(t*1e4)*1e-4,this.sValue=e,this.eValue=t}else e=this.sValue,t=this.eValue;var n,a,l=this.shapes.length,u,c,p,b,P,N=0;if(t===e)for(a=0;a<l;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(t===1&&e===0||t===0&&e===1){if(this._mdf)for(a=0;a<l;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var de=[],me,Ye;for(a=0;a<l;a+=1)if(me=this.shapes[a],!me.shape._mdf&&!this._mdf&&!i&&this.m!==2)me.shape.paths=me.localShapeCollection;else{if(n=me.shape.paths,c=n._length,P=0,!me.shape._mdf&&me.pathsData.length)P=me.totalShapeLength;else{for(p=this.releasePathsData(me.pathsData),u=0;u<c;u+=1)b=bez.getSegmentsLength(n.shapes[u]),p.push(b),P+=b.totalLength;me.totalShapeLength=P,me.pathsData=p}N+=P,me.shape._mdf=!0}var Le=e,tt=t,Be=0,nt;for(a=l-1;a>=0;a-=1)if(me=this.shapes[a],me.shape._mdf){for(Ye=me.localShapeCollection,Ye.releaseShapes(),this.m===2&&l>1?(nt=this.calculateShapeEdges(e,t,me.totalShapeLength,Be,N),Be+=me.totalShapeLength):nt=[[Le,tt]],c=nt.length,u=0;u<c;u+=1){Le=nt[u][0],tt=nt[u][1],de.length=0,tt<=1?de.push({s:me.totalShapeLength*Le,e:me.totalShapeLength*tt}):Le>=1?de.push({s:me.totalShapeLength*(Le-1),e:me.totalShapeLength*(tt-1)}):(de.push({s:me.totalShapeLength*Le,e:me.totalShapeLength}),de.push({s:0,e:me.totalShapeLength*(tt-1)}));var ft=this.addShapes(me,de[0]);if(de[0].s!==de[0].e){if(de.length>1){var mt=me.shape.paths.shapes[me.shape.paths._length-1];if(mt.c){var ht=ft.pop();this.addPaths(ft,Ye),ft=this.addShapes(me,de[1],ht)}else this.addPaths(ft,Ye),ft=this.addShapes(me,de[1])}this.addPaths(ft,Ye)}}me.shape.paths=Ye}}},TrimModifier.prototype.addPaths=function(i,e){var t,r=i.length;for(t=0;t<r;t+=1)e.addShape(i[t])},TrimModifier.prototype.addSegment=function(i,e,t,r,s,n,a){s.setXYAt(e[0],e[1],"o",n),s.setXYAt(t[0],t[1],"i",n+1),a&&s.setXYAt(i[0],i[1],"v",n),s.setXYAt(r[0],r[1],"v",n+1)},TrimModifier.prototype.addSegmentFromArray=function(i,e,t,r){e.setXYAt(i[1],i[5],"o",t),e.setXYAt(i[2],i[6],"i",t+1),r&&e.setXYAt(i[0],i[4],"v",t),e.setXYAt(i[3],i[7],"v",t+1)},TrimModifier.prototype.addShapes=function(i,e,t){var r=i.pathsData,s=i.shape.paths.shapes,n,a=i.shape.paths._length,l,u,c=0,p,b,P,N,de=[],me,Ye=!0;for(t?(b=t._length,me=t._length):(t=shapePool.newElement(),b=0,me=0),de.push(t),n=0;n<a;n+=1){for(P=r[n].lengths,t.c=s[n].c,u=s[n].c?P.length:P.length+1,l=1;l<u;l+=1)if(p=P[l-1],c+p.addedLength<e.s)c+=p.addedLength,t.c=!1;else if(c>e.e){t.c=!1;break}else e.s<=c&&e.e>=c+p.addedLength?(this.addSegment(s[n].v[l-1],s[n].o[l-1],s[n].i[l],s[n].v[l],t,b,Ye),Ye=!1):(N=bez.getNewSegment(s[n].v[l-1],s[n].v[l],s[n].o[l-1],s[n].i[l],(e.s-c)/p.addedLength,(e.e-c)/p.addedLength,P[l-1]),this.addSegmentFromArray(N,t,b,Ye),Ye=!1,t.c=!1),c+=p.addedLength,b+=1;if(s[n].c&&P.length){if(p=P[l-1],c<=e.e){var Le=P[l-1].addedLength;e.s<=c&&e.e>=c+Le?(this.addSegment(s[n].v[l-1],s[n].o[l-1],s[n].i[0],s[n].v[0],t,b,Ye),Ye=!1):(N=bez.getNewSegment(s[n].v[l-1],s[n].v[0],s[n].o[l-1],s[n].i[0],(e.s-c)/Le,(e.e-c)/Le,P[l-1]),this.addSegmentFromArray(N,t,b,Ye),Ye=!1,t.c=!1)}else t.c=!1;c+=p.addedLength,b+=1}if(t._length&&(t.setXYAt(t.v[me][0],t.v[me][1],"i",me),t.setXYAt(t.v[t._length-1][0],t.v[t._length-1][1],"o",t._length-1)),c>e.e)break;n<a-1&&(t=shapePool.newElement(),Ye=!0,de.push(t),b=0)}return de};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(i,e){var t=e/100,r=[0,0],s=i._length,n=0;for(n=0;n<s;n+=1)r[0]+=i.v[n][0],r[1]+=i.v[n][1];r[0]/=s,r[1]/=s;var a=shapePool.newElement();a.c=i.c;var l,u,c,p,b,P;for(n=0;n<s;n+=1)l=i.v[n][0]+(r[0]-i.v[n][0])*t,u=i.v[n][1]+(r[1]-i.v[n][1])*t,c=i.o[n][0]+(r[0]-i.o[n][0])*-t,p=i.o[n][1]+(r[1]-i.o[n][1])*-t,b=i.i[n][0]+(r[0]-i.i[n][0])*-t,P=i.i[n][1]+(r[1]-i.i[n][1])*-t,a.setTripleAt(l,u,c,p,b,P,n);return a},PuckerAndBloatModifier.prototype.processShapes=function(i){var e,t,r=this.shapes.length,s,n,a=this.amount.v;if(a!==0){var l,u;for(t=0;t<r;t+=1){if(l=this.shapes[t],u=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!i))for(u.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,n=l.shape.paths._length,s=0;s<n;s+=1)u.addShape(this.processPath(e[s],a));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var i=[0,0];function e(u){var c=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||c,this.a&&u.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&u.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&u.skewFromAxis(-this.sk.v,this.sa.v),this.r?u.rotate(-this.r.v):u.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?u.translate(this.px.v,this.py.v,-this.pz.v):u.translate(this.px.v,this.py.v,0):u.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function t(u){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||u){var c;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var p,b;if(c=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(p=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/c,0),b=this.p.getValueAtTime(this.p.keyframes[0].t/c,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(p=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/c,0),b=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/c,0)):(p=this.p.pv,b=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/c,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){p=[],b=[];var P=this.px,N=this.py;P._caching.lastFrame+P.offsetTime<=P.keyframes[0].t?(p[0]=P.getValueAtTime((P.keyframes[0].t+.01)/c,0),p[1]=N.getValueAtTime((N.keyframes[0].t+.01)/c,0),b[0]=P.getValueAtTime(P.keyframes[0].t/c,0),b[1]=N.getValueAtTime(N.keyframes[0].t/c,0)):P._caching.lastFrame+P.offsetTime>=P.keyframes[P.keyframes.length-1].t?(p[0]=P.getValueAtTime(P.keyframes[P.keyframes.length-1].t/c,0),p[1]=N.getValueAtTime(N.keyframes[N.keyframes.length-1].t/c,0),b[0]=P.getValueAtTime((P.keyframes[P.keyframes.length-1].t-.01)/c,0),b[1]=N.getValueAtTime((N.keyframes[N.keyframes.length-1].t-.01)/c,0)):(p=[P.pv,N.pv],b[0]=P.getValueAtTime((P._caching.lastFrame+P.offsetTime-.01)/c,P.offsetTime),b[1]=N.getValueAtTime((N._caching.lastFrame+N.offsetTime-.01)/c,N.offsetTime))}else b=i,p=b;this.v.rotate(-Math.atan2(p[1]-b[1],p[0]-b[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function r(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function s(){}function n(u){this._addDynamicProperty(u),this.elem.addDynamicProperty(u),this._isDirty=!0}function a(u,c,p){if(this.elem=u,this.frameId=-1,this.propType="transform",this.data=c,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(p||u),c.p&&c.p.s?(this.px=PropertyFactory.getProp(u,c.p.x,0,0,this),this.py=PropertyFactory.getProp(u,c.p.y,0,0,this),c.p.z&&(this.pz=PropertyFactory.getProp(u,c.p.z,0,0,this))):this.p=PropertyFactory.getProp(u,c.p||{k:[0,0,0]},1,0,this),c.rx){if(this.rx=PropertyFactory.getProp(u,c.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(u,c.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(u,c.rz,0,degToRads,this),c.or.k[0].ti){var b,P=c.or.k.length;for(b=0;b<P;b+=1)c.or.k[b].to=null,c.or.k[b].ti=null}this.or=PropertyFactory.getProp(u,c.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(u,c.r||{k:0},0,degToRads,this);c.sk&&(this.sk=PropertyFactory.getProp(u,c.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(u,c.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(u,c.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(u,c.s||{k:[100,100,100]},1,.01,this),c.o?this.o=PropertyFactory.getProp(u,c.o,0,.01,u):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}a.prototype={applyToMatrix:e,getValue:t,precalculateMatrix:r,autoOrient:s},extendPrototype([DynamicPropertyContainer],a),a.prototype.addDynamicProperty=n,a.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function l(u,c,p){return new a(u,c,p)}return{getTransformProperty:l}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(i,e.c,0,null,this),this.o=PropertyFactory.getProp(i,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(i,e.tr,this),this.so=PropertyFactory.getProp(i,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(i,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(i,e,t,r,s,n){var a=n?-1:1,l=r.s.v[0]+(1-r.s.v[0])*(1-s),u=r.s.v[1]+(1-r.s.v[1])*(1-s);i.translate(r.p.v[0]*a*s,r.p.v[1]*a*s,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*a*s),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.scale(n?1/l:l,n?1/u:u),t.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(i,e,t,r){for(this.elem=i,this.arr=e,this.pos=t,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,e[t]);t>0;)t-=1,this._elements.unshift(e[t]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(i){var e,t=i.length;for(e=0;e<t;e+=1)i[e]._processed=!1,i[e].ty==="gr"&&this.resetElements(i[e].it)},RepeaterModifier.prototype.cloneElements=function(i){var e=JSON.parse(JSON.stringify(i));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(i,e){var t,r=i.length;for(t=0;t<r;t+=1)i[t]._render=e,i[t].ty==="gr"&&this.changeGroupRender(i[t].it,e)},RepeaterModifier.prototype.processShapes=function(i){var e,t,r,s,n,a=!1;if(this._mdf||i){var l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}n=0;var c;for(r=0;r<=this._groups.length-1;r+=1){if(c=n<l,this._groups[r]._render=c,this.changeGroupRender(this._groups[r].it,c),!c){var p=this.elemsData[r].it,b=p[p.length-1];b.transform.op.v!==0?(b.transform.op._mdf=!0,b.transform.op.v=0):b.transform.op._mdf=!1}n+=1}this._currentCopies=l;var P=this.o.v,N=P%1,de=P>0?Math.floor(P):Math.ceil(P),me=this.pMatrix.props,Ye=this.rMatrix.props,Le=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var tt=0;if(P>0){for(;tt<de;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),tt+=1;N&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,N,!1),tt+=N)}else if(P<0){for(;tt>de;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),tt-=1;N&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-N,!0),tt-=N)}r=this.data.m===1?0:this._currentCopies-1,s=this.data.m===1?1:-1,n=this._currentCopies;for(var Be,nt;n;){if(e=this.elemsData[r].it,t=e[e.length-1].transform.mProps.v.props,nt=t.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),tt!==0){for((r!==0&&s===1||r!==this._currentCopies-1&&s===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ye[0],Ye[1],Ye[2],Ye[3],Ye[4],Ye[5],Ye[6],Ye[7],Ye[8],Ye[9],Ye[10],Ye[11],Ye[12],Ye[13],Ye[14],Ye[15]),this.matrix.transform(Le[0],Le[1],Le[2],Le[3],Le[4],Le[5],Le[6],Le[7],Le[8],Le[9],Le[10],Le[11],Le[12],Le[13],Le[14],Le[15]),this.matrix.transform(me[0],me[1],me[2],me[3],me[4],me[5],me[6],me[7],me[8],me[9],me[10],me[11],me[12],me[13],me[14],me[15]),Be=0;Be<nt;Be+=1)t[Be]=this.matrix.props[Be];this.matrix.reset()}else for(this.matrix.reset(),Be=0;Be<nt;Be+=1)t[Be]=this.matrix.props[Be];tt+=1,n-=1,r+=s}}else for(n=this._currentCopies,r=0,s=1;n;)e=this.elemsData[r].it,t=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,n-=1,r+=s;return a},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(i,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(i,e){var t=shapePool.newElement();t.c=i.c;var r,s=i._length,n,a,l,u,c,p,b=0,P,N,de,me,Ye,Le;for(r=0;r<s;r+=1)n=i.v[r],l=i.o[r],a=i.i[r],n[0]===l[0]&&n[1]===l[1]&&n[0]===a[0]&&n[1]===a[1]?(r===0||r===s-1)&&!i.c?(t.setTripleAt(n[0],n[1],l[0],l[1],a[0],a[1],b),b+=1):(r===0?u=i.v[s-1]:u=i.v[r-1],c=Math.sqrt(Math.pow(n[0]-u[0],2)+Math.pow(n[1]-u[1],2)),p=c?Math.min(c/2,e)/c:0,Ye=n[0]+(u[0]-n[0])*p,P=Ye,Le=n[1]-(n[1]-u[1])*p,N=Le,de=P-(P-n[0])*roundCorner,me=N-(N-n[1])*roundCorner,t.setTripleAt(P,N,de,me,Ye,Le,b),b+=1,r===s-1?u=i.v[0]:u=i.v[r+1],c=Math.sqrt(Math.pow(n[0]-u[0],2)+Math.pow(n[1]-u[1],2)),p=c?Math.min(c/2,e)/c:0,de=n[0]+(u[0]-n[0])*p,P=de,me=n[1]+(u[1]-n[1])*p,N=me,Ye=P-(P-n[0])*roundCorner,Le=N-(N-n[1])*roundCorner,t.setTripleAt(P,N,de,me,Ye,Le,b),b+=1):(t.setTripleAt(i.v[r][0],i.v[r][1],i.o[r][0],i.o[r][1],i.i[r][0],i.i[r][1],b),b+=1);return t},RoundCornersModifier.prototype.processShapes=function(i){var e,t,r=this.shapes.length,s,n,a=this.rd.v;if(a!==0){var l,u;for(t=0;t<r;t+=1){if(l=this.shapes[t],u=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!i))for(u.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,n=l.shape.paths._length,s=0;s<n;s+=1)u.addShape(this.processPath(e[s],a));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(i,e){return Math.abs(i-e)*1e5<=Math.min(Math.abs(i),Math.abs(e))}function floatZero(i){return Math.abs(i)<=1e-5}function lerp(i,e,t){return i*(1-t)+e*t}function lerpPoint(i,e,t){return[lerp(i[0],e[0],t),lerp(i[1],e[1],t)]}function quadRoots(i,e,t){if(i===0)return[];var r=e*e-4*i*t;if(r<0)return[];var s=-e/(2*i);if(r===0)return[s];var n=Math.sqrt(r)/(2*i);return[s-n,s+n]}function polynomialCoefficients(i,e,t,r){return[-i+3*e-3*t+r,3*i-6*e+3*t,-3*i+3*e,i]}function singlePoint(i){return new PolynomialBezier(i,i,i,i,!1)}function PolynomialBezier(i,e,t,r,s){s&&pointEqual(i,e)&&(e=lerpPoint(i,r,1/3)),s&&pointEqual(t,r)&&(t=lerpPoint(i,r,2/3));var n=polynomialCoefficients(i[0],e[0],t[0],r[0]),a=polynomialCoefficients(i[1],e[1],t[1],r[1]);this.a=[n[0],a[0]],this.b=[n[1],a[1]],this.c=[n[2],a[2]],this.d=[n[3],a[3]],this.points=[i,e,t,r]}PolynomialBezier.prototype.point=function(i){return[((this.a[0]*i+this.b[0])*i+this.c[0])*i+this.d[0],((this.a[1]*i+this.b[1])*i+this.c[1])*i+this.d[1]]},PolynomialBezier.prototype.derivative=function(i){return[(3*i*this.a[0]+2*this.b[0])*i+this.c[0],(3*i*this.a[1]+2*this.b[1])*i+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(i){var e=this.derivative(i);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(i){var e=this.derivative(i);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var i=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(i))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/i,t=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/i;if(t<0)return[];var r=Math.sqrt(t);return floatZero(r)?r>0&&r<1?[e]:[]:[e-r,e+r].filter(function(s){return s>0&&s<1})},PolynomialBezier.prototype.split=function(i){if(i<=0)return[singlePoint(this.points[0]),this];if(i>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],i),t=lerpPoint(this.points[1],this.points[2],i),r=lerpPoint(this.points[2],this.points[3],i),s=lerpPoint(e,t,i),n=lerpPoint(t,r,i),a=lerpPoint(s,n,i);return[new PolynomialBezier(this.points[0],e,s,a,!0),new PolynomialBezier(a,n,r,this.points[3],!0)]};function extrema(i,e){var t=i.points[0][e],r=i.points[i.points.length-1][e];if(t>r){var s=r;r=t,t=s}for(var n=quadRoots(3*i.a[e],2*i.b[e],i.c[e]),a=0;a<n.length;a+=1)if(n[a]>0&&n[a]<1){var l=i.point(n[a])[e];l<t?t=l:l>r&&(r=l)}return{min:t,max:r}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var i=this.bounds();return{left:i.x.min,right:i.x.max,top:i.y.min,bottom:i.y.max,width:i.x.max-i.x.min,height:i.y.max-i.y.min,cx:(i.x.max+i.x.min)/2,cy:(i.y.max+i.y.min)/2}};function intersectData(i,e,t){var r=i.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:i,t:(e+t)/2,t1:e,t2:t}}function splitData(i){var e=i.bez.split(.5);return[intersectData(e[0],i.t1,i.t),intersectData(e[1],i.t,i.t2)]}function boxIntersect(i,e){return Math.abs(i.cx-e.cx)*2<i.width+e.width&&Math.abs(i.cy-e.cy)*2<i.height+e.height}function intersectsImpl(i,e,t,r,s,n){if(boxIntersect(i,e)){if(t>=n||i.width<=r&&i.height<=r&&e.width<=r&&e.height<=r){s.push([i.t,e.t]);return}var a=splitData(i),l=splitData(e);intersectsImpl(a[0],l[0],t+1,r,s,n),intersectsImpl(a[0],l[1],t+1,r,s,n),intersectsImpl(a[1],l[0],t+1,r,s,n),intersectsImpl(a[1],l[1],t+1,r,s,n)}}PolynomialBezier.prototype.intersections=function(i,e,t){e===void 0&&(e=2),t===void 0&&(t=7);var r=[];return intersectsImpl(intersectData(this,0,1),intersectData(i,0,1),0,e,r,t),r},PolynomialBezier.shapeSegment=function(i,e){var t=(e+1)%i.length();return new PolynomialBezier(i.v[e],i.o[e],i.i[t],i.v[t],!0)},PolynomialBezier.shapeSegmentInverted=function(i,e){var t=(e+1)%i.length();return new PolynomialBezier(i.v[t],i.i[t],i.o[e],i.v[e],!0)};function crossProduct(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function lineIntersection(i,e,t,r){var s=[i[0],i[1],1],n=[e[0],e[1],1],a=[t[0],t[1],1],l=[r[0],r[1],1],u=crossProduct(crossProduct(s,n),crossProduct(a,l));return floatZero(u[2])?null:[u[0]/u[2],u[1]/u[2]]}function polarOffset(i,e,t){return[i[0]+Math.cos(e)*t,i[1]-Math.sin(e)*t]}function pointDistance(i,e){return Math.hypot(i[0]-e[0],i[1]-e[1])}function pointEqual(i,e){return floatEqual(i[0],e[0])&&floatEqual(i[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(i,e.s,0,null,this),this.frequency=PropertyFactory.getProp(i,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(i,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(i,e,t,r,s,n,a){var l=t-Math.PI/2,u=t+Math.PI/2,c=e[0]+Math.cos(t)*r*s,p=e[1]-Math.sin(t)*r*s;i.setTripleAt(c,p,c+Math.cos(l)*n,p-Math.sin(l)*n,c+Math.cos(u)*a,p-Math.sin(u)*a,i.length())}function getPerpendicularVector(i,e){var t=[e[0]-i[0],e[1]-i[1]],r=-Math.PI*.5,s=[Math.cos(r)*t[0]-Math.sin(r)*t[1],Math.sin(r)*t[0]+Math.cos(r)*t[1]];return s}function getProjectingAngle(i,e){var t=e===0?i.length()-1:e-1,r=(e+1)%i.length(),s=i.v[t],n=i.v[r],a=getPerpendicularVector(s,n);return Math.atan2(0,1)-Math.atan2(a[1],a[0])}function zigZagCorner(i,e,t,r,s,n,a){var l=getProjectingAngle(e,t),u=e.v[t%e._length],c=e.v[t===0?e._length-1:t-1],p=e.v[(t+1)%e._length],b=n===2?Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)):0,P=n===2?Math.sqrt(Math.pow(u[0]-p[0],2)+Math.pow(u[1]-p[1],2)):0;setPoint(i,e.v[t%e._length],l,a,r,P/((s+1)*2),b/((s+1)*2))}function zigZagSegment(i,e,t,r,s,n){for(var a=0;a<r;a+=1){var l=(a+1)/(r+1),u=s===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,c=e.normalAngle(l),p=e.point(l);setPoint(i,p,c,n,t,u/((r+1)*2),u/((r+1)*2)),n=-n}return n}ZigZagModifier.prototype.processPath=function(i,e,t,r){var s=i._length,n=shapePool.newElement();if(n.c=i.c,i.c||(s-=1),s===0)return n;var a=-1,l=PolynomialBezier.shapeSegment(i,0);zigZagCorner(n,i,0,e,t,r,a);for(var u=0;u<s;u+=1)a=zigZagSegment(n,l,e,t,r,-a),u===s-1&&!i.c?l=null:l=PolynomialBezier.shapeSegment(i,(u+1)%s),zigZagCorner(n,i,u+1,e,t,r,a);return n},ZigZagModifier.prototype.processShapes=function(i){var e,t,r=this.shapes.length,s,n,a=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),u=this.pointsType.v;if(a!==0){var c,p;for(t=0;t<r;t+=1){if(c=this.shapes[t],p=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!i))for(p.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,n=c.shape.paths._length,s=0;s<n;s+=1)p.addShape(this.processPath(e[s],a,l,u));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(i,e,t){var r=Math.atan2(e[0]-i[0],e[1]-i[1]);return[polarOffset(i,r,t),polarOffset(e,r,t)]}function offsetSegment(i,e){var t,r,s,n,a,l,u;u=linearOffset(i.points[0],i.points[1],e),t=u[0],r=u[1],u=linearOffset(i.points[1],i.points[2],e),s=u[0],n=u[1],u=linearOffset(i.points[2],i.points[3],e),a=u[0],l=u[1];var c=lineIntersection(t,r,s,n);c===null&&(c=r);var p=lineIntersection(a,l,s,n);return p===null&&(p=a),new PolynomialBezier(t,c,p,l)}function joinLines(i,e,t,r,s){var n=e.points[3],a=t.points[0];if(r===3||pointEqual(n,a))return n;if(r===2){var l=-e.tangentAngle(1),u=-t.tangentAngle(0)+Math.PI,c=lineIntersection(n,polarOffset(n,l+Math.PI/2,100),a,polarOffset(a,l+Math.PI/2,100)),p=c?pointDistance(c,n):pointDistance(n,a)/2,b=polarOffset(n,l,2*p*roundCorner);return i.setXYAt(b[0],b[1],"o",i.length()-1),b=polarOffset(a,u,2*p*roundCorner),i.setTripleAt(a[0],a[1],a[0],a[1],b[0],b[1],i.length()),a}var P=pointEqual(n,e.points[2])?e.points[0]:e.points[2],N=pointEqual(a,t.points[1])?t.points[3]:t.points[1],de=lineIntersection(P,n,a,N);return de&&pointDistance(de,n)<s?(i.setTripleAt(de[0],de[1],de[0],de[1],de[0],de[1],i.length()),de):n}function getIntersection(i,e){var t=i.intersections(e);return t.length&&floatEqual(t[0][0],1)&&t.shift(),t.length?t[0]:null}function pruneSegmentIntersection(i,e){var t=i.slice(),r=e.slice(),s=getIntersection(i[i.length-1],e[0]);return s&&(t[i.length-1]=i[i.length-1].split(s[0])[0],r[0]=e[0].split(s[1])[1]),i.length>1&&e.length>1&&(s=getIntersection(i[0],e[e.length-1]),s)?[[i[0].split(s[0])[0]],[e[e.length-1].split(s[1])[1]]]:[t,r]}function pruneIntersections(i){for(var e,t=1;t<i.length;t+=1)e=pruneSegmentIntersection(i[t-1],i[t]),i[t-1]=e[0],i[t]=e[1];return i.length>1&&(e=pruneSegmentIntersection(i[i.length-1],i[0]),i[i.length-1]=e[0],i[0]=e[1]),i}function offsetSegmentSplit(i,e){var t=i.inflectionPoints(),r,s,n,a;if(t.length===0)return[offsetSegment(i,e)];if(t.length===1||floatEqual(t[1],1))return n=i.split(t[0]),r=n[0],s=n[1],[offsetSegment(r,e),offsetSegment(s,e)];n=i.split(t[0]),r=n[0];var l=(t[1]-t[0])/(1-t[0]);return n=n[1].split(l),a=n[0],s=n[1],[offsetSegment(r,e),offsetSegment(a,e),offsetSegment(s,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(i,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(i,e,t,r){var s=shapePool.newElement();s.c=i.c;var n=i.length();i.c||(n-=1);var a,l,u,c=[];for(a=0;a<n;a+=1)u=PolynomialBezier.shapeSegment(i,a),c.push(offsetSegmentSplit(u,e));if(!i.c)for(a=n-1;a>=0;a-=1)u=PolynomialBezier.shapeSegmentInverted(i,a),c.push(offsetSegmentSplit(u,e));c=pruneIntersections(c);var p=null,b=null;for(a=0;a<c.length;a+=1){var P=c[a];for(b&&(p=joinLines(s,b,P[0],t,r)),b=P[P.length-1],l=0;l<P.length;l+=1)u=P[l],p&&pointEqual(u.points[0],p)?s.setXYAt(u.points[1][0],u.points[1][1],"o",s.length()-1):s.setTripleAt(u.points[0][0],u.points[0][1],u.points[1][0],u.points[1][1],u.points[0][0],u.points[0][1],s.length()),s.setTripleAt(u.points[3][0],u.points[3][1],u.points[3][0],u.points[3][1],u.points[2][0],u.points[2][1],s.length()),p=u.points[3]}return c.length&&joinLines(s,b,c[0][0],t,r),s},OffsetPathModifier.prototype.processShapes=function(i){var e,t,r=this.shapes.length,s,n,a=this.amount.v,l=this.miterLimit.v,u=this.lineJoin;if(a!==0){var c,p;for(t=0;t<r;t+=1){if(c=this.shapes[t],p=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!i))for(p.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,n=c.shape.paths._length,s=0;s<n;s+=1)p.addShape(this.processPath(e[s],a,u,l));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(i){for(var e=i.fStyle?i.fStyle.split(" "):[],t="normal",r="normal",s=e.length,n,a=0;a<s;a+=1)switch(n=e[a].toLowerCase(),n){case"italic":r="italic";break;case"bold":t="700";break;case"black":t="900";break;case"medium":t="500";break;case"regular":case"normal":t="400";break;case"light":case"thin":t="200";break}return{style:r,weight:i.fWeight||t}}var FontManager=function(){var i=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var r=127988,s=917631,n=917601,a=917626,l=65039,u=8205,c=127462,p=127487,b=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function P(vt){var xt=vt.split(","),gt,_t=xt.length,yt=[];for(gt=0;gt<_t;gt+=1)xt[gt]!=="sans-serif"&&xt[gt]!=="monospace"&&yt.push(xt[gt]);return yt.join(",")}function N(vt,xt){var gt=createTag("span");gt.setAttribute("aria-hidden",!0),gt.style.fontFamily=xt;var _t=createTag("span");_t.innerText="giItT1WQy@!-/#",gt.style.position="absolute",gt.style.left="-10000px",gt.style.top="-10000px",gt.style.fontSize="300px",gt.style.fontVariant="normal",gt.style.fontStyle="normal",gt.style.fontWeight="normal",gt.style.letterSpacing="0",gt.appendChild(_t),document.body.appendChild(gt);var yt=_t.offsetWidth;return _t.style.fontFamily=P(vt)+", "+xt,{node:_t,w:yt,parent:gt}}function de(){var vt,xt=this.fonts.length,gt,_t,yt=xt;for(vt=0;vt<xt;vt+=1)this.fonts[vt].loaded?yt-=1:this.fonts[vt].fOrigin==="n"||this.fonts[vt].origin===0?this.fonts[vt].loaded=!0:(gt=this.fonts[vt].monoCase.node,_t=this.fonts[vt].monoCase.w,gt.offsetWidth!==_t?(yt-=1,this.fonts[vt].loaded=!0):(gt=this.fonts[vt].sansCase.node,_t=this.fonts[vt].sansCase.w,gt.offsetWidth!==_t&&(yt-=1,this.fonts[vt].loaded=!0)),this.fonts[vt].loaded&&(this.fonts[vt].sansCase.parent.parentNode.removeChild(this.fonts[vt].sansCase.parent),this.fonts[vt].monoCase.parent.parentNode.removeChild(this.fonts[vt].monoCase.parent)));yt!==0&&Date.now()-this.initTime<i?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function me(vt,xt){var gt=document.body&&xt?"svg":"canvas",_t,yt=getFontProperties(vt);if(gt==="svg"){var At=createNS("text");At.style.fontSize="100px",At.setAttribute("font-family",vt.fFamily),At.setAttribute("font-style",yt.style),At.setAttribute("font-weight",yt.weight),At.textContent="1",vt.fClass?(At.style.fontFamily="inherit",At.setAttribute("class",vt.fClass)):At.style.fontFamily=vt.fFamily,xt.appendChild(At),_t=At}else{var wt=new OffscreenCanvas(500,500).getContext("2d");wt.font=yt.style+" "+yt.weight+" 100px "+vt.fFamily,_t=wt}function It(Ft){return gt==="svg"?(_t.textContent=Ft,_t.getComputedTextLength()):_t.measureText(Ft).width}return{measureText:It}}function Ye(vt,xt){if(!vt){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=vt.list;return}if(!document.body){this.isLoaded=!0,vt.list.forEach(function(Xt){Xt.helper=me(Xt),Xt.cache={}}),this.fonts=vt.list;return}var gt=vt.list,_t,yt=gt.length,At=yt;for(_t=0;_t<yt;_t+=1){var wt=!0,It,Ft;if(gt[_t].loaded=!1,gt[_t].monoCase=N(gt[_t].fFamily,"monospace"),gt[_t].sansCase=N(gt[_t].fFamily,"sans-serif"),!gt[_t].fPath)gt[_t].loaded=!0,At-=1;else if(gt[_t].fOrigin==="p"||gt[_t].origin===3){if(It=document.querySelectorAll('style[f-forigin="p"][f-family="'+gt[_t].fFamily+'"], style[f-origin="3"][f-family="'+gt[_t].fFamily+'"]'),It.length>0&&(wt=!1),wt){var zt=createTag("style");zt.setAttribute("f-forigin",gt[_t].fOrigin),zt.setAttribute("f-origin",gt[_t].origin),zt.setAttribute("f-family",gt[_t].fFamily),zt.type="text/css",zt.innerText="@font-face {font-family: "+gt[_t].fFamily+"; font-style: normal; src: url('"+gt[_t].fPath+"');}",xt.appendChild(zt)}}else if(gt[_t].fOrigin==="g"||gt[_t].origin===1){for(It=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Ft=0;Ft<It.length;Ft+=1)It[Ft].href.indexOf(gt[_t].fPath)!==-1&&(wt=!1);if(wt){var Ut=createTag("link");Ut.setAttribute("f-forigin",gt[_t].fOrigin),Ut.setAttribute("f-origin",gt[_t].origin),Ut.type="text/css",Ut.rel="stylesheet",Ut.href=gt[_t].fPath,document.body.appendChild(Ut)}}else if(gt[_t].fOrigin==="t"||gt[_t].origin===2){for(It=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Ft=0;Ft<It.length;Ft+=1)gt[_t].fPath===It[Ft].src&&(wt=!1);if(wt){var Qt=createTag("link");Qt.setAttribute("f-forigin",gt[_t].fOrigin),Qt.setAttribute("f-origin",gt[_t].origin),Qt.setAttribute("rel","stylesheet"),Qt.setAttribute("href",gt[_t].fPath),xt.appendChild(Qt)}}gt[_t].helper=me(gt[_t],xt),gt[_t].cache={},this.fonts.push(gt[_t])}At===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Le(vt){if(vt){this.chars||(this.chars=[]);var xt,gt=vt.length,_t,yt=this.chars.length,At;for(xt=0;xt<gt;xt+=1){for(_t=0,At=!1;_t<yt;)this.chars[_t].style===vt[xt].style&&this.chars[_t].fFamily===vt[xt].fFamily&&this.chars[_t].ch===vt[xt].ch&&(At=!0),_t+=1;At||(this.chars.push(vt[xt]),yt+=1)}}}function tt(vt,xt,gt){for(var _t=0,yt=this.chars.length;_t<yt;){if(this.chars[_t].ch===vt&&this.chars[_t].style===xt&&this.chars[_t].fFamily===gt)return this.chars[_t];_t+=1}return(typeof vt=="string"&&vt.charCodeAt(0)!==13||!vt)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",vt,xt,gt)),e}function Be(vt,xt,gt){var _t=this.getFontByName(xt),yt=vt;if(!_t.cache[yt]){var At=_t.helper;if(vt===" "){var wt=At.measureText("|"+vt+"|"),It=At.measureText("||");_t.cache[yt]=(wt-It)/100}else _t.cache[yt]=At.measureText(vt)/100}return _t.cache[yt]*gt}function nt(vt){for(var xt=0,gt=this.fonts.length;xt<gt;){if(this.fonts[xt].fName===vt)return this.fonts[xt];xt+=1}return this.fonts[0]}function ft(vt){var xt=0,gt=vt.charCodeAt(0);if(gt>=55296&&gt<=56319){var _t=vt.charCodeAt(1);_t>=56320&&_t<=57343&&(xt=(gt-55296)*1024+_t-56320+65536)}return xt}function mt(vt,xt){var gt=vt.toString(16)+xt.toString(16);return b.indexOf(gt)!==-1}function ht(vt){return vt===u}function Et(vt){return vt===l}function St(vt){var xt=ft(vt);return xt>=c&&xt<=p}function bt(vt){return St(vt.substr(0,2))&&St(vt.substr(2,2))}function Pt(vt){return t.indexOf(vt)!==-1}function Rt(vt,xt){var gt=ft(vt.substr(xt,2));if(gt!==r)return!1;var _t=0;for(xt+=2;_t<5;){if(gt=ft(vt.substr(xt,2)),gt<n||gt>a)return!1;_t+=1,xt+=2}return ft(vt.substr(xt,2))===s}function Dt(){this.isLoaded=!0}var kt=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};kt.isModifier=mt,kt.isZeroWidthJoiner=ht,kt.isFlagEmoji=bt,kt.isRegionalCode=St,kt.isCombinedCharacter=Pt,kt.isRegionalFlag=Rt,kt.isVariationSelector=Et,kt.BLACK_FLAG_CODE_POINT=r;var Lt={addChars:Le,addFonts:Ye,getCharData:tt,getFontByName:nt,measureText:Be,checkLoadedFonts:de,setIsLoaded:Dt};return kt.prototype=Lt,kt}();function SlotManager(i){this.animationData=i}SlotManager.prototype.getProp=function(i){return this.animationData.slots&&this.animationData.slots[i.sid]?Object.assign(i,this.animationData.slots[i.sid].p):i};function slotFactory(i){return new SlotManager(i)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var i={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return i[e]||""}}();function SliderEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function AngleEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function ColorEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,1,0,t)}function PointEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,1,0,t)}function LayerIndexEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function MaskIndexEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function CheckboxEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function NoValueEffect(){this.p={}}function EffectsManager(i,e){var t=i.ef||[];this.effectElements=[];var r,s=t.length,n;for(r=0;r<s;r+=1)n=new GroupEffect(t[r],e),this.effectElements.push(n)}function GroupEffect(i,e){this.init(i,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(i,e){this.data=i,this.effectElements=[],this.initDynamicPropertyContainer(e);var t,r=this.data.ef.length,s,n=this.data.ef;for(t=0;t<r;t+=1){switch(s=null,n[t].ty){case 0:s=new SliderEffect(n[t],e,this);break;case 1:s=new AngleEffect(n[t],e,this);break;case 2:s=new ColorEffect(n[t],e,this);break;case 3:s=new PointEffect(n[t],e,this);break;case 4:case 7:s=new CheckboxEffect(n[t],e,this);break;case 10:s=new LayerIndexEffect(n[t],e,this);break;case 11:s=new MaskIndexEffect(n[t],e,this);break;case 5:s=new EffectsManager(n[t],e);break;default:s=new NoValueEffect(n[t]);break}s&&this.effectElements.push(s)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),r=e("effects"),s=e("shape"),n=e("text"),a=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var l=r.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(l),this.data.ty===0||this.data.xt?this.compInterface=a(this):this.data.ty===4?(this.layerInterface.shapeInterface=s(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=n(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),t=this.baseElement||this.layerElement;t.style["mix-blend-mode"]=e},initBaseData:function(e,t,r){this.globalData=t,this.comp=r,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var r,s=this.dynamicProperties.length;for(r=0;r<s;r+=1)(t||this._isParent&&this.dynamicProperties[r].propType==="transform")&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(i,e,t){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(i.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(i,e,t)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var i=getExpressionInterfaces();if(i){var e=i("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(i,e,t){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(i.refId),this.initBaseData(i,e,t),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,i.au&&i.au.lv?i.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(i){if(this.prepareRenderableFrame(i,!0),this.prepareProperties(i,!0),this.tm._placeholder)this._currentTime=i/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var t=this._volume*this._volumeMultiplier;this._previousVolume!==t&&(this._previousVolume=t,this.audio.volume(t))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(i){this.audio.rate(i)},AudioElement.prototype.volume=function(i){this._volumeMultiplier=i,this._previousVolume=i*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(i){var e,t=this.layers.length,r;for(this.completeLayers=!0,e=t-1;e>=0;e-=1)this.elements[e]||(r=this.layers[e],r.ip-r.st<=i-this.layers[e].st&&r.op-r.st>i-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(i){switch(i.ty){case 2:return this.createImage(i);case 0:return this.createComp(i);case 1:return this.createSolid(i);case 3:return this.createNull(i);case 4:return this.createShape(i);case 5:return this.createText(i);case 6:return this.createAudio(i);case 13:return this.createCamera(i);case 15:return this.createFootage(i);default:return this.createNull(i)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(i){return new AudioElement(i,this.globalData,this)},BaseRenderer.prototype.createFootage=function(i){return new FootageElement(i,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var i,e=this.layers.length;for(i=0;i<e;i+=1)this.buildItem(i);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(i){this.completeLayers=!1;var e,t=i.length,r,s=this.layers.length;for(e=0;e<t;e+=1)for(r=0;r<s;){if(this.layers[r].id===i[e].id){this.layers[r]=i[e];break}r+=1}},BaseRenderer.prototype.setProjectInterface=function(i){this.globalData.projectInterface=i},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(i,e,t){for(var r=this.elements,s=this.layers,n=0,a=s.length;n<a;)s[n].ind==e&&(!r[n]||r[n]===!0?(this.buildItem(n),this.addPendingElement(i)):(t.push(r[n]),r[n].setAsParent(),s[n].parent!==void 0?this.buildElementParenting(i,s[n].parent,t):i.setHierarchy(t))),n+=1},BaseRenderer.prototype.addPendingElement=function(i){this.pendingElements.push(i)},BaseRenderer.prototype.searchExtraCompositions=function(i){var e,t=i.length;for(e=0;e<t;e+=1)if(i[e].xt){var r=this.createComp(i[e]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.getElementById=function(i){var e,t=this.elements.length;for(e=0;e<t;e+=1)if(this.elements[e].data.ind===i)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(i){var e=i.shift(),t;if(typeof e=="number")t=this.elements[e];else{var r,s=this.elements.length;for(r=0;r<s;r+=1)if(this.elements[r].data.nm===e){t=this.elements[r];break}}return i.length===0?t:t.getElementByPath(i)},BaseRenderer.prototype.setupGlobalData=function(i,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(i),this.globalData.fontManager.addChars(i.chars),this.globalData.fontManager.addFonts(i.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=i.fr,this.globalData.nm=i.nm,this.globalData.compSize={w:i.w,h:i.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,r=0,s=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<s;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),r=0;r<s;r+=1)t.multiply(this.hierarchy[r].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var r=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(r),e=1;e<t;e+=1){var s=this.localTransforms[e].matrix;r.multiply(s)}r.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var n=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)n*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=n}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,r=e.length;for(t=0;t<r;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var r=!0,s=this.comp;r;)s.finalTransform?(s.data.hasMask&&t.splice(0,0,s.finalTransform),s=s.comp):r=!1;var n,a=t.length,l;for(n=0;n<a;n+=1)l=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-l[0],e[1]-l[1],0];return e},mHelper:new Matrix};function MaskElement(i,e,t){this.data=i,this.element=e,this.globalData=t,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r=this.globalData.defs,s,n=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(n),this.solidPath="";var a,l=this.masksProperties,u=0,c=[],p,b,P=createElementID(),N,de,me,Ye,Le="clipPath",tt="clip-path";for(s=0;s<n;s+=1)if((l[s].mode!=="a"&&l[s].mode!=="n"||l[s].inv||l[s].o.k!==100||l[s].o.x)&&(Le="mask",tt="mask"),(l[s].mode==="s"||l[s].mode==="i")&&u===0?(N=createNS("rect"),N.setAttribute("fill","#ffffff"),N.setAttribute("width",this.element.comp.data.w||0),N.setAttribute("height",this.element.comp.data.h||0),c.push(N)):N=null,a=createNS("path"),l[s].mode==="n")this.viewData[s]={op:PropertyFactory.getProp(this.element,l[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[s],3),elem:a,lastPath:""},r.appendChild(a);else{u+=1,a.setAttribute("fill",l[s].mode==="s"?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero");var Be;if(l[s].x.k!==0?(Le="mask",tt="mask",Ye=PropertyFactory.getProp(this.element,l[s].x,0,null,this.element),Be=createElementID(),de=createNS("filter"),de.setAttribute("id",Be),me=createNS("feMorphology"),me.setAttribute("operator","erode"),me.setAttribute("in","SourceGraphic"),me.setAttribute("radius","0"),de.appendChild(me),r.appendChild(de),a.setAttribute("stroke",l[s].mode==="s"?"#000000":"#ffffff")):(me=null,Ye=null),this.storedData[s]={elem:a,x:Ye,expan:me,lastPath:"",lastOperator:"",filterId:Be,lastRadius:0},l[s].mode==="i"){b=c.length;var nt=createNS("g");for(p=0;p<b;p+=1)nt.appendChild(c[p]);var ft=createNS("mask");ft.setAttribute("mask-type","alpha"),ft.setAttribute("id",P+"_"+u),ft.appendChild(a),r.appendChild(ft),nt.setAttribute("mask","url("+getLocationHref()+"#"+P+"_"+u+")"),c.length=0,c.push(nt)}else c.push(a);l[s].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[s]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,l[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[s],3),invRect:N},this.viewData[s].prop.k||this.drawPath(l[s],this.viewData[s].prop.v,this.viewData[s])}for(this.maskElement=createNS(Le),n=c.length,s=0;s<n;s+=1)this.maskElement.appendChild(c[s]);u>0&&(this.maskElement.setAttribute("id",P),this.element.maskedElement.setAttribute(tt,"url("+getLocationHref()+"#"+P+")"),r.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(i){return this.viewData[i].prop},MaskElement.prototype.renderFrame=function(i){var e=this.element.finalTransform.mat,t,r=this.masksProperties.length;for(t=0;t<r;t+=1)if((this.viewData[t].prop._mdf||i)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||i)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),this.masksProperties[t].mode!=="n"&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||i)&&this.viewData[t].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||i))){var s=this.storedData[t].expan;this.storedData[t].x.v<0?(this.storedData[t].lastOperator!=="erode"&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),s.setAttribute("radius",-this.storedData[t].x.v)):(this.storedData[t].lastOperator!=="dilate"&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",this.storedData[t].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var i="M0,0 ";return i+=" h"+this.globalData.compSize.w,i+=" v"+this.globalData.compSize.h,i+=" h-"+this.globalData.compSize.w,i+=" v-"+this.globalData.compSize.h+" ",i},MaskElement.prototype.drawPath=function(i,e,t){var r=" M"+e.v[0][0]+","+e.v[0][1],s,n;for(n=e._length,s=1;s<n;s+=1)r+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[s][0]+","+e.i[s][1]+" "+e.v[s][0]+","+e.v[s][1];if(e.c&&n>1&&(r+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),t.lastPath!==r){var a="";t.elem&&(e.c&&(a=i.inv?this.solidPath+r:r),t.elem.setAttribute("d",a)),t.lastPath=r}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var i={};i.createFilter=e,i.createAlphaToLuminanceFilter=t;function e(r,s){var n=createNS("filter");return n.setAttribute("id",r),s!==!0&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n}function t(){var r=createNS("feColorMatrix");return r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),r}return i}(),featureSupport=function(){var i={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(i.maskType=!1),/firefox/i.test(navigator.userAgent)&&(i.svgLumaHidden=!1),i}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(i){var e,t="SourceGraphic",r=i.data.ef?i.data.ef.length:0,s=createElementID(),n=filtersFactory.createFilter(s,!0),a=0;this.filters=[];var l;for(e=0;e<r;e+=1){l=null;var u=i.data.ef[e].ty;if(registeredEffects$1[u]){var c=registeredEffects$1[u].effect;l=new c(n,i.effectsManager.effectElements[e],i,idPrefix+a,t),t=idPrefix+a,registeredEffects$1[u].countsAsEffect&&(a+=1)}l&&this.filters.push(l)}a&&(i.globalData.defs.appendChild(n),i.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&i.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(i){var e,t=this.filters.length;for(e=0;e<t;e+=1)this.filters[e].renderFrame(i)},SVGEffects.prototype.getEffects=function(i){var e,t=this.filters.length,r=[];for(e=0;e<t;e+=1)this.filters[e].type===i&&r.push(this.filters[e]);return r};function registerEffect$1(i,e,t){registeredEffects$1[i]={effect:e,countsAsEffect:t}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var r=createNS("clipPath"),s=createNS("path");s.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var n=createElementID();if(r.setAttribute("id",n),r.appendChild(s),this.globalData.defs.appendChild(r),this.checkMasks()){var a=createNS("g");a.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),a.appendChild(this.layerElement),this.transformedElement=a,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t=this.layerId+"_"+e,r,s,n,a;if(e===1||e===3){var l=createNS("mask");l.setAttribute("id",t),l.setAttribute("mask-type",e===3?"luminance":"alpha"),n=createNS("use"),n.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(n),this.globalData.defs.appendChild(l),!featureSupport.maskType&&e===1&&(l.setAttribute("mask-type","luminance"),r=createElementID(),s=filtersFactory.createFilter(r),this.globalData.defs.appendChild(s),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),a.appendChild(n),l.appendChild(a),a.setAttribute("filter","url("+getLocationHref()+"#"+r+")"))}else if(e===2){var u=createNS("mask");u.setAttribute("id",t),u.setAttribute("mask-type","alpha");var c=createNS("g");u.appendChild(c),r=createElementID(),s=filtersFactory.createFilter(r);var p=createNS("feComponentTransfer");p.setAttribute("in","SourceGraphic"),s.appendChild(p);var b=createNS("feFuncA");b.setAttribute("type","table"),b.setAttribute("tableValues","1.0 0.0"),p.appendChild(b),this.globalData.defs.appendChild(s);var P=createNS("rect");P.setAttribute("width",this.comp.data.w),P.setAttribute("height",this.comp.data.h),P.setAttribute("x","0"),P.setAttribute("y","0"),P.setAttribute("fill","#ffffff"),P.setAttribute("opacity","0"),c.setAttribute("filter","url("+getLocationHref()+"#"+r+")"),c.appendChild(P),n=createNS("use"),n.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(n),featureSupport.maskType||(u.setAttribute("mask-type","luminance"),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),c.appendChild(P),a.appendChild(this.layerElement),c.appendChild(a)),this.globalData.defs.appendChild(u)}this.matteMasks[e]=t}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var i={initElement:function(t,r,s){this.initFrame(),this.initBaseData(t,r,s),this.initTransform(t,r,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var t=this.baseElement||this.layerElement;t.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var t=this.baseElement||this.layerElement;t.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(i)],RenderableDOMElement)})();function IImageElement(i,e,t){this.assetData=e.getAssetData(i.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(i,e,t),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(i,e){this.elem=i,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var t,r=this.shapeModifiers.length;for(t=0;t<r;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=0,r=this.shapeModifiers.length;t<r;)if(this.shapeModifiers[t].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();t=this.shapeModifiers.length;var r;for(e=t-1;e>=0&&(r=this.shapeModifiers[e].processShapes(this._isFirstFrame),!r);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,r=0,s=t.length;r<s;){if(t[r].elem===e)return t[r].pos;r+=1}return 0},addProcessedElement:function(e,t){for(var r=this.processedElements,s=r.length;s;)if(s-=1,r[s].elem===e){r[s].pos=t;return}r.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(i,e,t){this.caches=[],this.styles=[],this.transformers=i,this.lStr="",this.sh=t,this.lvl=e,this._isAnimated=!!t.k;for(var r=0,s=i.length;r<s;){if(i[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(i,e){this.data=i,this.type=i.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=i.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(i,e,t,r){this.elem=i,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=t,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var s,n=e.length||0,a;for(s=0;s<n;s+=1)a=PropertyFactory.getProp(i,e[s].v,0,0,this),this.k=a.k||this.k,this.dataProps[s]={n:e[s].n,p:a};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(i){if(!(this.elem.globalData.frameId===this.frameId&&!i)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||i,this._mdf)){var e=0,t=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<t;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,e.o,0,.01,this),this.w=PropertyFactory.getProp(i,e.w,0,null,this),this.d=new DashProperty(i,e.d||{},"svg",this),this.c=PropertyFactory.getProp(i,e.c,1,255,this),this.style=t,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,e.o,0,.01,this),this.c=PropertyFactory.getProp(i,e.c,1,255,this),this.style=t}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.style=t}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(i,e,t){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var r=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(t),this.prop=PropertyFactory.getProp(i,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(i,e){for(var t=0,r=this.o.length/2,s;t<r;){if(s=Math.abs(i[t*4]-i[e*4+t*2]),s>.01)return!1;t+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var i=0,e=this.data.k.k.length;i<e;){if(!this.comparePoints(this.data.k.k[i].s,this.data.p))return!1;i+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(i){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||i){var e,t=this.data.p*4,r,s;for(e=0;e<t;e+=1)r=e%4===0?100:255,s=Math.round(this.prop.v[e]*r),this.c[e]!==s&&(this.c[e]=s,this._cmdf=!i);if(this.o.length)for(t=this.prop.v.length,e=this.data.p*4;e<t;e+=1)r=e%2===0?100:1,s=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==s&&(this.o[e-this.data.p*4]=s,this._omdf=!i);this._mdf=!i}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.initGradientData(i,e,t)}SVGGradientFillStyleData.prototype.initGradientData=function(i,e,t){this.o=PropertyFactory.getProp(i,e.o,0,.01,this),this.s=PropertyFactory.getProp(i,e.s,1,null,this),this.e=PropertyFactory.getProp(i,e.e,1,null,this),this.h=PropertyFactory.getProp(i,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(i,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(i,e.g,this),this.style=t,this.stops=[],this.setGradientData(t.pElem,e),this.setGradientOpacity(e,t),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(i,e){var t=createElementID(),r=createNS(e.t===1?"linearGradient":"radialGradient");r.setAttribute("id",t),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var s=[],n,a,l;for(l=e.g.p*4,a=0;a<l;a+=4)n=createNS("stop"),r.appendChild(n),s.push(n);i.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+t+")"),this.gf=r,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(i,e){if(this.g._hasOpacity&&!this.g._collapsable){var t,r,s,n=createNS("mask"),a=createNS("path");n.appendChild(a);var l=createElementID(),u=createElementID();n.setAttribute("id",u);var c=createNS(i.t===1?"linearGradient":"radialGradient");c.setAttribute("id",l),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),s=i.g.k.k[0].s?i.g.k.k[0].s.length:i.g.k.k.length;var p=this.stops;for(r=i.g.p*4;r<s;r+=2)t=createNS("stop"),t.setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(t),p.push(t);a.setAttribute(i.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+l+")"),i.ty==="gs"&&(a.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),i.lj===1&&a.setAttribute("stroke-miterlimit",i.ml)),this.of=c,this.ms=n,this.ost=p,this.maskId=u,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(i,e.w,0,null,this),this.d=new DashProperty(i,e.d||{},"svg",this),this.initGradientData(i,e,t),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(i,e,t){this.transform={mProps:i,op:e,container:t},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,t,r,s){if(t===0)return"";var n=e.o,a=e.i,l=e.v,u,c=" M"+s.applyToPointStringified(l[0][0],l[0][1]);for(u=1;u<t;u+=1)c+=" C"+s.applyToPointStringified(n[u-1][0],n[u-1][1])+" "+s.applyToPointStringified(a[u][0],a[u][1])+" "+s.applyToPointStringified(l[u][0],l[u][1]);return r&&t&&(c+=" C"+s.applyToPointStringified(n[u-1][0],n[u-1][1])+" "+s.applyToPointStringified(a[0][0],a[0][1])+" "+s.applyToPointStringified(l[0][0],l[0][1]),c+="z"),c},SVGElementsRenderer=function(){var i=new Matrix,e=new Matrix,t={createRenderFunction:r};function r(b){switch(b.ty){case"fl":return l;case"gf":return c;case"gs":return u;case"st":return p;case"sh":case"el":case"rc":case"sr":return a;case"tr":return s;case"no":return n;default:return null}}function s(b,P,N){(N||P.transform.op._mdf)&&P.transform.container.setAttribute("opacity",P.transform.op.v),(N||P.transform.mProps._mdf)&&P.transform.container.setAttribute("transform",P.transform.mProps.v.to2dCSS())}function n(){}function a(b,P,N){var de,me,Ye,Le,tt,Be,nt=P.styles.length,ft=P.lvl,mt,ht,Et,St;for(Be=0;Be<nt;Be+=1){if(Le=P.sh._mdf||N,P.styles[Be].lvl<ft){for(ht=e.reset(),Et=ft-P.styles[Be].lvl,St=P.transformers.length-1;!Le&&Et>0;)Le=P.transformers[St].mProps._mdf||Le,Et-=1,St-=1;if(Le)for(Et=ft-P.styles[Be].lvl,St=P.transformers.length-1;Et>0;)ht.multiply(P.transformers[St].mProps.v),Et-=1,St-=1}else ht=i;if(mt=P.sh.paths,me=mt._length,Le){for(Ye="",de=0;de<me;de+=1)tt=mt.shapes[de],tt&&tt._length&&(Ye+=buildShapeString(tt,tt._length,tt.c,ht));P.caches[Be]=Ye}else Ye=P.caches[Be];P.styles[Be].d+=b.hd===!0?"":Ye,P.styles[Be]._mdf=Le||P.styles[Be]._mdf}}function l(b,P,N){var de=P.style;(P.c._mdf||N)&&de.pElem.setAttribute("fill","rgb("+bmFloor(P.c.v[0])+","+bmFloor(P.c.v[1])+","+bmFloor(P.c.v[2])+")"),(P.o._mdf||N)&&de.pElem.setAttribute("fill-opacity",P.o.v)}function u(b,P,N){c(b,P,N),p(b,P,N)}function c(b,P,N){var de=P.gf,me=P.g._hasOpacity,Ye=P.s.v,Le=P.e.v;if(P.o._mdf||N){var tt=b.ty==="gf"?"fill-opacity":"stroke-opacity";P.style.pElem.setAttribute(tt,P.o.v)}if(P.s._mdf||N){var Be=b.t===1?"x1":"cx",nt=Be==="x1"?"y1":"cy";de.setAttribute(Be,Ye[0]),de.setAttribute(nt,Ye[1]),me&&!P.g._collapsable&&(P.of.setAttribute(Be,Ye[0]),P.of.setAttribute(nt,Ye[1]))}var ft,mt,ht,Et;if(P.g._cmdf||N){ft=P.cst;var St=P.g.c;for(ht=ft.length,mt=0;mt<ht;mt+=1)Et=ft[mt],Et.setAttribute("offset",St[mt*4]+"%"),Et.setAttribute("stop-color","rgb("+St[mt*4+1]+","+St[mt*4+2]+","+St[mt*4+3]+")")}if(me&&(P.g._omdf||N)){var bt=P.g.o;for(P.g._collapsable?ft=P.cst:ft=P.ost,ht=ft.length,mt=0;mt<ht;mt+=1)Et=ft[mt],P.g._collapsable||Et.setAttribute("offset",bt[mt*2]+"%"),Et.setAttribute("stop-opacity",bt[mt*2+1])}if(b.t===1)(P.e._mdf||N)&&(de.setAttribute("x2",Le[0]),de.setAttribute("y2",Le[1]),me&&!P.g._collapsable&&(P.of.setAttribute("x2",Le[0]),P.of.setAttribute("y2",Le[1])));else{var Pt;if((P.s._mdf||P.e._mdf||N)&&(Pt=Math.sqrt(Math.pow(Ye[0]-Le[0],2)+Math.pow(Ye[1]-Le[1],2)),de.setAttribute("r",Pt),me&&!P.g._collapsable&&P.of.setAttribute("r",Pt)),P.s._mdf||P.e._mdf||P.h._mdf||P.a._mdf||N){Pt||(Pt=Math.sqrt(Math.pow(Ye[0]-Le[0],2)+Math.pow(Ye[1]-Le[1],2)));var Rt=Math.atan2(Le[1]-Ye[1],Le[0]-Ye[0]),Dt=P.h.v;Dt>=1?Dt=.99:Dt<=-1&&(Dt=-.99);var kt=Pt*Dt,Lt=Math.cos(Rt+P.a.v)*kt+Ye[0],vt=Math.sin(Rt+P.a.v)*kt+Ye[1];de.setAttribute("fx",Lt),de.setAttribute("fy",vt),me&&!P.g._collapsable&&(P.of.setAttribute("fx",Lt),P.of.setAttribute("fy",vt))}}}function p(b,P,N){var de=P.style,me=P.d;me&&(me._mdf||N)&&me.dashStr&&(de.pElem.setAttribute("stroke-dasharray",me.dashStr),de.pElem.setAttribute("stroke-dashoffset",me.dashoffset[0])),P.c&&(P.c._mdf||N)&&de.pElem.setAttribute("stroke","rgb("+bmFloor(P.c.v[0])+","+bmFloor(P.c.v[1])+","+bmFloor(P.c.v[2])+")"),(P.o._mdf||N)&&de.pElem.setAttribute("stroke-opacity",P.o.v),(P.w._mdf||N)&&(de.pElem.setAttribute("stroke-width",P.w.v),de.msElem&&de.msElem.setAttribute("stroke-width",P.w.v))}return t}();function SVGShapeElement(i,e,t){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(i,e,t),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var i,e=this.shapes.length,t,r,s=this.stylesList.length,n,a=[],l=!1;for(r=0;r<s;r+=1){for(n=this.stylesList[r],l=!1,a.length=0,i=0;i<e;i+=1)t=this.shapes[i],t.styles.indexOf(n)!==-1&&(a.push(t),l=t._isAnimated||l);a.length>1&&l&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(i){var e,t=i.length;for(e=0;e<t;e+=1)i[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(i,e){var t,r=new SVGStyleData(i,e),s=r.pElem;if(i.ty==="st")t=new SVGStrokeStyleData(this,i,r);else if(i.ty==="fl")t=new SVGFillStyleData(this,i,r);else if(i.ty==="gf"||i.ty==="gs"){var n=i.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;t=new n(this,i,r),this.globalData.defs.appendChild(t.gf),t.maskId&&(this.globalData.defs.appendChild(t.ms),this.globalData.defs.appendChild(t.of),s.setAttribute("mask","url("+getLocationHref()+"#"+t.maskId+")"))}else i.ty==="no"&&(t=new SVGNoStyleData(this,i,r));return(i.ty==="st"||i.ty==="gs")&&(s.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),s.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),s.setAttribute("fill-opacity","0"),i.lj===1&&s.setAttribute("stroke-miterlimit",i.ml)),i.r===2&&s.setAttribute("fill-rule","evenodd"),i.ln&&s.setAttribute("id",i.ln),i.cl&&s.setAttribute("class",i.cl),i.bm&&(s.style["mix-blend-mode"]=getBlendMode(i.bm)),this.stylesList.push(r),this.addToAnimatedContents(i,t),t},SVGShapeElement.prototype.createGroupElement=function(i){var e=new ShapeGroupData;return i.ln&&e.gr.setAttribute("id",i.ln),i.cl&&e.gr.setAttribute("class",i.cl),i.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(i.bm)),e},SVGShapeElement.prototype.createTransformElement=function(i,e){var t=TransformPropertyFactory.getTransformProperty(this,i,this),r=new SVGTransformData(t,t.o,e);return this.addToAnimatedContents(i,r),r},SVGShapeElement.prototype.createShapeElement=function(i,e,t){var r=4;i.ty==="rc"?r=5:i.ty==="el"?r=6:i.ty==="sr"&&(r=7);var s=ShapePropertyFactory.getShapeProp(this,i,r,this),n=new SVGShapeData(e,t,s);return this.shapes.push(n),this.addShapeToModifiers(n),this.addToAnimatedContents(i,n),n},SVGShapeElement.prototype.addToAnimatedContents=function(i,e){for(var t=0,r=this.animatedContents.length;t<r;){if(this.animatedContents[t].element===e)return;t+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(i),element:e,data:i})},SVGShapeElement.prototype.setElementStyles=function(i){var e=i.styles,t,r=this.stylesList.length;for(t=0;t<r;t+=1)e.indexOf(this.stylesList[t])===-1&&!this.stylesList[t].closed&&e.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,e=this.itemsData.length;for(i=0;i<e;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,i=0;i<e;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(i,e,t,r,s,n,a){var l=[].concat(n),u,c=i.length-1,p,b,P=[],N=[],de,me,Ye;for(u=c;u>=0;u-=1){if(Ye=this.searchProcessedElement(i[u]),Ye?e[u]=t[Ye-1]:i[u]._render=a,i[u].ty==="fl"||i[u].ty==="st"||i[u].ty==="gf"||i[u].ty==="gs"||i[u].ty==="no")Ye?e[u].style.closed=i[u].hd:e[u]=this.createStyleElement(i[u],s),i[u]._render&&e[u].style.pElem.parentNode!==r&&r.appendChild(e[u].style.pElem),P.push(e[u].style);else if(i[u].ty==="gr"){if(!Ye)e[u]=this.createGroupElement(i[u]);else for(b=e[u].it.length,p=0;p<b;p+=1)e[u].prevViewData[p]=e[u].it[p];this.searchShapes(i[u].it,e[u].it,e[u].prevViewData,e[u].gr,s+1,l,a),i[u]._render&&e[u].gr.parentNode!==r&&r.appendChild(e[u].gr)}else i[u].ty==="tr"?(Ye||(e[u]=this.createTransformElement(i[u],r)),de=e[u].transform,l.push(de)):i[u].ty==="sh"||i[u].ty==="rc"||i[u].ty==="el"||i[u].ty==="sr"?(Ye||(e[u]=this.createShapeElement(i[u],l,s)),this.setElementStyles(e[u])):i[u].ty==="tm"||i[u].ty==="rd"||i[u].ty==="ms"||i[u].ty==="pb"||i[u].ty==="zz"||i[u].ty==="op"?(Ye?(me=e[u],me.closed=!1):(me=ShapeModifiers.getModifier(i[u].ty),me.init(this,i[u]),e[u]=me,this.shapeModifiers.push(me)),N.push(me)):i[u].ty==="rp"&&(Ye?(me=e[u],me.closed=!0):(me=ShapeModifiers.getModifier(i[u].ty),e[u]=me,me.init(this,i,u,e),this.shapeModifiers.push(me),a=!1),N.push(me));this.addProcessedElement(i[u],u+1)}for(c=P.length,u=0;u<c;u+=1)P[u].closed=!0;for(c=N.length,u=0;u<c;u+=1)N[u].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var i,e=this.stylesList.length;for(i=0;i<e;i+=1)this.stylesList[i].reset();for(this.renderShape(),i=0;i<e;i+=1)(this.stylesList[i]._mdf||this._isFirstFrame)&&(this.stylesList[i].msElem&&(this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].d="M0 0"+this.stylesList[i].d),this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var i,e=this.animatedContents.length,t;for(i=0;i<e;i+=1)t=this.animatedContents[i],(this._isFirstFrame||t.element._isAnimated)&&t.data!==!0&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(i,e,t,r,s,n){this.o=i,this.sw=e,this.sc=t,this.fc=r,this.m=s,this.p=n,this._mdf={o:!0,sw:!!e,sc:!!t,fc:!!r,m:!0,p:!0}}LetterProps.prototype.update=function(i,e,t,r,s,n){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==i&&(this.o=i,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==t&&(this.sc=t,this._mdf.sc=!0,a=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,a=!0),this.m!==s&&(this.m=s,this._mdf.m=!0,a=!0),n.length&&(this.p[0]!==n[0]||this.p[1]!==n[1]||this.p[4]!==n[4]||this.p[5]!==n[5]||this.p[12]!==n[12]||this.p[13]!==n[13])&&(this.p=n,this._mdf.p=!0,a=!0),a};function TextProperty(i,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=i.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=i,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(i,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i},TextProperty.prototype.setCurrentData=function(i){i.__complete||this.completeTextData(i),this.currentData=i,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(i){this.effectsSequence.push(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(i){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!i)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,t=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var r,s=this.effectsSequence.length,n=i||this.data.d.k[this.keysIndex].s;for(r=0;r<s;r+=1)t!==this.keysIndex?n=this.effectsSequence[r](n,n.t):n=this.effectsSequence[r](this.currentData,n.t);e!==n&&this.setCurrentData(n),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var i=this.data.d.k,e=this.elem.comp.renderedFrame,t=0,r=i.length;t<=r-1&&!(t===r-1||i[t+1].t>e);)t+=1;return this.keysIndex!==t&&(this.keysIndex=t),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(i){for(var e=[],t=0,r=i.length,s,n,a=!1,l=!1,u="";t<r;)a=l,l=!1,s=i.charCodeAt(t),u=i.charAt(t),FontManager.isCombinedCharacter(s)?a=!0:s>=55296&&s<=56319?FontManager.isRegionalFlag(i,t)?u=i.substr(t,14):(n=i.charCodeAt(t+1),n>=56320&&n<=57343&&(FontManager.isModifier(s,n)?(u=i.substr(t,2),a=!0):FontManager.isFlagEmoji(i.substr(t,4))?u=i.substr(t,4):u=i.substr(t,2))):s>56319?(n=i.charCodeAt(t+1),FontManager.isVariationSelector(s)&&(a=!0)):FontManager.isZeroWidthJoiner(s)&&(a=!0,l=!0),a?(e[e.length-1]+=u,a=!1):e.push(u),t+=u.length;return e},TextProperty.prototype.completeTextData=function(i){i.__complete=!0;var e=this.elem.globalData.fontManager,t=this.data,r=[],s,n,a,l=0,u,c=t.m.g,p=0,b=0,P=0,N=[],de=0,me=0,Ye,Le,tt=e.getFontByName(i.f),Be,nt=0,ft=getFontProperties(tt);i.fWeight=ft.weight,i.fStyle=ft.style,i.finalSize=i.s,i.finalText=this.buildFinalText(i.t),n=i.finalText.length,i.finalLineHeight=i.lh;var mt=i.tr/1e3*i.finalSize,ht;if(i.sz)for(var Et=!0,St=i.sz[0],bt=i.sz[1],Pt,Rt;Et;){Rt=this.buildFinalText(i.t),Pt=0,de=0,n=Rt.length,mt=i.tr/1e3*i.finalSize;var Dt=-1;for(s=0;s<n;s+=1)ht=Rt[s].charCodeAt(0),a=!1,Rt[s]===" "?Dt=s:(ht===13||ht===3)&&(de=0,a=!0,Pt+=i.finalLineHeight||i.finalSize*1.2),e.chars?(Be=e.getCharData(Rt[s],tt.fStyle,tt.fFamily),nt=a?0:Be.w*i.finalSize/100):nt=e.measureText(Rt[s],i.f,i.finalSize),de+nt>St&&Rt[s]!==" "?(Dt===-1?n+=1:s=Dt,Pt+=i.finalLineHeight||i.finalSize*1.2,Rt.splice(s,Dt===s?1:0,"\r"),Dt=-1,de=0):(de+=nt,de+=mt);Pt+=tt.ascent*i.finalSize/100,this.canResize&&i.finalSize>this.minimumFontSize&&bt<Pt?(i.finalSize-=1,i.finalLineHeight=i.finalSize*i.lh/i.s):(i.finalText=Rt,n=i.finalText.length,Et=!1)}de=-mt,nt=0;var kt=0,Lt;for(s=0;s<n;s+=1)if(a=!1,Lt=i.finalText[s],ht=Lt.charCodeAt(0),ht===13||ht===3?(kt=0,N.push(de),me=de>me?de:me,de=-2*mt,u="",a=!0,P+=1):u=Lt,e.chars?(Be=e.getCharData(Lt,tt.fStyle,e.getFontByName(i.f).fFamily),nt=a?0:Be.w*i.finalSize/100):nt=e.measureText(u,i.f,i.finalSize),Lt===" "?kt+=nt+mt:(de+=nt+mt+kt,kt=0),r.push({l:nt,an:nt,add:p,n:a,anIndexes:[],val:u,line:P,animatorJustifyOffset:0}),c==2){if(p+=nt,u===""||u===" "||s===n-1){for((u===""||u===" ")&&(p-=nt);b<=s;)r[b].an=p,r[b].ind=l,r[b].extra=nt,b+=1;l+=1,p=0}}else if(c==3){if(p+=nt,u===""||s===n-1){for(u===""&&(p-=nt);b<=s;)r[b].an=p,r[b].ind=l,r[b].extra=nt,b+=1;p=0,l+=1}}else r[l].ind=l,r[l].extra=0,l+=1;if(i.l=r,me=de>me?de:me,N.push(de),i.sz)i.boxWidth=i.sz[0],i.justifyOffset=0;else switch(i.boxWidth=me,i.j){case 1:i.justifyOffset=-i.boxWidth;break;case 2:i.justifyOffset=-i.boxWidth/2;break;default:i.justifyOffset=0}i.lineWidths=N;var vt=t.a,xt,gt;Le=vt.length;var _t,yt,At=[];for(Ye=0;Ye<Le;Ye+=1){for(xt=vt[Ye],xt.a.sc&&(i.strokeColorAnim=!0),xt.a.sw&&(i.strokeWidthAnim=!0),(xt.a.fc||xt.a.fh||xt.a.fs||xt.a.fb)&&(i.fillColorAnim=!0),yt=0,_t=xt.s.b,s=0;s<n;s+=1)gt=r[s],gt.anIndexes[Ye]=yt,(_t==1&&gt.val!==""||_t==2&&gt.val!==""&&gt.val!==" "||_t==3&&(gt.n||gt.val==" "||s==n-1)||_t==4&&(gt.n||s==n-1))&&(xt.s.rn===1&&At.push(yt),yt+=1);t.a[Ye].s.totalChars=yt;var wt=-1,It;if(xt.s.rn===1)for(s=0;s<n;s+=1)gt=r[s],wt!=gt.anIndexes[Ye]&&(wt=gt.anIndexes[Ye],It=At.splice(Math.floor(Math.random()*At.length),1)[0]),gt.anIndexes[Ye]=It}i.yOffset=i.finalLineHeight||i.finalSize*1.2,i.ls=i.ls||0,i.ascent=tt.ascent*i.finalSize/100},TextProperty.prototype.updateDocumentData=function(i,e){e=e===void 0?this.keysIndex:e;var t=this.copyData({},this.data.d.k[e].s);t=this.copyData(t,i),this.data.d.k[e].s=t,this.recalculate(e),this.setCurrentData(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(i){var e=this.data.d.k[i].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(i){this.canResize=i,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(i){this.minimumFontSize=Math.floor(i)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var i=Math.max,e=Math.min,t=Math.floor;function r(n,a){this._currentTextLength=-1,this.k=!1,this.data=a,this.elem=n,this.comp=n.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(n),this.s=PropertyFactory.getProp(n,a.s||{k:0},0,0,this),"e"in a?this.e=PropertyFactory.getProp(n,a.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(n,a.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(n,a.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(n,a.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(n,a.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(n,a.a,0,.01,this),this.dynamicProperties.length||this.getValue()}r.prototype={getMult:function(a){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var l=0,u=0,c=1,p=1;this.ne.v>0?l=this.ne.v/100:u=-this.ne.v/100,this.xe.v>0?c=1-this.xe.v/100:p=1+this.xe.v/100;var b=BezierFactory.getBezierEasing(l,u,c,p).get,P=0,N=this.finalS,de=this.finalE,me=this.data.sh;if(me===2)de===N?P=a>=de?1:0:P=i(0,e(.5/(de-N)+(a-N)/(de-N),1)),P=b(P);else if(me===3)de===N?P=a>=de?0:1:P=1-i(0,e(.5/(de-N)+(a-N)/(de-N),1)),P=b(P);else if(me===4)de===N?P=0:(P=i(0,e(.5/(de-N)+(a-N)/(de-N),1)),P<.5?P*=2:P=1-2*(P-.5)),P=b(P);else if(me===5){if(de===N)P=0;else{var Ye=de-N;a=e(i(0,a+.5-N),de-N);var Le=-Ye/2+a,tt=Ye/2;P=Math.sqrt(1-Le*Le/(tt*tt))}P=b(P)}else me===6?(de===N?P=0:(a=e(i(0,a+.5-N),de-N),P=(1+Math.cos(Math.PI+Math.PI*2*a/(de-N)))/2),P=b(P)):(a>=t(N)&&(a-N<0?P=i(0,e(e(de,1)-(N-a),1)):P=i(0,e(de-a,1))),P=b(P));if(this.sm.v!==100){var Be=this.sm.v*.01;Be===0&&(Be=1e-8);var nt=.5-Be*.5;P<nt?P=0:(P=(P-nt)/Be,P>1&&(P=1))}return P*this.a.v},getValue:function(a){this.iterateDynamicProperties(),this._mdf=a||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,a&&this.data.r===2&&(this.e.v=this._currentTextLength);var l=this.data.r===2?1:100/this.data.totalChars,u=this.o.v/l,c=this.s.v/l+u,p=this.e.v/l+u;if(c>p){var b=c;c=p,p=b}this.finalS=c,this.finalE=p}},extendPrototype([DynamicPropertyContainer],r);function s(n,a,l){return new r(n,a)}return{getTextSelectorProp:s}}();function TextAnimatorDataProperty(i,e,t){var r={propType:!1},s=PropertyFactory.getProp,n=e.a;this.a={r:n.r?s(i,n.r,0,degToRads,t):r,rx:n.rx?s(i,n.rx,0,degToRads,t):r,ry:n.ry?s(i,n.ry,0,degToRads,t):r,sk:n.sk?s(i,n.sk,0,degToRads,t):r,sa:n.sa?s(i,n.sa,0,degToRads,t):r,s:n.s?s(i,n.s,1,.01,t):r,a:n.a?s(i,n.a,1,0,t):r,o:n.o?s(i,n.o,0,.01,t):r,p:n.p?s(i,n.p,1,0,t):r,sw:n.sw?s(i,n.sw,0,0,t):r,sc:n.sc?s(i,n.sc,1,0,t):r,fc:n.fc?s(i,n.fc,1,0,t):r,fh:n.fh?s(i,n.fh,0,0,t):r,fs:n.fs?s(i,n.fs,0,.01,t):r,fb:n.fb?s(i,n.fb,0,.01,t):r,t:n.t?s(i,n.t,0,0,t):r},this.s=TextSelectorProp.getTextSelectorProp(i,e.s,t),this.s.t=e.s.t}function TextAnimatorProperty(i,e,t){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=i,this._renderType=e,this._elem=t,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(t)}TextAnimatorProperty.prototype.searchProperties=function(){var i,e=this._textData.a.length,t,r=PropertyFactory.getProp;for(i=0;i<e;i+=1)t=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:r(this._elem,this._textData.p.a,0,0,this),f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:r(this._elem,this._textData.p.r,0,0,this),p:r(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(i,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var t=this._moreOptions.alignment.v,r=this._animatorsData,s=this._textData,n=this.mHelper,a=this._renderType,l=this.renderedLetters.length,u,c,p,b,P=i.l,N,de,me,Ye,Le,tt,Be,nt,ft,mt,ht,Et,St,bt,Pt;if(this._hasMaskedPath){if(Pt=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Rt=Pt.v;this._pathData.r.v&&(Rt=Rt.reverse()),N={tLength:0,segments:[]},b=Rt._length-1;var Dt;for(Et=0,p=0;p<b;p+=1)Dt=bez.buildBezierData(Rt.v[p],Rt.v[p+1],[Rt.o[p][0]-Rt.v[p][0],Rt.o[p][1]-Rt.v[p][1]],[Rt.i[p+1][0]-Rt.v[p+1][0],Rt.i[p+1][1]-Rt.v[p+1][1]]),N.tLength+=Dt.segmentLength,N.segments.push(Dt),Et+=Dt.segmentLength;p=b,Pt.v.c&&(Dt=bez.buildBezierData(Rt.v[p],Rt.v[0],[Rt.o[p][0]-Rt.v[p][0],Rt.o[p][1]-Rt.v[p][1]],[Rt.i[0][0]-Rt.v[0][0],Rt.i[0][1]-Rt.v[0][1]]),N.tLength+=Dt.segmentLength,N.segments.push(Dt),Et+=Dt.segmentLength),this._pathData.pi=N}if(N=this._pathData.pi,de=this._pathData.f.v,Be=0,tt=1,Ye=0,Le=!0,mt=N.segments,de<0&&Pt.v.c)for(N.tLength<Math.abs(de)&&(de=-Math.abs(de)%N.tLength),Be=mt.length-1,ft=mt[Be].points,tt=ft.length-1;de<0;)de+=ft[tt].partialLength,tt-=1,tt<0&&(Be-=1,ft=mt[Be].points,tt=ft.length-1);ft=mt[Be].points,nt=ft[tt-1],me=ft[tt],ht=me.partialLength}b=P.length,u=0,c=0;var kt=i.finalSize*1.2*.714,Lt=!0,vt,xt,gt,_t,yt;_t=r.length;var At,wt=-1,It,Ft,zt,Ut=de,Qt=Be,Xt=tt,Jt=-1,mi,ni,pi,Zt,Yt,ji,ri,Bt,vi="",Oi=this.defaultPropsArray,Ri;if(i.j===2||i.j===1){var ui=0,Vi=0,Zi=i.j===2?-.5:-1,Ki=0,wi=!0;for(p=0;p<b;p+=1)if(P[p].n){for(ui&&(ui+=Vi);Ki<p;)P[Ki].animatorJustifyOffset=ui,Ki+=1;ui=0,wi=!0}else{for(gt=0;gt<_t;gt+=1)vt=r[gt].a,vt.t.propType&&(wi&&i.j===2&&(Vi+=vt.t.v*Zi),xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),At.length?ui+=vt.t.v*At[0]*Zi:ui+=vt.t.v*At*Zi);wi=!1}for(ui&&(ui+=Vi);Ki<p;)P[Ki].animatorJustifyOffset=ui,Ki+=1}for(p=0;p<b;p+=1){if(n.reset(),mi=1,P[p].n)u=0,c+=i.yOffset,c+=Lt?1:0,de=Ut,Lt=!1,this._hasMaskedPath&&(Be=Qt,tt=Xt,ft=mt[Be].points,nt=ft[tt-1],me=ft[tt],ht=me.partialLength,Ye=0),vi="",Bt="",ji="",Ri="",Oi=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Jt!==P[p].line){switch(i.j){case 1:de+=Et-i.lineWidths[P[p].line];break;case 2:de+=(Et-i.lineWidths[P[p].line])/2;break}Jt=P[p].line}wt!==P[p].ind&&(P[wt]&&(de+=P[wt].extra),de+=P[p].an/2,wt=P[p].ind),de+=t[0]*P[p].an*.005;var Li=0;for(gt=0;gt<_t;gt+=1)vt=r[gt].a,vt.p.propType&&(xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),At.length?Li+=vt.p.v[0]*At[0]:Li+=vt.p.v[0]*At),vt.a.propType&&(xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),At.length?Li+=vt.a.v[0]*At[0]:Li+=vt.a.v[0]*At);for(Le=!0,this._pathData.a.v&&(de=P[0].an*.5+(Et-this._pathData.f.v-P[0].an*.5-P[P.length-1].an*.5)*wt/(b-1),de+=this._pathData.f.v);Le;)Ye+ht>=de+Li||!ft?(St=(de+Li-Ye)/me.partialLength,Ft=nt.point[0]+(me.point[0]-nt.point[0])*St,zt=nt.point[1]+(me.point[1]-nt.point[1])*St,n.translate(-t[0]*P[p].an*.005,-(t[1]*kt)*.01),Le=!1):ft&&(Ye+=me.partialLength,tt+=1,tt>=ft.length&&(tt=0,Be+=1,mt[Be]?ft=mt[Be].points:Pt.v.c?(tt=0,Be=0,ft=mt[Be].points):(Ye-=me.partialLength,ft=null)),ft&&(nt=me,me=ft[tt],ht=me.partialLength));It=P[p].an/2-P[p].add,n.translate(-It,0,0)}else It=P[p].an/2-P[p].add,n.translate(-It,0,0),n.translate(-t[0]*P[p].an*.005,-t[1]*kt*.01,0);for(gt=0;gt<_t;gt+=1)vt=r[gt].a,vt.t.propType&&(xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),(u!==0||i.j!==0)&&(this._hasMaskedPath?At.length?de+=vt.t.v*At[0]:de+=vt.t.v*At:At.length?u+=vt.t.v*At[0]:u+=vt.t.v*At));for(i.strokeWidthAnim&&(pi=i.sw||0),i.strokeColorAnim&&(i.sc?ni=[i.sc[0],i.sc[1],i.sc[2]]:ni=[0,0,0]),i.fillColorAnim&&i.fc&&(Zt=[i.fc[0],i.fc[1],i.fc[2]]),gt=0;gt<_t;gt+=1)vt=r[gt].a,vt.a.propType&&(xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),At.length?n.translate(-vt.a.v[0]*At[0],-vt.a.v[1]*At[1],vt.a.v[2]*At[2]):n.translate(-vt.a.v[0]*At,-vt.a.v[1]*At,vt.a.v[2]*At));for(gt=0;gt<_t;gt+=1)vt=r[gt].a,vt.s.propType&&(xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),At.length?n.scale(1+(vt.s.v[0]-1)*At[0],1+(vt.s.v[1]-1)*At[1],1):n.scale(1+(vt.s.v[0]-1)*At,1+(vt.s.v[1]-1)*At,1));for(gt=0;gt<_t;gt+=1){if(vt=r[gt].a,xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),vt.sk.propType&&(At.length?n.skewFromAxis(-vt.sk.v*At[0],vt.sa.v*At[1]):n.skewFromAxis(-vt.sk.v*At,vt.sa.v*At)),vt.r.propType&&(At.length?n.rotateZ(-vt.r.v*At[2]):n.rotateZ(-vt.r.v*At)),vt.ry.propType&&(At.length?n.rotateY(vt.ry.v*At[1]):n.rotateY(vt.ry.v*At)),vt.rx.propType&&(At.length?n.rotateX(vt.rx.v*At[0]):n.rotateX(vt.rx.v*At)),vt.o.propType&&(At.length?mi+=(vt.o.v*At[0]-mi)*At[0]:mi+=(vt.o.v*At-mi)*At),i.strokeWidthAnim&&vt.sw.propType&&(At.length?pi+=vt.sw.v*At[0]:pi+=vt.sw.v*At),i.strokeColorAnim&&vt.sc.propType)for(Yt=0;Yt<3;Yt+=1)At.length?ni[Yt]+=(vt.sc.v[Yt]-ni[Yt])*At[0]:ni[Yt]+=(vt.sc.v[Yt]-ni[Yt])*At;if(i.fillColorAnim&&i.fc){if(vt.fc.propType)for(Yt=0;Yt<3;Yt+=1)At.length?Zt[Yt]+=(vt.fc.v[Yt]-Zt[Yt])*At[0]:Zt[Yt]+=(vt.fc.v[Yt]-Zt[Yt])*At;vt.fh.propType&&(At.length?Zt=addHueToRGB(Zt,vt.fh.v*At[0]):Zt=addHueToRGB(Zt,vt.fh.v*At)),vt.fs.propType&&(At.length?Zt=addSaturationToRGB(Zt,vt.fs.v*At[0]):Zt=addSaturationToRGB(Zt,vt.fs.v*At)),vt.fb.propType&&(At.length?Zt=addBrightnessToRGB(Zt,vt.fb.v*At[0]):Zt=addBrightnessToRGB(Zt,vt.fb.v*At))}}for(gt=0;gt<_t;gt+=1)vt=r[gt].a,vt.p.propType&&(xt=r[gt].s,At=xt.getMult(P[p].anIndexes[gt],s.a[gt].s.totalChars),this._hasMaskedPath?At.length?n.translate(0,vt.p.v[1]*At[0],-vt.p.v[2]*At[1]):n.translate(0,vt.p.v[1]*At,-vt.p.v[2]*At):At.length?n.translate(vt.p.v[0]*At[0],vt.p.v[1]*At[1],-vt.p.v[2]*At[2]):n.translate(vt.p.v[0]*At,vt.p.v[1]*At,-vt.p.v[2]*At));if(i.strokeWidthAnim&&(ji=pi<0?0:pi),i.strokeColorAnim&&(ri="rgb("+Math.round(ni[0]*255)+","+Math.round(ni[1]*255)+","+Math.round(ni[2]*255)+")"),i.fillColorAnim&&i.fc&&(Bt="rgb("+Math.round(Zt[0]*255)+","+Math.round(Zt[1]*255)+","+Math.round(Zt[2]*255)+")"),this._hasMaskedPath){if(n.translate(0,-i.ls),n.translate(0,t[1]*kt*.01+c,0),this._pathData.p.v){bt=(me.point[1]-nt.point[1])/(me.point[0]-nt.point[0]);var hi=Math.atan(bt)*180/Math.PI;me.point[0]<nt.point[0]&&(hi+=180),n.rotate(-hi*Math.PI/180)}n.translate(Ft,zt,0),de-=t[0]*P[p].an*.005,P[p+1]&&wt!==P[p+1].ind&&(de+=P[p].an/2,de+=i.tr*.001*i.finalSize)}else{switch(n.translate(u,c,0),i.ps&&n.translate(i.ps[0],i.ps[1]+i.ascent,0),i.j){case 1:n.translate(P[p].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[P[p].line]),0,0);break;case 2:n.translate(P[p].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[P[p].line])/2,0,0);break}n.translate(0,-i.ls),n.translate(It,0,0),n.translate(t[0]*P[p].an*.005,t[1]*kt*.01,0),u+=P[p].l+i.tr*.001*i.finalSize}a==="html"?vi=n.toCSS():a==="svg"?vi=n.to2dCSS():Oi=[n.props[0],n.props[1],n.props[2],n.props[3],n.props[4],n.props[5],n.props[6],n.props[7],n.props[8],n.props[9],n.props[10],n.props[11],n.props[12],n.props[13],n.props[14],n.props[15]],Ri=mi}l<=p?(yt=new LetterProps(Ri,ji,ri,Bt,vi,Oi),this.renderedLetters.push(yt),l+=1,this.lettersChangedFlag=!0):(yt=this.renderedLetters[p],this.lettersChangedFlag=yt.update(Ri,ji,ri,Bt,vi,Oi)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(i,e,t){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(i,e,t),this.textProperty=new TextProperty(this,i.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(i.t,this.renderType,this),this.initTransform(i,e,t),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(i){this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange)},ITextElement.prototype.createPathShape=function(i,e){var t,r=e.length,s,n="";for(t=0;t<r;t+=1)e[t].ty==="sh"&&(s=e[t].ks.k,n+=buildShapeString(s,s.i.length,!0,i));return n},ITextElement.prototype.updateDocumentData=function(i,e){this.textProperty.updateDocumentData(i,e)},ITextElement.prototype.canResizeFont=function(i){this.textProperty.canResizeFont(i)},ITextElement.prototype.setMinimumFontSize=function(i){this.textProperty.setMinimumFontSize(i)},ITextElement.prototype.applyTextPropertiesToMatrix=function(i,e,t,r,s){switch(i.ps&&e.translate(i.ps[0],i.ps[1]+i.ascent,0),e.translate(0,-i.ls,0),i.j){case 1:e.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[t]),0,0);break;case 2:e.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[t])/2,0,0);break}e.translate(r,s,0)},ITextElement.prototype.buildColor=function(i){return"rgb("+Math.round(i[0]*255)+","+Math.round(i[1]*255)+","+Math.round(i[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(i,e,t){this.textSpans=[],this.renderType="svg",this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(i){for(var e=0,t=i.length,r=[],s="";e<t;)i[e]==="\r"||i[e]===""?(r.push(s),s=""):s+=i[e],e+=1;return r.push(s),r},SVGTextLottieElement.prototype.buildShapeData=function(i,e){if(i.shapes&&i.shapes.length){var t=i.shapes[0];if(t.it){var r=t.it[t.it.length-1];r.s&&(r.s.k[0]=e,r.s.k[1]=e)}}return i},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var i,e,t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t?t.l.length:0),t.fc?this.layerElement.setAttribute("fill",this.buildColor(t.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),t.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(t.sc)),this.layerElement.setAttribute("stroke-width",t.sw)),this.layerElement.setAttribute("font-size",t.finalSize);var r=this.globalData.fontManager.getFontByName(t.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var s=t.fWeight,n=t.fStyle;this.layerElement.setAttribute("font-style",n),this.layerElement.setAttribute("font-weight",s)}this.layerElement.setAttribute("aria-label",t.t);var a=t.l||[],l=!!this.globalData.fontManager.chars;e=a.length;var u,c=this.mHelper,p="",b=this.data.singleShape,P=0,N=0,de=!0,me=t.tr*.001*t.finalSize;if(b&&!l&&!t.sz){var Ye=this.textContainer,Le="start";switch(t.j){case 1:Le="end";break;case 2:Le="middle";break;default:Le="start";break}Ye.setAttribute("text-anchor",Le),Ye.setAttribute("letter-spacing",me);var tt=this.buildTextContents(t.finalText);for(e=tt.length,N=t.ps?t.ps[1]+t.ascent:0,i=0;i<e;i+=1)u=this.textSpans[i].span||createNS("tspan"),u.textContent=tt[i],u.setAttribute("x",0),u.setAttribute("y",N),u.style.display="inherit",Ye.appendChild(u),this.textSpans[i]||(this.textSpans[i]={span:null,glyph:null}),this.textSpans[i].span=u,N+=t.finalLineHeight;this.layerElement.appendChild(Ye)}else{var Be=this.textSpans.length,nt;for(i=0;i<e;i+=1){if(this.textSpans[i]||(this.textSpans[i]={span:null,childSpan:null,glyph:null}),!l||!b||i===0){if(u=Be>i?this.textSpans[i].span:createNS(l?"g":"text"),Be<=i){if(u.setAttribute("stroke-linecap","butt"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit","4"),this.textSpans[i].span=u,l){var ft=createNS("g");u.appendChild(ft),this.textSpans[i].childSpan=ft}this.textSpans[i].span=u,this.layerElement.appendChild(u)}u.style.display="inherit"}if(c.reset(),b&&(a[i].n&&(P=-me,N+=t.yOffset,N+=de?1:0,de=!1),this.applyTextPropertiesToMatrix(t,c,a[i].line,P,N),P+=a[i].l||0,P+=me),l){nt=this.globalData.fontManager.getCharData(t.finalText[i],r.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);var mt;if(nt.t===1)mt=new SVGCompElement(nt.data,this.globalData,this);else{var ht=emptyShapeData;nt.data&&nt.data.shapes&&(ht=this.buildShapeData(nt.data,t.finalSize)),mt=new SVGShapeElement(ht,this.globalData,this)}if(this.textSpans[i].glyph){var Et=this.textSpans[i].glyph;this.textSpans[i].childSpan.removeChild(Et.layerElement),Et.destroy()}this.textSpans[i].glyph=mt,mt._debug=!0,mt.prepareFrame(0),mt.renderFrame(),this.textSpans[i].childSpan.appendChild(mt.layerElement),nt.t===1&&this.textSpans[i].childSpan.setAttribute("transform","scale("+t.finalSize/100+","+t.finalSize/100+")")}else b&&u.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),u.textContent=a[i].val,u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}b&&u&&u.setAttribute("d",p)}for(;i<this.textSpans.length;)this.textSpans[i].span.style.display="none",i+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var i=this.layerElement.getBBox();this.bbox={top:i.y,left:i.x,width:i.width,height:i.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var i,e=this.textSpans.length,t;for(this.renderedFrame=this.comp.renderedFrame,i=0;i<e;i+=1)t=this.textSpans[i].glyph,t&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var i,e,t=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l;e=r.length;var s,n,a;for(i=0;i<e;i+=1)r[i].n||(s=t[i],n=this.textSpans[i].span,a=this.textSpans[i].glyph,a&&a.renderFrame(),s._mdf.m&&n.setAttribute("transform",s.m),s._mdf.o&&n.setAttribute("opacity",s.o),s._mdf.sw&&n.setAttribute("stroke-width",s.sw),s._mdf.sc&&n.setAttribute("stroke",s.sc),s._mdf.fc&&n.setAttribute("fill",s.fc))}};function ISolidElement(i,e,t){this.initElement(i,e,t)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var i=createNS("rect");i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.layerElement.appendChild(i)};function NullElement(i,e,t){this.initFrame(),this.initBaseData(i,e,t),this.initFrame(),this.initTransform(i,e,t),this.initHierarchy()}NullElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(i){return new NullElement(i,this.globalData,this)},SVGRendererBase.prototype.createShape=function(i){return new SVGShapeElement(i,this.globalData,this)},SVGRendererBase.prototype.createText=function(i){return new SVGTextLottieElement(i,this.globalData,this)},SVGRendererBase.prototype.createImage=function(i){return new IImageElement(i,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(i){return new ISolidElement(i,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(i){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+i.w+" "+i.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",i.w),this.svgElement.setAttribute("height",i.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(i,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=i;var t=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",i.w),r.setAttribute("height",i.h),r.setAttribute("x",0),r.setAttribute("y",0);var s=createElementID();t.setAttribute("id",s),t.appendChild(r),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")"),e.appendChild(t),this.layers=i.layers,this.elements=createSizedArray(i.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var i,e=this.layers?this.layers.length:0;for(i=0;i<e;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(i){var e=0,t=this.layers.length;for(e=0;e<t;e+=1)if(this.layers[e].ind===i)return e;return-1},SVGRendererBase.prototype.buildItem=function(i){var e=this.elements;if(!(e[i]||this.layers[i].ty===99)){e[i]=!0;var t=this.createItem(this.layers[i]);if(e[i]=t,getExpressionsPlugin()&&(this.layers[i].ty===0&&this.globalData.projectInterface.registerComposition(t),t.initExpressions()),this.appendElementInPos(t,i),this.layers[i].tt){var r="tp"in this.layers[i]?this.findIndexByInd(this.layers[i].tp):i-1;if(r===-1)return;if(!this.elements[r]||this.elements[r]===!0)this.buildItem(r),this.addPendingElement(t);else{var s=e[r],n=s.getMatte(this.layers[i].tt);t.setMatte(n)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();if(i.checkParenting(),i.data.tt)for(var e=0,t=this.elements.length;e<t;){if(this.elements[e]===i){var r="tp"in i.data?this.findIndexByInd(i.data.tp):e-1,s=this.elements[r],n=s.getMatte(this.layers[e].tt);i.setMatte(n);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(i){if(!(this.renderedFrame===i||this.destroyed)){i===null?i=this.renderedFrame:this.renderedFrame=i,this.globalData.frameNum=i,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=i,this.globalData._mdf=!1;var e,t=this.layers.length;for(this.completeLayers||this.checkLayers(i),e=t-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(i-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(i,e){var t=i.getBaseElement();if(t){for(var r=0,s;r<e;)this.elements[r]&&this.elements[r]!==!0&&this.elements[r].getBaseElement()&&(s=this.elements[r].getBaseElement()),r+=1;s?this.layerElement.insertBefore(t,s):this.layerElement.appendChild(t)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(i,e,t){this.initFrame(),this.initBaseData(i,e,t),this.initTransform(i,e,t),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(i){if(this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=i/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var t,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),t=r-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var i,e=this.layers.length;for(i=0;i<e;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},ICompElement.prototype.setElements=function(i){this.elements=i},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var i,e=this.layers.length;for(i=0;i<e;i+=1)this.elements[i]&&this.elements[i].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(i,e,t){this.layers=i.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,e,t),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)};function SVGRenderer(i,e){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var t="";if(e&&e.title){var r=createNS("title"),s=createElementID();r.setAttribute("id",s),r.textContent=e.title,this.svgElement.appendChild(r),t+=s}if(e&&e.description){var n=createNS("desc"),a=createElementID();n.setAttribute("id",a),n.textContent=e.description,this.svgElement.appendChild(n),t+=" "+a}t&&this.svgElement.setAttribute("aria-labelledby",t);var l=createNS("defs");this.svgElement.appendChild(l);var u=createNS("g");this.svgElement.appendChild(u),this.layerElement=u,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:l,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var t,r=e.length,s="_";for(t=0;t<r;t+=1)s+=e[t].transform.key+"_";var n=this.sequences[s];return n||(n={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[s]=n,this.sequenceList.push(n)),n},processSequence:function(e,t){for(var r=0,s=e.transforms.length,n=t;r<s&&!t;){if(e.transforms[r].transform.mProps._mdf){n=!0;break}r+=1}if(n)for(e.finalTransform.reset(),r=s-1;r>=0;r-=1)e.finalTransform.multiply(e.transforms[r].transform.mProps.v);e._mdf=n},processSequences:function(e){var t,r=this.sequenceList.length;for(t=0;t<r;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,r=null,s=null;function n(){var u=createNS("svg"),c=createNS("filter"),p=createNS("feColorMatrix");return c.setAttribute("id",e),p.setAttribute("type","matrix"),p.setAttribute("color-interpolation-filters","sRGB"),p.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),c.appendChild(p),u.appendChild(c),u.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(u.style.display="none"),u}function a(){t||(s=n(),document.body.appendChild(s),t=createTag("canvas"),r=t.getContext("2d"),r.filter="url(#"+e+")",r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1))}function l(u){return t||a(),t.width=u.width,t.height=u.height,r.filter="url(#"+e+")",t}return{load:a,get:l}};function createCanvas(i,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(i,e);var t=createTag("canvas");return t.width=i,t.height=e,t}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(i){var e,t=i.data.ef?i.data.ef.length:0;this.filters=[];var r;for(e=0;e<t;e+=1){r=null;var s=i.data.ef[e].ty;if(registeredEffects[s]){var n=registeredEffects[s].effect;r=new n(i.effectsManager.effectElements[e],i)}r&&this.filters.push(r)}this.filters.length&&i.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(i){var e,t=this.filters.length;for(e=0;e<t;e+=1)this.filters[e].renderFrame(i)},CVEffects.prototype.getEffects=function(i){var e,t=this.filters.length,r=[];for(e=0;e<t;e+=1)this.filters[e].type===i&&r.push(this.filters[e]);return r};function registerEffect(i,e){registeredEffects[i]={effect:e}}function CVMaskElement(i,e){this.data=i,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var t,r=this.masksProperties.length,s=!1;for(t=0;t<r;t+=1)this.masksProperties[t].mode!=="n"&&(s=!0),this.viewData[t]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[t],3);this.hasMasks=s,s&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var i=this.element.finalTransform.mat,e=this.element.canvasContext,t,r=this.masksProperties.length,s,n,a;for(e.beginPath(),t=0;t<r;t+=1)if(this.masksProperties[t].mode!=="n"){this.masksProperties[t].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),a=this.viewData[t].v,s=i.applyToPointArray(a.v[0][0],a.v[0][1],0),e.moveTo(s[0],s[1]);var l,u=a._length;for(l=1;l<u;l+=1)n=i.applyToTriplePoints(a.o[l-1],a.i[l],a.v[l]),e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(a.o[l-1],a.i[0],a.v[0]),e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var r=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(r),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],t=e.getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var r=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(r.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var s=assetLoader.getLumaCanvas(this.canvasContext.canvas),n=s.getContext("2d");n.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(s,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(i,e,t,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var s=4;e.ty==="rc"?s=5:e.ty==="el"?s=6:e.ty==="sr"&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(i,e,s,i);var n,a=t.length,l;for(n=0;n<a;n+=1)t[n].closed||(l={transforms:r.addTransformSequence(t[n].transforms),trNodes:[]},this.styledShapes.push(l),t[n].elements.push(l))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(i,e,t){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(i,e){var t={data:i,type:i.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:i.hd===!0},r={};if(i.ty==="fl"||i.ty==="st"?(r.c=PropertyFactory.getProp(this,i.c,1,255,this),r.c.k||(t.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):(i.ty==="gf"||i.ty==="gs")&&(r.s=PropertyFactory.getProp(this,i.s,1,null,this),r.e=PropertyFactory.getProp(this,i.e,1,null,this),r.h=PropertyFactory.getProp(this,i.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,i.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,i.g,this)),r.o=PropertyFactory.getProp(this,i.o,0,.01,this),i.ty==="st"||i.ty==="gs"){if(t.lc=lineCapEnum[i.lc||2],t.lj=lineJoinEnum[i.lj||2],i.lj==1&&(t.ml=i.ml),r.w=PropertyFactory.getProp(this,i.w,0,null,this),r.w.k||(t.wi=r.w.v),i.d){var s=new DashProperty(this,i.d,"canvas",this);r.d=s,r.d.k||(t.da=r.d.dashArray,t.do=r.d.dashoffset[0])}}else t.r=i.r===2?"evenodd":"nonzero";return this.stylesList.push(t),r.style=t,r},CVShapeElement.prototype.createGroupElement=function(){var i={it:[],prevViewData:[]};return i},CVShapeElement.prototype.createTransformElement=function(i){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,i.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,i,this)}};return e},CVShapeElement.prototype.createShapeElement=function(i){var e=new CVShapeData(this,i,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,e=this.itemsData.length;for(i=0;i<e;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,i=0;i<e;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(i){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(i)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,e=this.stylesList.length;for(i=0;i<e;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.pop()},CVShapeElement.prototype.closeStyles=function(i){var e,t=i.length;for(e=0;e<t;e+=1)i[e].closed=!0},CVShapeElement.prototype.searchShapes=function(i,e,t,r,s){var n,a=i.length-1,l,u,c=[],p=[],b,P,N,de=[].concat(s);for(n=a;n>=0;n-=1){if(b=this.searchProcessedElement(i[n]),b?e[n]=t[b-1]:i[n]._shouldRender=r,i[n].ty==="fl"||i[n].ty==="st"||i[n].ty==="gf"||i[n].ty==="gs")b?e[n].style.closed=!1:e[n]=this.createStyleElement(i[n],de),c.push(e[n].style);else if(i[n].ty==="gr"){if(!b)e[n]=this.createGroupElement(i[n]);else for(u=e[n].it.length,l=0;l<u;l+=1)e[n].prevViewData[l]=e[n].it[l];this.searchShapes(i[n].it,e[n].it,e[n].prevViewData,r,de)}else i[n].ty==="tr"?(b||(N=this.createTransformElement(i[n]),e[n]=N),de.push(e[n]),this.addTransformToStyleList(e[n])):i[n].ty==="sh"||i[n].ty==="rc"||i[n].ty==="el"||i[n].ty==="sr"?b||(e[n]=this.createShapeElement(i[n])):i[n].ty==="tm"||i[n].ty==="rd"||i[n].ty==="pb"||i[n].ty==="zz"||i[n].ty==="op"?(b?(P=e[n],P.closed=!1):(P=ShapeModifiers.getModifier(i[n].ty),P.init(this,i[n]),e[n]=P,this.shapeModifiers.push(P)),p.push(P)):i[n].ty==="rp"&&(b?(P=e[n],P.closed=!0):(P=ShapeModifiers.getModifier(i[n].ty),e[n]=P,P.init(this,i,n,e),this.shapeModifiers.push(P),r=!1),p.push(P));this.addProcessedElement(i[n],n+1)}for(this.removeTransformFromStyleList(),this.closeStyles(c),a=p.length,n=0;n<a;n+=1)p[n].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(i,e){(i._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=i.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var i,e=this.stylesList.length,t,r,s,n,a,l,u=this.globalData.renderer,c=this.globalData.canvasContext,p,b;for(i=0;i<e;i+=1)if(b=this.stylesList[i],p=b.type,!((p==="st"||p==="gs")&&b.wi===0||!b.data._shouldRender||b.coOp===0||this.globalData.currentGlobalAlpha===0)){for(u.save(),a=b.elements,p==="st"||p==="gs"?(u.ctxStrokeStyle(p==="st"?b.co:b.grd),u.ctxLineWidth(b.wi),u.ctxLineCap(b.lc),u.ctxLineJoin(b.lj),u.ctxMiterLimit(b.ml||0)):u.ctxFillStyle(p==="fl"?b.co:b.grd),u.ctxOpacity(b.coOp),p!=="st"&&p!=="gs"&&c.beginPath(),u.ctxTransform(b.preTransforms.finalTransform.props),r=a.length,t=0;t<r;t+=1){for((p==="st"||p==="gs")&&(c.beginPath(),b.da&&(c.setLineDash(b.da),c.lineDashOffset=b.do)),l=a[t].trNodes,n=l.length,s=0;s<n;s+=1)l[s].t==="m"?c.moveTo(l[s].p[0],l[s].p[1]):l[s].t==="c"?c.bezierCurveTo(l[s].pts[0],l[s].pts[1],l[s].pts[2],l[s].pts[3],l[s].pts[4],l[s].pts[5]):c.closePath();(p==="st"||p==="gs")&&(u.ctxStroke(),b.da&&c.setLineDash(this.dashResetter))}p!=="st"&&p!=="gs"&&this.globalData.renderer.ctxFill(b.r),u.restore()}},CVShapeElement.prototype.renderShape=function(i,e,t,r){var s,n=e.length-1,a;for(a=i,s=n;s>=0;s-=1)e[s].ty==="tr"?(a=t[s].transform,this.renderShapeTransform(i,a)):e[s].ty==="sh"||e[s].ty==="el"||e[s].ty==="rc"||e[s].ty==="sr"?this.renderPath(e[s],t[s]):e[s].ty==="fl"?this.renderFill(e[s],t[s],a):e[s].ty==="st"?this.renderStroke(e[s],t[s],a):e[s].ty==="gf"||e[s].ty==="gs"?this.renderGradientFill(e[s],t[s],a):e[s].ty==="gr"?this.renderShape(a,e[s].it,t[s].it):e[s].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(i,e){if(this._isFirstFrame||e._mdf||i.transforms._mdf){var t=i.trNodes,r=e.paths,s,n,a,l=r._length;t.length=0;var u=i.transforms.finalTransform;for(a=0;a<l;a+=1){var c=r.shapes[a];if(c&&c.v){for(n=c._length,s=1;s<n;s+=1)s===1&&t.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),t.push({t:"c",pts:u.applyToTriplePoints(c.o[s-1],c.i[s],c.v[s])});n===1&&t.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&n&&(t.push({t:"c",pts:u.applyToTriplePoints(c.o[s-1],c.i[0],c.v[0])}),t.push({t:"z"}))}}i.trNodes=t}},CVShapeElement.prototype.renderPath=function(i,e){if(i.hd!==!0&&i._shouldRender){var t,r=e.styledShapes.length;for(t=0;t<r;t+=1)this.renderStyledShape(e.styledShapes[t],e.sh)}},CVShapeElement.prototype.renderFill=function(i,e,t){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||t._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*t.opacity)},CVShapeElement.prototype.renderGradientFill=function(i,e,t){var r=e.style,s;if(!r.grd||e.g._mdf||e.s._mdf||e.e._mdf||i.t!==1&&(e.h._mdf||e.a._mdf)){var n=this.globalData.canvasContext,a=e.s.v,l=e.e.v;if(i.t===1)s=n.createLinearGradient(a[0],a[1],l[0],l[1]);else{var u=Math.sqrt(Math.pow(a[0]-l[0],2)+Math.pow(a[1]-l[1],2)),c=Math.atan2(l[1]-a[1],l[0]-a[0]),p=e.h.v;p>=1?p=.99:p<=-1&&(p=-.99);var b=u*p,P=Math.cos(c+e.a.v)*b+a[0],N=Math.sin(c+e.a.v)*b+a[1];s=n.createRadialGradient(P,N,0,a[0],a[1],u)}var de,me=i.g.p,Ye=e.g.c,Le=1;for(de=0;de<me;de+=1)e.g._hasOpacity&&e.g._collapsable&&(Le=e.g.o[de*2+1]),s.addColorStop(Ye[de*4]/100,"rgba("+Ye[de*4+1]+","+Ye[de*4+2]+","+Ye[de*4+3]+","+Le+")");r.grd=s}r.coOp=e.o.v*t.opacity},CVShapeElement.prototype.renderStroke=function(i,e,t){var r=e.style,s=e.d;s&&(s._mdf||this._isFirstFrame)&&(r.da=s.dashArray,r.do=s.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||t._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*t.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(i,e,t){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var e=!1;i.fc?(e=!0,this.values.fill=this.buildColor(i.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var t=!1;i.sc&&(t=!0,this.values.stroke=this.buildColor(i.sc),this.values.sWidth=i.sw);var r=this.globalData.fontManager.getFontByName(i.f),s,n,a=i.l,l=this.mHelper;this.stroke=t,this.values.fValue=i.finalSize+"px "+this.globalData.fontManager.getFontByName(i.f).fFamily,n=i.finalText.length;var u,c,p,b,P,N,de,me,Ye,Le,tt=this.data.singleShape,Be=i.tr*.001*i.finalSize,nt=0,ft=0,mt=!0,ht=0;for(s=0;s<n;s+=1){u=this.globalData.fontManager.getCharData(i.finalText[s],r.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),c=u&&u.data||{},l.reset(),tt&&a[s].n&&(nt=-Be,ft+=i.yOffset,ft+=mt?1:0,mt=!1),P=c.shapes?c.shapes[0].it:[],de=P.length,l.scale(i.finalSize/100,i.finalSize/100),tt&&this.applyTextPropertiesToMatrix(i,l,a[s].line,nt,ft),Ye=createSizedArray(de-1);var Et=0;for(N=0;N<de;N+=1)if(P[N].ty==="sh"){for(b=P[N].ks.k.i.length,me=P[N].ks.k,Le=[],p=1;p<b;p+=1)p===1&&Le.push(l.applyToX(me.v[0][0],me.v[0][1],0),l.applyToY(me.v[0][0],me.v[0][1],0)),Le.push(l.applyToX(me.o[p-1][0],me.o[p-1][1],0),l.applyToY(me.o[p-1][0],me.o[p-1][1],0),l.applyToX(me.i[p][0],me.i[p][1],0),l.applyToY(me.i[p][0],me.i[p][1],0),l.applyToX(me.v[p][0],me.v[p][1],0),l.applyToY(me.v[p][0],me.v[p][1],0));Le.push(l.applyToX(me.o[p-1][0],me.o[p-1][1],0),l.applyToY(me.o[p-1][0],me.o[p-1][1],0),l.applyToX(me.i[0][0],me.i[0][1],0),l.applyToY(me.i[0][0],me.i[0][1],0),l.applyToX(me.v[0][0],me.v[0][1],0),l.applyToY(me.v[0][0],me.v[0][1],0)),Ye[Et]=Le,Et+=1}tt&&(nt+=a[s].l,nt+=Be),this.textSpans[ht]?this.textSpans[ht].elem=Ye:this.textSpans[ht]={elem:Ye},ht+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var i=this.canvasContext;i.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,t,r,s,n,a,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;t=u.length;var c,p=null,b=null,P=null,N,de,me=this.globalData.renderer;for(e=0;e<t;e+=1)if(!u[e].n){if(c=l[e],c&&(me.save(),me.ctxTransform(c.p),me.ctxOpacity(c.o)),this.fill){for(c&&c.fc?p!==c.fc&&(me.ctxFillStyle(c.fc),p=c.fc):p!==this.values.fill&&(p=this.values.fill,me.ctxFillStyle(this.values.fill)),N=this.textSpans[e].elem,s=N.length,this.globalData.canvasContext.beginPath(),r=0;r<s;r+=1)for(de=N[r],a=de.length,this.globalData.canvasContext.moveTo(de[0],de[1]),n=2;n<a;n+=6)this.globalData.canvasContext.bezierCurveTo(de[n],de[n+1],de[n+2],de[n+3],de[n+4],de[n+5]);this.globalData.canvasContext.closePath(),me.ctxFill()}if(this.stroke){for(c&&c.sw?P!==c.sw&&(P=c.sw,me.ctxLineWidth(c.sw)):P!==this.values.sWidth&&(P=this.values.sWidth,me.ctxLineWidth(this.values.sWidth)),c&&c.sc?b!==c.sc&&(b=c.sc,me.ctxStrokeStyle(c.sc)):b!==this.values.stroke&&(b=this.values.stroke,me.ctxStrokeStyle(this.values.stroke)),N=this.textSpans[e].elem,s=N.length,this.globalData.canvasContext.beginPath(),r=0;r<s;r+=1)for(de=N[r],a=de.length,this.globalData.canvasContext.moveTo(de[0],de[1]),n=2;n<a;n+=6)this.globalData.canvasContext.bezierCurveTo(de[n],de[n+1],de[n+2],de[n+3],de[n+4],de[n+5]);this.globalData.canvasContext.closePath(),me.ctxStroke()}c&&this.globalData.renderer.restore()}};function CVImageElement(i,e,t){this.assetData=e.getAssetData(i.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var i=createTag("canvas");i.width=this.assetData.w,i.height=this.assetData.h;var e=i.getContext("2d"),t=this.img.width,r=this.img.height,s=t/r,n=this.assetData.w/this.assetData.h,a,l,u=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;s>n&&u==="xMidYMid slice"||s<n&&u!=="xMidYMid slice"?(l=r,a=l*n):(a=t,l=a/n),e.drawImage(this.img,(t-a)/2,(r-l)/2,a,l,0,0,this.assetData.w,this.assetData.h),this.img=i}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(i,e,t){this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(i){return new CVShapeElement(i,this.globalData,this)},CanvasRendererBase.prototype.createText=function(i){return new CVTextElement(i,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(i){return new CVImageElement(i,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(i){return new CVSolidElement(i,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(i){i[0]===1&&i[1]===0&&i[4]===0&&i[5]===1&&i[12]===0&&i[13]===0||this.canvasContext.transform(i[0],i[1],i[4],i[5],i[12],i[13])},CanvasRendererBase.prototype.ctxOpacity=function(i){this.canvasContext.globalAlpha*=i<0?0:i},CanvasRendererBase.prototype.ctxFillStyle=function(i){this.canvasContext.fillStyle=i},CanvasRendererBase.prototype.ctxStrokeStyle=function(i){this.canvasContext.strokeStyle=i},CanvasRendererBase.prototype.ctxLineWidth=function(i){this.canvasContext.lineWidth=i},CanvasRendererBase.prototype.ctxLineCap=function(i){this.canvasContext.lineCap=i},CanvasRendererBase.prototype.ctxLineJoin=function(i){this.canvasContext.lineJoin=i},CanvasRendererBase.prototype.ctxMiterLimit=function(i){this.canvasContext.miterLimit=i},CanvasRendererBase.prototype.ctxFill=function(i){this.canvasContext.fill(i)},CanvasRendererBase.prototype.ctxFillRect=function(i,e,t,r){this.canvasContext.fillRect(i,e,t,r)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(i){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}i&&(this.globalData.blendMode="source-over"),this.contextData.restore(i)},CanvasRendererBase.prototype.configAnimation=function(i){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var t="0px 0px 0px";e.transformOrigin=t,e.mozTransformOrigin=t,e.webkitTransformOrigin=t,e["-webkit-transform"]=t,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=i,this.layers=i.layers,this.transformCanvas={w:i.w,h:i.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(i,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(i.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(i,e){this.reset();var t,r;i?(t=i,r=e,this.canvasContext.canvas.width=t,this.canvasContext.canvas.height=r):(this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight):(t=this.canvasContext.canvas.width,r=this.canvasContext.canvas.height),this.canvasContext.canvas.width=t*this.renderConfig.dpr,this.canvasContext.canvas.height=r*this.renderConfig.dpr);var s,n;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var a=this.renderConfig.preserveAspectRatio.split(" "),l=a[1]||"meet",u=a[0]||"xMidYMid",c=u.substr(0,4),p=u.substr(4);s=t/r,n=this.transformCanvas.w/this.transformCanvas.h,n>s&&l==="meet"||n<s&&l==="slice"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr)),c==="xMid"&&(n<s&&l==="meet"||n>s&&l==="slice")?this.transformCanvas.tx=(t-this.transformCanvas.w*(r/this.transformCanvas.h))/2*this.renderConfig.dpr:c==="xMax"&&(n<s&&l==="meet"||n>s&&l==="slice")?this.transformCanvas.tx=(t-this.transformCanvas.w*(r/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,p==="YMid"&&(n>s&&l==="meet"||n<s&&l==="slice")?this.transformCanvas.ty=(r-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:p==="YMax"&&(n>s&&l==="meet"||n<s&&l==="slice")?this.transformCanvas.ty=(r-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var i,e=this.layers?this.layers.length:0;for(i=e-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(i,e){if(!(this.renderedFrame===i&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||i===-1)){this.renderedFrame=i,this.globalData.frameNum=i-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=i;var t,r=this.layers.length;for(this.completeLayers||this.checkLayers(i),t=r-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(i-this.layers[t].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),t=r-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(i){var e=this.elements;if(!(e[i]||this.layers[i].ty===99)){var t=this.createItem(this.layers[i],this,this.globalData);e[i]=t,t.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();i.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var i,e=15;for(i=0;i<e;i+=1){var t=new CanvasContext;this.stack[i]=t}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var i=this._length*2,e=0;for(e=this._length;e<i;e+=1)this.stack[e]=new CanvasContext;this._length=i},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(i){this.cArrPos-=1;var e=this.stack[this.cArrPos],t=e.transform,r,s=this.cTr.props;for(r=0;r<16;r+=1)s[r]=t[r];if(i){this.nativeContext.restore();var n=this.stack[this.cArrPos+1];this.appliedFillStyle=n.fillStyle,this.appliedStrokeStyle=n.strokeStyle,this.appliedLineWidth=n.lineWidth,this.appliedLineCap=n.lineCap,this.appliedLineJoin=n.lineJoin,this.appliedMiterLimit=n.miterLimit}this.nativeContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13]),(i||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(i){i&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var t=this.stack[this.cArrPos],r;for(r=0;r<16;r+=1)t.transform[r]=e[r];this.cArrPos+=1;var s=this.stack[this.cArrPos];s.opacity=t.opacity,s.fillStyle=t.fillStyle,s.strokeStyle=t.strokeStyle,s.lineWidth=t.lineWidth,s.lineCap=t.lineCap,s.lineJoin=t.lineJoin,s.miterLimit=t.miterLimit},CVContextData.prototype.setOpacity=function(i){this.stack[this.cArrPos].opacity=i},CVContextData.prototype.setContext=function(i){this.nativeContext=i},CVContextData.prototype.fillStyle=function(i){this.stack[this.cArrPos].fillStyle!==i&&(this.currentFillStyle=i,this.stack[this.cArrPos].fillStyle=i)},CVContextData.prototype.strokeStyle=function(i){this.stack[this.cArrPos].strokeStyle!==i&&(this.currentStrokeStyle=i,this.stack[this.cArrPos].strokeStyle=i)},CVContextData.prototype.lineWidth=function(i){this.stack[this.cArrPos].lineWidth!==i&&(this.currentLineWidth=i,this.stack[this.cArrPos].lineWidth=i)},CVContextData.prototype.lineCap=function(i){this.stack[this.cArrPos].lineCap!==i&&(this.currentLineCap=i,this.stack[this.cArrPos].lineCap=i)},CVContextData.prototype.lineJoin=function(i){this.stack[this.cArrPos].lineJoin!==i&&(this.currentLineJoin=i,this.stack[this.cArrPos].lineJoin=i)},CVContextData.prototype.miterLimit=function(i){this.stack[this.cArrPos].miterLimit!==i&&(this.currentMiterLimit=i,this.stack[this.cArrPos].miterLimit=i)},CVContextData.prototype.transform=function(i){this.transformMat.cloneFromProps(i);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var t=e.props;this.nativeContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])},CVContextData.prototype.opacity=function(i){var e=this.stack[this.cArrPos].opacity;e*=i<0?0:i,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==i&&(this.nativeContext.globalAlpha=i,this.currentOpacity=i),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(i){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(i)},CVContextData.prototype.fillRect=function(i,e,t,r){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(i,e,t,r)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(i,e,t){this.completeLayers=!1,this.layers=i.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(i,e,t),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var i=this.canvasContext;i.beginPath(),i.moveTo(0,0),i.lineTo(this.data.w,0),i.lineTo(this.data.w,this.data.h),i.lineTo(0,this.data.h),i.lineTo(0,0),i.clip();var e,t=this.layers.length;for(e=t-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var i,e=this.layers.length;for(i=e-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)};function CanvasRenderer(i,e){this.animationItem=i,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(i,e,t){this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var i;this.data.hasMask?(i=createNS("rect"),i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(i=createTag("div"),i.style.width=this.data.sw+"px",i.style.height=this.data.sh+"px",i.style.backgroundColor=this.data.sc),this.layerElement.appendChild(i)};function HShapeElement(i,e,t){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(i,e,t),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var i;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),i=this.svgElement;else{i=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.appendChild(this.shapesContainer),this.layerElement.appendChild(i)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=i},HShapeElement.prototype.getTransformedPoint=function(i,e){var t,r=i.length;for(t=0;t<r;t+=1)e=i[t].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(i,e){var t=i.sh.v,r=i.transformers,s,n=t._length,a,l,u,c;if(!(n<=1)){for(s=0;s<n-1;s+=1)a=this.getTransformedPoint(r,t.v[s]),l=this.getTransformedPoint(r,t.o[s]),u=this.getTransformedPoint(r,t.i[s+1]),c=this.getTransformedPoint(r,t.v[s+1]),this.checkBounds(a,l,u,c,e);t.c&&(a=this.getTransformedPoint(r,t.v[s]),l=this.getTransformedPoint(r,t.o[s]),u=this.getTransformedPoint(r,t.i[0]),c=this.getTransformedPoint(r,t.v[0]),this.checkBounds(a,l,u,c,e))}},HShapeElement.prototype.checkBounds=function(i,e,t,r,s){this.getBoundsOfCurve(i,e,t,r);var n=this.shapeBoundingBox;s.x=bmMin(n.left,s.x),s.xMax=bmMax(n.right,s.xMax),s.y=bmMin(n.top,s.y),s.yMax=bmMax(n.bottom,s.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(i,e,t,r){for(var s=[[i[0],r[0]],[i[1],r[1]]],n,a,l,u,c,p,b,P=0;P<2;++P)a=6*i[P]-12*e[P]+6*t[P],n=-3*i[P]+9*e[P]-9*t[P]+3*r[P],l=3*e[P]-3*i[P],a|=0,n|=0,l|=0,n===0&&a===0||(n===0?(u=-l/a,u>0&&u<1&&s[P].push(this.calculateF(u,i,e,t,r,P))):(c=a*a-4*l*n,c>=0&&(p=(-a+bmSqrt(c))/(2*n),p>0&&p<1&&s[P].push(this.calculateF(p,i,e,t,r,P)),b=(-a-bmSqrt(c))/(2*n),b>0&&b<1&&s[P].push(this.calculateF(b,i,e,t,r,P)))));this.shapeBoundingBox.left=bmMin.apply(null,s[0]),this.shapeBoundingBox.top=bmMin.apply(null,s[1]),this.shapeBoundingBox.right=bmMax.apply(null,s[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,s[1])},HShapeElement.prototype.calculateF=function(i,e,t,r,s,n){return bmPow(1-i,3)*e[n]+3*bmPow(1-i,2)*i*t[n]+3*(1-i)*bmPow(i,2)*r[n]+bmPow(i,3)*s[n]},HShapeElement.prototype.calculateBoundingBox=function(i,e){var t,r=i.length;for(t=0;t<r;t+=1)i[t]&&i[t].sh?this.calculateShapeBoundingBox(i[t],e):i[t]&&i[t].it?this.calculateBoundingBox(i[t].it,e):i[t]&&i[t].style&&i[t].w&&this.expandStrokeBoundingBox(i[t].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(i,e){var t=0;if(i.keyframes){for(var r=0;r<i.keyframes.length;r+=1){var s=i.keyframes[r].s;s>t&&(t=s)}t*=i.mult}else t=i.v*i.mult;e.x-=t,e.xMax+=t,e.y-=t,e.yMax+=t},HShapeElement.prototype.currentBoxContains=function(i){return this.currentBBox.x<=i.x&&this.currentBBox.y<=i.y&&this.currentBBox.width+this.currentBBox.x>=i.x+i.width&&this.currentBBox.height+this.currentBBox.y>=i.y+i.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var i=this.tempBoundingBox,e=999999;if(i.x=e,i.xMax=-e,i.y=e,i.yMax=-e,this.calculateBoundingBox(this.itemsData,i),i.width=i.xMax<i.x?0:i.xMax-i.x,i.height=i.yMax<i.y?0:i.yMax-i.y,this.currentBoxContains(i))return;var t=!1;if(this.currentBBox.w!==i.width&&(this.currentBBox.w=i.width,this.shapeCont.setAttribute("width",i.width),t=!0),this.currentBBox.h!==i.height&&(this.currentBBox.h=i.height,this.shapeCont.setAttribute("height",i.height),t=!0),t||this.currentBBox.x!==i.x||this.currentBBox.y!==i.y){this.currentBBox.w=i.width,this.currentBBox.h=i.height,this.currentBBox.x=i.x,this.currentBBox.y=i.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,s="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=s,r.webkitTransform=s}}};function HTextElement(i,e,t){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var i=createNS("g");this.maskedElement.appendChild(i),this.innerElem=i}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var e=this.innerElem.style,t=i.fc?this.buildColor(i.fc):"rgba(0,0,0,0)";e.fill=t,e.color=t,i.sc&&(e.stroke=this.buildColor(i.sc),e.strokeWidth=i.sw+"px");var r=this.globalData.fontManager.getFontByName(i.f);if(!this.globalData.fontManager.chars)if(e.fontSize=i.finalSize+"px",e.lineHeight=i.finalSize+"px",r.fClass)this.innerElem.className=r.fClass;else{e.fontFamily=r.fFamily;var s=i.fWeight,n=i.fStyle;e.fontStyle=n,e.fontWeight=s}var a,l,u=i.l;l=u.length;var c,p,b,P=this.mHelper,N,de="",me=0;for(a=0;a<l;a+=1){if(this.globalData.fontManager.chars?(this.textPaths[me]?c=this.textPaths[me]:(c=createNS("path"),c.setAttribute("stroke-linecap",lineCapEnum[1]),c.setAttribute("stroke-linejoin",lineJoinEnum[2]),c.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[me]?(p=this.textSpans[me],b=p.children[0]):(p=createTag("div"),p.style.lineHeight=0,b=createNS("svg"),b.appendChild(c),styleDiv(p)))):this.isMasked?c=this.textPaths[me]?this.textPaths[me]:createNS("text"):this.textSpans[me]?(p=this.textSpans[me],c=this.textPaths[me]):(p=createTag("span"),styleDiv(p),c=createTag("span"),styleDiv(c),p.appendChild(c)),this.globalData.fontManager.chars){var Ye=this.globalData.fontManager.getCharData(i.finalText[a],r.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),Le;if(Ye?Le=Ye.data:Le=null,P.reset(),Le&&Le.shapes&&Le.shapes.length&&(N=Le.shapes[0].it,P.scale(i.finalSize/100,i.finalSize/100),de=this.createPathShape(P,N),c.setAttribute("d",de)),this.isMasked)this.innerElem.appendChild(c);else{if(this.innerElem.appendChild(p),Le&&Le.shapes){document.body.appendChild(b);var tt=b.getBBox();b.setAttribute("width",tt.width+2),b.setAttribute("height",tt.height+2),b.setAttribute("viewBox",tt.x-1+" "+(tt.y-1)+" "+(tt.width+2)+" "+(tt.height+2));var Be=b.style,nt="translate("+(tt.x-1)+"px,"+(tt.y-1)+"px)";Be.transform=nt,Be.webkitTransform=nt,u[a].yOffset=tt.y-1}else b.setAttribute("width",1),b.setAttribute("height",1);p.appendChild(b)}}else if(c.textContent=u[a].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(c);else{this.innerElem.appendChild(p);var ft=c.style,mt="translate3d(0,"+-i.finalSize/1.2+"px,0)";ft.transform=mt,ft.webkitTransform=mt}this.isMasked?this.textSpans[me]=c:this.textSpans[me]=p,this.textSpans[me].style.display="block",this.textPaths[me]=c,me+=1}for(;me<this.textSpans.length;)this.textSpans[me].style.display="none",me+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var i;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),i=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";i.transform=e,i.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var t,r,s=0,n=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;r=a.length;var l,u,c;for(t=0;t<r;t+=1)a[t].n?s+=1:(u=this.textSpans[t],c=this.textPaths[t],l=n[s],s+=1,l._mdf.m&&(this.isMasked?u.setAttribute("transform",l.m):(u.style.webkitTransform=l.m,u.style.transform=l.m)),u.style.opacity=l.o,l.sw&&l._mdf.sw&&c.setAttribute("stroke-width",l.sw),l.sc&&l._mdf.sc&&c.setAttribute("stroke",l.sc),l.fc&&l._mdf.fc&&(c.setAttribute("fill",l.fc),c.style.color=l.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var p=this.innerElem.getBBox();this.currentBBox.w!==p.width&&(this.currentBBox.w=p.width,this.svgElement.setAttribute("width",p.width)),this.currentBBox.h!==p.height&&(this.currentBBox.h=p.height,this.svgElement.setAttribute("height",p.height));var b=1;if(this.currentBBox.w!==p.width+b*2||this.currentBBox.h!==p.height+b*2||this.currentBBox.x!==p.x-b||this.currentBBox.y!==p.y-b){this.currentBBox.w=p.width+b*2,this.currentBBox.h=p.height+b*2,this.currentBBox.x=p.x-b,this.currentBBox.y=p.y-b,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),i=this.svgElement.style;var P="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=P,i.webkitTransform=P}}}};function HCameraElement(i,e,t){this.initFrame(),this.initBaseData(i,e,t),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,i.pe,0,0,this),i.ks.p.s?(this.px=r(this,i.ks.p.x,1,0,this),this.py=r(this,i.ks.p.y,1,0,this),this.pz=r(this,i.ks.p.z,1,0,this)):this.p=r(this,i.ks.p,1,0,this),i.ks.a&&(this.a=r(this,i.ks.a,1,0,this)),i.ks.or.k.length&&i.ks.or.k[0].to){var s,n=i.ks.or.k.length;for(s=0;s<n;s+=1)i.ks.or.k[s].to=null,i.ks.or.k[s].ti=null}this.or=r(this,i.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,i.ks.rx,0,degToRads,this),this.ry=r(this,i.ks.ry,0,degToRads,this),this.rz=r(this,i.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var i,e=this.comp.threeDElements.length,t,r,s;for(i=0;i<e;i+=1)if(t=this.comp.threeDElements[i],t.type==="3d"){r=t.perspectiveElem.style,s=t.container.style;var n=this.pe.v+"px",a="0px 0px 0px",l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";r.perspective=n,r.webkitPerspective=n,s.transformOrigin=a,s.mozTransformOrigin=a,s.webkitTransformOrigin=a,r.transform=l,r.webkitTransform=l}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var i=this._isFirstFrame,e,t;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)i=this.hierarchy[e].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=this.hierarchy.length-1,e=t;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var s;this.p?s=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:s=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var n=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)+Math.pow(s[2],2)),a=[s[0]/n,s[1]/n,s[2]/n],l=Math.sqrt(a[2]*a[2]+a[0]*a[0]),u=Math.atan2(a[1],l),c=Math.atan2(a[0],-a[2]);this.mat.rotateY(c).rotateX(-u)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var p=!this._prevMat.equals(this.mat);if((p||this.pe._mdf)&&this.comp.threeDElements){t=this.comp.threeDElements.length;var b,P,N;for(e=0;e<t;e+=1)if(b=this.comp.threeDElements[e],b.type==="3d"){if(p){var de=this.mat.toCSS();N=b.container.style,N.transform=de,N.webkitTransform=de}this.pe._mdf&&(P=b.perspectiveElem.style,P.perspective=this.pe.v+"px",P.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(i,e,t){this.assetData=e.getAssetData(i.refId),this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=i,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(i,e){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();i.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(i,e){var t=i.getBaseElement();if(t){var r=this.layers[e];if(!r.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(t,e);else{for(var s=0,n,a,l;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement&&(a=this.elements[s],l=this.layers[s].ddd?this.getThreeDContainerByPos(s):a.getBaseElement(),n=l||n),s+=1;n?(!r.ddd||!this.supports3d)&&this.layerElement.insertBefore(t,n):(!r.ddd||!this.supports3d)&&this.layerElement.appendChild(t)}else this.addTo3dContainer(t,e)}},HybridRendererBase.prototype.createShape=function(i){return this.supports3d?new HShapeElement(i,this.globalData,this):new SVGShapeElement(i,this.globalData,this)},HybridRendererBase.prototype.createText=function(i){return this.supports3d?new HTextElement(i,this.globalData,this):new SVGTextLottieElement(i,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(i){return this.camera=new HCameraElement(i,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(i){return this.supports3d?new HImageElement(i,this.globalData,this):new IImageElement(i,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(i){return this.supports3d?new HSolidElement(i,this.globalData,this):new ISolidElement(i,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(i){for(var e=0,t=this.threeDElements.length;e<t;){if(this.threeDElements[e].startPos<=i&&this.threeDElements[e].endPos>=i)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(i,e){var t=createTag("div"),r,s;styleDiv(t);var n=createTag("div");if(styleDiv(n),e==="3d"){r=t.style,r.width=this.globalData.compSize.w+"px",r.height=this.globalData.compSize.h+"px";var a="50% 50%";r.webkitTransformOrigin=a,r.mozTransformOrigin=a,r.transformOrigin=a,s=n.style;var l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.transform=l,s.webkitTransform=l}t.appendChild(n);var u={container:n,perspectiveElem:t,startPos:i,endPos:i,type:e};return this.threeDElements.push(u),u},HybridRendererBase.prototype.build3dContainers=function(){var i,e=this.layers.length,t,r="";for(i=0;i<e;i+=1)this.layers[i].ddd&&this.layers[i].ty!==3?(r!=="3d"&&(r="3d",t=this.createThreeDContainer(i,"3d")),t.endPos=Math.max(t.endPos,i)):(r!=="2d"&&(r="2d",t=this.createThreeDContainer(i,"2d")),t.endPos=Math.max(t.endPos,i));for(e=this.threeDElements.length,i=e-1;i>=0;i-=1)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(i,e){for(var t=0,r=this.threeDElements.length;t<r;){if(e<=this.threeDElements[t].endPos){for(var s=this.threeDElements[t].startPos,n;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(n=this.elements[s].getBaseElement()),s+=1;n?this.threeDElements[t].container.insertBefore(i,n):this.threeDElements[t].container.appendChild(i);break}t+=1}},HybridRendererBase.prototype.configAnimation=function(i){var e=createTag("div"),t=this.animationItem.wrapper,r=e.style;r.width=i.w+"px",r.height=i.h+"px",this.resizerElem=e,styleDiv(e),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),t.appendChild(e),r.overflow="hidden";var s=createNS("svg");s.setAttribute("width","1"),s.setAttribute("height","1"),styleDiv(s),this.resizerElem.appendChild(s);var n=createNS("defs");s.appendChild(n),this.data=i,this.setupGlobalData(i,s),this.globalData.defs=n,this.layers=i.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var i,e=this.layers?this.layers.length:0;for(i=0;i<e;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var i=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,t=i/e,r=this.globalData.compSize.w/this.globalData.compSize.h,s,n,a,l;r>t?(s=i/this.globalData.compSize.w,n=i/this.globalData.compSize.w,a=0,l=(e-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(s=e/this.globalData.compSize.h,n=e/this.globalData.compSize.h,a=(i-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,l=0);var u=this.resizerElem.style;u.webkitTransform="matrix3d("+s+",0,0,0,0,"+n+",0,0,0,0,1,0,"+a+","+l+",0,1)",u.transform=u.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var i=this.globalData.compSize.w,e=this.globalData.compSize.h,t,r=this.threeDElements.length;for(t=0;t<r;t+=1){var s=this.threeDElements[t].perspectiveElem.style;s.webkitPerspective=Math.sqrt(Math.pow(i,2)+Math.pow(e,2))+"px",s.perspective=s.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(i){var e,t=i.length,r=createTag("div");for(e=0;e<t;e+=1)if(i[e].xt){var s=this.createComp(i[e],r,this.globalData.comp,null);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}};function HCompElement(i,e,t){this.layers=i.layers,this.supports3d=!i.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,e,t),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(i,e){for(var t=0,r;t<e;)this.elements[t]&&this.elements[t].getBaseElement&&(r=this.elements[t].getBaseElement()),t+=1;r?this.layerElement.insertBefore(i,r):this.layerElement.appendChild(i)},HCompElement.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};function HybridRenderer(i,e){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};var CompExpressionInterface=function(){return function(i){function e(t){for(var r=0,s=i.layers.length;r<s;){if(i.layers[r].nm===t||i.layers[r].ind===t)return i.elements[r].layerInterface;r+=1}return null}return Object.defineProperty(e,"_name",{value:i.data.nm}),e.layer=e,e.pixelAspect=1,e.height=i.data.h||i.globalData.compSize.h,e.width=i.data.w||i.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/i.globalData.frameRate,e.displayStartTime=0,e.numLayers=i.layers.length,e}}();function _typeof$2(i){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(i)}function seedRandom(i,e){var t=this,r=256,s=6,n=52,a="random",l=e.pow(r,s),u=e.pow(2,n),c=u*2,p=r-1,b;function P(Be,nt,ft){var mt=[];nt=nt===!0?{entropy:!0}:nt||{};var ht=Ye(me(nt.entropy?[Be,tt(i)]:Be===null?Le():Be,3),mt),Et=new N(mt),St=function(){for(var Pt=Et.g(s),Rt=l,Dt=0;Pt<u;)Pt=(Pt+Dt)*r,Rt*=r,Dt=Et.g(1);for(;Pt>=c;)Pt/=2,Rt/=2,Dt>>>=1;return(Pt+Dt)/Rt};return St.int32=function(){return Et.g(4)|0},St.quick=function(){return Et.g(4)/4294967296},St.double=St,Ye(tt(Et.S),i),(nt.pass||ft||function(bt,Pt,Rt,Dt){return Dt&&(Dt.S&&de(Dt,Et),bt.state=function(){return de(Et,{})}),Rt?(e[a]=bt,Pt):bt})(St,ht,"global"in nt?nt.global:this==e,nt.state)}e["seed"+a]=P;function N(Be){var nt,ft=Be.length,mt=this,ht=0,Et=mt.i=mt.j=0,St=mt.S=[];for(ft||(Be=[ft++]);ht<r;)St[ht]=ht++;for(ht=0;ht<r;ht++)St[ht]=St[Et=p&Et+Be[ht%ft]+(nt=St[ht])],St[Et]=nt;mt.g=function(bt){for(var Pt,Rt=0,Dt=mt.i,kt=mt.j,Lt=mt.S;bt--;)Pt=Lt[Dt=p&Dt+1],Rt=Rt*r+Lt[p&(Lt[Dt]=Lt[kt=p&kt+Pt])+(Lt[kt]=Pt)];return mt.i=Dt,mt.j=kt,Rt}}function de(Be,nt){return nt.i=Be.i,nt.j=Be.j,nt.S=Be.S.slice(),nt}function me(Be,nt){var ft=[],mt=_typeof$2(Be),ht;if(nt&&mt=="object")for(ht in Be)try{ft.push(me(Be[ht],nt-1))}catch{}return ft.length?ft:mt=="string"?Be:Be+"\0"}function Ye(Be,nt){for(var ft=Be+"",mt,ht=0;ht<ft.length;)nt[p&ht]=p&(mt^=nt[p&ht]*19)+ft.charCodeAt(ht++);return tt(nt)}function Le(){try{var Be=new Uint8Array(r);return(t.crypto||t.msCrypto).getRandomValues(Be),tt(Be)}catch{var nt=t.navigator,ft=nt&&nt.plugins;return[+new Date,t,ft,t.screen,tt(i)]}}function tt(Be){return String.fromCharCode.apply(0,Be)}Ye(e.random(),i)}function initialize$2(i){seedRandom([],i)}var propTypes={SHAPE:"shape"};function _typeof$1(i){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(i)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(i){return i.constructor===Array||i.constructor===Float32Array}function isNumerable(i,e){return i==="number"||e instanceof Number||i==="boolean"||i==="string"}function $bm_neg(i){var e=_typeof$1(i);if(e==="number"||i instanceof Number||e==="boolean")return-i;if($bm_isInstanceOfArray(i)){var t,r=i.length,s=[];for(t=0;t<r;t+=1)s[t]=-i[t];return s}return i.propType?i.v:-i}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(i,e){var t=_typeof$1(i),r=_typeof$1(e);if(isNumerable(t,i)&&isNumerable(r,e)||t==="string"||r==="string")return i+e;if($bm_isInstanceOfArray(i)&&isNumerable(r,e))return i=i.slice(0),i[0]+=e,i;if(isNumerable(t,i)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=i+e[0],e;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(e)){for(var s=0,n=i.length,a=e.length,l=[];s<n||s<a;)(typeof i[s]=="number"||i[s]instanceof Number)&&(typeof e[s]=="number"||e[s]instanceof Number)?l[s]=i[s]+e[s]:l[s]=e[s]===void 0?i[s]:i[s]||e[s],s+=1;return l}return 0}var add=sum;function sub(i,e){var t=_typeof$1(i),r=_typeof$1(e);if(isNumerable(t,i)&&isNumerable(r,e))return t==="string"&&(i=parseInt(i,10)),r==="string"&&(e=parseInt(e,10)),i-e;if($bm_isInstanceOfArray(i)&&isNumerable(r,e))return i=i.slice(0),i[0]-=e,i;if(isNumerable(t,i)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=i-e[0],e;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(e)){for(var s=0,n=i.length,a=e.length,l=[];s<n||s<a;)(typeof i[s]=="number"||i[s]instanceof Number)&&(typeof e[s]=="number"||e[s]instanceof Number)?l[s]=i[s]-e[s]:l[s]=e[s]===void 0?i[s]:i[s]||e[s],s+=1;return l}return 0}function mul(i,e){var t=_typeof$1(i),r=_typeof$1(e),s;if(isNumerable(t,i)&&isNumerable(r,e))return i*e;var n,a;if($bm_isInstanceOfArray(i)&&isNumerable(r,e)){for(a=i.length,s=createTypedArray("float32",a),n=0;n<a;n+=1)s[n]=i[n]*e;return s}if(isNumerable(t,i)&&$bm_isInstanceOfArray(e)){for(a=e.length,s=createTypedArray("float32",a),n=0;n<a;n+=1)s[n]=i*e[n];return s}return 0}function div(i,e){var t=_typeof$1(i),r=_typeof$1(e),s;if(isNumerable(t,i)&&isNumerable(r,e))return i/e;var n,a;if($bm_isInstanceOfArray(i)&&isNumerable(r,e)){for(a=i.length,s=createTypedArray("float32",a),n=0;n<a;n+=1)s[n]=i[n]/e;return s}if(isNumerable(t,i)&&$bm_isInstanceOfArray(e)){for(a=e.length,s=createTypedArray("float32",a),n=0;n<a;n+=1)s[n]=i/e[n];return s}return 0}function mod(i,e){return typeof i=="string"&&(i=parseInt(i,10)),typeof e=="string"&&(e=parseInt(e,10)),i%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(i,e,t){if(e>t){var r=t;t=e,e=r}return Math.min(Math.max(i,e),t)}function radiansToDegrees(i){return i/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(i){return i*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(i,e){if(typeof i=="number"||i instanceof Number)return e=e||0,Math.abs(i-e);e||(e=helperLengthArray);var t,r=Math.min(i.length,e.length),s=0;for(t=0;t<r;t+=1)s+=Math.pow(e[t]-i[t],2);return Math.sqrt(s)}function normalize(i){return div(i,length(i))}function rgbToHsl(i){var e=i[0],t=i[1],r=i[2],s=Math.max(e,t,r),n=Math.min(e,t,r),a,l,u=(s+n)/2;if(s===n)a=0,l=0;else{var c=s-n;switch(l=u>.5?c/(2-s-n):c/(s+n),s){case e:a=(t-r)/c+(t<r?6:0);break;case t:a=(r-e)/c+2;break;case r:a=(e-t)/c+4;break}a/=6}return[a,l,u,i[3]]}function hue2rgb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function hslToRgb(i){var e=i[0],t=i[1],r=i[2],s,n,a;if(t===0)s=r,a=r,n=r;else{var l=r<.5?r*(1+t):r+t-r*t,u=2*r-l;s=hue2rgb(u,l,e+1/3),n=hue2rgb(u,l,e),a=hue2rgb(u,l,e-1/3)}return[s,n,a,i[3]]}function linear(i,e,t,r,s){if((r===void 0||s===void 0)&&(r=e,s=t,e=0,t=1),t<e){var n=t;t=e,e=n}if(i<=e)return r;if(i>=t)return s;var a=t===e?0:(i-e)/(t-e);if(!r.length)return r+(s-r)*a;var l,u=r.length,c=createTypedArray("float32",u);for(l=0;l<u;l+=1)c[l]=r[l]+(s[l]-r[l])*a;return c}function random(i,e){if(e===void 0&&(i===void 0?(i=0,e=1):(e=i,i=void 0)),e.length){var t,r=e.length;i||(i=createTypedArray("float32",r));var s=createTypedArray("float32",r),n=BMMath.random();for(t=0;t<r;t+=1)s[t]=i[t]+n*(e[t]-i[t]);return s}i===void 0&&(i=0);var a=BMMath.random();return i+a*(e-i)}function createPath(i,e,t,r){var s,n=i.length,a=shapePool.newElement();a.setPathData(!!r,n);var l=[0,0],u,c;for(s=0;s<n;s+=1)u=e&&e[s]?e[s]:l,c=t&&t[s]?t[s]:l,a.setTripleAt(i[s][0],i[s][1],c[0]+i[s][0],c[1]+i[s][1],u[0]+i[s][0],u[1]+i[s][1],s,!0);return a}function initiateExpression(elem,data,property){function noOp(i){return i}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function i(e,t){var r,s,n=this.pv.length?this.pv.length:1,a=createTypedArray("float32",n);e=5;var l=Math.floor(time*e);for(r=0,s=0;r<l;){for(s=0;s<n;s+=1)a[s]+=-t+t*2*BMMath.random();r+=1}var u=time*e,c=u-Math.floor(u),p=createTypedArray("float32",n);if(n>1){for(s=0;s<n;s+=1)p[s]=this.pv[s]+a[s]+(-t+t*2*BMMath.random())*c;return p}return this.pv+a[0]+(-t+t*2*BMMath.random())*c}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(i,e){return loopIn(i,e,!0)}function loopOutDuration(i,e){return loopOut(i,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(i,e){var t=[e[0]-i[0],e[1]-i[1],e[2]-i[2]],r=Math.atan2(t[0],Math.sqrt(t[1]*t[1]+t[2]*t[2]))/degToRads,s=-Math.atan2(t[1],t[2])/degToRads;return[s,r,0]}function easeOut(i,e,t,r,s){return applyEase(easeOutBez,i,e,t,r,s)}function easeIn(i,e,t,r,s){return applyEase(easeInBez,i,e,t,r,s)}function ease(i,e,t,r,s){return applyEase(easeInOutBez,i,e,t,r,s)}function applyEase(i,e,t,r,s,n){s===void 0?(s=t,n=r):e=(e-t)/(r-t),e>1?e=1:e<0&&(e=0);var a=i(e);if($bm_isInstanceOfArray(s)){var l,u=s.length,c=createTypedArray("float32",u);for(l=0;l<u;l+=1)c[l]=(n[l]-s[l])*a+s[l];return c}return(n-s)*a+s}function nearestKey(i){var e,t=data.k.length,r,s;if(!data.k.length||typeof data.k[0]=="number")r=0,s=0;else if(r=-1,i*=elem.comp.globalData.frameRate,i<data.k[0].t)r=1,s=data.k[0].t;else{for(e=0;e<t-1;e+=1)if(i===data.k[e].t){r=e+1,s=data.k[e].t;break}else if(i>data.k[e].t&&i<data.k[e+1].t){i-data.k[e].t>data.k[e+1].t-i?(r=e+2,s=data.k[e+1].t):(r=e+1,s=data.k[e].t);break}r===-1&&(r=e+1,s=data.k[e].t)}var n={};return n.index=r,n.time=s/elem.comp.globalData.frameRate,n}function key(i){var e,t,r;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+i);i-=1,e={time:data.k[i].t/elem.comp.globalData.frameRate,value:[]};var s=Object.prototype.hasOwnProperty.call(data.k[i],"s")?data.k[i].s:data.k[i-1].e;for(r=s.length,t=0;t<r;t+=1)e[t]=s[t],e.value[t]=s[t];return e}function framesToTime(i,e){return e||(e=elem.comp.globalData.frameRate),i/e}function timeToFrames(i,e){return!i&&i!==0&&(i=time),e||(e=elem.comp.globalData.frameRate),i*e}function seedRandom(i){BMMath.seedrandom(randSeed+i)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(i,e){return typeof value=="string"?e===void 0?value.substring(i):value.substring(i,e):""}function substr(i,e){return typeof value=="string"?e===void 0?value.substr(i):value.substr(i,e):""}function posterizeTime(i){time=i===0?0:Math.floor(time*i)/i,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(i){return value=i,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var i={};i.initExpressions=e,i.resetFrame=ExpressionManager.resetFrame;function e(t){var r=0,s=[];function n(){r+=1}function a(){r-=1,r===0&&u()}function l(c){s.indexOf(c)===-1&&s.push(c)}function u(){var c,p=s.length;for(c=0;c<p;c+=1)s[c].release();s.length=0}t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=n,t.renderer.globalData.popExpression=a,t.renderer.globalData.registerExpressionProperty=l}return i}(),MaskManagerInterface=function(){function i(t,r){this._mask=t,this._data=r}Object.defineProperty(i.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(i.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(r){var s=createSizedArray(r.viewData.length),n,a=r.viewData.length;for(n=0;n<a;n+=1)s[n]=new i(r.viewData[n],r.masksProperties[n]);var l=function(c){for(n=0;n<a;){if(r.masksProperties[n].nm===c)return s[n];n+=1}return null};return l};return e}(),ExpressionPropertyInterface=function(){var i={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function t(a,l,u){Object.defineProperty(a,"velocity",{get:function(){return l.getVelocityAtTime(l.comp.currentFrame)}}),a.numKeys=l.keyframes?l.keyframes.length:0,a.key=function(c){if(!a.numKeys)return 0;var p="";"s"in l.keyframes[c-1]?p=l.keyframes[c-1].s:"e"in l.keyframes[c-2]?p=l.keyframes[c-2].e:p=l.keyframes[c-2].s;var b=u==="unidimensional"?new Number(p):Object.assign({},p);return b.time=l.keyframes[c-1].t/l.elem.comp.globalData.frameRate,b.value=u==="unidimensional"?p[0]:p,b},a.valueAtTime=l.getValueAtTime,a.speedAtTime=l.getSpeedAtTime,a.velocityAtTime=l.getVelocityAtTime,a.propertyGroup=l.propertyGroup}function r(a){(!a||!("pv"in a))&&(a=i);var l=1/a.mult,u=a.pv*l,c=new Number(u);return c.value=u,t(c,a,"unidimensional"),function(){return a.k&&a.getValue(),u=a.v*l,c.value!==u&&(c=new Number(u),c.value=u,c[0]=u,t(c,a,"unidimensional")),c}}function s(a){(!a||!("pv"in a))&&(a=e);var l=1/a.mult,u=a.data&&a.data.l||a.pv.length,c=createTypedArray("float32",u),p=createTypedArray("float32",u);return c.value=p,t(c,a,"multidimensional"),function(){a.k&&a.getValue();for(var b=0;b<u;b+=1)p[b]=a.v[b]*l,c[b]=p[b];return c}}function n(){return i}return function(a){return a?a.propType==="unidimensional"?r(a):s(a):n}}(),TransformExpressionInterface=function(){return function(i){function e(a){switch(a){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(i.r||i.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(i.rz||i.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(i.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(i.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(i.s)});var t,r,s,n;return i.p?n=ExpressionPropertyInterface(i.p):(t=ExpressionPropertyInterface(i.px),r=ExpressionPropertyInterface(i.py),i.pz&&(s=ExpressionPropertyInterface(i.pz))),Object.defineProperty(e,"position",{get:function(){return i.p?n():[t(),r(),s?s():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(i.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(i.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(i.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(i.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(i.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(i.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(i.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(i.or)}),e}}(),LayerExpressionInterface=function(){function i(c){var p=new Matrix;if(c!==void 0){var b=this._elem.finalTransform.mProp.getValueAtTime(c);b.clone(p)}else{var P=this._elem.finalTransform.mProp;P.applyToMatrix(p)}return p}function e(c,p){var b=this.getMatrix(p);return b.props[12]=0,b.props[13]=0,b.props[14]=0,this.applyPoint(b,c)}function t(c,p){var b=this.getMatrix(p);return this.applyPoint(b,c)}function r(c,p){var b=this.getMatrix(p);return b.props[12]=0,b.props[13]=0,b.props[14]=0,this.invertPoint(b,c)}function s(c,p){var b=this.getMatrix(p);return this.invertPoint(b,c)}function n(c,p){if(this._elem.hierarchy&&this._elem.hierarchy.length){var b,P=this._elem.hierarchy.length;for(b=0;b<P;b+=1)this._elem.hierarchy[b].finalTransform.mProp.applyToMatrix(c)}return c.applyToPointArray(p[0],p[1],p[2]||0)}function a(c,p){if(this._elem.hierarchy&&this._elem.hierarchy.length){var b,P=this._elem.hierarchy.length;for(b=0;b<P;b+=1)this._elem.hierarchy[b].finalTransform.mProp.applyToMatrix(c)}return c.inversePoint(p)}function l(c){var p=new Matrix;if(p.reset(),this._elem.finalTransform.mProp.applyToMatrix(p),this._elem.hierarchy&&this._elem.hierarchy.length){var b,P=this._elem.hierarchy.length;for(b=0;b<P;b+=1)this._elem.hierarchy[b].finalTransform.mProp.applyToMatrix(p);return p.inversePoint(c)}return p.inversePoint(c)}function u(){return[1,1,1,1]}return function(c){var p;function b(me){N.mask=new MaskManagerInterface(me,c)}function P(me){N.effect=me}function N(me){switch(me){case"ADBE Root Vectors Group":case"Contents":case 2:return N.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return p;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return N.effect;case"ADBE Text Properties":return N.textInterface;default:return null}}N.getMatrix=i,N.invertPoint=a,N.applyPoint=n,N.toWorld=t,N.toWorldVec=e,N.fromWorld=s,N.fromWorldVec=r,N.toComp=t,N.fromComp=l,N.sampleImage=u,N.sourceRectAtTime=c.sourceRectAtTime.bind(c),N._elem=c,p=TransformExpressionInterface(c.finalTransform.mProp);var de=getDescriptor(p,"anchorPoint");return Object.defineProperties(N,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(p,"rotation"),scale:getDescriptor(p,"scale"),position:getDescriptor(p,"position"),opacity:getDescriptor(p,"opacity"),anchorPoint:de,anchor_point:de,transform:{get:function(){return p}},active:{get:function(){return c.isInRange}}}),N.startTime=c.data.st,N.index=c.data.ind,N.source=c.data.refId,N.height=c.data.ty===0?c.data.h:100,N.width=c.data.ty===0?c.data.w:100,N.inPoint=c.data.ip/c.comp.globalData.frameRate,N.outPoint=c.data.op/c.comp.globalData.frameRate,N._name=c.data.nm,N.registerMaskInterface=b,N.registerEffectsInterface=P,N}}(),propertyGroupFactory=function(){return function(i,e){return function(t){return t=t===void 0?1:t,t<=0?i:e(t-1)}}}(),PropertyInterface=function(){return function(i,e){var t={_name:i};function r(s){return s=s===void 0?1:s,s<=0?t:e(s-1)}return r}}(),EffectsExpressionInterface=function(){var i={createEffectsInterface:e};function e(s,n){if(s.effectsManager){var a=[],l=s.data.ef,u,c=s.effectsManager.effectElements.length;for(u=0;u<c;u+=1)a.push(t(l[u],s.effectsManager.effectElements[u],n,s));var p=s.data.ef||[],b=function(N){for(u=0,c=p.length;u<c;){if(N===p[u].nm||N===p[u].mn||N===p[u].ix)return a[u];u+=1}return null};return Object.defineProperty(b,"numProperties",{get:function(){return p.length}}),b}return null}function t(s,n,a,l){function u(N){for(var de=s.ef,me=0,Ye=de.length;me<Ye;){if(N===de[me].nm||N===de[me].mn||N===de[me].ix)return de[me].ty===5?p[me]:p[me]();me+=1}throw new Error}var c=propertyGroupFactory(u,a),p=[],b,P=s.ef.length;for(b=0;b<P;b+=1)s.ef[b].ty===5?p.push(t(s.ef[b],n.effectElements[b],n.effectElements[b].propertyGroup,l)):p.push(r(n.effectElements[b],s.ef[b].ty,l,c));return s.mn==="ADBE Color Control"&&Object.defineProperty(u,"color",{get:function(){return p[0]()}}),Object.defineProperties(u,{numProperties:{get:function(){return s.np}},_name:{value:s.nm},propertyGroup:{value:c}}),u.enabled=s.en!==0,u.active=u.enabled,u}function r(s,n,a,l){var u=ExpressionPropertyInterface(s.p);function c(){return n===10?a.comp.compInterface(s.p.v):u()}return s.p.setGroupProperty&&s.p.setGroupProperty(PropertyInterface("",l)),c}return i}(),ShapePathInterface=function(){return function(e,t,r){var s=t.sh;function n(l){return l==="Shape"||l==="shape"||l==="Path"||l==="path"||l==="ADBE Vector Shape"||l===2?n.path:null}var a=propertyGroupFactory(n,r);return s.setGroupProperty(PropertyInterface("Path",a)),Object.defineProperties(n,{path:{get:function(){return s.k&&s.getValue(),s}},shape:{get:function(){return s.k&&s.getValue(),s}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:r}}),n}}(),ShapeExpressionInterface=function(){function i(de,me,Ye){var Le=[],tt,Be=de?de.length:0;for(tt=0;tt<Be;tt+=1)de[tt].ty==="gr"?Le.push(t(de[tt],me[tt],Ye)):de[tt].ty==="fl"?Le.push(r(de[tt],me[tt],Ye)):de[tt].ty==="st"?Le.push(a(de[tt],me[tt],Ye)):de[tt].ty==="tm"?Le.push(l(de[tt],me[tt],Ye)):de[tt].ty==="tr"||(de[tt].ty==="el"?Le.push(c(de[tt],me[tt],Ye)):de[tt].ty==="sr"?Le.push(p(de[tt],me[tt],Ye)):de[tt].ty==="sh"?Le.push(ShapePathInterface(de[tt],me[tt],Ye)):de[tt].ty==="rc"?Le.push(b(de[tt],me[tt],Ye)):de[tt].ty==="rd"?Le.push(P(de[tt],me[tt],Ye)):de[tt].ty==="rp"?Le.push(N(de[tt],me[tt],Ye)):de[tt].ty==="gf"?Le.push(s(de[tt],me[tt],Ye)):Le.push(n(de[tt],me[tt])));return Le}function e(de,me,Ye){var Le,tt=function(ft){for(var mt=0,ht=Le.length;mt<ht;){if(Le[mt]._name===ft||Le[mt].mn===ft||Le[mt].propertyIndex===ft||Le[mt].ix===ft||Le[mt].ind===ft)return Le[mt];mt+=1}return typeof ft=="number"?Le[ft-1]:null};tt.propertyGroup=propertyGroupFactory(tt,Ye),Le=i(de.it,me.it,tt.propertyGroup),tt.numProperties=Le.length;var Be=u(de.it[de.it.length-1],me.it[me.it.length-1],tt.propertyGroup);return tt.transform=Be,tt.propertyIndex=de.cix,tt._name=de.nm,tt}function t(de,me,Ye){var Le=function(ft){switch(ft){case"ADBE Vectors Group":case"Contents":case 2:return Le.content;default:return Le.transform}};Le.propertyGroup=propertyGroupFactory(Le,Ye);var tt=e(de,me,Le.propertyGroup),Be=u(de.it[de.it.length-1],me.it[me.it.length-1],Le.propertyGroup);return Le.content=tt,Le.transform=Be,Object.defineProperty(Le,"_name",{get:function(){return de.nm}}),Le.numProperties=de.np,Le.propertyIndex=de.ix,Le.nm=de.nm,Le.mn=de.mn,Le}function r(de,me,Ye){function Le(tt){return tt==="Color"||tt==="color"?Le.color:tt==="Opacity"||tt==="opacity"?Le.opacity:null}return Object.defineProperties(Le,{color:{get:ExpressionPropertyInterface(me.c)},opacity:{get:ExpressionPropertyInterface(me.o)},_name:{value:de.nm},mn:{value:de.mn}}),me.c.setGroupProperty(PropertyInterface("Color",Ye)),me.o.setGroupProperty(PropertyInterface("Opacity",Ye)),Le}function s(de,me,Ye){function Le(tt){return tt==="Start Point"||tt==="start point"?Le.startPoint:tt==="End Point"||tt==="end point"?Le.endPoint:tt==="Opacity"||tt==="opacity"?Le.opacity:null}return Object.defineProperties(Le,{startPoint:{get:ExpressionPropertyInterface(me.s)},endPoint:{get:ExpressionPropertyInterface(me.e)},opacity:{get:ExpressionPropertyInterface(me.o)},type:{get:function(){return"a"}},_name:{value:de.nm},mn:{value:de.mn}}),me.s.setGroupProperty(PropertyInterface("Start Point",Ye)),me.e.setGroupProperty(PropertyInterface("End Point",Ye)),me.o.setGroupProperty(PropertyInterface("Opacity",Ye)),Le}function n(){function de(){return null}return de}function a(de,me,Ye){var Le=propertyGroupFactory(ht,Ye),tt=propertyGroupFactory(mt,Le);function Be(Et){Object.defineProperty(mt,de.d[Et].nm,{get:ExpressionPropertyInterface(me.d.dataProps[Et].p)})}var nt,ft=de.d?de.d.length:0,mt={};for(nt=0;nt<ft;nt+=1)Be(nt),me.d.dataProps[nt].p.setGroupProperty(tt);function ht(Et){return Et==="Color"||Et==="color"?ht.color:Et==="Opacity"||Et==="opacity"?ht.opacity:Et==="Stroke Width"||Et==="stroke width"?ht.strokeWidth:null}return Object.defineProperties(ht,{color:{get:ExpressionPropertyInterface(me.c)},opacity:{get:ExpressionPropertyInterface(me.o)},strokeWidth:{get:ExpressionPropertyInterface(me.w)},dash:{get:function(){return mt}},_name:{value:de.nm},mn:{value:de.mn}}),me.c.setGroupProperty(PropertyInterface("Color",Le)),me.o.setGroupProperty(PropertyInterface("Opacity",Le)),me.w.setGroupProperty(PropertyInterface("Stroke Width",Le)),ht}function l(de,me,Ye){function Le(Be){return Be===de.e.ix||Be==="End"||Be==="end"?Le.end:Be===de.s.ix?Le.start:Be===de.o.ix?Le.offset:null}var tt=propertyGroupFactory(Le,Ye);return Le.propertyIndex=de.ix,me.s.setGroupProperty(PropertyInterface("Start",tt)),me.e.setGroupProperty(PropertyInterface("End",tt)),me.o.setGroupProperty(PropertyInterface("Offset",tt)),Le.propertyIndex=de.ix,Le.propertyGroup=Ye,Object.defineProperties(Le,{start:{get:ExpressionPropertyInterface(me.s)},end:{get:ExpressionPropertyInterface(me.e)},offset:{get:ExpressionPropertyInterface(me.o)},_name:{value:de.nm}}),Le.mn=de.mn,Le}function u(de,me,Ye){function Le(Be){return de.a.ix===Be||Be==="Anchor Point"?Le.anchorPoint:de.o.ix===Be||Be==="Opacity"?Le.opacity:de.p.ix===Be||Be==="Position"?Le.position:de.r.ix===Be||Be==="Rotation"||Be==="ADBE Vector Rotation"?Le.rotation:de.s.ix===Be||Be==="Scale"?Le.scale:de.sk&&de.sk.ix===Be||Be==="Skew"?Le.skew:de.sa&&de.sa.ix===Be||Be==="Skew Axis"?Le.skewAxis:null}var tt=propertyGroupFactory(Le,Ye);return me.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",tt)),me.transform.mProps.p.setGroupProperty(PropertyInterface("Position",tt)),me.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",tt)),me.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",tt)),me.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",tt)),me.transform.mProps.sk&&(me.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",tt)),me.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",tt))),me.transform.op.setGroupProperty(PropertyInterface("Opacity",tt)),Object.defineProperties(Le,{opacity:{get:ExpressionPropertyInterface(me.transform.mProps.o)},position:{get:ExpressionPropertyInterface(me.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(me.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(me.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(me.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(me.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(me.transform.mProps.sa)},_name:{value:de.nm}}),Le.ty="tr",Le.mn=de.mn,Le.propertyGroup=Ye,Le}function c(de,me,Ye){function Le(nt){return de.p.ix===nt?Le.position:de.s.ix===nt?Le.size:null}var tt=propertyGroupFactory(Le,Ye);Le.propertyIndex=de.ix;var Be=me.sh.ty==="tm"?me.sh.prop:me.sh;return Be.s.setGroupProperty(PropertyInterface("Size",tt)),Be.p.setGroupProperty(PropertyInterface("Position",tt)),Object.defineProperties(Le,{size:{get:ExpressionPropertyInterface(Be.s)},position:{get:ExpressionPropertyInterface(Be.p)},_name:{value:de.nm}}),Le.mn=de.mn,Le}function p(de,me,Ye){function Le(nt){return de.p.ix===nt?Le.position:de.r.ix===nt?Le.rotation:de.pt.ix===nt?Le.points:de.or.ix===nt||nt==="ADBE Vector Star Outer Radius"?Le.outerRadius:de.os.ix===nt?Le.outerRoundness:de.ir&&(de.ir.ix===nt||nt==="ADBE Vector Star Inner Radius")?Le.innerRadius:de.is&&de.is.ix===nt?Le.innerRoundness:null}var tt=propertyGroupFactory(Le,Ye),Be=me.sh.ty==="tm"?me.sh.prop:me.sh;return Le.propertyIndex=de.ix,Be.or.setGroupProperty(PropertyInterface("Outer Radius",tt)),Be.os.setGroupProperty(PropertyInterface("Outer Roundness",tt)),Be.pt.setGroupProperty(PropertyInterface("Points",tt)),Be.p.setGroupProperty(PropertyInterface("Position",tt)),Be.r.setGroupProperty(PropertyInterface("Rotation",tt)),de.ir&&(Be.ir.setGroupProperty(PropertyInterface("Inner Radius",tt)),Be.is.setGroupProperty(PropertyInterface("Inner Roundness",tt))),Object.defineProperties(Le,{position:{get:ExpressionPropertyInterface(Be.p)},rotation:{get:ExpressionPropertyInterface(Be.r)},points:{get:ExpressionPropertyInterface(Be.pt)},outerRadius:{get:ExpressionPropertyInterface(Be.or)},outerRoundness:{get:ExpressionPropertyInterface(Be.os)},innerRadius:{get:ExpressionPropertyInterface(Be.ir)},innerRoundness:{get:ExpressionPropertyInterface(Be.is)},_name:{value:de.nm}}),Le.mn=de.mn,Le}function b(de,me,Ye){function Le(nt){return de.p.ix===nt?Le.position:de.r.ix===nt?Le.roundness:de.s.ix===nt||nt==="Size"||nt==="ADBE Vector Rect Size"?Le.size:null}var tt=propertyGroupFactory(Le,Ye),Be=me.sh.ty==="tm"?me.sh.prop:me.sh;return Le.propertyIndex=de.ix,Be.p.setGroupProperty(PropertyInterface("Position",tt)),Be.s.setGroupProperty(PropertyInterface("Size",tt)),Be.r.setGroupProperty(PropertyInterface("Rotation",tt)),Object.defineProperties(Le,{position:{get:ExpressionPropertyInterface(Be.p)},roundness:{get:ExpressionPropertyInterface(Be.r)},size:{get:ExpressionPropertyInterface(Be.s)},_name:{value:de.nm}}),Le.mn=de.mn,Le}function P(de,me,Ye){function Le(nt){return de.r.ix===nt||nt==="Round Corners 1"?Le.radius:null}var tt=propertyGroupFactory(Le,Ye),Be=me;return Le.propertyIndex=de.ix,Be.rd.setGroupProperty(PropertyInterface("Radius",tt)),Object.defineProperties(Le,{radius:{get:ExpressionPropertyInterface(Be.rd)},_name:{value:de.nm}}),Le.mn=de.mn,Le}function N(de,me,Ye){function Le(nt){return de.c.ix===nt||nt==="Copies"?Le.copies:de.o.ix===nt||nt==="Offset"?Le.offset:null}var tt=propertyGroupFactory(Le,Ye),Be=me;return Le.propertyIndex=de.ix,Be.c.setGroupProperty(PropertyInterface("Copies",tt)),Be.o.setGroupProperty(PropertyInterface("Offset",tt)),Object.defineProperties(Le,{copies:{get:ExpressionPropertyInterface(Be.c)},offset:{get:ExpressionPropertyInterface(Be.o)},_name:{value:de.nm}}),Le.mn=de.mn,Le}return function(de,me,Ye){var Le;function tt(nt){if(typeof nt=="number")return nt=nt===void 0?1:nt,nt===0?Ye:Le[nt-1];for(var ft=0,mt=Le.length;ft<mt;){if(Le[ft]._name===nt)return Le[ft];ft+=1}return null}function Be(){return Ye}return tt.propertyGroup=propertyGroupFactory(tt,Be),Le=i(de,me,tt.propertyGroup),tt.numProperties=Le.length,tt._name="Contents",tt}}(),TextExpressionInterface=function(){return function(i){var e;function t(r){switch(r){case"ADBE Text Document":return t.sourceText;default:return null}}return Object.defineProperty(t,"sourceText",{get:function(){i.textProperty.getValue();var s=i.textProperty.currentData.t;return(!e||s!==e.value)&&(e=new String(s),e.value=s||new String(s),Object.defineProperty(e,"style",{get:function(){return{fillColor:i.textProperty.currentData.fc}}})),e}}),t}}();function _typeof(i){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(i)}var FootageInterface=function(){var i=function(r){var s="",n=r.getFootageData();function a(){return s="",n=r.getFootageData(),l}function l(u){if(n[u])return s=u,n=n[u],_typeof(n)==="object"?l:n;var c=u.indexOf(s);if(c!==-1){var p=parseInt(u.substr(c+s.length),10);return n=n[p],_typeof(n)==="object"?l:n}return""}return a},e=function(r){function s(n){return n==="Outline"?s.outlineInterface():null}return s._name="Outline",s.outlineInterface=i(r),s};return function(t){function r(s){return s==="Data"?r.dataInterface:null}return r._name="Data",r.dataInterface=e(t),r}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(i){return interfaces[i]||null}var expressionHelpers=function(){function i(a,l,u){l.x&&(u.k=!0,u.x=!0,u.initiateExpression=ExpressionManager.initiateExpression,u.effectsSequence.push(u.initiateExpression(a,l,u).bind(u)))}function e(a){return a*=this.elem.globalData.frameRate,a-=this.offsetTime,a!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<a?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(a,this._cachingAtTime),this._cachingAtTime.lastFrame=a),this._cachingAtTime.value}function t(a){var l=-.01,u=this.getValueAtTime(a),c=this.getValueAtTime(a+l),p=0;if(u.length){var b;for(b=0;b<u.length;b+=1)p+=Math.pow(c[b]-u[b],2);p=Math.sqrt(p)*100}else p=0;return p}function r(a){if(this.vel!==void 0)return this.vel;var l=-.001,u=this.getValueAtTime(a),c=this.getValueAtTime(a+l),p;if(u.length){p=createTypedArray("float32",u.length);var b;for(b=0;b<u.length;b+=1)p[b]=(c[b]-u[b])/l}else p=(c-u)/l;return p}function s(){return this.pv}function n(a){this.propertyGroup=a}return{searchExpressions:i,getSpeedAtTime:t,getVelocityAtTime:r,getValueAtTime:e,getStaticValueAtTime:s,setGroupProperty:n}}();function addPropertyDecorator(){function i(P,N,de){if(!this.k||!this.keyframes)return this.pv;P=P?P.toLowerCase():"";var me=this.comp.renderedFrame,Ye=this.keyframes,Le=Ye[Ye.length-1].t;if(me<=Le)return this.pv;var tt,Be;de?(N?tt=Math.abs(Le-this.elem.comp.globalData.frameRate*N):tt=Math.max(0,Le-this.elem.data.ip),Be=Le-tt):((!N||N>Ye.length-1)&&(N=Ye.length-1),Be=Ye[Ye.length-1-N].t,tt=Le-Be);var nt,ft,mt;if(P==="pingpong"){var ht=Math.floor((me-Be)/tt);if(ht%2!==0)return this.getValueAtTime((tt-(me-Be)%tt+Be)/this.comp.globalData.frameRate,0)}else if(P==="offset"){var Et=this.getValueAtTime(Be/this.comp.globalData.frameRate,0),St=this.getValueAtTime(Le/this.comp.globalData.frameRate,0),bt=this.getValueAtTime(((me-Be)%tt+Be)/this.comp.globalData.frameRate,0),Pt=Math.floor((me-Be)/tt);if(this.pv.length){for(mt=new Array(Et.length),ft=mt.length,nt=0;nt<ft;nt+=1)mt[nt]=(St[nt]-Et[nt])*Pt+bt[nt];return mt}return(St-Et)*Pt+bt}else if(P==="continue"){var Rt=this.getValueAtTime(Le/this.comp.globalData.frameRate,0),Dt=this.getValueAtTime((Le-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(mt=new Array(Rt.length),ft=mt.length,nt=0;nt<ft;nt+=1)mt[nt]=Rt[nt]+(Rt[nt]-Dt[nt])*((me-Le)/this.comp.globalData.frameRate)/5e-4;return mt}return Rt+(Rt-Dt)*((me-Le)/.001)}return this.getValueAtTime(((me-Be)%tt+Be)/this.comp.globalData.frameRate,0)}function e(P,N,de){if(!this.k)return this.pv;P=P?P.toLowerCase():"";var me=this.comp.renderedFrame,Ye=this.keyframes,Le=Ye[0].t;if(me>=Le)return this.pv;var tt,Be;de?(N?tt=Math.abs(this.elem.comp.globalData.frameRate*N):tt=Math.max(0,this.elem.data.op-Le),Be=Le+tt):((!N||N>Ye.length-1)&&(N=Ye.length-1),Be=Ye[N].t,tt=Be-Le);var nt,ft,mt;if(P==="pingpong"){var ht=Math.floor((Le-me)/tt);if(ht%2===0)return this.getValueAtTime(((Le-me)%tt+Le)/this.comp.globalData.frameRate,0)}else if(P==="offset"){var Et=this.getValueAtTime(Le/this.comp.globalData.frameRate,0),St=this.getValueAtTime(Be/this.comp.globalData.frameRate,0),bt=this.getValueAtTime((tt-(Le-me)%tt+Le)/this.comp.globalData.frameRate,0),Pt=Math.floor((Le-me)/tt)+1;if(this.pv.length){for(mt=new Array(Et.length),ft=mt.length,nt=0;nt<ft;nt+=1)mt[nt]=bt[nt]-(St[nt]-Et[nt])*Pt;return mt}return bt-(St-Et)*Pt}else if(P==="continue"){var Rt=this.getValueAtTime(Le/this.comp.globalData.frameRate,0),Dt=this.getValueAtTime((Le+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(mt=new Array(Rt.length),ft=mt.length,nt=0;nt<ft;nt+=1)mt[nt]=Rt[nt]+(Rt[nt]-Dt[nt])*(Le-me)/.001;return mt}return Rt+(Rt-Dt)*(Le-me)/.001}return this.getValueAtTime((tt-((Le-me)%tt+Le))/this.comp.globalData.frameRate,0)}function t(P,N){if(!this.k)return this.pv;if(P=(P||.4)*.5,N=Math.floor(N||5),N<=1)return this.pv;var de=this.comp.renderedFrame/this.comp.globalData.frameRate,me=de-P,Ye=de+P,Le=N>1?(Ye-me)/(N-1):1,tt=0,Be=0,nt;this.pv.length?nt=createTypedArray("float32",this.pv.length):nt=0;for(var ft;tt<N;){if(ft=this.getValueAtTime(me+tt*Le),this.pv.length)for(Be=0;Be<this.pv.length;Be+=1)nt[Be]+=ft[Be];else nt+=ft;tt+=1}if(this.pv.length)for(Be=0;Be<this.pv.length;Be+=1)nt[Be]/=N;else nt/=N;return nt}function r(P){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var N=this._transformCachingAtTime.v;if(N.cloneFromProps(this.pre.props),this.appliedTransformations<1){var de=this.a.getValueAtTime(P);N.translate(-de[0]*this.a.mult,-de[1]*this.a.mult,de[2]*this.a.mult)}if(this.appliedTransformations<2){var me=this.s.getValueAtTime(P);N.scale(me[0]*this.s.mult,me[1]*this.s.mult,me[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ye=this.sk.getValueAtTime(P),Le=this.sa.getValueAtTime(P);N.skewFromAxis(-Ye*this.sk.mult,Le*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var tt=this.r.getValueAtTime(P);N.rotate(-tt*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Be=this.rz.getValueAtTime(P),nt=this.ry.getValueAtTime(P),ft=this.rx.getValueAtTime(P),mt=this.or.getValueAtTime(P);N.rotateZ(-Be*this.rz.mult).rotateY(nt*this.ry.mult).rotateX(ft*this.rx.mult).rotateZ(-mt[2]*this.or.mult).rotateY(mt[1]*this.or.mult).rotateX(mt[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var ht=this.px.getValueAtTime(P),Et=this.py.getValueAtTime(P);if(this.data.p.z){var St=this.pz.getValueAtTime(P);N.translate(ht*this.px.mult,Et*this.py.mult,-St*this.pz.mult)}else N.translate(ht*this.px.mult,Et*this.py.mult,0)}else{var bt=this.p.getValueAtTime(P);N.translate(bt[0]*this.p.mult,bt[1]*this.p.mult,-bt[2]*this.p.mult)}return N}function s(){return this.v.clone(new Matrix)}var n=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(P,N,de){var me=n(P,N,de);return me.dynamicProperties.length?me.getValueAtTime=r.bind(me):me.getValueAtTime=s.bind(me),me.setGroupProperty=expressionHelpers.setGroupProperty,me};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(P,N,de,me,Ye){var Le=a(P,N,de,me,Ye);Le.kf?Le.getValueAtTime=expressionHelpers.getValueAtTime.bind(Le):Le.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Le),Le.setGroupProperty=expressionHelpers.setGroupProperty,Le.loopOut=i,Le.loopIn=e,Le.smooth=t,Le.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Le),Le.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Le),Le.numKeys=N.a===1?N.k.length:0,Le.propertyIndex=N.ix;var tt=0;return de!==0&&(tt=createTypedArray("float32",N.a===1?N.k[0].s.length:N.k.length)),Le._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:tt},expressionHelpers.searchExpressions(P,N,Le),Le.k&&Ye.addDynamicProperty(Le),Le};function l(P){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),P*=this.elem.globalData.frameRate,P-=this.offsetTime,P!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<P?this._caching.lastIndex:0,this._cachingAtTime.lastTime=P,this.interpolateShape(P,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var u=ShapePropertyFactory.getConstructorFunction(),c=ShapePropertyFactory.getKeyframedConstructorFunction();function p(){}p.prototype={vertices:function(N,de){this.k&&this.getValue();var me=this.v;de!==void 0&&(me=this.getValueAtTime(de,0));var Ye,Le=me._length,tt=me[N],Be=me.v,nt=createSizedArray(Le);for(Ye=0;Ye<Le;Ye+=1)N==="i"||N==="o"?nt[Ye]=[tt[Ye][0]-Be[Ye][0],tt[Ye][1]-Be[Ye][1]]:nt[Ye]=[tt[Ye][0],tt[Ye][1]];return nt},points:function(N){return this.vertices("v",N)},inTangents:function(N){return this.vertices("i",N)},outTangents:function(N){return this.vertices("o",N)},isClosed:function(){return this.v.c},pointOnPath:function(N,de){var me=this.v;de!==void 0&&(me=this.getValueAtTime(de,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(me));for(var Ye=this._segmentsLength,Le=Ye.lengths,tt=Ye.totalLength*N,Be=0,nt=Le.length,ft=0,mt;Be<nt;){if(ft+Le[Be].addedLength>tt){var ht=Be,Et=me.c&&Be===nt-1?0:Be+1,St=(tt-ft)/Le[Be].addedLength;mt=bez.getPointInSegment(me.v[ht],me.v[Et],me.o[ht],me.i[Et],St,Le[Be]);break}else ft+=Le[Be].addedLength;Be+=1}return mt||(mt=me.c?[me.v[0][0],me.v[0][1]]:[me.v[me._length-1][0],me.v[me._length-1][1]]),mt},vectorOnPath:function(N,de,me){N==1?N=this.v.c:N==0&&(N=.999);var Ye=this.pointOnPath(N,de),Le=this.pointOnPath(N+.001,de),tt=Le[0]-Ye[0],Be=Le[1]-Ye[1],nt=Math.sqrt(Math.pow(tt,2)+Math.pow(Be,2));if(nt===0)return[0,0];var ft=me==="tangent"?[tt/nt,Be/nt]:[-Be/nt,tt/nt];return ft},tangentOnPath:function(N,de){return this.vectorOnPath(N,de,"tangent")},normalOnPath:function(N,de){return this.vectorOnPath(N,de,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([p],u),extendPrototype([p],c),c.prototype.getValueAtTime=l,c.prototype.initiateExpression=ExpressionManager.initiateExpression;var b=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(P,N,de,me,Ye){var Le=b(P,N,de,me,Ye);return Le.propertyIndex=N.ix,Le.lock=!1,de===3?expressionHelpers.searchExpressions(P,N.pt,Le):de===4&&expressionHelpers.searchExpressions(P,N.ks,Le),Le.k&&P.addDynamicProperty(Le),Le}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function i(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,t){var r=this.calculateExpression(t);if(e.t!==r){var s={};return this.copyData(s,e),s.t=r.toString(),s.__complete=!1,s}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=i}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function i(e,t){var r=createNS("feMerge");r.setAttribute("result",e);var s,n;for(n=0;n<t.length;n+=1)s=createNS("feMergeNode"),s.setAttribute("in",t[n]),r.appendChild(s),r.appendChild(s);return r}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(i,e,t,r,s){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=n,n.setAttribute("result",r+"_tint_1"),i.appendChild(n),n=createNS("feColorMatrix"),n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",r+"_tint_2"),i.appendChild(n),this.matrixFilter=n;var a=this.createMergeNode(r,[s,r+"_tint_1",r+"_tint_2"]);i.appendChild(a)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+r+" 0"),this.matrixFilter.setAttribute("values",t[0]-e[0]+" 0 0 0 "+e[0]+" "+(t[1]-e[1])+" 0 0 0 "+e[1]+" "+(t[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(i,e,t,r){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",r),i.appendChild(s),this.matrixFilter=s}SVGFillFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,t=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+t+" 0")}};function SVGStrokeEffect(i,e,t){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var i=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,t,r,s;for(this.filterManager.effectElements[1].p.v===1?(s=this.elem.maskManager.masksProperties.length,r=0):(r=this.filterManager.effectElements[0].p.v-1,s=r+1),t=createNS("g"),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1),r;r<s;r+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:r});if(this.filterManager.effectElements[10].p.v===3){var n=createNS("mask"),a=createElementID();n.setAttribute("id",a),n.setAttribute("mask-type","alpha"),n.appendChild(t),this.elem.globalData.defs.appendChild(n);var l=createNS("g");for(l.setAttribute("mask","url("+getLocationHref()+"#"+a+")");i[0];)l.appendChild(i[0]);this.elem.layerElement.appendChild(l),this.masker=n,t.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(i){this.initialized||this.initialize();var e,t=this.paths.length,r,s;for(e=0;e<t;e+=1)if(this.paths[e].m!==-1&&(r=this.elem.maskManager.viewData[this.paths[e].m],s=this.paths[e].p,(i||this.filterManager._mdf||r.prop._mdf)&&s.setAttribute("d",r.lastPath),i||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||r.prop._mdf)){var n;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var a=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,l=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,u=s.getTotalLength();n="0 0 0 "+u*a+" ";var c=u*(l-a),p=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,b=Math.floor(c/p),P;for(P=0;P<b;P+=1)n+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";n+="0 "+u*10+" 0 0"}else n="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;s.setAttribute("stroke-dasharray",n)}if((i||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(i||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(i||this.filterManager.effectElements[3].p._mdf)){var N=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(N[0]*255)+","+bmFloor(N[1]*255)+","+bmFloor(N[2]*255)+")")}};function SVGTritoneFilter(i,e,t,r){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.appendChild(s);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",r),this.matrixFilter=n;var a=createNS("feFuncR");a.setAttribute("type","table"),n.appendChild(a),this.feFuncR=a;var l=createNS("feFuncG");l.setAttribute("type","table"),n.appendChild(l),this.feFuncG=l;var u=createNS("feFuncB");u.setAttribute("type","table"),n.appendChild(u),this.feFuncB=u,i.appendChild(n)}SVGTritoneFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,s=r[0]+" "+t[0]+" "+e[0],n=r[1]+" "+t[1]+" "+e[1],a=r[2]+" "+t[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",s),this.feFuncG.setAttribute("tableValues",n),this.feFuncB.setAttribute("tableValues",a)}};function SVGProLevelsFilter(i,e,t,r){this.filterManager=e;var s=this.filterManager.effectElements,n=createNS("feComponentTransfer");(s[10].p.k||s[10].p.v!==0||s[11].p.k||s[11].p.v!==1||s[12].p.k||s[12].p.v!==1||s[13].p.k||s[13].p.v!==0||s[14].p.k||s[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(s[17].p.k||s[17].p.v!==0||s[18].p.k||s[18].p.v!==1||s[19].p.k||s[19].p.v!==1||s[20].p.k||s[20].p.v!==0||s[21].p.k||s[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(s[24].p.k||s[24].p.v!==0||s[25].p.k||s[25].p.v!==1||s[26].p.k||s[26].p.v!==1||s[27].p.k||s[27].p.v!==0||s[28].p.k||s[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(s[31].p.k||s[31].p.v!==0||s[32].p.k||s[32].p.v!==1||s[33].p.k||s[33].p.v!==1||s[34].p.k||s[34].p.v!==0||s[35].p.k||s[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),i.appendChild(n)),(s[3].p.k||s[3].p.v!==0||s[4].p.k||s[4].p.v!==1||s[5].p.k||s[5].p.v!==1||s[6].p.k||s[6].p.v!==0||s[7].p.k||s[7].p.v!==1)&&(n=createNS("feComponentTransfer"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",r),i.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}SVGProLevelsFilter.prototype.createFeFunc=function(i,e){var t=createNS(i);return t.setAttribute("type","table"),e.appendChild(t),t},SVGProLevelsFilter.prototype.getTableValue=function(i,e,t,r,s){for(var n=0,a=256,l,u=Math.min(i,e),c=Math.max(i,e),p=Array.call(null,{length:a}),b,P=0,N=s-r,de=e-i;n<=256;)l=n/256,l<=u?b=de<0?s:r:l>=c?b=de<0?r:s:b=r+N*Math.pow((l-i)/de,1/t),p[P]=b,P+=1,n+=256/(a-1);return p.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e,t=this.filterManager.effectElements;this.feFuncRComposed&&(i||t[3].p._mdf||t[4].p._mdf||t[5].p._mdf||t[6].p._mdf||t[7].p._mdf)&&(e=this.getTableValue(t[3].p.v,t[4].p.v,t[5].p.v,t[6].p.v,t[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(i||t[10].p._mdf||t[11].p._mdf||t[12].p._mdf||t[13].p._mdf||t[14].p._mdf)&&(e=this.getTableValue(t[10].p.v,t[11].p.v,t[12].p.v,t[13].p.v,t[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(i||t[17].p._mdf||t[18].p._mdf||t[19].p._mdf||t[20].p._mdf||t[21].p._mdf)&&(e=this.getTableValue(t[17].p.v,t[18].p.v,t[19].p.v,t[20].p.v,t[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(i||t[24].p._mdf||t[25].p._mdf||t[26].p._mdf||t[27].p._mdf||t[28].p._mdf)&&(e=this.getTableValue(t[24].p.v,t[25].p.v,t[26].p.v,t[27].p.v,t[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(i||t[31].p._mdf||t[32].p._mdf||t[33].p._mdf||t[34].p._mdf||t[35].p._mdf)&&(e=this.getTableValue(t[31].p.v,t[32].p.v,t[33].p.v,t[34].p.v,t[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(i,e,t,r,s){var n=e.container.globalData.renderConfig.filterSize,a=e.data.fs||n;i.setAttribute("x",a.x||n.x),i.setAttribute("y",a.y||n.y),i.setAttribute("width",a.width||n.width),i.setAttribute("height",a.height||n.height),this.filterManager=e;var l=createNS("feGaussianBlur");l.setAttribute("in","SourceAlpha"),l.setAttribute("result",r+"_drop_shadow_1"),l.setAttribute("stdDeviation","0"),this.feGaussianBlur=l,i.appendChild(l);var u=createNS("feOffset");u.setAttribute("dx","25"),u.setAttribute("dy","0"),u.setAttribute("in",r+"_drop_shadow_1"),u.setAttribute("result",r+"_drop_shadow_2"),this.feOffset=u,i.appendChild(u);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",r+"_drop_shadow_3"),this.feFlood=c,i.appendChild(c);var p=createNS("feComposite");p.setAttribute("in",r+"_drop_shadow_3"),p.setAttribute("in2",r+"_drop_shadow_2"),p.setAttribute("operator","in"),p.setAttribute("result",r+"_drop_shadow_4"),i.appendChild(p);var b=this.createMergeNode(r,[r+"_drop_shadow_4",s]);i.appendChild(b)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){if((i||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),i||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((i||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),i||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var t=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,s=t*Math.cos(r),n=t*Math.sin(r);this.feOffset.setAttribute("dx",s),this.feOffset.setAttribute("dy",n)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(i,e,t){this.initialized=!1,this.filterManager=e,this.filterElem=i,this.elem=t,t.matteElement=createNS("g"),t.matteElement.appendChild(t.layerElement),t.matteElement.appendChild(t.transformedElement),t.baseElement=t.matteElement}SVGMatte3Effect.prototype.findSymbol=function(i){for(var e=0,t=_svgMatteSymbols.length;e<t;){if(_svgMatteSymbols[e]===i)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(i,e){var t=i.layerElement.parentNode;if(t){for(var r=t.children,s=0,n=r.length;s<n&&r[s]!==i.layerElement;)s+=1;var a;s<=n-2&&(a=r[s+1]);var l=createNS("use");l.setAttribute("href","#"+e),a?t.insertBefore(l,a):t.appendChild(l)}},SVGMatte3Effect.prototype.setElementAsMask=function(i,e){if(!this.findSymbol(e)){var t=createElementID(),r=createNS("mask");r.setAttribute("id",e.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var s=i.globalData.defs;s.appendChild(r);var n=createNS("symbol");n.setAttribute("id",t),this.replaceInParent(e,t),n.appendChild(e.layerElement),s.appendChild(n);var a=createNS("use");a.setAttribute("href","#"+t),r.appendChild(a),e.data.hd=!1,e.show()}i.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var i=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,t=0,r=e.length;t<r;)e[t]&&e[t].data.ind===i&&this.setElementAsMask(this.elem,e[t]),t+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(i,e,t,r){i.setAttribute("x","-100%"),i.setAttribute("y","-100%"),i.setAttribute("width","300%"),i.setAttribute("height","300%"),this.filterManager=e;var s=createNS("feGaussianBlur");s.setAttribute("result",r),i.appendChild(s),this.feGaussianBlur=s}SVGGaussianBlurEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=.3,t=this.filterManager.effectElements[0].p.v*e,r=this.filterManager.effectElements[1].p.v,s=r==3?0:t,n=r==2?0:t;this.feGaussianBlur.setAttribute("stdDeviation",s+" "+n);var a=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}};function TransformEffect(){}TransformEffect.prototype.init=function(i){this.effectsManager=i,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(i){if(this._opMdf=!1,this._mdf=!1,i||this.effectsManager._mdf){var e=this.effectsManager.effectElements,t=e[0].p.v,r=e[1].p.v,s=e[2].p.v===1,n=e[3].p.v,a=s?n:e[4].p.v,l=e[5].p.v,u=e[6].p.v,c=e[7].p.v;this.matrix.reset(),this.matrix.translate(-t[0],-t[1],t[2]),this.matrix.scale(a*.01,n*.01,1),this.matrix.rotate(-c*degToRads),this.matrix.skewFromAxis(-l*degToRads,(u+90)*degToRads),this.matrix.translate(r[0],r[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(i,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(i){this.init(i)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs$1(lottieExports);function _arrayLikeToArray(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _defineProperty$1(i,e,t){return(e=_toPropertyKey$1(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function _iterableToArrayLimit(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var r,s,n,a,l=[],u=!0,c=!1;try{if(n=(t=t.call(i)).next,e!==0)for(;!(u=(r=n.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(p){c=!0,s=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$1(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,r)}return t}function _objectSpread2$1(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(t),!0).forEach(function(r){_defineProperty$1(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function _objectWithoutProperties(i,e){if(i==null)return{};var t,r,s=_objectWithoutPropertiesLoose(i,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);for(r=0;r<n.length;r++)t=n[r],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(s[t]=i[t])}return s}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var t={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.includes(r))continue;t[r]=i[r]}return t}function _slicedToArray(i,e){return _arrayWithHoles(i)||_iterableToArrayLimit(i,e)||_unsupportedIterableToArray(i,e)||_nonIterableRest()}function _toPrimitive$1(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function _toPropertyKey$1(i){var e=_toPrimitive$1(i,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(i,e){if(i){if(typeof i=="string")return _arrayLikeToArray(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(i,e):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function i(e,t){var r=e.animationData,s=e.loop,n=e.autoplay,a=e.initialSegment,l=e.onComplete,u=e.onLoopComplete,c=e.onEnterFrame,p=e.onSegmentStart,b=e.onConfigReady,P=e.onDataReady,N=e.onDataFailed,de=e.onLoadedImages,me=e.onDOMLoaded,Ye=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var Le=_objectWithoutProperties(e,_excluded$1),tt=reactExports.useState(!1),Be=_slicedToArray(tt,2),nt=Be[0],ft=Be[1],mt=reactExports.useRef(),ht=reactExports.useRef(null),Et=function(){var wt;(wt=mt.current)===null||wt===void 0||wt.play()},St=function(){var wt;(wt=mt.current)===null||wt===void 0||wt.stop()},bt=function(){var wt;(wt=mt.current)===null||wt===void 0||wt.pause()},Pt=function(wt){var It;(It=mt.current)===null||It===void 0||It.setSpeed(wt)},Rt=function(wt,It){var Ft;(Ft=mt.current)===null||Ft===void 0||Ft.goToAndPlay(wt,It)},Dt=function(wt,It){var Ft;(Ft=mt.current)===null||Ft===void 0||Ft.goToAndStop(wt,It)},kt=function(wt){var It;(It=mt.current)===null||It===void 0||It.setDirection(wt)},Lt=function(wt,It){var Ft;(Ft=mt.current)===null||Ft===void 0||Ft.playSegments(wt,It)},vt=function(wt){var It;(It=mt.current)===null||It===void 0||It.setSubframe(wt)},xt=function(wt){var It;return(It=mt.current)===null||It===void 0?void 0:It.getDuration(wt)},gt=function(){var wt;(wt=mt.current)===null||wt===void 0||wt.destroy(),mt.current=void 0},_t=function(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},It;if(ht.current){(It=mt.current)===null||It===void 0||It.destroy();var Ft=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},e),wt),{},{container:ht.current});return mt.current=lottie.loadAnimation(Ft),ft(!!mt.current),function(){var zt;(zt=mt.current)===null||zt===void 0||zt.destroy(),mt.current=void 0}}};reactExports.useEffect(function(){var At=_t();return function(){return At?.()}},[r,s]),reactExports.useEffect(function(){mt.current&&(mt.current.autoplay=!!n)},[n]),reactExports.useEffect(function(){if(mt.current){if(!a){mt.current.resetSegments(!0);return}!Array.isArray(a)||!a.length||((mt.current.currentRawFrame<a[0]||mt.current.currentRawFrame>a[1])&&(mt.current.currentRawFrame=a[0]),mt.current.setSegment(a[0],a[1]))}},[a]),reactExports.useEffect(function(){var At=[{name:"complete",handler:l},{name:"loopComplete",handler:u},{name:"enterFrame",handler:c},{name:"segmentStart",handler:p},{name:"config_ready",handler:b},{name:"data_ready",handler:P},{name:"data_failed",handler:N},{name:"loaded_images",handler:de},{name:"DOMLoaded",handler:me},{name:"destroy",handler:Ye}],wt=At.filter(function(Ft){return Ft.handler!=null});if(wt.length){var It=wt.map(function(Ft){var zt;return(zt=mt.current)===null||zt===void 0||zt.addEventListener(Ft.name,Ft.handler),function(){var Ut;(Ut=mt.current)===null||Ut===void 0||Ut.removeEventListener(Ft.name,Ft.handler)}});return function(){It.forEach(function(Ft){return Ft()})}}},[l,u,c,p,b,P,N,de,me,Ye]);var yt=React.createElement("div",_objectSpread2$1({style:t,ref:ht},Le));return{View:yt,play:Et,stop:St,pause:bt,setSpeed:Pt,goToAndStop:Dt,goToAndPlay:Rt,setDirection:kt,playSegments:Lt,setSubframe:vt,getDuration:xt,destroy:gt,animationContainerRef:ht,animationLoaded:nt,animationItem:mt.current}};function getContainerVisibility(i){var e=i.getBoundingClientRect(),t=e.top,r=e.height,s=window.innerHeight-t,n=window.innerHeight+r;return s/n}function getContainerCursorPosition(i,e,t){var r=i.getBoundingClientRect(),s=r.top,n=r.left,a=r.width,l=r.height,u=(e-n)/a,c=(t-s)/l;return{x:u,y:c}}var useInitInteractivity=function i(e){var t=e.wrapperRef,r=e.animationItem,s=e.mode,n=e.actions;reactExports.useEffect(function(){var a=t.current;if(!(!a||!r||!n.length)){r.stop();var l=function(){var p=null,b=function(){var N=getContainerVisibility(a),de=n.find(function(Ye){var Le=Ye.visibility;return Le&&N>=Le[0]&&N<=Le[1]});if(de){if(de.type==="seek"&&de.visibility&&de.frames.length===2){var me=de.frames[0]+Math.ceil((N-de.visibility[0])/(de.visibility[1]-de.visibility[0])*de.frames[1]);//! goToAndStop must be relative to the start of the current segment
r.goToAndStop(me-r.firstFrame-1,!0)}de.type==="loop"&&(p===null||p!==de.frames||r.isPaused)&&(r.playSegments(de.frames,!0),p=de.frames),de.type==="play"&&r.isPaused&&(r.resetSegments(!0),r.play()),de.type==="stop"&&r.goToAndStop(de.frames[0]-r.firstFrame-1,!0)}};return document.addEventListener("scroll",b),function(){document.removeEventListener("scroll",b)}},u=function(){var p=function(de,me){var Ye=de,Le=me;if(Ye!==-1&&Le!==-1){var tt=getContainerCursorPosition(a,Ye,Le);Ye=tt.x,Le=tt.y}var Be=n.find(function(mt){var ht=mt.position;return ht&&Array.isArray(ht.x)&&Array.isArray(ht.y)?Ye>=ht.x[0]&&Ye<=ht.x[1]&&Le>=ht.y[0]&&Le<=ht.y[1]:ht&&!Number.isNaN(ht.x)&&!Number.isNaN(ht.y)?Ye===ht.x&&Le===ht.y:!1});if(Be){if(Be.type==="seek"&&Be.position&&Array.isArray(Be.position.x)&&Array.isArray(Be.position.y)&&Be.frames.length===2){var nt=(Ye-Be.position.x[0])/(Be.position.x[1]-Be.position.x[0]),ft=(Le-Be.position.y[0])/(Be.position.y[1]-Be.position.y[0]);r.playSegments(Be.frames,!0),r.goToAndStop(Math.ceil((nt+ft)/2*(Be.frames[1]-Be.frames[0])),!0)}Be.type==="loop"&&r.playSegments(Be.frames,!0),Be.type==="play"&&(r.isPaused&&r.resetSegments(!1),r.playSegments(Be.frames)),Be.type==="stop"&&r.goToAndStop(Be.frames[0],!0)}},b=function(de){p(de.clientX,de.clientY)},P=function(){p(-1,-1)};return a.addEventListener("mousemove",b),a.addEventListener("mouseout",P),function(){a.removeEventListener("mousemove",b),a.removeEventListener("mouseout",P)}};switch(s){case"scroll":return l();case"cursor":return u()}}},[s,r])},useLottieInteractivity=function i(e){var t=e.actions,r=e.mode,s=e.lottieObj,n=s.animationItem,a=s.View,l=s.animationContainerRef;return useInitInteractivity({actions:t,animationItem:n,mode:r,wrapperRef:l}),a},_excluded=["style","interactivity"],Lottie=function i(e){var t,r,s,n=e.style,a=e.interactivity,l=_objectWithoutProperties(e,_excluded),u=useLottie(l,n),c=u.View,p=u.play,b=u.stop,P=u.pause,N=u.setSpeed,de=u.goToAndStop,me=u.goToAndPlay,Ye=u.setDirection,Le=u.playSegments,tt=u.setSubframe,Be=u.getDuration,nt=u.destroy,ft=u.animationContainerRef,mt=u.animationLoaded,ht=u.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:p,stop:b,pause:P,setSpeed:N,goToAndPlay:me,goToAndStop:de,setDirection:Ye,playSegments:Le,setSubframe:tt,getDuration:Be,destroy:nt,animationContainerRef:ft,animationLoaded:mt,animationItem:ht})},[(t=e.lottieRef)===null||t===void 0?void 0:t.current]),useLottieInteractivity({lottieObj:{View:c,play:p,stop:b,pause:P,setSpeed:N,goToAndStop:de,goToAndPlay:me,setDirection:Ye,playSegments:Le,setSubframe:tt,getDuration:Be,destroy:nt,animationContainerRef:ft,animationLoaded:mt,animationItem:ht},actions:(r=a?.actions)!==null&&r!==void 0?r:[],mode:(s=a?.mode)!==null&&s!==void 0?s:"scroll"})};const v="4.8.0",meta={g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr=60,ip=0,op=493,w=428,h=123,nm="welcome",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"katman 2 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210.962,63.445,0],ix:2},a:{a:0,k:[217.377,69.099,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.315,y:1},o:{x:.333,y:0},t:12,s:[{i:[[0,0],[-19.996,3.807],[0,0],[-18.895,3.082],[19.742,-1.29],[-24.256,-8.085],[-.766,11.744],[5.66,-16.851],[-19.685,5.741],[-1.452,15.251],[7.149,-14.298],[-24.05,0],[-13.969,8.205],[0,0],[4.449,-18.338],[-20.828,10.921],[-24.102,3.075],[.647,-8.405],[10.851,1.532],[-3.877,8.419],[-6.217,.509],[-8.064,.981],[0,0],[0,0],[-9.446,-.88],[0,0],[-10.502,-2.2],[-11.05,-5.525],[-.766,11.745],[5.66,-16.851],[-15.599,-.035],[-2.016,1.583]],o:[[0,0],[14.276,-2.719],[0,0],[15.078,-2.46],[-12.066,.788],[15.247,5.083],[.883,-13.542],[-5.204,15.495],[28.1,-8.195],[1.532,-16.085],[-6.678,13.356],[13.262,0],[9.918,-5.825],[0,0],[-2.158,8.896],[19.355,-10.149],[9.78,-1.247],[-.893,11.617],[-9.912,-1.399],[6.099,-13.245],[15.145,-1.239],[7.884,-.959],[0,0],[0,0],[10.729,1],[0,0],[10.164,2.129],[12.423,6.212],[.884,-13.542],[-4.553,13.559],[9.878,.022],[0,0]],v:[[-188.452,-48.737],[-174.88,37.534],[-150.861,-18.684],[-139.413,37.589],[-115.605,-41.153],[-102.747,24.964],[-71.062,8.04],[-94.211,9.061],[-70.73,37.677],[-25.253,-28.982],[-42.615,-32.301],[-36.232,38.678],[-2.148,2.178],[14.548,-2.029],[-12.773,17.608],[15.027,35.678],[51.708,-.699],[67.342,18.38],[44.619,38.295],[32.237,14.423],[51.708,-.699],[79.124,17.623],[92.418,5.764],[86.665,37.388],[107.665,2.07],[112.358,29.353],[133.077,2.635],[138.465,37.258],[179.361,8.554],[156.212,9.575],[175.587,38.838],[194.876,31.741]],c:!1}]},{i:{x:.833,y:1},o:{x:.167,y:0},t:110,s:[{i:[[0,0],[-19.996,3.807],[0,0],[-18.895,3.082],[19.742,-1.29],[-24.256,-8.085],[-.766,11.744],[5.66,-16.851],[-19.685,5.741],[-1.452,15.251],[7.149,-14.298],[-24.05,0],[-13.969,8.205],[0,0],[4.449,-18.338],[-20.828,10.921],[-24.102,3.075],[.647,-8.405],[10.851,1.532],[-3.877,8.419],[-6.217,.509],[-8.064,.981],[0,0],[0,0],[-9.446,-.88],[0,0],[-10.502,-2.2],[-11.05,-5.525],[-.766,11.745],[5.66,-16.851],[-15.599,-.035],[-2.016,1.583]],o:[[0,0],[14.276,-2.719],[0,0],[15.078,-2.46],[-12.066,.788],[15.247,5.083],[.883,-13.542],[-5.204,15.495],[28.1,-8.195],[1.532,-16.085],[-6.678,13.356],[13.262,0],[9.918,-5.825],[0,0],[-2.158,8.896],[19.355,-10.149],[9.78,-1.247],[-.893,11.617],[-9.912,-1.399],[6.099,-13.245],[15.145,-1.239],[7.884,-.959],[0,0],[0,0],[10.729,1],[0,0],[10.164,2.129],[12.423,6.212],[.884,-13.542],[-4.553,13.559],[9.878,.022],[0,0]],v:[[-187.452,-42.737],[-174.88,37.534],[-150.861,-18.684],[-139.413,37.589],[-115.605,-41.153],[-102.747,24.964],[-71.062,8.04],[-94.211,9.061],[-70.73,37.677],[-25.253,-28.982],[-42.615,-32.301],[-36.232,38.678],[-2.148,2.178],[14.548,-2.029],[-12.773,17.608],[15.027,35.678],[51.708,-.699],[67.342,18.38],[44.619,38.295],[32.237,14.423],[51.708,-.699],[79.124,17.623],[92.418,5.764],[86.665,37.388],[107.665,2.07],[111.858,34.353],[133.077,2.635],[138.465,37.258],[179.361,8.554],[156.212,9.575],[175.587,38.838],[194.876,31.741]],c:!1}]},{i:{x:.833,y:1},o:{x:.167,y:0},t:196,s:[{i:[[0,0],[-19.996,3.807],[0,0],[-18.895,3.082],[19.742,-1.29],[-24.256,-8.085],[-.766,11.744],[5.66,-16.851],[-19.685,5.741],[-1.452,15.251],[7.149,-14.298],[-24.05,0],[-13.969,8.205],[0,0],[4.449,-18.338],[-20.828,10.921],[-24.102,3.075],[.647,-8.405],[10.851,1.532],[-3.877,8.419],[-6.217,.509],[-8.064,.981],[0,0],[0,0],[-9.446,-.88],[0,0],[-10.605,-1.634],[-11.05,-5.525],[-.766,11.745],[5.66,-16.851],[-15.599,-.035],[-2.016,1.583]],o:[[0,0],[14.276,-2.719],[0,0],[15.078,-2.46],[-12.066,.788],[15.247,5.083],[.883,-13.542],[-5.204,15.495],[28.1,-8.195],[1.532,-16.085],[-6.678,13.356],[13.262,0],[9.918,-5.825],[0,0],[-2.158,8.896],[19.355,-10.149],[9.78,-1.247],[-.893,11.617],[-9.912,-1.399],[6.099,-13.245],[15.145,-1.239],[7.884,-.959],[0,0],[0,0],[10.729,1],[0,0],[12.461,1.921],[12.423,6.212],[.884,-13.542],[-4.553,13.559],[9.878,.022],[0,0]],v:[[-187.452,-42.737],[-174.88,37.534],[-150.861,-18.684],[-139.413,37.589],[-115.605,-41.153],[-102.747,24.964],[-71.062,8.04],[-94.21,9.061],[-70.73,37.677],[-25.253,-28.982],[-42.615,-32.301],[-36.232,38.678],[-2.148,2.178],[14.547,-2.029],[-12.773,17.608],[15.027,35.678],[51.708,-.699],[67.342,18.38],[44.619,38.295],[32.236,14.423],[51.708,-.699],[79.124,17.623],[92.418,5.764],[86.665,37.388],[107.665,2.07],[111.858,35.853],[133.077,2.635],[138.465,37.258],[179.361,8.554],[156.212,9.575],[175.587,38.838],[197.876,29.741]],c:!1}]},{t:292,s:[{i:[[0,0],[-19.996,3.807],[0,0],[-18.895,3.082],[19.742,-1.29],[-24.256,-8.085],[-.766,11.744],[5.66,-16.851],[-19.685,5.741],[-1.452,15.251],[7.149,-14.298],[-24.05,0],[-13.969,8.205],[0,0],[4.449,-18.338],[-20.828,10.921],[-24.102,3.075],[.647,-8.405],[10.851,1.532],[-3.877,8.419],[-6.217,.509],[-8.064,.981],[0,0],[0,0],[-9.446,-.88],[0,0],[-10.705,-.732],[-11.05,-5.525],[-.766,11.745],[5.66,-16.851],[-15.599,-.035],[-2.016,1.583]],o:[[0,0],[14.276,-2.719],[0,0],[15.078,-2.46],[-12.066,.788],[15.247,5.083],[.883,-13.542],[-5.204,15.495],[28.1,-8.195],[1.532,-16.085],[-6.678,13.356],[13.262,0],[9.918,-5.825],[0,0],[-2.158,8.896],[19.355,-10.149],[9.78,-1.247],[-.893,11.617],[-9.912,-1.399],[6.099,-13.245],[15.145,-1.239],[7.884,-.959],[0,0],[0,0],[10.729,1],[0,0],[13.461,.921],[12.423,6.212],[.884,-13.542],[-4.553,13.559],[9.878,.022],[0,0]],v:[[-187.452,-42.737],[-174.88,37.534],[-150.861,-18.684],[-139.413,37.589],[-115.605,-41.153],[-102.747,24.964],[-71.062,8.04],[-94.211,9.061],[-70.73,37.677],[-25.253,-28.982],[-42.615,-32.301],[-36.232,38.678],[-2.148,2.178],[14.548,-2.029],[-12.773,17.608],[15.027,35.678],[51.708,-.699],[67.342,18.38],[44.619,38.295],[32.237,14.423],[51.708,-.699],[79.124,17.623],[92.418,5.764],[86.665,37.388],[107.665,2.07],[111.858,35.353],[133.077,2.635],[138.465,37.258],[179.361,8.554],[156.212,9.575],[175.587,38.838],[194.876,31.741]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.414],y:[0]},t:292,s:[0]},{t:470,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.588],y:[1]},o:{x:[.409],y:[.273]},t:12,s:[0]},{t:196,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"gs",o:{a:0,k:100,ix:9},w:{a:0,k:9,ix:10},g:{p:11,k:{a:0,k:[0,.008,.569,.592,.093,.333,.725,.478,.187,.659,.882,.365,.293,.829,.843,.225,.399,1,.804,.086,.504,1,.596,.112,.609,1,.388,.137,.712,1,.29,.471,.814,1,.192,.804,.907,.614,.467,.884,1,.227,.741,.965],ix:8}},s:{a:1,k:[{i:{x:.283,y:1},o:{x:.333,y:0},t:34,s:[-253.742,-70.793],to:[8.667,8.833],ti:[-8.667,-8.833]},{t:282,s:[-201.742,-17.793]}],ix:4},e:{a:1,k:[{i:{x:.283,y:1},o:{x:.333,y:0},t:34,s:[118.488,29.074],to:[10.667,-3.5],ti:[-10.667,3.5]},{t:282,s:[182.488,8.074]}],ix:5},t:1,lc:2,lj:2,bm:0,nm:"Gradient Stroke 1",mn:"ADBE Vector Graphic - G-Stroke",hd:!1},{ty:"tr",p:{a:0,k:[217.377,69.099],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:608,st:0,bm:0}],markers=[],helloAnimation={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},IntroContainer=dt.div`
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 100;
  background-color: #0a0a0a;
  display: flex;
  align-items: center;
  justify-content: center;
`,BlockBackground=dt.div`
  position: absolute;
  top: 0;
  left: 0;
`,Intro$1=({onComplete:i})=>jsxRuntimeExports.jsx(IntroContainer,{children:jsxRuntimeExports.jsx(Lottie,{animationData:helloAnimation,autoPlay:!0,onLoopComplete:()=>{i()},className:"intro-image"})}),LayoutGroupContext=reactExports.createContext({});function useConstant(i){const e=reactExports.useRef(null);return e.current===null&&(e.current=i()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(i,e){i.indexOf(e)===-1&&i.push(e)}function removeItem(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const clamp$1=(i,e,t)=>t>e?e:t<i?i:t;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function isObject$3(i){return typeof i=="object"&&i!==null}const isZeroValueString=i=>/^0[^.\s]+$/u.test(i);function memo(i){let e;return()=>(e===void 0&&(e=i()),e)}const noop$1=i=>i,combineFunctions=(i,e)=>t=>e(i(t)),pipe$1=(...i)=>i.reduce(combineFunctions),progress=(i,e,t)=>{const r=e-i;return r===0?1:(t-i)/r};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let n=0;n<s;n++){const a=this.subscriptions[n];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=i=>i*1e3,millisecondsToSeconds=i=>i/1e3;function velocityPerSecond(i,e){return e?i*(1e3/e):0}const calcBezier=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(i,e,t,r,s){let n,a,l=0;do a=e+(t-e)/2,n=calcBezier(a,r,s)-i,n>0?t=a:e=a;while(Math.abs(n)>subdivisionPrecision&&++l<subdivisionMaxIterations);return a}function cubicBezier(i,e,t,r){if(i===e&&t===r)return noop$1;const s=n=>binarySubdivide(n,0,1,i,t);return n=>n===0||n===1?n:calcBezier(s(n),e,r)}const mirrorEasing=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,reverseEasing=i=>e=>1-i(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=i=>(i*=2)<1?.5*backIn(i):.5*(2-Math.pow(2,-10*(i-1))),circIn=i=>1-Math.sin(Math.acos(i)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=i=>Array.isArray(i)&&typeof i[0]!="number",isBezierDefinition=i=>Array.isArray(i)&&typeof i[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=i=>typeof i=="string",easingDefinitionToFunction=i=>{if(isBezierDefinition(i)){invariant(i.length===4);const[e,t,r,s]=i;return cubicBezier(e,t,r,s)}else if(isValidEasing(i))return easingLookup[i];return i},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(i,e){let t=new Set,r=new Set,s=!1,n=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(p){a.has(p)&&(c.schedule(p),i()),p(l)}const c={schedule:(p,b=!1,P=!1)=>{const de=P&&s?t:r;return b&&a.add(p),de.has(p)||de.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(l=p,s){n=!0;return}s=!0,[t,r]=[r,t],t.forEach(u),t.clear(),s=!1,n&&(n=!1,c.process(p))}};return c}const maxElapsed=40;function createRenderBatcher(i,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},n=()=>t=!0,a=stepsOrder.reduce((Be,nt)=>(Be[nt]=createRenderStep(n),Be),{}),{setup:l,read:u,resolveKeyframes:c,preUpdate:p,update:b,preRender:P,render:N,postRender:de}=a,me=()=>{const Be=MotionGlobalConfig.useManualTiming?s.timestamp:performance.now();t=!1,MotionGlobalConfig.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(Be-s.timestamp,maxElapsed),1)),s.timestamp=Be,s.isProcessing=!0,l.process(s),u.process(s),c.process(s),p.process(s),b.process(s),P.process(s),N.process(s),de.process(s),s.isProcessing=!1,t&&e&&(r=!1,i(me))},Ye=()=>{t=!0,r=!0,s.isProcessing||i(me)};return{schedule:stepsOrder.reduce((Be,nt)=>{const ft=a[nt];return Be[nt]=(mt,ht=!1,Et=!1)=>(t||Ye(),ft.schedule(mt,ht,Et)),Be},{}),cancel:Be=>{for(let nt=0;nt<stepsOrder.length;nt++)a[stepsOrder[nt]].cancel(Be)},state:s,steps:a}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now$2;function clearTime(){now$2=void 0}const time={now:()=>(now$2===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$2),set:i=>{now$2=i,queueMicrotask(clearTime)}},checkStringStartsWith=i=>e=>typeof e=="string"&&e.startsWith(i),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=i=>startsAsVariableToken(i)?singleCssVariableRegex.test(i.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},alpha={...number,transform:i=>clamp$1(0,1,i)},scale={...number,default:1},sanitize=i=>Math.round(i*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(i){return i==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(i,e)=>t=>!!(typeof t=="string"&&singleColorRegex.test(t)&&t.startsWith(i)||e&&!isNullish(t)&&Object.prototype.hasOwnProperty.call(t,e)),splitColor$1=(i,e,t)=>r=>{if(typeof r!="string")return r;const[s,n,a,l]=r.match(floatRegex);return{[i]:parseFloat(s),[e]:parseFloat(n),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},clampRgbUnit=i=>clamp$1(0,255,i),rgbUnit={...number,transform:i=>Math.round(clampRgbUnit(i))},rgba={test:isColorString("rgb","red"),parse:splitColor$1("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:r=1})=>"rgba("+rgbUnit.transform(i)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+sanitize(alpha.transform(r))+")"};function parseHex(i){let e="",t="",r="",s="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),r=i.substring(5,7),s=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),r=i.substring(3,4),s=i.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:i=>percent.parse(i)/100,transform:i=>percent.transform(i*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor$1("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(i)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(t))+", "+sanitize(alpha.transform(r))+")"},color={test:i=>rgba.test(i)||hex.test(i)||hsla.test(i),parse:i=>rgba.test(i)?rgba.parse(i):hsla.test(i)?hsla.parse(i):hex.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?rgba.transform(i):hsla.transform(i),getAnimatableNone:i=>{const e=color.parse(i);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(i){return isNaN(i)&&typeof i=="string"&&(i.match(floatRegex)?.length||0)+(i.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(i){const e=i.toString(),t=[],r={color:[],number:[],var:[]},s=[];let n=0;const l=e.replace(complexRegex,u=>(color.test(u)?(r.color.push(n),s.push(COLOR_TOKEN),t.push(color.parse(u))):u.startsWith(VAR_FUNCTION_TOKEN)?(r.var.push(n),s.push(VAR_TOKEN),t.push(u)):(r.number.push(n),s.push(NUMBER_TOKEN),t.push(parseFloat(u))),++n,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:t,split:l,indexes:r,types:s}}function parseComplexValue(i){return analyseComplexValue(i).values}function createTransformer(i){const{split:e,types:t}=analyseComplexValue(i),r=e.length;return s=>{let n="";for(let a=0;a<r;a++)if(n+=e[a],s[a]!==void 0){const l=t[a];l===NUMBER_TOKEN?n+=sanitize(s[a]):l===COLOR_TOKEN?n+=color.transform(s[a]):n+=s[a]}return n}}const convertNumbersToZero=i=>typeof i=="number"?0:color.test(i)?color.getAnimatableNone(i):i;function getAnimatableNone$1(i){const e=parseComplexValue(i);return createTransformer(i)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function hslaToRgba({hue:i,saturation:e,lightness:t,alpha:r}){i/=360,e/=100,t/=100;let s=0,n=0,a=0;if(!e)s=n=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;s=hueToRgb(u,l,i+1/3),n=hueToRgb(u,l,i),a=hueToRgb(u,l,i-1/3)}return{red:Math.round(s*255),green:Math.round(n*255),blue:Math.round(a*255),alpha:r}}function mixImmediate(i,e){return t=>t>0?e:i}const mixNumber$1=(i,e,t)=>i+(e-i)*t,mixLinearColor=(i,e,t)=>{const r=i*i,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},colorTypes=[hex,rgba,hsla],getColorType=i=>colorTypes.find(e=>e.test(i));function asRGBA(i){const e=getColorType(i);if(!e)return!1;let t=e.parse(i);return e===hsla&&(t=hslaToRgba(t)),t}const mixColor=(i,e)=>{const t=asRGBA(i),r=asRGBA(e);if(!t||!r)return mixImmediate(i,e);const s={...t};return n=>(s.red=mixLinearColor(t.red,r.red,n),s.green=mixLinearColor(t.green,r.green,n),s.blue=mixLinearColor(t.blue,r.blue,n),s.alpha=mixNumber$1(t.alpha,r.alpha,n),rgba.transform(s))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(i,e){return invisibleValues.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function mixNumber(i,e){return t=>mixNumber$1(i,e,t)}function getMixer(i){return typeof i=="number"?mixNumber:typeof i=="string"?isCSSVariableToken(i)?mixImmediate:color.test(i)?mixColor:mixComplex:Array.isArray(i)?mixArray:typeof i=="object"?color.test(i)?mixColor:mixObject:mixImmediate}function mixArray(i,e){const t=[...i],r=t.length,s=i.map((n,a)=>getMixer(n)(n,e[a]));return n=>{for(let a=0;a<r;a++)t[a]=s[a](n);return t}}function mixObject(i,e){const t={...i,...e},r={};for(const s in t)i[s]!==void 0&&e[s]!==void 0&&(r[s]=getMixer(i[s])(i[s],e[s]));return s=>{for(const n in r)t[n]=r[n](s);return t}}function matchOrder(i,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const n=e.types[s],a=i.indexes[n][r[n]],l=i.values[a]??0;t[s]=l,r[n]++}return t}const mixComplex=(i,e)=>{const t=complex.createTransformer(e),r=analyseComplexValue(i),s=analyseComplexValue(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?invisibleValues.has(i)&&!s.values.length||invisibleValues.has(e)&&!r.values.length?mixVisibility(i,e):pipe$1(mixArray(matchOrder(r,s),s.values),t):mixImmediate(i,e)};function mix(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?mixNumber$1(i,e,t):getMixer(i)(i,e)}const frameloopDriver=i=>{const e=({timestamp:t})=>i(t);return{start:(t=!0)=>frame.update(e,t),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(i,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let n=0;n<s;n++)r+=Math.round(i(n/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(i){let e=0;const t=50;let r=i.next(e);for(;!r.done&&e<maxGeneratorDuration;)e+=t,r=i.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(i,e=100,t){const r=t({...i,keyframes:[0,e]}),s=Math.min(calcGeneratorDuration(r),maxGeneratorDuration);return{type:"keyframes",ease:n=>r.next(s*n).value/e,duration:millisecondsToSeconds(s)}}const velocitySampleDuration=5;function calcGeneratorVelocity(i,e,t){const r=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(t-i(r),e-r)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:i=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:t=springDefaults.velocity,mass:r=springDefaults.mass}){let s,n,a=1-e;a=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,a),i=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(i)),a<1?(s=c=>{const p=c*a,b=p*i,P=p-t,N=calcAngularFreq(c,a),de=Math.exp(-b);return safeMin-P/N*de},n=c=>{const b=c*a*i,P=b*t+t,N=Math.pow(a,2)*Math.pow(c,2)*i,de=Math.exp(-b),me=calcAngularFreq(Math.pow(c,2),a);return(-s(c)+safeMin>0?-1:1)*((P-N)*de)/me}):(s=c=>{const p=Math.exp(-c*i),b=(c-t)*i+1;return-safeMin+p*b},n=c=>{const p=Math.exp(-c*i),b=(t-c)*(i*i);return p*b});const l=5/i,u=approximateRoot(s,n,l);if(i=secondsToMilliseconds(i),isNaN(u))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:i};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:i}}}const rootIterations=12;function approximateRoot(i,e,t){let r=t;for(let s=1;s<rootIterations;s++)r=r-i(r)/e(r);return r}function calcAngularFreq(i,e){return i*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(i,e){return e.some(t=>i[t]!==void 0)}function getSpringOptions(i){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...i};if(!isSpringType(i,physicsKeys)&&isSpringType(i,durationKeys))if(i.visualDuration){const t=i.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,n=2*clamp$1(.05,1,1-(i.bounce||0))*Math.sqrt(s);e={...e,mass:springDefaults.mass,stiffness:s,damping:n}}else{const t=findSpring(i);e={...e,...t,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(i=springDefaults.visualDuration,e=springDefaults.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:r,restDelta:s}=t;const n=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:n},{stiffness:u,damping:c,mass:p,duration:b,velocity:P,isResolvedFromDuration:N}=getSpringOptions({...t,velocity:-millisecondsToSeconds(t.velocity||0)}),de=P||0,me=c/(2*Math.sqrt(u*p)),Ye=a-n,Le=millisecondsToSeconds(Math.sqrt(u/p)),tt=Math.abs(Ye)<5;r||(r=tt?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),s||(s=tt?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Be;if(me<1){const ft=calcAngularFreq(Le,me);Be=mt=>{const ht=Math.exp(-me*Le*mt);return a-ht*((de+me*Le*Ye)/ft*Math.sin(ft*mt)+Ye*Math.cos(ft*mt))}}else if(me===1)Be=ft=>a-Math.exp(-Le*ft)*(Ye+(de+Le*Ye)*ft);else{const ft=Le*Math.sqrt(me*me-1);Be=mt=>{const ht=Math.exp(-me*Le*mt),Et=Math.min(ft*mt,300);return a-ht*((de+me*Le*Ye)*Math.sinh(Et)+ft*Ye*Math.cosh(Et))/ft}}const nt={calculatedDuration:N&&b||null,next:ft=>{const mt=Be(ft);if(N)l.done=ft>=b;else{let ht=ft===0?de:0;me<1&&(ht=ft===0?secondsToMilliseconds(de):calcGeneratorVelocity(Be,ft,mt));const Et=Math.abs(ht)<=r,St=Math.abs(a-mt)<=s;l.done=Et&&St}return l.value=l.done?a:mt,l},toString:()=>{const ft=Math.min(calcGeneratorDuration(nt),maxGeneratorDuration),mt=generateLinearEasing(ht=>nt.next(ft*ht).value,ft,30);return ft+"ms "+mt},toTransition:()=>{}};return nt}spring.applyToOptions=i=>{const e=createGeneratorEasing(i,100,spring);return i.ease=e.ease,i.duration=secondsToMilliseconds(e.duration),i.type="keyframes",i};function inertia({keyframes:i,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:n=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:p}){const b=i[0],P={done:!1,value:b},N=Et=>l!==void 0&&Et<l||u!==void 0&&Et>u,de=Et=>l===void 0?u:u===void 0||Math.abs(l-Et)<Math.abs(u-Et)?l:u;let me=t*e;const Ye=b+me,Le=a===void 0?Ye:a(Ye);Le!==Ye&&(me=Le-b);const tt=Et=>-me*Math.exp(-Et/r),Be=Et=>Le+tt(Et),nt=Et=>{const St=tt(Et),bt=Be(Et);P.done=Math.abs(St)<=c,P.value=P.done?Le:bt};let ft,mt;const ht=Et=>{N(P.value)&&(ft=Et,mt=spring({keyframes:[P.value,de(P.value)],velocity:calcGeneratorVelocity(Be,Et,P.value),damping:s,stiffness:n,restDelta:c,restSpeed:p}))};return ht(0),{calculatedDuration:null,next:Et=>{let St=!1;return!mt&&ft===void 0&&(St=!0,nt(Et),ht(Et)),ft!==void 0&&Et>=ft?mt.next(Et-ft):(!St&&nt(Et),P)}}}function createMixers(i,e,t){const r=[],s=t||MotionGlobalConfig.mix||mix,n=i.length-1;for(let a=0;a<n;a++){let l=s(i[a],i[a+1]);if(e){const u=Array.isArray(e)?e[a]||noop$1:e;l=pipe$1(u,l)}r.push(l)}return r}function interpolate$1(i,e,{clamp:t=!0,ease:r,mixer:s}={}){const n=i.length;if(invariant(n===e.length),n===1)return()=>e[0];if(n===2&&e[0]===e[1])return()=>e[1];const a=i[0]===i[1];i[0]>i[n-1]&&(i=[...i].reverse(),e=[...e].reverse());const l=createMixers(e,r,s),u=l.length,c=p=>{if(a&&p<i[0])return e[0];let b=0;if(u>1)for(;b<i.length-2&&!(p<i[b+1]);b++);const P=progress(i[b],i[b+1],p);return l[b](P)};return t?p=>c(clamp$1(i[0],i[n-1],p)):c}function fillOffset(i,e){const t=i[i.length-1];for(let r=1;r<=e;r++){const s=progress(0,e,r);i.push(mixNumber$1(t,1,s))}}function defaultOffset(i){const e=[0];return fillOffset(e,i.length-1),e}function convertOffsetToTimes(i,e){return i.map(t=>t*e)}function defaultEasing(i,e){return i.map(()=>e||easeInOut).splice(0,i.length-1)}function keyframes({duration:i=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=isEasingArray(r)?r.map(easingDefinitionToFunction):easingDefinitionToFunction(r),n={done:!1,value:e[0]},a=convertOffsetToTimes(t&&t.length===e.length?t:defaultOffset(e),i),l=interpolate$1(a,e,{ease:Array.isArray(s)?s:defaultEasing(e,s)});return{calculatedDuration:i,next:u=>(n.value=l(u),n.done=u>=i,n)}}const isNotNull$1=i=>i!==null;function getFinalKeyframe$1(i,{repeat:e,repeatType:t="loop"},r,s=1){const n=i.filter(isNotNull$1),l=s<0||e&&t!=="loop"&&e%2===1?0:n.length-1;return!l||r===void 0?n[l]:r}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(i){typeof i.type=="string"&&(i.type=transitionTypeMap[i.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const percentToProgress=i=>i/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:t=keyframes,repeat:r=0,repeatDelay:s=0,repeatType:n,velocity:a=0}=e;let{keyframes:l}=e;const u=t||keyframes;u!==keyframes&&typeof l[0]!="number"&&(this.mixKeyframes=pipe$1(percentToProgress,mix(l[0],l[1])),l=[0,100]);const c=u({...e,keyframes:l});n==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=calcGeneratorDuration(c));const{calculatedDuration:p}=c;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:n,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:p,repeat:b,repeatType:P,repeatDelay:N,type:de,onUpdate:me,finalKeyframe:Ye}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const Le=this.currentTime-c*(this.playbackSpeed>=0?1:-1),tt=this.playbackSpeed>=0?Le<0:Le>s;this.currentTime=Math.max(Le,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let Be=this.currentTime,nt=r;if(b){const Et=Math.min(this.currentTime,s)/l;let St=Math.floor(Et),bt=Et%1;!bt&&Et>=1&&(bt=1),bt===1&&St--,St=Math.min(St,b+1),!!(St%2)&&(P==="reverse"?(bt=1-bt,N&&(bt-=N/l)):P==="mirror"&&(nt=a)),Be=clamp$1(0,1,bt)*l}const ft=tt?{done:!1,value:p[0]}:nt.next(Be);n&&(ft.value=n(ft.value));let{done:mt}=ft;!tt&&u!==null&&(mt=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const ht=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&mt);return ht&&de!==inertia&&(ft.value=getFinalKeyframe$1(p,this.options,Ye,this.speed)),me&&me(ft.value),ht&&this.finish(),ft}then(e,t){return this.finished.then(e,t)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const radToDeg=i=>i*180/Math.PI,rotate=i=>{const e=radToDeg(Math.atan2(i[1],i[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate,rotateZ:rotate,skewX:i=>radToDeg(Math.atan(i[1])),skewY:i=>radToDeg(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},rebaseAngle=i=>(i=i%360,i<0&&(i+=360),i),rotateZ=rotate,scaleX=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),scaleY=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:i=>(scaleX(i)+scaleY(i))/2,rotateX:i=>rebaseAngle(radToDeg(Math.atan2(i[6],i[5]))),rotateY:i=>rebaseAngle(radToDeg(Math.atan2(-i[2],i[0]))),rotateZ,rotate:rotateZ,skewX:i=>radToDeg(Math.atan(i[4])),skewY:i=>radToDeg(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function defaultTransformValue(i){return i.includes("scale")?1:0}function parseValueFromTransform(i,e){if(!i||i==="none")return defaultTransformValue(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=matrix3dParsers,s=t;else{const l=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=matrix2dParsers,s=l}if(!s)return defaultTransformValue(e);const n=r[e],a=s[1].split(",").map(convertTransformToNumber);return typeof n=="function"?n(a):a[n]}const readTransformValue=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return parseValueFromTransform(t,e)};function convertTransformToNumber(i){return parseFloat(i.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=i=>i===number||i===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(i=>!transformKeys.has(i));function removeNonTranslationalTransform(i){const e=[];return nonTranslationalTransformKeys.forEach(t=>{const r=i.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>parseValueFromTransform(e,"x"),y:(i,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const i=Array.from(toResolve).filter(r=>r.needsMeasurement),e=new Set(i.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=removeNonTranslationalTransform(r);s.length&&(t.set(r,s),r.render())}),i.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([n,a])=>{r.getValue(n)?.set(a)})}),i.forEach(r=>r.measureEndState()),i.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(i=>i.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,t,r,s,n,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=n,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const n=s?.get(),a=e[e.length-1];if(n!==void 0)e[0]=n;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&n===void 0&&s.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=i=>i.startsWith("--");function setStyle(i,e,t){isCSSVar(e)?i.style.setProperty(e,t):i.style[e]=t}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(i,e){const t=memo(i);return()=>supportsFlags[e]??t()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([i,e,t,r])=>`cubic-bezier(${i}, ${e}, ${t}, ${r})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(i,e){if(i)return typeof i=="function"?supportsLinearEasing()?generateLinearEasing(i,e):"ease-out":isBezierDefinition(i)?cubicBezierAsString(i):Array.isArray(i)?i.map(t=>mapEasingToNativeEasing(t,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[i]}function startWaapiAnimation(i,e,t,{delay:r=0,duration:s=300,repeat:n=0,repeatType:a="loop",ease:l="easeOut",times:u}={},c=void 0){const p={[e]:t};u&&(p.offset=u);const b=mapEasingToNativeEasing(l,s);Array.isArray(b)&&(p.easing=b);const P={delay:r,duration:s,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:n+1,direction:a==="reverse"?"alternate":"normal"};return c&&(P.pseudoElement=c),i.animate(p,P)}function isGenerator(i){return typeof i=="function"&&"applyToOptions"in i}function applyGeneratorOptions({type:i,...e}){return isGenerator(i)&&supportsLinearEasing()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:n,allowFlatten:a=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!n,this.allowFlatten=a,this.options=e,invariant(typeof e.type!="string");const c=applyGeneratorOptions(e);this.animation=startWaapiAnimation(t,r,s,c,n),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){const p=getFinalKeyframe$1(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):setStyle(t,r,p),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$1):t(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(i){return i in unsupportedEasingFunctions}function replaceStringEasing(i){typeof i.ease=="string"&&isUnsupportedEase(i.ease)&&(i.ease=unsupportedEasingFunctions[i.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:n,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new JSAnimation({...a,autoplay:!1}),u=secondsToMilliseconds(this.finishedTime??this.time);t.setWithVelocity(l.sample(u-sampleDelta).value,l.sample(u).value,sampleDelta),l.stop()}}const isAnimatable=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(complex.test(i)||i==="0")&&!i.startsWith("url("));function hasKeyframesChanged(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function canAnimate(i,e,t,r){const s=i[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const n=i[i.length-1],a=isAnimatable(s,e),l=isAnimatable(n,e);return!a||!l?!1:hasKeyframesChanged(i)||(t==="spring"||isGenerator(t))&&r}function makeAnimationInstant(i){i.duration=0,i.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(i){const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:n,type:a}=i;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=e.owner.getProps();return supportsWaapi()&&t&&acceleratedValues.has(t)&&(t!=="transform"||!c)&&!u&&!r&&s!=="mirror"&&n!==0&&a!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:n=0,repeatType:a="loop",keyframes:l,name:u,motionValue:c,element:p,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const P={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:n,repeatType:a,name:u,motionValue:c,element:p,...b},N=p?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new N(l,(de,me,Ye)=>this.onKeyframesResolved(de,me,P,!Ye),u,c,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;const{name:n,type:a,velocity:l,delay:u,isHandoff:c,onUpdate:p}=r;this.resolvedAt=time.now(),canAnimate(e,n,a,l)||((MotionGlobalConfig.instantAnimations||!u)&&p?.(getFinalKeyframe$1(e,r,t)),e[0]=e[e.length-1],makeAnimationInstant(r),r.repeat=0);const P={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},N=!c&&supportsBrowserAnimation(P)?new NativeAnimationExtended({...P,element:P.motionValue.owner.current}):new JSAnimation(P);N.finished.then(()=>this.notifyFinished()).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(i){const e=splitCSSVariableRegex.exec(i);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function getVariableValue(i,e,t=1){const[r,s]=parseCSSVariable(i);if(!r)return;const n=window.getComputedStyle(e).getPropertyValue(r);if(n){const a=n.trim();return isNumericalString(a)?parseFloat(a):a}return isCSSVariableToken(s)?getVariableValue(s,e,t+1):s}function getValueTransition(i,e){return i?.[e]??i?.default??i}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:i=>i==="auto",parse:i=>i},testValueType=i=>e=>e.test(i),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=i=>dimensionValueTypes.find(testValueType(i));function isNone(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||isZeroValueString(i):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[r]=t.match(floatRegex)||[];if(!r)return i;const s=t.replace(r,"");let n=maxDefaults.has(e)?1:0;return r!==t&&(n*=100),e+"("+n+s+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:i=>{const e=i.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):i}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=i=>defaultValueTypes[i];function getAnimatableNone(i,e){let t=getDefaultValueType(i);return t!==filter&&(t=complex),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(i,e,t){let r=0,s;for(;r<i.length&&!s;){const n=i[r];typeof n=="string"&&!invalidTemplates.has(n)&&analyseComplexValue(n).values.length&&(s=i[r]),r++}if(s&&t)for(const n of e)i[n]=getAnimatableNone(t,s)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,r,s,n){super(e,t,r,s,n,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),isCSSVariableToken(c))){const p=getVariableValue(c,t.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(r)||e.length!==2)return;const[s,n]=e,a=findDimensionValueType(s),l=findDimensionValueType(n);if(a!==l)if(isNumOrPxType(a)&&isNumOrPxType(l))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else positionalValues[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||isNone(e[s]))&&r.push(s);r.length&&makeNoneKeyframesAnimatable(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const n=r.length-1,a=r[n];r[n]=positionalValues[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function resolveElements(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){const s=document.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}const getValueAsType=(i,e)=>e&&typeof i=="number"?e.transform(i):i;function isHTMLElement(i){return isObject$3(i)&&"offsetHeight"in i}const MAX_VELOCITY_DELTA=30,isFloat=i=>!isNaN(parseFloat(i)),collectMotionValues={current:void 0};class MotionValue{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=time.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const r=this.events[e].add(t);return e==="change"?()=>{r(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(i,e){return new MotionValue(i,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(i){return i==="x"||i==="y"?isDragging[i]?null:(isDragging[i]=!0,()=>{isDragging[i]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(i,e){const t=resolveElements(i),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function isValidHover(i){return!(i.pointerType==="touch"||isDragActive())}function hover(i,e,t={}){const[r,s,n]=setupGesture(i,t),a=l=>{if(!isValidHover(l))return;const{target:u}=l,c=e(u,l);if(typeof c!="function"||!u)return;const p=b=>{isValidHover(b)&&(c(b),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),n}const isNodeOrChild=(i,e)=>e?i===e?!0:isNodeOrChild(i,e.parentElement):!1,isPrimaryPointer=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(i){return focusableElements.has(i.tagName)||i.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(i){return e=>{e.key==="Enter"&&i(e)}}function firePointerEvent(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(i,e)=>{const t=i.currentTarget;if(!t)return;const r=filterEvents(()=>{if(isPressing.has(t))return;firePointerEvent(t,"down");const s=filterEvents(()=>{firePointerEvent(t,"up")}),n=()=>firePointerEvent(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",n,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function isValidPressEvent(i){return isPrimaryPointer(i)&&!isDragActive()}function press(i,e,t={}){const[r,s,n]=setupGesture(i,t),a=l=>{const u=l.currentTarget;if(!isValidPressEvent(l))return;isPressing.add(u);const c=e(u,l),p=(N,de)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",P),isPressing.has(u)&&isPressing.delete(u),isValidPressEvent(N)&&typeof c=="function"&&c(N,{success:de})},b=N=>{p(N,u===window||u===document||t.useGlobalTarget||isNodeOrChild(u,N.target))},P=N=>{p(N,!1)};window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",P,s)};return r.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),isHTMLElement(l)&&(l.addEventListener("focus",c=>enableKeyboardPress(c,s)),!isElementKeyboardAccessible(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),n}function isSVGElement(i){return isObject$3(i)&&"ownerSVGElement"in i}function isSVGSVGElement(i){return isSVGElement(i)&&i.tagName==="svg"}function transform(...i){const e=!Array.isArray(i[0]),t=e?0:-1,r=i[0+t],s=i[1+t],n=i[2+t],a=i[3+t],l=interpolate$1(s,n,a);return e?l(r):l}const isMotionValue=i=>!!(i&&i.getVelocity);function attachSpring(i,e,t){const r=i.get();let s=null,n=r,a;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,u=()=>{s&&(s.stop(),s=null)},c=()=>{u(),s=new JSAnimation({keyframes:[asNumber$1(i.get()),asNumber$1(n)],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:a})};if(i.attach((p,b)=>(n=p,a=P=>b(parseValue(P,l)),frame.postRender(c),i.get()),u),isMotionValue(e)){const p=e.on("change",P=>i.set(parseValue(P,l))),b=i.on("destroy",p);return()=>{p(),b()}}return u}function parseValue(i,e){return e?i+e:i}function asNumber$1(i){return typeof i=="number"?i:parseFloat(i)}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=i=>valueTypes.find(testValueType(i)),MotionConfigContext=reactExports.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function usePresence(i=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,n=reactExports.useId();reactExports.useEffect(()=>{if(i)return s(n)},[i]);const a=reactExports.useCallback(()=>i&&r&&r(n),[n,r,i]);return!t&&r?[!1,a]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const i in featureProps)featureDefinitions[i]={isEnabled:e=>featureProps[i].some(t=>!!e[t])};function loadFeatures(i){for(const e in i)featureDefinitions[e]={...featureDefinitions[e],...i[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||validMotionProps.has(i)}let shouldForward=i=>!isValidMotionProp(i);function loadExternalIsValidProp(i){typeof i=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):i(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(i,e,t){const r={};for(const s in i)s==="values"&&typeof i.values=="object"||(shouldForward(s)||t===!0&&isValidMotionProp(s)||!e&&!isValidMotionProp(s)||i.draggable&&s.startsWith("onDrag"))&&(r[s]=i[s]);return r}const MotionContext=reactExports.createContext({});function isAnimationControls(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function isVariantLabel(i){return typeof i=="string"||Array.isArray(i)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(i){return isAnimationControls(i.animate)||variantProps.some(e=>isVariantLabel(i[e]))}function isVariantNode(i){return!!(isControllingVariants(i)||i.variants)}function getCurrentTreeVariants(i,e){if(isControllingVariants(i)){const{initial:t,animate:r}=i;return{initial:t===!1||isVariantLabel(t)?t:void 0,animate:isVariantLabel(r)?r:void 0}}return i.inherit!==!1?e:{}}function useCreateMotionContext(i){const{initial:e,animate:t}=getCurrentTreeVariants(i,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:t}),[variantLabelsAsDependency(e),variantLabelsAsDependency(t)])}function variantLabelsAsDependency(i){return Array.isArray(i)?i.join(" "):i}const scaleCorrectors={};function addScaleCorrector(i){for(const e in i)scaleCorrectors[e]=i[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(i,{layout:e,layoutId:t}){return transformProps.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!scaleCorrectors[i]||i==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(i,e,t){let r="",s=!0;for(let n=0;n<numTransforms;n++){const a=transformPropOrder[n],l=i[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const c=getValueAsType(l,numberValueTypes[a]);if(!u){s=!1;const p=translateAlias[a]||a;r+=`${p}(${c}) `}t&&(e[a]=c)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function buildHTMLStyles(i,e,t){const{style:r,vars:s,transformOrigin:n}=i;let a=!1,l=!1;for(const u in e){const c=e[u];if(transformProps.has(u)){a=!0;continue}else if(isCSSVariableName(u)){s[u]=c;continue}else{const p=getValueAsType(c,numberValueTypes[u]);u.startsWith("origin")?(l=!0,n[u]=p):r[u]=p}}if(e.transform||(a||t?r.transform=buildTransform(e,i.transform,t):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:c="50%",originZ:p=0}=n;r.transformOrigin=`${u} ${c} ${p}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(i,e,t){for(const r in e)!isMotionValue(e[r])&&!isForcedMotionValue(r,t)&&(i[r]=e[r])}function useInitialMotionValues({transformTemplate:i},e){return reactExports.useMemo(()=>{const t=createHtmlRenderState();return buildHTMLStyles(t,e,i),Object.assign({},t.vars,t.style)},[e])}function useStyle(i,e){const t=i.style||{},r={};return copyRawValuesOnly(r,t,i),Object.assign(r,useInitialMotionValues(i,e)),r}function useHTMLProps(i,e){const t={},r=useStyle(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=r,t}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(i,e,t=1,r=0,s=!0){i.pathLength=1;const n=s?dashKeys:camelKeys;i[n.offset]=px.transform(-r);const a=px.transform(e),l=px.transform(t);i[n.array]=`${a} ${l}`}function buildSVGAttrs(i,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:n=1,pathOffset:a=0,...l},u,c,p){if(buildHTMLStyles(i,l,c),u){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:b,style:P}=i;b.transform&&(P.transform=b.transform,delete b.transform),(P.transform||b.transformOrigin)&&(P.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),P.transform&&(P.transformBox=p?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),s!==void 0&&buildSVGPath(b,s,n,a,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=i=>typeof i=="string"&&i.toLowerCase()==="svg";function useSVGProps(i,e,t,r){const s=reactExports.useMemo(()=>{const n=createSvgRenderState();return buildSVGAttrs(n,e,isSVGTag(r),i.transformTemplate,i.style),{...n.attrs,style:{...n.style}}},[e]);if(i.style){const n={};copyRawValuesOnly(n,i.style,i),s.style={...n,...s.style}}return s}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(i){return typeof i!="string"||i.includes("-")?!1:!!(lowercaseSVGElements.indexOf(i)>-1||/[A-Z]/u.test(i))}function useRender(i,e,t,{latestValues:r},s,n=!1){const l=(isSVGComponent(i)?useSVGProps:useHTMLProps)(e,r,s,i),u=filterProps(e,typeof i=="string",n),c=i!==reactExports.Fragment?{...u,...l,ref:t}:{},{children:p}=e,b=reactExports.useMemo(()=>isMotionValue(p)?p.get():p,[p]);return reactExports.createElement(i,{...c,children:b})}function getValueState(i){const e=[{},{}];return i?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function resolveVariantFromProps(i,e,t,r){if(typeof e=="function"){const[s,n]=getValueState(r);e=e(t!==void 0?t:i.custom,s,n)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[s,n]=getValueState(r);e=e(t!==void 0?t:i.custom,s,n)}return e}function resolveMotionValue(i){return isMotionValue(i)?i.get():i}function makeState({scrapeMotionValuesFromProps:i,createRenderState:e},t,r,s){return{latestValues:makeLatestValues(t,r,s,i),renderState:e()}}function makeLatestValues(i,e,t,r){const s={},n=r(i,{});for(const P in n)s[P]=resolveMotionValue(n[P]);let{initial:a,animate:l}=i;const u=isControllingVariants(i),c=isVariantNode(i);e&&c&&!u&&i.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const b=p?l:a;if(b&&typeof b!="boolean"&&!isAnimationControls(b)){const P=Array.isArray(b)?b:[b];for(let N=0;N<P.length;N++){const de=resolveVariantFromProps(i,P[N]);if(de){const{transitionEnd:me,transition:Ye,...Le}=de;for(const tt in Le){let Be=Le[tt];if(Array.isArray(Be)){const nt=p?Be.length-1:0;Be=Be[nt]}Be!==null&&(s[tt]=Be)}for(const tt in me)s[tt]=me[tt]}}}return s}const makeUseVisualState=i=>(e,t)=>{const r=reactExports.useContext(MotionContext),s=reactExports.useContext(PresenceContext),n=()=>makeState(i,e,r,s);return t?n():useConstant(n)};function scrapeMotionValuesFromProps$1(i,e,t){const{style:r}=i,s={};for(const n in r)(isMotionValue(r[n])||e.style&&isMotionValue(e.style[n])||isForcedMotionValue(n,i)||t?.getValue(n)?.liveStyle!==void 0)&&(s[n]=r[n]);return s}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(i,e,t){const r=scrapeMotionValuesFromProps$1(i,e,t);for(const s in i)if(isMotionValue(i[s])||isMotionValue(e[s])){const n=transformPropOrder.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[n]=i[s]}return r}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function useMotionRef(i,e,t){return reactExports.useCallback(r=>{r&&i.onMount&&i.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):isRefObject(t)&&(t.current=r))},[e])}const camelToDash=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(i,e,t,r,s){const{visualElement:n}=reactExports.useContext(MotionContext),a=reactExports.useContext(LazyContext),l=reactExports.useContext(PresenceContext),u=reactExports.useContext(MotionConfigContext).reducedMotion,c=reactExports.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(i,{visualState:e,parent:n,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const p=c.current,b=reactExports.useContext(SwitchLayoutGroupContext);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&createProjectionNode$1(c.current,t,s,b);const P=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{p&&P.current&&p.update(t,l)});const N=t[optimizedAppearDataAttribute],de=reactExports.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return useIsomorphicLayoutEffect$1(()=>{p&&(P.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),de.current&&p.animationState&&p.animationState.animateChanges())}),reactExports.useEffect(()=>{p&&(!de.current&&p.animationState&&p.animationState.animateChanges(),de.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),de.current=!1),p.enteringChildren=void 0)}),p}function createProjectionNode$1(i,e,t,r){const{layoutId:s,layout:n,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:c,layoutCrossfade:p}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(i.parent)),i.projection.setOptions({layoutId:s,layout:n,alwaysMeasureLayout:!!a||l&&isRefObject(l),visualElement:i,animationType:typeof n=="string"?n:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:u,layoutRoot:c})}function getClosestProjectingNode(i){if(i)return i.options.allowProjection!==!1?i.projection:getClosestProjectingNode(i.parent)}function createMotionComponent(i,{forwardMotionProps:e=!1}={},t,r){t&&loadFeatures(t);const s=isSVGComponent(i)?useSVGVisualState:useHTMLVisualState;function n(l,u){let c;const p={...reactExports.useContext(MotionConfigContext),...l,layoutId:useLayoutId(l)},{isStatic:b}=p,P=useCreateMotionContext(l),N=s(l,b);if(!b&&isBrowser){useStrictMode();const de=getProjectionFunctionality(p);c=de.MeasureLayout,P.visualElement=useVisualElement(i,N,p,r,de.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:P,children:[c&&P.visualElement?jsxRuntimeExports.jsx(c,{visualElement:P.visualElement,...p}):null,useRender(i,l,useMotionRef(N,P.visualElement,u),N,b,e)]})}n.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=reactExports.forwardRef(n);return a[motionComponentSymbol]=i,a}function useLayoutId({layoutId:i}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&i!==void 0?e+"-"+i:i}function useStrictMode(i,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(i){const{drag:e,layout:t}=featureDefinitions;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(i)||t?.isEnabled(i)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function createMotionProxy(i,e){if(typeof Proxy>"u")return createMotionComponent;const t=new Map,r=(n,a)=>createMotionComponent(n,a,i,e),s=(n,a)=>r(n,a);return new Proxy(s,{get:(n,a)=>a==="create"?r:(t.has(a)||t.set(a,createMotionComponent(a,void 0,i,e)),t.get(a))})}function convertBoundingBoxToBox({top:i,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:i,max:r}}}function convertBoxToBoundingBox({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function transformBoxPoints(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),r=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function isIdentityScale(i){return i===void 0||i===1}function hasScale({scale:i,scaleX:e,scaleY:t}){return!isIdentityScale(i)||!isIdentityScale(e)||!isIdentityScale(t)}function hasTransform(i){return hasScale(i)||has2DTranslate(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function has2DTranslate(i){return is2DTranslate(i.x)||is2DTranslate(i.y)}function is2DTranslate(i){return i&&i!=="0%"}function scalePoint(i,e,t){const r=i-t,s=e*r;return t+s}function applyPointDelta(i,e,t,r,s){return s!==void 0&&(i=scalePoint(i,s,r)),scalePoint(i,t,r)+e}function applyAxisDelta(i,e=0,t=1,r,s){i.min=applyPointDelta(i.min,e,t,r,s),i.max=applyPointDelta(i.max,e,t,r,s)}function applyBoxDelta(i,{x:e,y:t}){applyAxisDelta(i.x,e.translate,e.scale,e.originPoint),applyAxisDelta(i.y,t.translate,t.scale,t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(i,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let n,a;for(let l=0;l<s;l++){n=t[l],a=n.projectionDelta;const{visualElement:u}=n.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&n.options.layoutScroll&&n.scroll&&n!==n.root&&transformBox(i,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,applyBoxDelta(i,a)),r&&hasTransform(n.latestValues)&&transformBox(i,n.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(i,e){i.min=i.min+e,i.max=i.max+e}function transformAxis(i,e,t,r,s=.5){const n=mixNumber$1(i.min,i.max,s);applyAxisDelta(i,e,t,n,r)}function transformBox(i,e){transformAxis(i.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(i.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(i,e){return convertBoundingBoxToBox(transformBoxPoints(i.getBoundingClientRect(),e))}function measurePageBox(i,e,t){const r=measureViewportBox(i,t),{scroll:s}=e;return s&&(translateAxis(r.x,s.offset.x),translateAxis(r.y,s.offset.y)),r}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=i.matches;i.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(i,e,t){for(const r in e){const s=e[r],n=t[r];if(isMotionValue(s))i.addValue(r,s);else if(isMotionValue(n))i.addValue(r,motionValue(s,{owner:i}));else if(n!==s)if(i.hasValue(r)){const a=i.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=i.getStaticValue(r);i.addValue(r,motionValue(a!==void 0?a:s,{owner:i}))}}for(const r in t)e[r]===void 0&&i.removeValue(r);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:n,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const P=time.now();this.renderScheduledAt<P&&(this.renderScheduledAt=P,frame.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!n,this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...b}=this.scrapeMotionValuesFromProps(t,{},this);for(const P in b){const N=b[P];u[P]!==void 0&&isMotionValue(N)&&N.set(u[P])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=transformProps.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&frame.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<propEventHandlers.length;r++){const s=propEventHandlers[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const n="on"+s,a=e[n];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=motionValue(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(isNumericalString(r)||isZeroValueString(r))?r=parseFloat(r):!findValueType(r)&&complex.test(t)&&(r=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(r)?r.get():r)),isMotionValue(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const n=resolveVariantFromProps(this.props,t,this.presenceContext?.custom);n&&(r=n[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!isMotionValue(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function renderHTML(i,{style:e,vars:t},r,s){const n=i.style;let a;for(a in e)n[a]=e[a];s?.applyProjectionStyles(n,r);for(a in t)n.setProperty(a,t[a])}function getComputedStyle$2(i){return window.getComputedStyle(i)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){if(transformProps.has(t))return this.projection?.isProjecting?defaultTransformValue(t):readTransformValue(e,t);{const r=getComputedStyle$2(e),s=(isCSSVariableName(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,r){buildHTMLStyles(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return scrapeMotionValuesFromProps$1(e,t,r)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(i,e,t,r){renderHTML(i,e,void 0,r);for(const s in e.attrs)i.setAttribute(camelCaseAttributes.has(s)?s:camelToDash(s),e.attrs[s])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const r=getDefaultValueType(t);return r&&r.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return scrapeMotionValuesFromProps(e,t,r)}build(e,t,r){buildSVGAttrs(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){renderSVG(e,t,r,s)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(i,e)=>isSVGComponent(i)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:i!==reactExports.Fragment});function resolveVariant(i,e,t){const r=i.getProps();return resolveVariantFromProps(r,e,t!==void 0?t:r.custom,i)}const isKeyframesTarget=i=>Array.isArray(i);function setMotionValue(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,motionValue(t))}function resolveFinalValueInKeyframes(i){return isKeyframesTarget(i)?i[i.length-1]||0:i}function setTarget(i,e){const t=resolveVariant(i,e);let{transitionEnd:r={},transition:s={},...n}=t||{};n={...n,...r};for(const a in n){const l=resolveFinalValueInKeyframes(n[a]);setMotionValue(i,a,l)}}function isWillChangeMotionValue(i){return!!(isMotionValue(i)&&i.add)}function addValueToWillChange(i,e){const t=i.getValue("willChange");if(isWillChangeMotionValue(t))return t.add(e);if(!t&&MotionGlobalConfig.WillChange){const r=new MotionGlobalConfig.WillChange("auto");i.addValue("willChange",r),r.add(e)}}function getOptimisedAppearId(i){return i.props[optimizedAppearDataAttribute]}const isNotNull=i=>i!==null;function getFinalKeyframe(i,{repeat:e,repeatType:t="loop"},r){const s=i.filter(isNotNull),n=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[n]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(i,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(i)?i.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:i,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:n,repeatType:a,repeatDelay:l,from:u,elapsed:c,...p}){return!!Object.keys(p).length}const animateMotionValue=(i,e,t,r={},s,n)=>a=>{const l=getValueTransition(r,i)||{},u=l.delay||r.delay||0;let{elapsed:c=0}=r;c=c-secondsToMilliseconds(u);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-c,onUpdate:P=>{e.set(P),l.onUpdate&&l.onUpdate(P)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:i,motionValue:e,element:n?void 0:s};isTransitionDefined(l)||Object.assign(p,getDefaultTransition(i,p)),p.duration&&(p.duration=secondsToMilliseconds(p.duration)),p.repeatDelay&&(p.repeatDelay=secondsToMilliseconds(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let b=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(makeAnimationInstant(p),p.delay===0&&(b=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(b=!0,makeAnimationInstant(p),p.delay=0),p.allowFlatten=!l.type&&!l.ease,b&&!n&&e.get()!==void 0){const P=getFinalKeyframe(p.keyframes,l);if(P!==void 0){frame.update(()=>{p.onUpdate(P),p.onComplete()});return}}return l.isSync?new JSAnimation(p):new AsyncMotionValueAnimation(p)};function shouldBlockAnimation({protectedKeys:i,needsAnimating:e},t){const r=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function animateTarget(i,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:n=i.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(n=r);const u=[],c=s&&i.animationState&&i.animationState.getState()[s];for(const p in l){const b=i.getValue(p,i.latestValues[p]??null),P=l[p];if(P===void 0||c&&shouldBlockAnimation(c,p))continue;const N={delay:t,...getValueTransition(n||{},p)},de=b.get();if(de!==void 0&&!b.isAnimating&&!Array.isArray(P)&&P===de&&!N.velocity)continue;let me=!1;if(window.MotionHandoffAnimation){const Le=getOptimisedAppearId(i);if(Le){const tt=window.MotionHandoffAnimation(Le,p,frame);tt!==null&&(N.startTime=tt,me=!0)}}addValueToWillChange(i,p),b.start(animateMotionValue(p,b,P,i.shouldReduceMotion&&positionalKeys.has(p)?{type:!1}:N,i,me));const Ye=b.animation;Ye&&u.push(Ye)}return a&&Promise.all(u).then(()=>{frame.update(()=>{a&&setTarget(i,a)})}),u}function calcChildStagger(i,e,t,r=0,s=1){const n=Array.from(i).sort((c,p)=>c.sortNodePosition(p)).indexOf(e),a=i.size,l=(a-1)*r;return typeof t=="function"?t(n,a):s===1?n*r:l-n*r}function animateVariant(i,e,t={}){const r=resolveVariant(i,e,t.type==="exit"?i.presenceContext?.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const n=r?()=>Promise.all(animateTarget(i,r,t)):()=>Promise.resolve(),a=i.variantChildren&&i.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:p,staggerDirection:b}=s;return animateChildren(i,e,u,c,p,b,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[n,a]:[a,n];return u().then(()=>c())}else return Promise.all([n(),a(t.delay)])}function animateChildren(i,e,t=0,r=0,s=0,n=1,a){const l=[];for(const u of i.variantChildren)u.notify("AnimationStart",e),l.push(animateVariant(u,e,{...a,delay:t+(typeof r=="function"?0:r)+calcChildStagger(i.variantChildren,u,r,s,n)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function animateVisualElement(i,e,t={}){i.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(n=>animateVariant(i,n,t));r=Promise.all(s)}else if(typeof e=="string")r=animateVariant(i,e,t);else{const s=typeof e=="function"?resolveVariant(i,e,t.custom):e;r=Promise.all(animateTarget(i,s,t))}return r.then(()=>{i.notify("AnimationComplete",e)})}function shallowCompare(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let r=0;r<t;r++)if(e[r]!==i[r])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?getVariantContext(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<numVariantProps;t++){const r=variantProps[t],s=i.props[r];(isVariantLabel(s)||s===!1)&&(e[r]=s)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(i){return e=>Promise.all(e.map(({animation:t,options:r})=>animateVisualElement(i,t,r)))}function createAnimationState(i){let e=animateList(i),t=createState(),r=!0;const s=u=>(c,p)=>{const b=resolveVariant(i,p,u==="exit"?i.presenceContext?.custom:void 0);if(b){const{transition:P,transitionEnd:N,...de}=b;c={...c,...de,...N}}return c};function n(u){e=u(i)}function a(u){const{props:c}=i,p=getVariantContext(i.parent)||{},b=[],P=new Set;let N={},de=1/0;for(let Ye=0;Ye<numAnimationTypes;Ye++){const Le=reversePriorityOrder[Ye],tt=t[Le],Be=c[Le]!==void 0?c[Le]:p[Le],nt=isVariantLabel(Be),ft=Le===u?tt.isActive:null;ft===!1&&(de=Ye);let mt=Be===p[Le]&&Be!==c[Le]&&nt;if(mt&&r&&i.manuallyAnimateOnMount&&(mt=!1),tt.protectedKeys={...N},!tt.isActive&&ft===null||!Be&&!tt.prevProp||isAnimationControls(Be)||typeof Be=="boolean")continue;const ht=checkVariantsDidChange(tt.prevProp,Be);let Et=ht||Le===u&&tt.isActive&&!mt&&nt||Ye>de&&nt,St=!1;const bt=Array.isArray(Be)?Be:[Be];let Pt=bt.reduce(s(Le),{});ft===!1&&(Pt={});const{prevResolvedValues:Rt={}}=tt,Dt={...Rt,...Pt},kt=xt=>{Et=!0,P.has(xt)&&(St=!0,P.delete(xt)),tt.needsAnimating[xt]=!0;const gt=i.getValue(xt);gt&&(gt.liveStyle=!1)};for(const xt in Dt){const gt=Pt[xt],_t=Rt[xt];if(N.hasOwnProperty(xt))continue;let yt=!1;isKeyframesTarget(gt)&&isKeyframesTarget(_t)?yt=!shallowCompare(gt,_t):yt=gt!==_t,yt?gt!=null?kt(xt):P.add(xt):gt!==void 0&&P.has(xt)?kt(xt):tt.protectedKeys[xt]=!0}tt.prevProp=Be,tt.prevResolvedValues=Pt,tt.isActive&&(N={...N,...Pt}),r&&i.blockInitialAnimation&&(Et=!1);const Lt=mt&&ht;Et&&(!Lt||St)&&b.push(...bt.map(xt=>{const gt={type:Le};if(typeof xt=="string"&&r&&!Lt&&i.manuallyAnimateOnMount&&i.parent){const{parent:_t}=i,yt=resolveVariant(_t,xt);if(_t.enteringChildren&&yt){const{delayChildren:At}=yt.transition||{};gt.delay=calcChildStagger(_t.enteringChildren,i,At)}}return{animation:xt,options:gt}}))}if(P.size){const Ye={};if(typeof c.initial!="boolean"){const Le=resolveVariant(i,Array.isArray(c.initial)?c.initial[0]:c.initial);Le&&Le.transition&&(Ye.transition=Le.transition)}P.forEach(Le=>{const tt=i.getBaseTarget(Le),Be=i.getValue(Le);Be&&(Be.liveStyle=!0),Ye[Le]=tt??null}),b.push({animation:Ye})}let me=!!b.length;return r&&(c.initial===!1||c.initial===c.animate)&&!i.manuallyAnimateOnMount&&(me=!1),r=!1,me?e(b):Promise.resolve()}function l(u,c){if(t[u].isActive===c)return Promise.resolve();i.variantChildren?.forEach(b=>b.animationState?.setActive(u,c)),t[u].isActive=c;const p=a(u);for(const b in t)t[b].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:n,getState:()=>t,reset:()=>{t=createState(),r=!0}}}function checkVariantsDidChange(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!shallowCompare(e,i):!1}function createTypeState(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(i,e,t,r={passive:!0}){return i.addEventListener(e,t,r),()=>i.removeEventListener(e,t)}function extractEventInfo(i){return{point:{x:i.pageX,y:i.pageY}}}const addPointerInfo=i=>e=>isPrimaryPointer(e)&&i(e,extractEventInfo(e));function addPointerEvent(i,e,t,r){return addDomEvent(i,e,addPointerInfo(t),r)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(i){return i.max-i.min}function isNear(i,e,t){return Math.abs(i-e)<=t}function calcAxisDelta(i,e,t,r=.5){i.origin=r,i.originPoint=mixNumber$1(e.min,e.max,i.origin),i.scale=calcLength(t)/calcLength(e),i.translate=mixNumber$1(t.min,t.max,i.origin)-i.originPoint,(i.scale>=SCALE_MIN&&i.scale<=SCALE_MAX||isNaN(i.scale))&&(i.scale=1),(i.translate>=TRANSLATE_MIN&&i.translate<=TRANSLATE_MAX||isNaN(i.translate))&&(i.translate=0)}function calcBoxDelta(i,e,t,r){calcAxisDelta(i.x,e.x,t.x,r?r.originX:void 0),calcAxisDelta(i.y,e.y,t.y,r?r.originY:void 0)}function calcRelativeAxis(i,e,t){i.min=t.min+e.min,i.max=i.min+calcLength(e)}function calcRelativeBox(i,e,t){calcRelativeAxis(i.x,e.x,t.x),calcRelativeAxis(i.y,e.y,t.y)}function calcRelativeAxisPosition(i,e,t){i.min=e.min-t.min,i.max=i.min+calcLength(e)}function calcRelativePosition(i,e,t){calcRelativeAxisPosition(i.x,e.x,t.x),calcRelativeAxisPosition(i.y,e.y,t.y)}function eachAxis(i){return[i("x"),i("y")]}const getContextWindow=({current:i})=>i?i.ownerDocument.defaultView:null,distance=(i,e)=>Math.abs(i-e);function distance2D(i,e){const t=distance(i.x,e.x),r=distance(i.y,e.y);return Math.sqrt(t**2+r**2)}class PanSession{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:n=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=getPanInfo(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,de=distance2D(P.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!de)return;const{point:me}=P,{timestamp:Ye}=frameData;this.history.push({...me,timestamp:Ye});const{onStart:Le,onMove:tt}=this.handlers;N||(Le&&Le(this.lastMoveEvent,P),this.startEvent=this.lastMoveEvent),tt&&tt(this.lastMoveEvent,P)},this.handlePointerMove=(P,N)=>{this.lastMoveEvent=P,this.lastMoveEventInfo=transformPoint(N,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(P,N)=>{this.end();const{onEnd:de,onSessionEnd:me,resumeAnimation:Ye}=this.handlers;if(this.dragSnapToOrigin&&Ye&&Ye(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Le=getPanInfo(P.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(N,this.transformPagePoint),this.history);this.startEvent&&de&&de(P,Le),me&&me(P,Le)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=extractEventInfo(e),u=transformPoint(l,this.transformPagePoint),{point:c}=u,{timestamp:p}=frameData;this.history=[{...c,timestamp:p}];const{onSessionStart:b}=t;b&&b(e,getPanInfo(u,this.history)),this.removeListeners=pipe$1(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(i,e){return e?{point:e(i.point)}:i}function subtractPoint(i,e){return{x:i.x-e.x,y:i.y-e.y}}function getPanInfo({point:i},e){return{point:i,delta:subtractPoint(i,lastDevicePoint(e)),offset:subtractPoint(i,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(i){return i[0]}function lastDevicePoint(i){return i[i.length-1]}function getVelocity(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,r=null;const s=lastDevicePoint(i);for(;t>=0&&(r=i[t],!(s.timestamp-r.timestamp>secondsToMilliseconds(e)));)t--;if(!r)return{x:0,y:0};const n=millisecondsToSeconds(s.timestamp-r.timestamp);if(n===0)return{x:0,y:0};const a={x:(s.x-r.x)/n,y:(s.y-r.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function applyConstraints(i,{min:e,max:t},r){return e!==void 0&&i<e?i=r?mixNumber$1(e,i,r.min):Math.max(i,e):t!==void 0&&i>t&&(i=r?mixNumber$1(t,i,r.max):Math.min(i,t)),i}function calcRelativeAxisConstraints(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function calcRelativeConstraints(i,{top:e,left:t,bottom:r,right:s}){return{x:calcRelativeAxisConstraints(i.x,t,s),y:calcRelativeAxisConstraints(i.y,e,r)}}function calcViewportAxisConstraints(i,e){let t=e.min-i.min,r=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,r]=[r,t]),{min:t,max:r}}function calcViewportConstraints(i,e){return{x:calcViewportAxisConstraints(i.x,e.x),y:calcViewportAxisConstraints(i.y,e.y)}}function calcOrigin(i,e){let t=.5;const r=calcLength(i),s=calcLength(e);return s>r?t=progress(e.min,e.max-r,i.min):r>s&&(t=progress(i.min,i.max-s,e.min)),clamp$1(0,1,t)}function rebaseAxisConstraints(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const defaultElastic=.35;function resolveDragElastic(i=defaultElastic){return i===!1?i=0:i===!0&&(i=defaultElastic),{x:resolveAxisElastic(i,"left","right"),y:resolveAxisElastic(i,"top","bottom")}}function resolveAxisElastic(i,e,t){return{min:resolvePointElastic(i,e),max:resolvePointElastic(i,t)}}function resolvePointElastic(i,e){return typeof i=="number"?i:i[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const n=b=>{const{dragSnapToOrigin:P}=this.getProps();P?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(b).point)},a=(b,P)=>{const{drag:N,dragPropagation:de,onDragStart:me}=this.getProps();if(N&&!de&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(N),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=P,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Le=>{let tt=this.getAxisMotionValue(Le).get()||0;if(percent.test(tt)){const{projection:Be}=this.visualElement;if(Be&&Be.layout){const nt=Be.layout.layoutBox[Le];nt&&(tt=calcLength(nt)*(parseFloat(tt)/100))}}this.originPoint[Le]=tt}),me&&frame.postRender(()=>me(b,P)),addValueToWillChange(this.visualElement,"transform");const{animationState:Ye}=this.visualElement;Ye&&Ye.setActive("whileDrag",!0)},l=(b,P)=>{this.latestPointerEvent=b,this.latestPanInfo=P;const{dragPropagation:N,dragDirectionLock:de,onDirectionLock:me,onDrag:Ye}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:Le}=P;if(de&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Le),this.currentDirection!==null&&me&&me(this.currentDirection);return}this.updateAxis("x",P.point,Le),this.updateAxis("y",P.point,Le),this.visualElement.render(),Ye&&Ye(b,P)},u=(b,P)=>{this.latestPointerEvent=b,this.latestPanInfo=P,this.stop(b,P),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>eachAxis(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:n,onStart:a,onMove:l,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&frame.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!shouldDrag(e,s,this.currentDirection))return;const n=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=applyConstraints(a,this.constraints[e],this.elastic[e])),n.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=calcRelativeConstraints(r.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(n=>{this.constraints!==!1&&this.getAxisMotionValue(n)&&(this.constraints[n]=rebaseAxisConstraints(r.layoutBox[n],this.constraints[n]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const n=measurePageBox(r,s.root,this.visualElement.getTransformPagePoint());let a=calcViewportConstraints(s.layout.layoutBox,n);if(t){const l=t(convertBoxToBoundingBox(a));this.hasMutatedConstraints=!!l,l&&(a=convertBoundingBoxToBox(l))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:n,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},c=eachAxis(p=>{if(!shouldDrag(p,t,this.currentDirection))return;let b=u&&u[p]||{};a&&(b={min:0,max:0});const P=s?200:1e6,N=s?40:1e7,de={type:"inertia",velocity:r?e[p]:0,bounceStiffness:P,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...n,...b};return this.startAxisValueAnimation(p,de)});return Promise.all(c).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),r.start(animateMotionValue(e,r,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:r}=this.getProps();if(!shouldDrag(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,n=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[t];n.set(e[t]-mixNumber$1(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!isRefObject(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};eachAxis(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();s[a]=calcOrigin({min:u,max:u},this.constraints[a])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),eachAxis(a=>{if(!shouldDrag(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:c}=this.constraints[a];l.set(mixNumber$1(u,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,t=addPointerEvent(e,"pointerdown",u=>{const{drag:c,dragListener:p=!0}=this.getProps();c&&p&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();isRefObject(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,n=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),frame.read(r);const a=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(eachAxis(p=>{const b=this.getAxisMotionValue(p);b&&(this.originPoint[p]+=u[p].translate,b.set(b.get()+u[p].translate))}),this.visualElement.render())});return()=>{a(),t(),n(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:n=!1,dragElastic:a=defaultElastic,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:n,dragElastic:a,dragMomentum:l}}}function shouldDrag(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function getCurrentDirection(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=i=>(e,t)=>{i&&frame.postRender(()=>i(e,t))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:r,onEnd:(n,a)=>{delete this.session,s&&frame.postRender(()=>s(n,a))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const correctBorderRadius={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(px.test(i))i=parseFloat(i);else return i;const t=pixelsToPercent(i,e.target.x),r=pixelsToPercent(i,e.target.y);return`${t}% ${r}%`}},correctBoxShadow={correct:(i,{treeScale:e,projectionDelta:t})=>{const r=i,s=complex.parse(i);if(s.length>5)return r;const n=complex.createTransformer(i),a=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;s[0+a]/=l,s[1+a]/=u;const c=mixNumber$1(l,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),n(s)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:n}=e;addScaleCorrector(defaultScaleCorrectors),n&&(t.group&&t.group.add(n),r&&r.register&&s&&r.register(n),hasTakenAnySnapshot&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:n}=this.props,{projection:a}=r;return a&&(a.isPresent=n,hasTakenAnySnapshot=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==n?a.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?a.promote():a.relegate()||frame.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;hasTakenAnySnapshot=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(i){const[e,t]=usePresence(),r=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...i,layoutGroup:r,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(i,e,t){const r=isMotionValue(i)?i:motionValue(i);return r.start(animateMotionValue("",r,e,t)),r.animation}const compareByDepth=(i,e)=>i.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(i,e){const t=time.now(),r=({timestamp:s})=>{const n=s-t;n>=e&&(cancelFrame(r),i(n-e))};return frame.setup(r,!0),()=>cancelFrame(r)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=i=>typeof i=="string"?parseFloat(i):i,isPx=i=>typeof i=="number"||px.test(i);function mixValues(i,e,t,r,s,n){s?(i.opacity=mixNumber$1(0,t.opacity??1,easeCrossfadeIn(r)),i.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(r))):n&&(i.opacity=mixNumber$1(e.opacity??1,t.opacity??1,r));for(let a=0;a<numBorders;a++){const l=`border${borders[a]}Radius`;let u=getRadius(e,l),c=getRadius(t,l);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||isPx(u)===isPx(c)?(i[l]=Math.max(mixNumber$1(asNumber(u),asNumber(c),r),0),(percent.test(c)||percent.test(u))&&(i[l]+="%")):i[l]=c}(e.rotate||t.rotate)&&(i.rotate=mixNumber$1(e.rotate||0,t.rotate||0,r))}function getRadius(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(i,e,t){return r=>r<i?0:r>e?1:t(progress(i,e,r))}function copyAxisInto(i,e){i.min=e.min,i.max=e.max}function copyBoxInto(i,e){copyAxisInto(i.x,e.x),copyAxisInto(i.y,e.y)}function copyAxisDeltaInto(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function removePointDelta(i,e,t,r,s){return i-=e,i=scalePoint(i,1/t,r),s!==void 0&&(i=scalePoint(i,1/s,r)),i}function removeAxisDelta(i,e=0,t=1,r=.5,s,n=i,a=i){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=mixNumber$1(n.min,n.max,r);i===n&&(l-=e),i.min=removePointDelta(i.min,e,t,l,s),i.max=removePointDelta(i.max,e,t,l,s)}function removeAxisTransforms(i,e,[t,r,s],n,a){removeAxisDelta(i,e[t],e[r],e[s],e.scale,n,a)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(i,e,t,r){removeAxisTransforms(i.x,e,xKeys,t?t.x:void 0,r?r.x:void 0),removeAxisTransforms(i.y,e,yKeys,t?t.y:void 0,r?r.y:void 0)}function isAxisDeltaZero(i){return i.translate===0&&i.scale===1}function isDeltaZero(i){return isAxisDeltaZero(i.x)&&isAxisDeltaZero(i.y)}function axisEquals(i,e){return i.min===e.min&&i.max===e.max}function boxEquals(i,e){return axisEquals(i.x,e.x)&&axisEquals(i.y,e.y)}function axisEqualsRounded(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function boxEqualsRounded(i,e){return axisEqualsRounded(i.x,e.x)&&axisEqualsRounded(i.y,e.y)}function aspectRatio(i){return calcLength(i.x)/calcLength(i.y)}function axisDeltaEquals(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const n=this.members[s];if(n.isPresent!==!1){r=n;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(i,e,t){let r="";const s=i.x.translate/e.x,n=i.y.translate/e.y,a=t?.z||0;if((s||n||a)&&(r=`translate3d(${s}px, ${n}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:p,rotateX:b,rotateY:P,skewX:N,skewY:de}=t;c&&(r=`perspective(${c}px) ${r}`),p&&(r+=`rotate(${p}deg) `),b&&(r+=`rotateX(${b}deg) `),P&&(r+=`rotateY(${P}deg) `),N&&(r+=`skewX(${N}deg) `),de&&(r+=`skewY(${de}deg) `)}const l=i.x.scale*e.x,u=i.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(i,e,t,r){const{latestValues:s}=e;s[i]&&(t[i]=s[i],e.setStaticValue(i,0),r&&(r[i]=0))}function cancelTreeOptimisedTransformAnimations(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:n}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",frame,!(s||n))}const{parent:r}=i;r&&!r.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(r)}function createProjectionNode({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new SubscriptionManager),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=isSVGElement(a)&&!isSVGSVGElement(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),i){let p,b=0;const P=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{b=window.innerWidth}),i(a,()=>{const N=window.innerWidth;N!==b&&(b=N,this.root.updateBlockedByResize=!0,p&&p(),p=delay(P,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:b,hasRelativeLayoutChanged:P,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const de=this.options.transition||c.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:me,onLayoutAnimationComplete:Ye}=c.getProps(),Le=!this.targetLayout||!boxEqualsRounded(this.targetLayout,N),tt=!b&&P;if(this.options.layoutRoot||this.resumeFrom||tt||b&&(Le||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Be={...getValueTransition(de,"layout"),onPlay:me,onComplete:Ye};(c.shouldReduceMotion||this.options.layoutRoot)&&(Be.delay=0,Be.type=!1),this.startAnimation(Be),this.setAnimationOrigin(p,tt)}else b||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const b=this.path[p];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const l=time.now();frameData.delta=clamp$1(0,1e3/60,l-frameData.timestamp),frameData.timestamp=l,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!isDeltaZero(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,p=c!==this.prevTransformTemplateValue;a&&this.instance&&(l||hasTransform(this.latestValues)||p)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),roundBox(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return createBox();const l=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:c}=this.root;c&&(translateAxis(l.x,c.offset.x),translateAxis(l.y,c.offset.y))}return l}removeElementScroll(a){const l=createBox();if(copyBoxInto(l,a),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:p,options:b}=c;c!==this.root&&p&&b.layoutScroll&&(p.wasRoot&&copyBoxInto(l,a),translateAxis(l.x,p.offset.x),translateAxis(l.y,p.offset.y))}return l}applyTransform(a,l=!1){const u=createBox();copyBoxInto(u,a);for(let c=0;c<this.path.length;c++){const p=this.path[c];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&transformBox(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),hasTransform(p.latestValues)&&transformBox(u,p.latestValues)}return hasTransform(this.latestValues)&&transformBox(u,this.latestValues),u}removeTransform(a){const l=createBox();copyBoxInto(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!hasTransform(c.latestValues))continue;hasScale(c.latestValues)&&c.updateSnapshot();const p=createBox(),b=c.measurePageBox();copyBoxInto(p,b),removeBoxTransforms(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,p)}return hasTransform(this.latestValues)&&removeBoxTransforms(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:b}=this.options;if(!(!this.layout||!(p||b))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,P.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(u=!1),u)return;const{layout:c,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||p))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,P=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=createBox());const{target:N}=a;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==P||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(a,l=!1){const u=this.snapshot,c=u?u.latestValues:{},p={...this.latestValues},b=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const P=createBox(),N=u?u.source:void 0,de=this.layout?this.layout.source:void 0,me=N!==de,Ye=this.getStack(),Le=!Ye||Ye.members.length<=1,tt=!!(me&&!Le&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Be;this.mixTargetDelta=nt=>{const ft=nt/1e3;mixAxisDelta(b.x,a.x,ft),mixAxisDelta(b.y,a.y,ft),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(P,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,P,ft),Be&&boxEquals(this.relativeTarget,Be)&&(this.isProjectionDirty=!1),Be||(Be=createBox()),copyBoxInto(Be,this.relativeTarget)),me&&(this.animationValues=p,mixValues(p,c,this.latestValues,ft,tt,Le)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ft},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:c,latestValues:p}=a;if(!(!l||!u||!c)){if(this!==a&&this.layout&&c&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||createBox();const b=calcLength(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+b;const P=calcLength(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+P}copyBoxInto(l,u),transformBox(l,p),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new NodeStack),this.sharedNodes.get(a).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const c={};u.z&&resetDistortingTransform("z",a,c,this.animationValues);for(let p=0;p<transformAxes.length;p++)resetDistortingTransform(`rotate${transformAxes[p]}`,a,c,this.animationValues),resetDistortingTransform(`skew${transformAxes[p]}`,a,c,this.animationValues);a.render();for(const p in c)a.setStaticValue(p,c[p]),this.animationValues&&(this.animationValues[p]=c[p]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=resolveMotionValue(l?.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=resolveMotionValue(l?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=c.animationValues||c.latestValues;this.applyTransformsToTarget();let b=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,p);u&&(b=u(p,b)),a.transform=b;const{x:P,y:N}=this.projectionDelta;a.transformOrigin=`${P.origin*100}% ${N.origin*100}% 0`,c.animationValues?a.opacity=c===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=c===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const de in scaleCorrectors){if(p[de]===void 0)continue;const{correct:me,applyTo:Ye,isCSSVariable:Le}=scaleCorrectors[de],tt=b==="none"?p[de]:me(p[de],c);if(Ye){const Be=Ye.length;for(let nt=0;nt<Be;nt++)a[Ye[nt]]=tt}else Le?this.options.visualElement.renderState.vars[de]=tt:a[de]=tt}this.options.layoutId&&(a.pointerEvents=c===this?resolveMotionValue(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(i){i.updateLayout()}function notifyLayoutUpdate(i){const e=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=i.layout,{animationType:s}=i.options,n=e.source!==i.layout.source;s==="size"?eachAxis(p=>{const b=n?e.measuredBox[p]:e.layoutBox[p],P=calcLength(b);b.min=t[p].min,b.max=b.min+P}):shouldAnimatePositionOnly(s,e.layoutBox,t)&&eachAxis(p=>{const b=n?e.measuredBox[p]:e.layoutBox[p],P=calcLength(t[p]);b.max=b.min+P,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[p].max=i.relativeTarget[p].min+P)});const a=createDelta();calcBoxDelta(a,t,e.layoutBox);const l=createDelta();n?calcBoxDelta(l,i.applyTransform(r,!0),e.measuredBox):calcBoxDelta(l,t,e.layoutBox);const u=!isDeltaZero(a);let c=!1;if(!i.resumeFrom){const p=i.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:b,layout:P}=p;if(b&&P){const N=createBox();calcRelativePosition(N,e.layoutBox,b.layoutBox);const de=createBox();calcRelativePosition(de,t,P.layoutBox),boxEqualsRounded(N,de)||(c=!0),p.options.layoutRoot&&(i.relativeTarget=de,i.relativeTargetOrigin=N,i.relativeParent=p)}}}i.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(i.isLead()){const{onExitComplete:t}=i.options;t&&t()}i.options.transition=void 0}function propagateDirtyNodes(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function cleanDirtyNodes(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function clearSnapshot(i){i.clearSnapshot()}function clearMeasurements(i){i.clearMeasurements()}function clearIsLayoutDirty(i){i.isLayoutDirty=!1}function resetTransformStyle(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function finishAnimation(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function resolveTargetDelta(i){i.resolveTargetDelta()}function calcProjection(i){i.calcProjection()}function resetSkewAndRotation(i){i.resetSkewAndRotation()}function removeLeadSnapshots(i){i.removeLeadSnapshot()}function mixAxisDelta(i,e,t){i.translate=mixNumber$1(e.translate,0,t),i.scale=mixNumber$1(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function mixAxis(i,e,t,r){i.min=mixNumber$1(e.min,t.min,r),i.max=mixNumber$1(e.max,t.max,r)}function mixBox(i,e,t,r){mixAxis(i.x,e.x,t.x,r),mixAxis(i.y,e.y,t.y,r)}function hasOpacityCrossfade(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(i){i.min=roundPoint(i.min),i.max=roundPoint(i.max)}function roundBox(i){roundAxis(i.x),roundAxis(i.y)}function shouldAnimatePositionOnly(i,e,t){return i==="position"||i==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(t),.2)}function checkNodeWasScrollRoot(i){return i!==i.root&&i.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(i,e)=>addDomEvent(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const i=new DocumentProjectionNode({});i.mount(window),i.setOptions({layoutScroll:!0}),rootProjectionNode.current=i}return rootProjectionNode.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(i,e,t){const{props:r}=i;i.animationState&&r.whileHover&&i.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,n=r[s];n&&frame.postRender(()=>n(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(t,r)=>(handleHoverEvent(this.node,r,"Start"),s=>handleHoverEvent(this.node,s,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe$1(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(i,e,t){const{props:r}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&r.whileTap&&i.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),n=r[s];n&&frame.postRender(()=>n(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(t,r)=>(handlePressEvent(this.node,r,"Start"),(s,{success:n})=>handlePressEvent(this.node,s,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=i=>{const e=observerCallbacks.get(i.target);e&&e(i)},fireAllObserverCallbacks=i=>{i.forEach(fireObserverCallback)};function initIntersectionObserver({root:i,...e}){const t=i||document;observers.has(t)||observers.set(t,{});const r=observers.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(fireAllObserverCallbacks,{root:i,...e})),r[s]}function observeIntersection(i,e,t){const r=initIntersectionObserver(e);return observerCallbacks.set(i,t),r.observe(i),()=>{observerCallbacks.delete(i),r.unobserve(i)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:n}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:thresholdNames[s]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,n&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:p,onViewportLeave:b}=this.node.getProps(),P=c?p:b;P&&P(u)};return observeIntersection(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function useMotionValue(i){const e=useConstant(()=>motionValue(i)),{isStatic:t}=reactExports.useContext(MotionConfigContext);if(t){const[,r]=reactExports.useState(i);reactExports.useEffect(()=>e.on("change",r),[])}return e}function useCombineMotionValues(i,e){const t=useMotionValue(e()),r=()=>t.set(e());return r(),useIsomorphicLayoutEffect$1(()=>{const s=()=>frame.preRender(r,!1,!0),n=i.map(a=>a.on("change",s));return()=>{n.forEach(a=>a()),cancelFrame(r)}}),t}function useComputed(i){collectMotionValues.current=[],i();const e=useCombineMotionValues(collectMotionValues.current,i);return collectMotionValues.current=void 0,e}function useTransform(i,e,t,r){if(typeof i=="function")return useComputed(i);const s=transform(e,t,r);return Array.isArray(i)?useListTransform(i,s):useListTransform([i],([n])=>s(n))}function useListTransform(i,e){const t=useConstant(()=>[]);return useCombineMotionValues(i,()=>{t.length=0;const r=i.length;for(let s=0;s<r;s++)t[s]=i[s].get();return e(t)})}function useSpring(i,e={}){const{isStatic:t}=reactExports.useContext(MotionConfigContext),r=()=>isMotionValue(i)?i.get():i;if(t)return useTransform(r);const s=useMotionValue(r());return reactExports.useInsertionEffect(()=>attachSpring(s,i,e),[s,JSON.stringify(e)]),s}function stopAnimation(i){i.values.forEach(e=>e.stop())}function setVariants(i,e){[...e].reverse().forEach(r=>{const s=i.getVariant(r);s&&setTarget(i,s),i.variantChildren&&i.variantChildren.forEach(n=>{setVariants(n,e)})})}function setValues(i,e){if(Array.isArray(e))return setVariants(i,e);if(typeof e=="string")return setVariants(i,[e]);setTarget(i,e)}function animationControls(){const i=new Set,e={subscribe(t){return i.add(t),()=>void i.delete(t)},start(t,r){const s=[];return i.forEach(n=>{s.push(animateVisualElement(n,t,{transitionOverride:r}))}),Promise.all(s)},set(t){return i.forEach(r=>{setValues(r,t)})},stop(){i.forEach(t=>{stopAnimation(t)})},mount(){return()=>{e.stop()}}};return e}function useAnimationControls(){const i=useConstant(animationControls);return useIsomorphicLayoutEffect$1(i.mount,[]),i}const useAnimation=useAnimationControls,thresholds={some:0,all:1};function inView(i,e,{root:t,margin:r,amount:s="some"}={}){const n=resolveElements(i),a=new WeakMap,l=c=>{c.forEach(p=>{const b=a.get(p.target);if(p.isIntersecting!==!!b)if(p.isIntersecting){const P=e(p.target,p);typeof P=="function"?a.set(p.target,P):u.unobserve(p.target)}else typeof b=="function"&&(b(p),a.delete(p.target))})},u=new IntersectionObserver(l,{root:t,rootMargin:r,threshold:typeof s=="number"?s:thresholds[s]});return n.forEach(c=>u.observe(c)),()=>u.disconnect()}function useInView(i,{root:e,margin:t,amount:r,once:s=!1,initial:n=!1}={}){const[a,l]=reactExports.useState(n);return reactExports.useEffect(()=>{if(!i.current||s&&a)return;const u=()=>(l(!0),s?void 0:()=>l(!1)),c={root:e&&e.current||void 0,margin:t,amount:r};return inView(i.current,u,c)},[e,i,t,s,r]),a}const Header=()=>jsxRuntimeExports.jsx(motion.header,{className:"fixed top-0 left-0 w-full z-50 p-3",initial:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeInOut"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between max-w-screen-sm mx-auto border border-white/20 backdrop-blur-sm rounded-full py-3 px-4",children:[jsxRuntimeExports.jsxs("button",{className:"flex gap-4 items-center hover:scale-105 transition-transform duration-200 cursor-pointer",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}),jsxRuntimeExports.jsx("path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}),jsxRuntimeExports.jsx("path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"})]}),jsxRuntimeExports.jsxs("div",{className:"font-bold flex gap-1 text-white",children:[jsxRuntimeExports.jsx("span",{className:"hidden md:block",children:"Mega.com"}),jsxRuntimeExports.jsx("span",{className:"md:hidden",children:"Mega"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 md:gap-8 text-sm font-semibold",children:[jsxRuntimeExports.jsx("button",{className:"hover:text-amber-400 transition-colors duration-200 cursor-pointer",children:"Developer"}),jsxRuntimeExports.jsx("button",{className:"hover:text-amber-400 transition-colors duration-200 cursor-pointer",children:"Creator"}),jsxRuntimeExports.jsx("button",{className:"hover:text-amber-400 transition-colors duration-200 cursor-pointer",children:"Contact"})]})]})}),Mainlayout=()=>{const[i,e]=reactExports.useState(!0),t=()=>{e(!1)};return jsxRuntimeExports.jsxs(MainContainer,{children:[i&&jsxRuntimeExports.jsx(Intro$1,{onComplete:t}),!i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Outlet,{})]})]})},Squares=({direction:i="right",speed:e=1,borderColor:t="#999",squareSize:r=40,hoverFillColor:s="#222"})=>{const n=reactExports.useRef(null),a=reactExports.useRef(null),l=reactExports.useRef(0),u=reactExports.useRef(0),c=reactExports.useRef({x:0,y:0}),p=reactExports.useRef(null);return reactExports.useEffect(()=>{const b=n.current;if(!b)return;const P=b.getContext("2d"),N=()=>{b.width=b.offsetWidth,b.height=b.offsetHeight,l.current=Math.ceil(b.width/r)+1,u.current=Math.ceil(b.height/r)+1};window.addEventListener("resize",N),N();const de=()=>{if(!P)return;P.clearRect(0,0,b.width,b.height);const tt=Math.floor(c.current.x/r)*r,Be=Math.floor(c.current.y/r)*r;for(let ft=tt;ft<b.width+r;ft+=r)for(let mt=Be;mt<b.height+r;mt+=r){const ht=ft-c.current.x%r,Et=mt-c.current.y%r;p.current&&Math.floor((ft-tt)/r)===p.current.x&&Math.floor((mt-Be)/r)===p.current.y&&(P.fillStyle=s,P.fillRect(ht,Et,r,r)),P.strokeStyle=t,P.strokeRect(ht,Et,r,r)}const nt=P.createRadialGradient(b.width/2,b.height/2,0,b.width/2,b.height/2,Math.sqrt(b.width**2+b.height**2)/2);nt.addColorStop(0,"rgba(0, 0, 0, 0)"),nt.addColorStop(1,"#060010"),P.fillStyle=nt,P.fillRect(0,0,b.width,b.height)},me=()=>{const tt=Math.max(e,.1);switch(i){case"right":c.current.x=(c.current.x-tt+r)%r;break;case"left":c.current.x=(c.current.x+tt+r)%r;break;case"up":c.current.y=(c.current.y+tt+r)%r;break;case"down":c.current.y=(c.current.y-tt+r)%r;break;case"diagonal":c.current.x=(c.current.x-tt+r)%r,c.current.y=(c.current.y-tt+r)%r;break}de(),a.current=requestAnimationFrame(me)},Ye=tt=>{const Be=b.getBoundingClientRect(),nt=tt.clientX-Be.left,ft=tt.clientY-Be.top,mt=Math.floor(c.current.x/r)*r,ht=Math.floor(c.current.y/r)*r,Et=Math.floor((nt+c.current.x-mt)/r),St=Math.floor((ft+c.current.y-ht)/r);(!p.current||p.current.x!==Et||p.current.y!==St)&&(p.current={x:Et,y:St})},Le=()=>{p.current=null};return b.addEventListener("mousemove",Ye),b.addEventListener("mouseleave",Le),a.current=requestAnimationFrame(me),()=>{window.removeEventListener("resize",N),a.current&&cancelAnimationFrame(a.current),b.removeEventListener("mousemove",Ye),b.removeEventListener("mouseleave",Le)}},[i,e,t,s,r]),jsxRuntimeExports.jsx(BlockBackground,{children:jsxRuntimeExports.jsx("canvas",{ref:n,className:"w-full h-[100vh] border-none block"})})},HomeContainer=dt.div``,KeyvisualContainer=dt.section`
  padding-top: 100px;
  position: relative;
  z-index: 1;
  pointer-events: none;
  .wrapper-inner {
    position: relative;
    width: 300px;
    margin: 0 auto 68px;
  }
`,getRotationTransition=(i,e,t=!0)=>({from:e,to:e+360,ease:"linear",duration:i,type:"tween",repeat:t?1/0:0}),getTransition=(i,e)=>({rotate:getRotationTransition(i,e),scale:{type:"spring",damping:20,stiffness:300}}),CircularText=({text:i,spinDuration:e=20,onHover:t="speedUp",className:r=""})=>{const s=Array.from(i),n=useAnimation(),a=useMotionValue(0);reactExports.useEffect(()=>{const c=a.get();n.start({rotate:c+360,scale:1,transition:getTransition(e,c)})},[e,i,t,n]);const l=()=>{const c=a.get();if(!t)return;let p,b=1;switch(t){case"slowDown":p=getTransition(e*2,c);break;case"speedUp":p=getTransition(e/4,c);break;case"pause":p={rotate:{type:"spring",damping:20,stiffness:300},scale:{type:"spring",damping:20,stiffness:300}};break;case"goBonkers":p=getTransition(e/20,c),b=.8;break;default:p=getTransition(e,c)}n.start({rotate:c+360,scale:b,transition:p})},u=()=>{const c=a.get();n.start({rotate:c+360,scale:1,transition:getTransition(e,c)})};return jsxRuntimeExports.jsx(motion.div,{className:`m-0 mx-auto rounded-full w-[128px] h-[128px] relative text-white font-black text-center cursor-pointer origin-center text-4xl font-bold bg-black/50 ${r}`,style:{rotate:a},initial:{rotate:0},animate:n,onMouseEnter:l,onMouseLeave:u,children:s.map((c,p)=>{const b=360/s.length*p,P=Math.PI/s.length,N=P*p,de=P*p,me=`rotateZ(${b}deg) translate3d(${N}px, ${de}px, 0)`;return jsxRuntimeExports.jsx("span",{className:"absolute inline-block inset-0 text-xl transition-all duration-500 ease-[cubic-bezier(0,0,0,1)]",style:{transform:me,WebkitTransform:me},children:c},p)})})};function _assertThisInitialized(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _inheritsLoose(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults$1={duration:.5,overwrite:!1,delay:0},_suppressOverwrites$1,_reverting$1,_context$2,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString$1=function i(e){return typeof e=="string"},_isFunction$1=function i(e){return typeof e=="function"},_isNumber$1=function i(e){return typeof e=="number"},_isUndefined=function i(e){return typeof e>"u"},_isObject$1=function i(e){return typeof e=="object"},_isNotFalse=function i(e){return e!==!1},_windowExists$2=function i(){return typeof window<"u"},_isFuncOrString=function i(e){return _isFunction$1(e)||_isString$1(e)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$3,_coreInitted$2,_doc$3,_globals={},_installScope={},_coreReady,_install=function i(e){return(_installScope=_merge(e,_globals))&&gsap$2},_missingPlugin=function i(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},_warn=function i(e,t){return!t&&console.warn(e)},_addGlobal=function i(e,t){return e&&(_globals[e]=t)&&_installScope&&(_installScope[e]=t)||_globals},_emptyFunc=function i(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function i(e){var t=e[0],r,s;if(_isObject$1(t)||_isFunction$1(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(s=_harnessPlugins.length;s--&&!_harnessPlugins[s].targetTest(t););r=_harnessPlugins[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new GSCache(e[s],r)))||e.splice(s,1);return e},_getCache=function i(e){return e._gsap||_harness(toArray(e))[0]._gsap},_getProperty=function i(e,t,r){return(r=e[t])&&_isFunction$1(r)?e[t]():_isUndefined(r)&&e.getAttribute&&e.getAttribute(t)||r},_forEachName=function i(e,t){return(e=e.split(",")).forEach(t)||e},_round$1=function i(e){return Math.round(e*1e5)/1e5||0},_roundPrecise=function i(e){return Math.round(e*1e7)/1e7||0},_parseRelative=function i(e,t){var r=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+s:r==="-"?e-s:r==="*"?e*s:e/s},_arrayContainsAny=function i(e,t){for(var r=t.length,s=0;e.indexOf(t[s])<0&&++s<r;);return s<r},_lazyRender=function i(){var e=_lazyTweens.length,t=_lazyTweens.slice(0),r,s;for(_lazyLookup={},_lazyTweens.length=0,r=0;r<e;r++)s=t[r],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},_isRevertWorthy=function i(e){return!!(e._initted||e._startAt||e.add)},_lazySafeRender=function i(e,t,r,s){_lazyTweens.length&&!_reverting$1&&_lazyRender(),e.render(t,r,!!(_reverting$1&&t<0&&_isRevertWorthy(e))),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function i(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(_delimitedValueExp).length<2?t:_isString$1(e)?e.trim():e},_passThrough$1=function i(e){return e},_setDefaults$1=function i(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},_setKeyframeDefaults=function i(e){return function(t,r){for(var s in r)s in t||s==="duration"&&e||s==="ease"||(t[s]=r[s])}},_merge=function i(e,t){for(var r in t)e[r]=t[r];return e},_mergeDeep=function i(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=_isObject$1(t[r])?i(e[r]||(e[r]={}),t[r]):t[r]);return e},_copyExcluding=function i(e,t){var r={},s;for(s in e)s in t||(r[s]=e[s]);return r},_inheritDefaults=function i(e){var t=e.parent||_globalTimeline,r=e.keyframes?_setKeyframeDefaults(_isArray(e.keyframes)):_setDefaults$1;if(_isNotFalse(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},_arraysMatch=function i(e,t){for(var r=e.length,s=r===t.length;s&&r--&&e[r]===t[r];);return r<0},_addLinkedListItem=function i(e,t,r,s,n){var a=e[s],l;if(n)for(l=t[n];a&&a[n]>l;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[s]=t,t._prev=a,t.parent=t._dp=e,t},_removeLinkedListItem=function i(e,t,r,s){r===void 0&&(r="_first"),s===void 0&&(s="_last");var n=t._prev,a=t._next;n?n._next=a:e[r]===t&&(e[r]=a),a?a._prev=n:e[s]===t&&(e[s]=n),t._next=t._prev=t.parent=null},_removeFromParent=function i(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},_uncache=function i(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},_recacheAncestors=function i(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},_rewindStartAt=function i(e,t,r,s){return e._startAt&&(_reverting$1?e._startAt.revert(_revertConfigNoKill):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},_hasNoPausedAncestors=function i(e){return!e||e._ts&&i(e.parent)},_elapsedCycleDuration=function i(e){return e._repeat?_animationCycle(e._tTime,e=e.duration()+e._rDelay)*e:0},_animationCycle=function i(e,t){var r=Math.floor(e=_roundPrecise(e/t));return e&&r===e?r-1:r},_parentToChildTotalTime=function i(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},_setEnd=function i(e){return e._end=_roundPrecise(e._start+(e._tDur/Math.abs(e._ts||e._rts||_tinyNum)||0))},_alignPlayhead=function i(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=_roundPrecise(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),_setEnd(e),r._dirty||_uncache(r,e)),e},_postAddChecks=function i(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=_parentToChildTotalTime(e.rawTime(),t),(!t._dur||_clamp$1(0,t.totalDuration(),r)-t._tTime>_tinyNum)&&t.render(r,!0)),_uncache(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-_tinyNum}},_addToTimeline=function i(e,t,r,s){return t.parent&&_removeFromParent(t),t._start=_roundPrecise((_isNumber$1(r)?r:r||e!==_globalTimeline?_parsePosition$1(e,r,t):e._time)+t._delay),t._end=_roundPrecise(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),_addLinkedListItem(e,t,"_first","_last",e._sort?"_start":0),_isFromOrFromStart(t)||(e._recent=t),s||_postAddChecks(e,t),e._ts<0&&_alignPlayhead(e,e._tTime),e},_scrollTrigger=function i(e,t){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",t))&&_globals.ScrollTrigger.create(t,e)},_attemptInitTween=function i(e,t,r,s,n){if(_initTween(e,t,n),!e._initted)return 1;if(!r&&e._pt&&!_reverting$1&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(e),e._lazy=[n,s],1},_parentPlayheadIsBeforeStart=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},_isFromOrFromStart=function i(e){var t=e.data;return t==="isFromStart"||t==="isStart"},_renderZeroDurationTween=function i(e,t,r,s){var n=e.ratio,a=t<0||!t&&(!e._start&&_parentPlayheadIsBeforeStart(e)&&!(!e._initted&&_isFromOrFromStart(e))||(e._ts<0||e._dp._ts<0)&&!_isFromOrFromStart(e))?0:1,l=e._rDelay,u=0,c,p,b;if(l&&e._repeat&&(u=_clamp$1(0,e._tDur,t),p=_animationCycle(u,l),e._yoyo&&p&1&&(a=1-a),p!==_animationCycle(e._tTime,l)&&(n=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==n||_reverting$1||s||e._zTime===_tinyNum||!t&&e._zTime){if(!e._initted&&_attemptInitTween(e,t,s,r,u))return;for(b=e._zTime,e._zTime=t||(r?_tinyNum:0),r||(r=t&&!b),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=u,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&_rewindStartAt(e,t,r,!0),e._onUpdate&&!r&&_callback$1(e,"onUpdate"),u&&e._repeat&&!r&&e.parent&&_callback$1(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&_removeFromParent(e,1),!r&&!_reverting$1&&(_callback$1(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},_findNextPauseTween=function i(e,t,r){var s;if(r>t)for(s=e._first;s&&s._start<=r;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=r;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},_setDuration=function i(e,t,r,s){var n=e._repeat,a=_roundPrecise(t)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=a/e._dur),e._dur=a,e._tDur=n?n<0?1e10:_roundPrecise(a*(n+1)+e._rDelay*n):a,l>0&&!s&&_alignPlayhead(e,e._tTime=e._tDur*l),e.parent&&_setEnd(e),r||_uncache(e.parent,e),e},_onUpdateTotalDuration=function i(e){return e instanceof Timeline?_uncache(e):_setDuration(e,e._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition$1=function i(e,t,r){var s=e.labels,n=e._recent||_zeroPosition,a=e.duration()>=_bigNum$1?n.endTime(!1):e._dur,l,u,c;return _isString$1(t)&&(isNaN(t)||t in s)?(u=t.charAt(0),c=t.substr(-1)==="%",l=t.indexOf("="),u==="<"||u===">"?(l>=0&&(t=t.replace(/=/,"")),(u==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(l<0?n:r).totalDuration()/100:1)):l<0?(t in s||(s[t]=a),s[t]):(u=parseFloat(t.charAt(l-1)+t.substr(l+1)),c&&r&&(u=u/100*(_isArray(r)?r[0]:r).totalDuration()),l>1?i(e,t.substr(0,l-1),r)+u:a+u)):t==null?a:+t},_createTweenType=function i(e,t,r){var s=_isNumber$1(t[1]),n=(s?2:1)+(e<2?0:1),a=t[n],l,u;if(s&&(a.duration=t[1]),a.parent=r,e){for(l=a,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=_isNotFalse(u.vars.inherit)&&u.parent;a.immediateRender=_isNotFalse(l.immediateRender),e<2?a.runBackwards=1:a.startAt=t[n-1]}return new Tween(t[0],a,t[n+1])},_conditionalReturn=function i(e,t){return e||e===0?t(e):t},_clamp$1=function i(e,t,r){return r<e?e:r>t?t:r},getUnit=function i(e,t){return!_isString$1(e)||!(t=_unitExp.exec(e))?"":t[1]},clamp=function i(e,t,r){return _conditionalReturn(r,function(s){return _clamp$1(e,t,s)})},_slice=[].slice,_isArrayLike=function i(e,t){return e&&_isObject$1(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&_isObject$1(e[0]))&&!e.nodeType&&e!==_win$3},_flatten=function i(e,t,r){return r===void 0&&(r=[]),e.forEach(function(s){var n;return _isString$1(s)&&!t||_isArrayLike(s,1)?(n=r).push.apply(n,toArray(s)):r.push(s)})||r},toArray=function i(e,t,r){return _context$2&&!t&&_context$2.selector?_context$2.selector(e):_isString$1(e)&&!r&&(_coreInitted$2||!_wake())?_slice.call((t||_doc$3).querySelectorAll(e),0):_isArray(e)?_flatten(e,r):_isArrayLike(e)?_slice.call(e,0):e?[e]:[]},selector=function i(e){return e=toArray(e)[0]||_warn("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return toArray(t,r.querySelectorAll?r:r===e?_warn("Invalid scope")||_doc$3.createElement("div"):e)}},shuffle=function i(e){return e.sort(function(){return .5-Math.random()})},distribute=function i(e){if(_isFunction$1(e))return e;var t=_isObject$1(e)?e:{each:e},r=_parseEase(t.ease),s=t.from||0,n=parseFloat(t.base)||0,a={},l=s>0&&s<1,u=isNaN(s)||l,c=t.axis,p=s,b=s;return _isString$1(s)?p=b={center:.5,edges:.5,end:1}[s]||0:!l&&u&&(p=s[0],b=s[1]),function(P,N,de){var me=(de||t).length,Ye=a[me],Le,tt,Be,nt,ft,mt,ht,Et,St;if(!Ye){if(St=t.grid==="auto"?0:(t.grid||[1,_bigNum$1])[1],!St){for(ht=-_bigNum$1;ht<(ht=de[St++].getBoundingClientRect().left)&&St<me;);St<me&&St--}for(Ye=a[me]=[],Le=u?Math.min(St,me)*p-.5:s%St,tt=St===_bigNum$1?0:u?me*b/St-.5:s/St|0,ht=0,Et=_bigNum$1,mt=0;mt<me;mt++)Be=mt%St-Le,nt=tt-(mt/St|0),Ye[mt]=ft=c?Math.abs(c==="y"?nt:Be):_sqrt(Be*Be+nt*nt),ft>ht&&(ht=ft),ft<Et&&(Et=ft);s==="random"&&shuffle(Ye),Ye.max=ht-Et,Ye.min=Et,Ye.v=me=(parseFloat(t.amount)||parseFloat(t.each)*(St>me?me-1:c?c==="y"?me/St:St:Math.max(St,me/St))||0)*(s==="edges"?-1:1),Ye.b=me<0?n-me:n,Ye.u=getUnit(t.amount||t.each)||0,r=r&&me<0?_invertEase(r):r}return me=(Ye[P]-Ye.min)/Ye.max||0,_roundPrecise(Ye.b+(r?r(me):me)*Ye.v)+Ye.u}},_roundModifier=function i(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var s=_roundPrecise(Math.round(parseFloat(r)/e)*e*t);return(s-s%1)/t+(_isNumber$1(r)?0:getUnit(r))}},snap=function i(e,t){var r=_isArray(e),s,n;return!r&&_isObject$1(e)&&(s=r=e.radius||_bigNum$1,e.values?(e=toArray(e.values),(n=!_isNumber$1(e[0]))&&(s*=s)):e=_roundModifier(e.increment)),_conditionalReturn(t,r?_isFunction$1(e)?function(a){return n=e(a),Math.abs(n-a)<=s?n:a}:function(a){for(var l=parseFloat(n?a.x:a),u=parseFloat(n?a.y:0),c=_bigNum$1,p=0,b=e.length,P,N;b--;)n?(P=e[b].x-l,N=e[b].y-u,P=P*P+N*N):P=Math.abs(e[b]-l),P<c&&(c=P,p=b);return p=!s||c<=s?e[p]:a,n||p===a||_isNumber$1(a)?p:p+getUnit(a)}:_roundModifier(e))},random=function i(e,t,r,s){return _conditionalReturn(_isArray(e)?!t:r===!0?!!(r=0):!s,function(){return _isArray(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(s=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*s)/s})},pipe=function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduce(function(n,a){return a(n)},s)}},unitize=function i(e,t){return function(r){return e(parseFloat(r))+(t||getUnit(r))}},normalize=function i(e,t,r){return mapRange(e,t,0,1,r)},_wrapArray=function i(e,t,r){return _conditionalReturn(r,function(s){return e[~~t(s)]})},wrap=function i(e,t,r){var s=t-e;return _isArray(e)?_wrapArray(e,i(0,e.length),t):_conditionalReturn(r,function(n){return(s+(n-e)%s)%s+e})},wrapYoyo=function i(e,t,r){var s=t-e,n=s*2;return _isArray(e)?_wrapArray(e,i(0,e.length-1),t):_conditionalReturn(r,function(a){return a=(n+(a-e)%n)%n||0,e+(a>s?n-a:a)})},_replaceRandom=function i(e){for(var t=0,r="",s,n,a,l;~(s=e.indexOf("random(",t));)a=e.indexOf(")",s),l=e.charAt(s+7)==="[",n=e.substr(s+7,a-s-7).match(l?_delimitedValueExp:_strictNumExp),r+=e.substr(t,s-t)+random(l?n:+n[0],l?0:+n[1],+n[2]||1e-5),t=a+1;return r+e.substr(t,e.length-t)},mapRange=function i(e,t,r,s,n){var a=t-e,l=s-r;return _conditionalReturn(n,function(u){return r+((u-e)/a*l||0)})},interpolate=function i(e,t,r,s){var n=isNaN(e+t)?0:function(N){return(1-N)*e+N*t};if(!n){var a=_isString$1(e),l={},u,c,p,b,P;if(r===!0&&(s=1)&&(r=null),a)e={p:e},t={p:t};else if(_isArray(e)&&!_isArray(t)){for(p=[],b=e.length,P=b-2,c=1;c<b;c++)p.push(i(e[c-1],e[c]));b--,n=function(de){de*=b;var me=Math.min(P,~~de);return p[me](de-me)},r=t}else s||(e=_merge(_isArray(e)?[]:{},e));if(!p){for(u in t)_addPropTween.call(l,e,u,"get",t[u]);n=function(de){return _renderPropTweens(de,l)||(a?e.p:e)}}}return _conditionalReturn(r,n)},_getLabelInDirection=function i(e,t,r){var s=e.labels,n=_bigNum$1,a,l,u;for(a in s)l=s[a]-t,l<0==!!r&&l&&n>(l=Math.abs(l))&&(u=a,n=l);return u},_callback$1=function i(e,t,r){var s=e.vars,n=s[t],a=_context$2,l=e._ctx,u,c,p;if(n)return u=s[t+"Params"],c=s.callbackScope||e,r&&_lazyTweens.length&&_lazyRender(),l&&(_context$2=l),p=u?n.apply(c,u):n.call(c),_context$2=a,p},_interrupt=function i(e){return _removeFromParent(e),e.scrollTrigger&&e.scrollTrigger.kill(!!_reverting$1),e.progress()<1&&_callback$1(e,"onInterrupt"),e},_quickTween,_registerPluginQueue=[],_createPlugin=function i(e){if(e)if(e=!e.name&&e.default||e,_windowExists$2()||e.headless){var t=e.name,r=_isFunction$1(e),s=t&&!r&&e.init?function(){this._props=[]}:e,n={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},a={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),e!==s){if(_plugins[t])return;_setDefaults$1(s,_setDefaults$1(_copyExcluding(e,n),a)),_merge(s.prototype,_merge(n,_copyExcluding(e,a))),_plugins[s.prop=t]=s,e.targetTest&&(_harnessPlugins.push(s),_reservedProps[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}_addGlobal(t,s),e.register&&e.register(gsap$2,s,PropTween)}else _registerPluginQueue.push(e)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function i(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*_255+.5|0},splitColor=function i(e,t,r){var s=e?_isNumber$1(e)?[e>>16,e>>8&_255,e&_255]:0:_colorLookup.black,n,a,l,u,c,p,b,P,N,de;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),_colorLookup[e])s=_colorLookup[e];else if(e.charAt(0)==="#"){if(e.length<6&&(n=e.charAt(1),a=e.charAt(2),l=e.charAt(3),e="#"+n+n+a+a+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&_255,s&_255,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&_255,e&_255]}else if(e.substr(0,3)==="hsl"){if(s=de=e.match(_strictNumExp),!t)u=+s[0]%360/360,c=+s[1]/100,p=+s[2]/100,a=p<=.5?p*(c+1):p+c-p*c,n=p*2-a,s.length>3&&(s[3]*=1),s[0]=_hue(u+1/3,n,a),s[1]=_hue(u,n,a),s[2]=_hue(u-1/3,n,a);else if(~e.indexOf("="))return s=e.match(_numExp),r&&s.length<4&&(s[3]=1),s}else s=e.match(_strictNumExp)||_colorLookup.transparent;s=s.map(Number)}return t&&!de&&(n=s[0]/_255,a=s[1]/_255,l=s[2]/_255,b=Math.max(n,a,l),P=Math.min(n,a,l),p=(b+P)/2,b===P?u=c=0:(N=b-P,c=p>.5?N/(2-b-P):N/(b+P),u=b===n?(a-l)/N+(a<l?6:0):b===a?(l-n)/N+2:(n-a)/N+4,u*=60),s[0]=~~(u+.5),s[1]=~~(c*100+.5),s[2]=~~(p*100+.5)),r&&s.length<4&&(s[3]=1),s},_colorOrderData=function i(e){var t=[],r=[],s=-1;return e.split(_colorExp).forEach(function(n){var a=n.match(_numWithUnitExp)||[];t.push.apply(t,a),r.push(s+=a.length+1)}),t.c=r,t},_formatColors=function i(e,t,r){var s="",n=(e+s).match(_colorExp),a=t?"hsla(":"rgba(",l=0,u,c,p,b;if(!n)return e;if(n=n.map(function(P){return(P=splitColor(P,t,1))&&a+(t?P[0]+","+P[1]+"%,"+P[2]+"%,"+P[3]:P.join(","))+")"}),r&&(p=_colorOrderData(e),u=r.c,u.join(s)!==p.c.join(s)))for(c=e.replace(_colorExp,"1").split(_numWithUnitExp),b=c.length-1;l<b;l++)s+=c[l]+(~u.indexOf(l)?n.shift()||a+"0,0,0,0)":(p.length?p:n.length?n:r).shift());if(!c)for(c=e.split(_colorExp),b=c.length-1;l<b;l++)s+=c[l]+n[l];return s+c[b]},_colorExp=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in _colorLookup)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function i(e){var t=e.join(" "),r;if(_colorExp.lastIndex=0,_colorExp.test(t))return r=_hslExp.test(t),e[1]=_formatColors(e[1],r),e[0]=_formatColors(e[0],r,_colorOrderData(e[1])),!0},_tickerActive,_ticker=function(){var i=Date.now,e=500,t=33,r=i(),s=r,n=1e3/240,a=n,l=[],u,c,p,b,P,N,de=function me(Ye){var Le=i()-s,tt=Ye===!0,Be,nt,ft,mt;if((Le>e||Le<0)&&(r+=Le-t),s+=Le,ft=s-r,Be=ft-a,(Be>0||tt)&&(mt=++b.frame,P=ft-b.time*1e3,b.time=ft=ft/1e3,a+=Be+(Be>=n?4:n-Be),nt=1),tt||(u=c(me)),nt)for(N=0;N<l.length;N++)l[N](ft,P,mt,Ye)};return b={time:0,frame:0,tick:function(){de(!0)},deltaRatio:function(Ye){return P/(1e3/(Ye||60))},wake:function(){_coreReady&&(!_coreInitted$2&&_windowExists$2()&&(_win$3=_coreInitted$2=window,_doc$3=_win$3.document||{},_globals.gsap=gsap$2,(_win$3.gsapVersions||(_win$3.gsapVersions=[])).push(gsap$2.version),_install(_installScope||_win$3.GreenSockGlobals||!_win$3.gsap&&_win$3||{}),_registerPluginQueue.forEach(_createPlugin)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&b.sleep(),c=p||function(Ye){return setTimeout(Ye,a-b.time*1e3+1|0)},_tickerActive=1,de(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(u),_tickerActive=0,c=_emptyFunc},lagSmoothing:function(Ye,Le){e=Ye||1/0,t=Math.min(Le||33,e)},fps:function(Ye){n=1e3/(Ye||240),a=b.time*1e3+n},add:function(Ye,Le,tt){var Be=Le?function(nt,ft,mt,ht){Ye(nt,ft,mt,ht),b.remove(Be)}:Ye;return b.remove(Ye),l[tt?"unshift":"push"](Be),_wake(),Be},remove:function(Ye,Le){~(Le=l.indexOf(Ye))&&l.splice(Le,1)&&N>=Le&&N--},_listeners:l},b}(),_wake=function i(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function i(e){for(var t={},r=e.substr(1,e.length-3).split(":"),s=r[0],n=1,a=r.length,l,u,c;n<a;n++)u=r[n],l=n!==a-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),t[s]=isNaN(c)?c.replace(_quotesExp,"").trim():+c,s=u.substr(l+1).trim();return t},_valueInParentheses=function i(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<r?e.indexOf(")",r+1):r)},_configEaseFromString=function i(e){var t=(e+"").split("("),r=_easeMap[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[_parseObjectInString(t[1])]:_valueInParentheses(e).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(e)?_easeMap._CE("",e):r},_invertEase=function i(e){return function(t){return 1-e(1-t)}},_propagateYoyoEase=function i(e,t){for(var r=e._first,s;r;)r instanceof Timeline?i(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?i(r.timeline,t):(s=r._ease,r._ease=r._yEase,r._yEase=s,r._yoyo=t)),r=r._next},_parseEase=function i(e,t){return e&&(_isFunction$1(e)?e:_easeMap[e]||_configEaseFromString(e))||t},_insertEase=function i(e,t,r,s){r===void 0&&(r=function(u){return 1-t(1-u)}),s===void 0&&(s=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var n={easeIn:t,easeOut:r,easeInOut:s},a;return _forEachName(e,function(l){_easeMap[l]=_globals[l]=n,_easeMap[a=l.toLowerCase()]=r;for(var u in n)_easeMap[a+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=_easeMap[l+"."+u]=n[u]}),n},_easeInOutFromOut=function i(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},_configElastic=function i(e,t,r){var s=t>=1?t:1,n=(r||(e?.3:.45))/(t<1?t:1),a=n/_2PI*(Math.asin(1/s)||0),l=function(p){return p===1?1:s*Math.pow(2,-10*p)*_sin((p-a)*n)+1},u=e==="out"?l:e==="in"?function(c){return 1-l(1-c)}:_easeInOutFromOut(l);return n=_2PI/n,u.config=function(c,p){return i(e,c,p)},u},_configBack=function i(e,t){t===void 0&&(t=1.70158);var r=function(a){return a?--a*a*((t+1)*a+t)+1:0},s=e==="out"?r:e==="in"?function(n){return 1-r(1-n)}:_easeInOutFromOut(r);return s.config=function(n){return i(e,n)},s};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;_insertEase(i+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(i,e){var t=1/e,r=2*t,s=2.5*t,n=function(l){return l<t?i*l*l:l<r?i*Math.pow(l-1.5/e,2)+.75:l<s?i*(l-=2.25/e)*l+.9375:i*Math.pow(l-2.625/e,2)+.984375};_insertEase("Bounce",function(a){return 1-n(1-a)},n)})(7.5625,2.75);_insertEase("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});_insertEase("Circ",function(i){return-(_sqrt(1-i*i)-1)});_insertEase("Sine",function(i){return i===1?1:-_cos(i*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function i(e,t){e===void 0&&(e=1);var r=1/e,s=e+(t?0:1),n=t?1:0,a=1-_tinyNum;return function(l){return((s*_clamp$1(0,a,l)|0)+n)*r}}};_defaults$1.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return _callbackNames+=i+","+i+"Params,"});var GSCache=function i(e,t){this.id=_gsID++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:_getProperty,this.set=t?t.getSetter:_getSetter},Animation=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,_setDuration(this,+t.duration,1,1),this.data=t.data,_context$2&&(this._ctx=_context$2,_context$2.data.push(this)),_tickerActive||_ticker.wake()}var e=i.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,s){if(_wake(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(_alignPlayhead(this,r),!n._dp||n.parent||_postAddChecks(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===_tinyNum||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),_lazySafeRender(this,r,s)),this},e.time=function(r,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(r?this._dur:0),s):this._time},e.totalProgress=function(r,s){return arguments.length?this.totalTime(this.totalDuration()*r,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+_elapsedCycleDuration(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,s){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*n,s):this._repeat?_animationCycle(this._tTime,n)+1:1},e.timeScale=function(r,s){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===r)return this;var n=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-_tinyNum?0:this._rts,this.totalTime(_clamp$1(-Math.abs(this._delay),this.totalDuration(),n),s!==!1),_setEnd(this),_recacheAncestors(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&_addToTimeline(s,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(_isNotFalse(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var s=this.parent||this._dp;return s?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(s.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=_revertConfig);var s=_reverting$1;return _reverting$1=r,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),_reverting$1=s,this},e.globalTime=function(r){for(var s=this,n=arguments.length?r:s.rawTime();s;)n=s._start+n/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(r):n},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var s=this._time;return this._rDelay=r,_onUpdateTotalDuration(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,s){return this.totalTime(_parsePosition$1(this,r),_isNotFalse(s))},e.restart=function(r,s){return this.play().totalTime(r?-this._delay:0,_isNotFalse(s)),this._dur||(this._zTime=-_tinyNum),this},e.play=function(r,s){return r!=null&&this.seek(r,s),this.reversed(!1).paused(!1)},e.reverse=function(r,s){return r!=null&&this.seek(r||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(r,s){return r!=null&&this.seek(r,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-_tinyNum:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},e.isActive=function(){var r=this.parent||this._dp,s=this._start,n;return!!(!r||this._ts&&this._initted&&r.isActive()&&(n=r.rawTime(!0))>=s&&n<this.endTime(!0)-_tinyNum)},e.eventCallback=function(r,s,n){var a=this.vars;return arguments.length>1?(s?(a[r]=s,n&&(a[r+"Params"]=n),r==="onUpdate"&&(this._onUpdate=s)):delete a[r],this):a[r]},e.then=function(r){var s=this;return new Promise(function(n){var a=_isFunction$1(r)?r:_passThrough$1,l=function(){var c=s.then;s.then=null,_isFunction$1(a)&&(a=a(s))&&(a.then||a===s)&&(s.then=c),n(a),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){_interrupt(this)},i}();_setDefaults$1(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(i){_inheritsLoose(e,i);function e(r,s){var n;return r===void 0&&(r={}),n=i.call(this,r)||this,n.labels={},n.smoothChildTiming=!!r.smoothChildTiming,n.autoRemoveChildren=!!r.autoRemoveChildren,n._sort=_isNotFalse(r.sortChildren),_globalTimeline&&_addToTimeline(r.parent||_globalTimeline,_assertThisInitialized(n),s),r.reversed&&n.reverse(),r.paused&&n.paused(!0),r.scrollTrigger&&_scrollTrigger(_assertThisInitialized(n),r.scrollTrigger),n}var t=e.prototype;return t.to=function(s,n,a){return _createTweenType(0,arguments,this),this},t.from=function(s,n,a){return _createTweenType(1,arguments,this),this},t.fromTo=function(s,n,a,l){return _createTweenType(2,arguments,this),this},t.set=function(s,n,a){return n.duration=0,n.parent=this,_inheritDefaults(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new Tween(s,n,_parsePosition$1(this,a),1),this},t.call=function(s,n,a){return _addToTimeline(this,Tween.delayedCall(0,s,n),a)},t.staggerTo=function(s,n,a,l,u,c,p){return a.duration=n,a.stagger=a.stagger||l,a.onComplete=c,a.onCompleteParams=p,a.parent=this,new Tween(s,a,_parsePosition$1(this,u)),this},t.staggerFrom=function(s,n,a,l,u,c,p){return a.runBackwards=1,_inheritDefaults(a).immediateRender=_isNotFalse(a.immediateRender),this.staggerTo(s,n,a,l,u,c,p)},t.staggerFromTo=function(s,n,a,l,u,c,p,b){return l.startAt=a,_inheritDefaults(l).immediateRender=_isNotFalse(l.immediateRender),this.staggerTo(s,n,l,u,c,p,b)},t.render=function(s,n,a){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,p=s<=0?0:_roundPrecise(s),b=this._zTime<0!=s<0&&(this._initted||!c),P,N,de,me,Ye,Le,tt,Be,nt,ft,mt,ht;if(this!==_globalTimeline&&p>u&&s>=0&&(p=u),p!==this._tTime||a||b){if(l!==this._time&&c&&(p+=this._time-l,s+=this._time-l),P=p,nt=this._start,Be=this._ts,Le=!Be,b&&(c||(l=this._zTime),(s||!n)&&(this._zTime=s)),this._repeat){if(mt=this._yoyo,Ye=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(Ye*100+s,n,a);if(P=_roundPrecise(p%Ye),p===u?(me=this._repeat,P=c):(ft=_roundPrecise(p/Ye),me=~~ft,me&&me===ft&&(P=c,me--),P>c&&(P=c)),ft=_animationCycle(this._tTime,Ye),!l&&this._tTime&&ft!==me&&this._tTime-ft*Ye-this._dur<=0&&(ft=me),mt&&me&1&&(P=c-P,ht=1),me!==ft&&!this._lock){var Et=mt&&ft&1,St=Et===(mt&&me&1);if(me<ft&&(Et=!Et),l=Et?0:p%c?c:p,this._lock=1,this.render(l||(ht?0:_roundPrecise(me*Ye)),n,!c)._lock=0,this._tTime=p,!n&&this.parent&&_callback$1(this,"onRepeat"),this.vars.repeatRefresh&&!ht&&(this.invalidate()._lock=1),l&&l!==this._time||Le!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,St&&(this._lock=2,l=Et?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!ht&&this.invalidate()),this._lock=0,!this._ts&&!Le)return this;_propagateYoyoEase(this,ht)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(tt=_findNextPauseTween(this,_roundPrecise(l),_roundPrecise(P)),tt&&(p-=P-(P=tt._start))),this._tTime=p,this._time=P,this._act=!Be,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&p&&!n&&!ft&&(_callback$1(this,"onStart"),this._tTime!==p))return this;if(P>=l&&s>=0)for(N=this._first;N;){if(de=N._next,(N._act||P>=N._start)&&N._ts&&tt!==N){if(N.parent!==this)return this.render(s,n,a);if(N.render(N._ts>0?(P-N._start)*N._ts:(N._dirty?N.totalDuration():N._tDur)+(P-N._start)*N._ts,n,a),P!==this._time||!this._ts&&!Le){tt=0,de&&(p+=this._zTime=-_tinyNum);break}}N=de}else{N=this._last;for(var bt=s<0?s:P;N;){if(de=N._prev,(N._act||bt<=N._end)&&N._ts&&tt!==N){if(N.parent!==this)return this.render(s,n,a);if(N.render(N._ts>0?(bt-N._start)*N._ts:(N._dirty?N.totalDuration():N._tDur)+(bt-N._start)*N._ts,n,a||_reverting$1&&_isRevertWorthy(N)),P!==this._time||!this._ts&&!Le){tt=0,de&&(p+=this._zTime=bt?-_tinyNum:_tinyNum);break}}N=de}}if(tt&&!n&&(this.pause(),tt.render(P>=l?0:-_tinyNum)._zTime=P>=l?1:-1,this._ts))return this._start=nt,_setEnd(this),this.render(s,n,a);this._onUpdate&&!n&&_callback$1(this,"onUpdate",!0),(p===u&&this._tTime>=this.totalDuration()||!p&&l)&&(nt===this._start||Math.abs(Be)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(p===u&&this._ts>0||!p&&this._ts<0)&&_removeFromParent(this,1),!n&&!(s<0&&!l)&&(p||l||!u)&&(_callback$1(this,p===u&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,n){var a=this;if(_isNumber$1(n)||(n=_parsePosition$1(this,n,s)),!(s instanceof Animation)){if(_isArray(s))return s.forEach(function(l){return a.add(l,n)}),this;if(_isString$1(s))return this.addLabel(s,n);if(_isFunction$1(s))s=Tween.delayedCall(0,s);else return this}return this!==s?_addToTimeline(this,s,n):this},t.getChildren=function(s,n,a,l){s===void 0&&(s=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),l===void 0&&(l=-_bigNum$1);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Tween?n&&u.push(c):(a&&u.push(c),s&&u.push.apply(u,c.getChildren(!0,n,a)))),c=c._next;return u},t.getById=function(s){for(var n=this.getChildren(1,1,1),a=n.length;a--;)if(n[a].vars.id===s)return n[a]},t.remove=function(s){return _isString$1(s)?this.removeLabel(s):_isFunction$1(s)?this.killTweensOf(s):(s.parent===this&&_removeLinkedListItem(this,s),s===this._recent&&(this._recent=this._last),_uncache(this))},t.totalTime=function(s,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),i.prototype.totalTime.call(this,s,n),this._forcing=0,this):this._tTime},t.addLabel=function(s,n){return this.labels[s]=_parsePosition$1(this,n),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,n,a){var l=Tween.delayedCall(0,n||_emptyFunc,a);return l.data="isPause",this._hasPause=1,_addToTimeline(this,l,_parsePosition$1(this,s))},t.removePause=function(s){var n=this._first;for(s=_parsePosition$1(this,s);n;)n._start===s&&n.data==="isPause"&&_removeFromParent(n),n=n._next},t.killTweensOf=function(s,n,a){for(var l=this.getTweensOf(s,a),u=l.length;u--;)_overwritingTween!==l[u]&&l[u].kill(s,n);return this},t.getTweensOf=function(s,n){for(var a=[],l=toArray(s),u=this._first,c=_isNumber$1(n),p;u;)u instanceof Tween?_arrayContainsAny(u._targets,l)&&(c?(!_overwritingTween||u._initted&&u._ts)&&u.globalTime(0)<=n&&u.globalTime(u.totalDuration())>n:!n||u.isActive())&&a.push(u):(p=u.getTweensOf(l,n)).length&&a.push.apply(a,p),u=u._next;return a},t.tweenTo=function(s,n){n=n||{};var a=this,l=_parsePosition$1(a,s),u=n,c=u.startAt,p=u.onStart,b=u.onStartParams,P=u.immediateRender,N,de=Tween.to(a,_setDefaults$1({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:n.duration||Math.abs((l-(c&&"time"in c?c.time:a._time))/a.timeScale())||_tinyNum,onStart:function(){if(a.pause(),!N){var Ye=n.duration||Math.abs((l-(c&&"time"in c?c.time:a._time))/a.timeScale());de._dur!==Ye&&_setDuration(de,Ye,0,1).render(de._time,!0,!0),N=1}p&&p.apply(de,b||[])}},n));return P?de.render(0):de},t.tweenFromTo=function(s,n,a){return this.tweenTo(n,_setDefaults$1({startAt:{time:_parsePosition$1(this,s)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),_getLabelInDirection(this,_parsePosition$1(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),_getLabelInDirection(this,_parsePosition$1(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+_tinyNum)},t.shiftChildren=function(s,n,a){a===void 0&&(a=0);for(var l=this._first,u=this.labels,c;l;)l._start>=a&&(l._start+=s,l._end+=s),l=l._next;if(n)for(c in u)u[c]>=a&&(u[c]+=s);return _uncache(this)},t.invalidate=function(s){var n=this._first;for(this._lock=0;n;)n.invalidate(s),n=n._next;return i.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var n=this._first,a;n;)a=n._next,this.remove(n),n=a;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),_uncache(this)},t.totalDuration=function(s){var n=0,a=this,l=a._last,u=_bigNum$1,c,p,b;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-s:s));if(a._dirty){for(b=a.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),p=l._start,p>u&&a._sort&&l._ts&&!a._lock?(a._lock=1,_addToTimeline(a,l,p-l._delay,1)._lock=0):u=p,p<0&&l._ts&&(n-=p,(!b&&!a._dp||b&&b.smoothChildTiming)&&(a._start+=p/a._ts,a._time-=p,a._tTime-=p),a.shiftChildren(-p,!1,-1/0),u=0),l._end>n&&l._ts&&(n=l._end),l=c;_setDuration(a,a===_globalTimeline&&a._time>n?a._time:n,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(s){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(s,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var n=_globalTimeline._first;if((!n||!n._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||_ticker.sleep()}}},e}(Animation);_setDefaults$1(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function i(e,t,r,s,n,a,l){var u=new PropTween(this._pt,e,t,0,1,_renderComplexString,null,n),c=0,p=0,b,P,N,de,me,Ye,Le,tt;for(u.b=r,u.e=s,r+="",s+="",(Le=~s.indexOf("random("))&&(s=_replaceRandom(s)),a&&(tt=[r,s],a(tt,e,t),r=tt[0],s=tt[1]),P=r.match(_complexStringNumExp)||[];b=_complexStringNumExp.exec(s);)de=b[0],me=s.substring(c,b.index),N?N=(N+1)%5:me.substr(-5)==="rgba("&&(N=1),de!==P[p++]&&(Ye=parseFloat(P[p-1])||0,u._pt={_next:u._pt,p:me||p===1?me:",",s:Ye,c:de.charAt(1)==="="?_parseRelative(Ye,de)-Ye:parseFloat(de)-Ye,m:N&&N<4?Math.round:0},c=_complexStringNumExp.lastIndex);return u.c=c<s.length?s.substring(c,s.length):"",u.fp=l,(_relExp.test(s)||Le)&&(u.e=0),this._pt=u,u},_addPropTween=function i(e,t,r,s,n,a,l,u,c,p){_isFunction$1(s)&&(s=s(n||0,e,a));var b=e[t],P=r!=="get"?r:_isFunction$1(b)?c?e[t.indexOf("set")||!_isFunction$1(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():b,N=_isFunction$1(b)?c?_setterFuncWithParam:_setterFunc:_setterPlain,de;if(_isString$1(s)&&(~s.indexOf("random(")&&(s=_replaceRandom(s)),s.charAt(1)==="="&&(de=_parseRelative(P,s)+(getUnit(P)||0),(de||de===0)&&(s=de))),!p||P!==s||_forceAllPropTweens)return!isNaN(P*s)&&s!==""?(de=new PropTween(this._pt,e,t,+P||0,s-(P||0),typeof b=="boolean"?_renderBoolean:_renderPlain,0,N),c&&(de.fp=c),l&&de.modifier(l,this,e),this._pt=de):(!b&&!(t in e)&&_missingPlugin(t,s),_addComplexStringPropTween.call(this,e,t,P,s,N,u||_config.stringFilter,c))},_processVars=function i(e,t,r,s,n){if(_isFunction$1(e)&&(e=_parseFuncOrString(e,n,t,r,s)),!_isObject$1(e)||e.style&&e.nodeType||_isArray(e)||_isTypedArray(e))return _isString$1(e)?_parseFuncOrString(e,n,t,r,s):e;var a={},l;for(l in e)a[l]=_parseFuncOrString(e[l],n,t,r,s);return a},_checkPlugin=function i(e,t,r,s,n,a){var l,u,c,p;if(_plugins[e]&&(l=new _plugins[e]).init(n,l.rawVars?t[e]:_processVars(t[e],s,n,a,r),r,s,a)!==!1&&(r._pt=u=new PropTween(r._pt,n,e,0,1,l.render,l,0,l.priority),r!==_quickTween))for(c=r._ptLookup[r._targets.indexOf(n)],p=l._props.length;p--;)c[l._props[p]]=u;return l},_overwritingTween,_forceAllPropTweens,_initTween=function i(e,t,r){var s=e.vars,n=s.ease,a=s.startAt,l=s.immediateRender,u=s.lazy,c=s.onUpdate,p=s.runBackwards,b=s.yoyoEase,P=s.keyframes,N=s.autoRevert,de=e._dur,me=e._startAt,Ye=e._targets,Le=e.parent,tt=Le&&Le.data==="nested"?Le.vars.targets:Ye,Be=e._overwrite==="auto"&&!_suppressOverwrites$1,nt=e.timeline,ft,mt,ht,Et,St,bt,Pt,Rt,Dt,kt,Lt,vt,xt;if(nt&&(!P||!n)&&(n="none"),e._ease=_parseEase(n,_defaults$1.ease),e._yEase=b?_invertEase(_parseEase(b===!0?n:b,_defaults$1.ease)):0,b&&e._yoyo&&!e._repeat&&(b=e._yEase,e._yEase=e._ease,e._ease=b),e._from=!nt&&!!s.runBackwards,!nt||P&&!s.stagger){if(Rt=Ye[0]?_getCache(Ye[0]).harness:0,vt=Rt&&s[Rt.prop],ft=_copyExcluding(s,_reservedProps),me&&(me._zTime<0&&me.progress(1),t<0&&p&&l&&!N?me.render(-1,!0):me.revert(p&&de?_revertConfigNoKill:_startAtRevertConfig),me._lazy=0),a){if(_removeFromParent(e._startAt=Tween.set(Ye,_setDefaults$1({data:"isStart",overwrite:!1,parent:Le,immediateRender:!0,lazy:!me&&_isNotFalse(u),startAt:null,delay:0,onUpdate:c&&function(){return _callback$1(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_reverting$1||!l&&!N)&&e._startAt.revert(_revertConfigNoKill),l&&de&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(p&&de&&!me){if(t&&(l=!1),ht=_setDefaults$1({overwrite:!1,data:"isFromStart",lazy:l&&!me&&_isNotFalse(u),immediateRender:l,stagger:0,parent:Le},ft),vt&&(ht[Rt.prop]=vt),_removeFromParent(e._startAt=Tween.set(Ye,ht)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_reverting$1?e._startAt.revert(_revertConfigNoKill):e._startAt.render(-1,!0)),e._zTime=t,!l)i(e._startAt,_tinyNum,_tinyNum);else if(!t)return}for(e._pt=e._ptCache=0,u=de&&_isNotFalse(u)||u&&!de,mt=0;mt<Ye.length;mt++){if(St=Ye[mt],Pt=St._gsap||_harness(Ye)[mt]._gsap,e._ptLookup[mt]=kt={},_lazyLookup[Pt.id]&&_lazyTweens.length&&_lazyRender(),Lt=tt===Ye?mt:tt.indexOf(St),Rt&&(Dt=new Rt).init(St,vt||ft,e,Lt,tt)!==!1&&(e._pt=Et=new PropTween(e._pt,St,Dt.name,0,1,Dt.render,Dt,0,Dt.priority),Dt._props.forEach(function(gt){kt[gt]=Et}),Dt.priority&&(bt=1)),!Rt||vt)for(ht in ft)_plugins[ht]&&(Dt=_checkPlugin(ht,ft,e,Lt,St,tt))?Dt.priority&&(bt=1):kt[ht]=Et=_addPropTween.call(e,St,ht,"get",ft[ht],Lt,tt,0,s.stringFilter);e._op&&e._op[mt]&&e.kill(St,e._op[mt]),Be&&e._pt&&(_overwritingTween=e,_globalTimeline.killTweensOf(St,kt,e.globalTime(t)),xt=!e.parent,_overwritingTween=0),e._pt&&u&&(_lazyLookup[Pt.id]=1)}bt&&_sortPropTweensByPriority(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!xt,P&&t<=0&&nt.render(_bigNum$1,!0,!0)},_updatePropTweens=function i(e,t,r,s,n,a,l,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],p,b,P,N;if(!c)for(c=e._ptCache[t]=[],P=e._ptLookup,N=e._targets.length;N--;){if(p=P[N][t],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==t&&p.fp!==t;)p=p._next;if(!p)return _forceAllPropTweens=1,e.vars[t]="+=0",_initTween(e,l),_forceAllPropTweens=0,u?_warn(t+" not eligible for reset"):1;c.push(p)}for(N=c.length;N--;)b=c[N],p=b._pt||b,p.s=(s||s===0)&&!n?s:p.s+(s||0)+a*p.c,p.c=r-p.s,b.e&&(b.e=_round$1(r)+getUnit(b.e)),b.b&&(b.b=p.s+getUnit(b.b))},_addAliasesToVars=function i(e,t){var r=e[0]?_getCache(e[0]).harness:0,s=r&&r.aliases,n,a,l,u;if(!s)return t;n=_merge({},t);for(a in s)if(a in n)for(u=s[a].split(","),l=u.length;l--;)n[u[l]]=n[a];return n},_parseKeyframe=function i(e,t,r,s){var n=t.ease||s||"power1.inOut",a,l;if(_isArray(t))l=r[e]||(r[e]=[]),t.forEach(function(u,c){return l.push({t:c/(t.length-1)*100,v:u,e:n})});else for(a in t)l=r[a]||(r[a]=[]),a==="ease"||l.push({t:parseFloat(e),v:t[a],e:n})},_parseFuncOrString=function i(e,t,r,s,n){return _isFunction$1(e)?e.call(t,r,s,n):_isString$1(e)&&~e.indexOf("random(")?_replaceRandom(e):e},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return _staggerPropsToSkip[i]=1});var Tween=function(i){_inheritsLoose(e,i);function e(r,s,n,a){var l;typeof s=="number"&&(n.duration=s,s=n,n=null),l=i.call(this,a?s:_inheritDefaults(s))||this;var u=l.vars,c=u.duration,p=u.delay,b=u.immediateRender,P=u.stagger,N=u.overwrite,de=u.keyframes,me=u.defaults,Ye=u.scrollTrigger,Le=u.yoyoEase,tt=s.parent||_globalTimeline,Be=(_isArray(r)||_isTypedArray(r)?_isNumber$1(r[0]):"length"in s)?[r]:toArray(r),nt,ft,mt,ht,Et,St,bt,Pt;if(l._targets=Be.length?_harness(Be):_warn("GSAP target "+r+" not found. https://gsap.com",!_config.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=N,de||P||_isFuncOrString(c)||_isFuncOrString(p)){if(s=l.vars,nt=l.timeline=new Timeline({data:"nested",defaults:me||{},targets:tt&&tt.data==="nested"?tt.vars.targets:Be}),nt.kill(),nt.parent=nt._dp=_assertThisInitialized(l),nt._start=0,P||_isFuncOrString(c)||_isFuncOrString(p)){if(ht=Be.length,bt=P&&distribute(P),_isObject$1(P))for(Et in P)~_staggerTweenProps.indexOf(Et)&&(Pt||(Pt={}),Pt[Et]=P[Et]);for(ft=0;ft<ht;ft++)mt=_copyExcluding(s,_staggerPropsToSkip),mt.stagger=0,Le&&(mt.yoyoEase=Le),Pt&&_merge(mt,Pt),St=Be[ft],mt.duration=+_parseFuncOrString(c,_assertThisInitialized(l),ft,St,Be),mt.delay=(+_parseFuncOrString(p,_assertThisInitialized(l),ft,St,Be)||0)-l._delay,!P&&ht===1&&mt.delay&&(l._delay=p=mt.delay,l._start+=p,mt.delay=0),nt.to(St,mt,bt?bt(ft,St,Be):0),nt._ease=_easeMap.none;nt.duration()?c=p=0:l.timeline=0}else if(de){_inheritDefaults(_setDefaults$1(nt.vars.defaults,{ease:"none"})),nt._ease=_parseEase(de.ease||s.ease||"none");var Rt=0,Dt,kt,Lt;if(_isArray(de))de.forEach(function(vt){return nt.to(Be,vt,">")}),nt.duration();else{mt={};for(Et in de)Et==="ease"||Et==="easeEach"||_parseKeyframe(Et,de[Et],mt,de.easeEach);for(Et in mt)for(Dt=mt[Et].sort(function(vt,xt){return vt.t-xt.t}),Rt=0,ft=0;ft<Dt.length;ft++)kt=Dt[ft],Lt={ease:kt.e,duration:(kt.t-(ft?Dt[ft-1].t:0))/100*c},Lt[Et]=kt.v,nt.to(Be,Lt,Rt),Rt+=Lt.duration;nt.duration()<c&&nt.to({},{duration:c-nt.duration()})}}c||l.duration(c=nt.duration())}else l.timeline=0;return N===!0&&!_suppressOverwrites$1&&(_overwritingTween=_assertThisInitialized(l),_globalTimeline.killTweensOf(Be),_overwritingTween=0),_addToTimeline(tt,_assertThisInitialized(l),n),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(b||!c&&!de&&l._start===_roundPrecise(tt._time)&&_isNotFalse(b)&&_hasNoPausedAncestors(_assertThisInitialized(l))&&tt.data!=="nested")&&(l._tTime=-_tinyNum,l.render(Math.max(0,-p)||0)),Ye&&_scrollTrigger(_assertThisInitialized(l),Ye),l}var t=e.prototype;return t.render=function(s,n,a){var l=this._time,u=this._tDur,c=this._dur,p=s<0,b=s>u-_tinyNum&&!p?u:s<_tinyNum?0:s,P,N,de,me,Ye,Le,tt,Be,nt;if(!c)_renderZeroDurationTween(this,s,n,a);else if(b!==this._tTime||!s||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(P=b,Be=this.timeline,this._repeat){if(me=c+this._rDelay,this._repeat<-1&&p)return this.totalTime(me*100+s,n,a);if(P=_roundPrecise(b%me),b===u?(de=this._repeat,P=c):(Ye=_roundPrecise(b/me),de=~~Ye,de&&de===Ye?(P=c,de--):P>c&&(P=c)),Le=this._yoyo&&de&1,Le&&(nt=this._yEase,P=c-P),Ye=_animationCycle(this._tTime,me),P===l&&!a&&this._initted&&de===Ye)return this._tTime=b,this;de!==Ye&&(Be&&this._yEase&&_propagateYoyoEase(Be,Le),this.vars.repeatRefresh&&!Le&&!this._lock&&P!==me&&this._initted&&(this._lock=a=1,this.render(_roundPrecise(me*de),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,p?s:P,a,n,b))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&de!==Ye))return this;if(c!==this._dur)return this.render(s,n,a)}if(this._tTime=b,this._time=P,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=tt=(nt||this._ease)(P/c),this._from&&(this.ratio=tt=1-tt),!l&&b&&!n&&!Ye&&(_callback$1(this,"onStart"),this._tTime!==b))return this;for(N=this._pt;N;)N.r(tt,N.d),N=N._next;Be&&Be.render(s<0?s:Be._dur*Be._ease(P/this._dur),n,a)||this._startAt&&(this._zTime=s),this._onUpdate&&!n&&(p&&_rewindStartAt(this,s,n,a),_callback$1(this,"onUpdate")),this._repeat&&de!==Ye&&this.vars.onRepeat&&!n&&this.parent&&_callback$1(this,"onRepeat"),(b===this._tDur||!b)&&this._tTime===b&&(p&&!this._onUpdate&&_rewindStartAt(this,s,!0,!0),(s||!c)&&(b===this._tDur&&this._ts>0||!b&&this._ts<0)&&_removeFromParent(this,1),!n&&!(p&&!l)&&(b||l||Le)&&(_callback$1(this,b===u?"onComplete":"onReverseComplete",!0),this._prom&&!(b<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),i.prototype.invalidate.call(this,s)},t.resetTo=function(s,n,a,l,u){_tickerActive||_ticker.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||_initTween(this,c),p=this._ease(c/this._dur),_updatePropTweens(this,s,n,a,l,p,c,u)?this.resetTo(s,n,a,l,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,n){if(n===void 0&&(n="all"),!s&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_reverting$1),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(s,n,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&a!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,u=s?toArray(s):l,c=this._ptLookup,p=this._pt,b,P,N,de,me,Ye,Le;if((!n||n==="all")&&_arraysMatch(l,u))return n==="all"&&(this._pt=0),_interrupt(this);for(b=this._op=this._op||[],n!=="all"&&(_isString$1(n)&&(me={},_forEachName(n,function(tt){return me[tt]=1}),n=me),n=_addAliasesToVars(l,n)),Le=l.length;Le--;)if(~u.indexOf(l[Le])){P=c[Le],n==="all"?(b[Le]=n,de=P,N={}):(N=b[Le]=b[Le]||{},de=n);for(me in de)Ye=P&&P[me],Ye&&((!("kill"in Ye.d)||Ye.d.kill(me)===!0)&&_removeLinkedListItem(this,Ye,"_pt"),delete P[me]),N!=="all"&&(N[me]=1)}return this._initted&&!this._pt&&p&&_interrupt(this),this},e.to=function(s,n){return new e(s,n,arguments[2])},e.from=function(s,n){return _createTweenType(1,arguments)},e.delayedCall=function(s,n,a,l){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:n,onReverseComplete:n,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},e.fromTo=function(s,n,a){return _createTweenType(2,arguments)},e.set=function(s,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(s,n)},e.killTweensOf=function(s,n,a){return _globalTimeline.killTweensOf(s,n,a)},e}(Animation);_setDefaults$1(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(i){Tween[i]=function(){var e=new Timeline,t=_slice.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var _setterPlain=function i(e,t,r){return e[t]=r},_setterFunc=function i(e,t,r){return e[t](r)},_setterFuncWithParam=function i(e,t,r,s){return e[t](s.fp,r)},_setterAttribute=function i(e,t,r){return e.setAttribute(t,r)},_getSetter=function i(e,t){return _isFunction$1(e[t])?_setterFunc:_isUndefined(e[t])&&e.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function i(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},_renderBoolean=function i(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},_renderComplexString=function i(e,t){var r=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+s,r=r._next;s+=t.c}t.set(t.t,t.p,s,t)},_renderPropTweens=function i(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},_addPluginModifier=function i(e,t,r,s){for(var n=this._pt,a;n;)a=n._next,n.p===s&&n.modifier(e,t,r),n=a},_killPropTweensOf=function i(e){for(var t=this._pt,r,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?_removeLinkedListItem(this,t,"_pt"):t.dep||(r=1),t=s;return!r},_setterWithModifier=function i(e,t,r,s){s.mSet(e,t,s.m.call(s.tween,r,s.mt),s)},_sortPropTweensByPriority=function i(e){for(var t=e._pt,r,s,n,a;t;){for(r=t._next,s=n;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:a)?t._prev._next=t:n=t,(t._next=s)?s._prev=t:a=t,t=r}e._pt=n},PropTween=function(){function i(t,r,s,n,a,l,u,c,p){this.t=r,this.s=n,this.c=a,this.p=s,this.r=l||_renderPlain,this.d=u||this,this.set=c||_setterPlain,this.pr=p||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(r,s,n){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=r,this.mt=n,this.tween=s},i}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return _reservedProps[i]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults$1,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners$1={},_emptyArray$1=[],_lastMediaTime=0,_contextID=0,_dispatch$1=function i(e){return(_listeners$1[e]||_emptyArray$1).map(function(t){return t()})},_onMediaChange=function i(){var e=Date.now(),t=[];e-_lastMediaTime>2&&(_dispatch$1("matchMediaInit"),_media.forEach(function(r){var s=r.queries,n=r.conditions,a,l,u,c;for(l in s)a=_win$3.matchMedia(s[l]).matches,a&&(u=1),a!==n[l]&&(n[l]=a,c=1);c&&(r.revert(),u&&t.push(r))}),_dispatch$1("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(s){return r.add(null,s)})}),_lastMediaTime=e,_dispatch$1("matchMedia"))},Context$1=function(){function i(t,r){this.selector=r&&selector(r),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,t&&this.add(t)}var e=i.prototype;return e.add=function(r,s,n){_isFunction$1(r)&&(n=s,s=r,r=_isFunction$1);var a=this,l=function(){var c=_context$2,p=a.selector,b;return c&&c!==a&&c.data.push(a),n&&(a.selector=selector(n)),_context$2=a,b=s.apply(a,arguments),_isFunction$1(b)&&a._r.push(b),_context$2=c,a.selector=p,a.isReverted=!1,b};return a.last=l,r===_isFunction$1?l(a,function(u){return a.add(null,u)}):r?a[r]=l:l},e.ignore=function(r){var s=_context$2;_context$2=null,r(this),_context$2=s},e.getTweens=function(){var r=[];return this.data.forEach(function(s){return s instanceof i?r.push.apply(r,s.getTweens()):s instanceof Tween&&!(s.parent&&s.parent.data==="nested")&&r.push(s)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,s){var n=this;if(r?function(){for(var l=n.getTweens(),u=n.data.length,c;u--;)c=n.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(p){return l.splice(l.indexOf(p),1)}));for(l.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,b){return b.g-p.g||-1/0}).forEach(function(p){return p.t.revert(r)}),u=n.data.length;u--;)c=n.data[u],c instanceof Timeline?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Tween)&&c.revert&&c.revert(r);n._r.forEach(function(p){return p(r,n)}),n.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var a=_media.length;a--;)_media[a].id===this.id&&_media.splice(a,1)},e.revert=function(r){this.kill(r||{})},i}(),MatchMedia=function(){function i(t){this.contexts=[],this.scope=t,_context$2&&_context$2.data.push(this)}var e=i.prototype;return e.add=function(r,s,n){_isObject$1(r)||(r={matches:r});var a=new Context$1(0,n||this.scope),l=a.conditions={},u,c,p;_context$2&&!a.selector&&(a.selector=_context$2.selector),this.contexts.push(a),s=a.add("onMatch",s),a.queries=r;for(c in r)c==="all"?p=1:(u=_win$3.matchMedia(r[c]),u&&(_media.indexOf(a)<0&&_media.push(a),(l[c]=u.matches)&&(p=1),u.addListener?u.addListener(_onMediaChange):u.addEventListener("change",_onMediaChange)));return p&&s(a,function(b){return a.add(null,b)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(s){return s.kill(r,!0)})},i}(),_gsap={registerPlugin:function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(s){return _createPlugin(s)})},timeline:function i(e){return new Timeline(e)},getTweensOf:function i(e,t){return _globalTimeline.getTweensOf(e,t)},getProperty:function i(e,t,r,s){_isString$1(e)&&(e=toArray(e)[0]);var n=_getCache(e||{}).get,a=r?_passThrough$1:_numericIfPossible;return r==="native"&&(r=""),e&&(t?a((_plugins[t]&&_plugins[t].get||n)(e,t,r,s)):function(l,u,c){return a((_plugins[l]&&_plugins[l].get||n)(e,l,u,c))})},quickSetter:function i(e,t,r){if(e=toArray(e),e.length>1){var s=e.map(function(p){return gsap$2.quickSetter(p,t,r)}),n=s.length;return function(p){for(var b=n;b--;)s[b](p)}}e=e[0]||{};var a=_plugins[t],l=_getCache(e),u=l.harness&&(l.harness.aliases||{})[t]||t,c=a?function(p){var b=new a;_quickTween._pt=0,b.init(e,r?p+r:p,_quickTween,0,[e]),b.render(1,b),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:l.set(e,u);return a?c:function(p){return c(e,u,r?p+r:p,l,1)}},quickTo:function i(e,t,r){var s,n=gsap$2.to(e,_setDefaults$1((s={},s[t]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),a=function(u,c,p){return n.resetTo(t,u,c,p)};return a.tween=n,a},isTweening:function i(e){return _globalTimeline.getTweensOf(e,!0).length>0},defaults:function i(e){return e&&e.ease&&(e.ease=_parseEase(e.ease,_defaults$1.ease)),_mergeDeep(_defaults$1,e||{})},config:function i(e){return _mergeDeep(_config,e||{})},registerEffect:function i(e){var t=e.name,r=e.effect,s=e.plugins,n=e.defaults,a=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!_plugins[l]&&!_globals[l]&&_warn(t+" effect requires "+l+" plugin.")}),_effects[t]=function(l,u,c){return r(toArray(l),_setDefaults$1(u||{},n),c)},a&&(Timeline.prototype[t]=function(l,u,c){return this.add(_effects[t](l,_isObject$1(u)?u:(c=u)&&{},this),c)})},registerEase:function i(e,t){_easeMap[e]=_parseEase(t)},parseEase:function i(e,t){return arguments.length?_parseEase(e,t):_easeMap},getById:function i(e){return _globalTimeline.getById(e)},exportRoot:function i(e,t){e===void 0&&(e={});var r=new Timeline(e),s,n;for(r.smoothChildTiming=_isNotFalse(e.smoothChildTiming),_globalTimeline.remove(r),r._dp=0,r._time=r._tTime=_globalTimeline._time,s=_globalTimeline._first;s;)n=s._next,(t||!(!s._dur&&s instanceof Tween&&s.vars.onComplete===s._targets[0]))&&_addToTimeline(r,s,s._start-s._delay),s=n;return _addToTimeline(_globalTimeline,r,0),r},context:function i(e,t){return e?new Context$1(e,t):_context$2},matchMedia:function i(e){return new MatchMedia(e)},matchMediaRefresh:function i(){return _media.forEach(function(e){var t=e.conditions,r,s;for(s in t)t[s]&&(t[s]=!1,r=1);r&&e.revert()})||_onMediaChange()},addEventListener:function i(e,t){var r=_listeners$1[e]||(_listeners$1[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function i(e,t){var r=_listeners$1[e],s=r&&r.indexOf(t);s>=0&&r.splice(s,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function i(){return _reverting$1},context:function i(e){return e&&_context$2&&(_context$2.data.push(e),e._ctx=_context$2),_context$2},suppressOverwrites:function i(e){return _suppressOverwrites$1=e}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return _gsap[i]=Tween[i]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function i(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},_addModifiers=function i(e,t){var r=e._targets,s,n,a;for(s in t)for(n=r.length;n--;)a=e._ptLookup[n][s],a&&(a=a.d)&&(a._pt&&(a=_getPluginPropTween(a,s)),a&&a.modifier&&a.modifier(t[s],e,r[n],s))},_buildModifierPlugin=function i(e,t){return{name:e,headless:1,rawVars:1,init:function(s,n,a){a._onInit=function(l){var u,c;if(_isString$1(n)&&(u={},_forEachName(n,function(p){return u[p]=1}),n=u),t){u={};for(c in n)u[c]=t(n[c]);n=u}_addModifiers(l,n)}}}},gsap$2=_gsap.registerPlugin({name:"attr",init:function i(e,t,r,s,n){var a,l,u;this.tween=r;for(a in t)u=e.getAttribute(a)||"",l=this.add(e,"setAttribute",(u||0)+"",t[a],s,n,0,0,a),l.op=a,l.b=u,this._props.push(a)},render:function i(e,t){for(var r=t._pt;r;)_reverting$1?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function i(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap$2.version="3.13.0";_coreReady=1;_windowExists$2()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _win$2,_doc$2,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists$1=function i(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp$1=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function i(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},_renderPropWithEnd=function i(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},_renderCSSPropWithBeginning=function i(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},_renderRoundedCSSProp=function i(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},_renderNonTweeningValue=function i(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},_renderNonTweeningValueOnlyAtEnd=function i(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},_setterCSSStyle=function i(e,t,r){return e.style[t]=r},_setterCSSProp=function i(e,t,r){return e.style.setProperty(t,r)},_setterTransform=function i(e,t,r){return e._gsap[t]=r},_setterScale=function i(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},_setterScaleWithRender=function i(e,t,r,s,n){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(n,a)},_setterTransformWithRender=function i(e,t,r,s,n){var a=e._gsap;a[t]=r,a.renderTransform(n,a)},_transformProp$1="transform",_transformOriginProp=_transformProp$1+"Origin",_saveStyle=function i(e,t){var r=this,s=this.target,n=s.style,a=s._gsap;if(e in _transformProps&&n){if(this.tfm=this.tfm||{},e!=="transform")e=_propertyAliases[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=_get(s,l)}):this.tfm[e]=a.x?a[e]:_get(s,e),e===_transformOriginProp&&(this.tfm.zOrigin=a.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(l){return i.call(r,l,t)});if(this.props.indexOf(_transformProp$1)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,t,"")),e=_transformProp$1}(n||t)&&this.props.push(e,t,n[e])},_removeIndependentTransforms=function i(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_revertStyle=function i(){var e=this.props,t=this.target,r=t.style,s=t._gsap,n,a;for(n=0;n<e.length;n+=3)e[n+1]?e[n+1]===2?t[e[n]](e[n+2]):t[e[n]]=e[n+2]:e[n+2]?r[e[n]]=e[n+2]:r.removeProperty(e[n].substr(0,2)==="--"?e[n]:e[n].replace(_capsExp$1,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)s[a]=this.tfm[a];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),n=_reverting(),(!n||!n.isStart)&&!r[_transformProp$1]&&(_removeIndependentTransforms(r),s.zOrigin&&r[_transformOriginProp]&&(r[_transformOriginProp]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},_getStyleSaver=function i(e,t){var r={target:e,props:[],revert:_revertStyle,save:_saveStyle};return e._gsap||gsap$2.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(s){return r.save(s)}),r},_supports3D,_createElement=function i(e,t){var r=_doc$2.createElementNS?_doc$2.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):_doc$2.createElement(e);return r&&r.style?r:_doc$2.createElement(e)},_getComputedProperty=function i(e,t,r){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(_capsExp$1,"-$1").toLowerCase())||s.getPropertyValue(t)||!r&&i(e,_checkPropPrefix(t)||t,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function i(e,t,r){var s=t||_tempDiv,n=s.style,a=5;if(e in n&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(_prefixes[a]+e in n););return a<0?null:(a===3?"ms":a>=0?_prefixes[a]:"")+e},_initCore$1=function i(){_windowExists$1()&&window.document&&(_win$2=window,_doc$2=_win$2.document,_docElement=_doc$2.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp$1=_checkPropPrefix(_transformProp$1),_transformOriginProp=_transformProp$1+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap$2.core.reverting,_pluginInitted=1)},_getReparentedCloneBBox=function i(e){var t=e.ownerSVGElement,r=_createElement("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),n;s.style.display="block",r.appendChild(s),_docElement.appendChild(r);try{n=s.getBBox()}catch{}return r.removeChild(s),_docElement.removeChild(r),n},_getAttributeFallbacks=function i(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},_getBBox=function i(e){var t,r;try{t=e.getBBox()}catch{t=_getReparentedCloneBBox(e),r=1}return t&&(t.width||t.height)||r||(t=_getReparentedCloneBBox(e)),t&&!t.width&&!t.x&&!t.y?{x:+_getAttributeFallbacks(e,["x","cx","x1"])||0,y:+_getAttributeFallbacks(e,["y","cy","y1"])||0,width:0,height:0}:t},_isSVG=function i(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&_getBBox(e))},_removeProperty=function i(e,t){if(t){var r=e.style,s;t in _transformProps&&t!==_transformOriginProp&&(t=_transformProp$1),r.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(s==="--"?t:t.replace(_capsExp$1,"-$1").toLowerCase())):r.removeAttribute(t)}},_addNonTweeningPT=function i(e,t,r,s,n,a){var l=new PropTween(e._pt,t,r,0,1,a?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return e._pt=l,l.b=s,l.e=n,e._props.push(r),l},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function i(e,t,r,s){var n=parseFloat(r)||0,a=(r+"").trim().substr((n+"").length)||"px",l=_tempDiv.style,u=_horizontalExp.test(t),c=e.tagName.toLowerCase()==="svg",p=(c?"client":"offset")+(u?"Width":"Height"),b=100,P=s==="px",N=s==="%",de,me,Ye,Le;if(s===a||!n||_nonConvertibleUnits[s]||_nonConvertibleUnits[a])return n;if(a!=="px"&&!P&&(n=i(e,t,r,"px")),Le=e.getCTM&&_isSVG(e),(N||a==="%")&&(_transformProps[t]||~t.indexOf("adius")))return de=Le?e.getBBox()[u?"width":"height"]:e[p],_round$1(N?n/de*b:n/100*de);if(l[u?"width":"height"]=b+(P?a:s),me=s!=="rem"&&~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,Le&&(me=(e.ownerSVGElement||{}).parentNode),(!me||me===_doc$2||!me.appendChild)&&(me=_doc$2.body),Ye=me._gsap,Ye&&N&&Ye.width&&u&&Ye.time===_ticker.time&&!Ye.uncache)return _round$1(n/Ye.width*b);if(N&&(t==="height"||t==="width")){var tt=e.style[t];e.style[t]=b+s,de=e[p],tt?e.style[t]=tt:_removeProperty(e,t)}else(N||a==="%")&&!_nonStandardLayouts[_getComputedProperty(me,"display")]&&(l.position=_getComputedProperty(e,"position")),me===e&&(l.position="static"),me.appendChild(_tempDiv),de=_tempDiv[p],me.removeChild(_tempDiv),l.position="absolute";return u&&N&&(Ye=_getCache(me),Ye.time=_ticker.time,Ye.width=me[p]),_round$1(P?de*n/b:de&&n?b/de*n:0)},_get=function i(e,t,r,s){var n;return _pluginInitted||_initCore$1(),t in _propertyAliases&&t!=="transform"&&(t=_propertyAliases[t],~t.indexOf(",")&&(t=t.split(",")[0])),_transformProps[t]&&t!=="transform"?(n=_parseTransform(e,s),n=t!=="transformOrigin"?n[t]:n.svg?n.origin:_firstTwoOnly(_getComputedProperty(e,_transformOriginProp))+" "+n.zOrigin+"px"):(n=e.style[t],(!n||n==="auto"||s||~(n+"").indexOf("calc("))&&(n=_specialProps[t]&&_specialProps[t](e,t,r)||_getComputedProperty(e,t)||_getProperty(e,t)||(t==="opacity"?1:0))),r&&!~(n+"").trim().indexOf(" ")?_convertToUnit(e,t,n,r)+r:n},_tweenComplexCSSString=function i(e,t,r,s){if(!r||r==="none"){var n=_checkPropPrefix(t,e,1),a=n&&_getComputedProperty(e,n,1);a&&a!==r?(t=n,r=a):t==="borderColor"&&(r=_getComputedProperty(e,"borderTopColor"))}var l=new PropTween(this._pt,e.style,t,0,1,_renderComplexString),u=0,c=0,p,b,P,N,de,me,Ye,Le,tt,Be,nt,ft;if(l.b=r,l.e=s,r+="",s+="",s.substring(0,6)==="var(--"&&(s=_getComputedProperty(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(me=e.style[t],e.style[t]=s,s=_getComputedProperty(e,t)||s,me?e.style[t]=me:_removeProperty(e,t)),p=[r,s],_colorStringFilter(p),r=p[0],s=p[1],P=r.match(_numWithUnitExp)||[],ft=s.match(_numWithUnitExp)||[],ft.length){for(;b=_numWithUnitExp.exec(s);)Ye=b[0],tt=s.substring(u,b.index),de?de=(de+1)%5:(tt.substr(-5)==="rgba("||tt.substr(-5)==="hsla(")&&(de=1),Ye!==(me=P[c++]||"")&&(N=parseFloat(me)||0,nt=me.substr((N+"").length),Ye.charAt(1)==="="&&(Ye=_parseRelative(N,Ye)+nt),Le=parseFloat(Ye),Be=Ye.substr((Le+"").length),u=_numWithUnitExp.lastIndex-Be.length,Be||(Be=Be||_config.units[t]||nt,u===s.length&&(s+=Be,l.e+=Be)),nt!==Be&&(N=_convertToUnit(e,t,me,Be)||0),l._pt={_next:l._pt,p:tt||c===1?tt:",",s:N,c:Le-N,m:de&&de<4||t==="zIndex"?Math.round:0});l.c=u<s.length?s.substring(u,s.length):""}else l.r=t==="display"&&s==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(s)&&(l.e=0),this._pt=l,l},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function i(e){var t=e.split(" "),r=t[0],s=t[1]||"50%";return(r==="top"||r==="bottom"||s==="left"||s==="right")&&(e=r,r=s,s=e),t[0]=_keywordToPercent[r]||r,t[1]=_keywordToPercent[s]||s,t.join(" ")},_renderClearProps=function i(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,s=r.style,n=t.u,a=r._gsap,l,u,c;if(n==="all"||n===!0)s.cssText="",u=1;else for(n=n.split(","),c=n.length;--c>-1;)l=n[c],_transformProps[l]&&(u=1,l=l==="transformOrigin"?_transformOriginProp:_transformProp$1),_removeProperty(r,l);u&&(_removeProperty(r,_transformProp$1),a&&(a.svg&&r.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",_parseTransform(r,1),a.uncache=1,_removeIndependentTransforms(s)))}},_specialProps={clearProps:function i(e,t,r,s,n){if(n.data!=="isFromStart"){var a=e._pt=new PropTween(e._pt,t,r,0,0,_renderClearProps);return a.u=s,a.pr=-10,a.tween=n,e._props.push(r),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function i(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},_getComputedTransformMatrixAsArray=function i(e){var t=_getComputedProperty(e,_transformProp$1);return _isNullTransform(t)?_identity2DMatrix:t.substr(7).match(_numExp).map(_round$1)},_getMatrix=function i(e,t){var r=e._gsap||_getCache(e),s=e.style,n=_getComputedTransformMatrixAsArray(e),a,l,u,c;return r.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,n=[u.a,u.b,u.c,u.d,u.e,u.f],n.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:n):(n===_identity2DMatrix&&!e.offsetParent&&e!==_docElement&&!r.svg&&(u=s.display,s.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,l=e.nextElementSibling,_docElement.appendChild(e)),n=_getComputedTransformMatrixAsArray(e),u?s.display=u:_removeProperty(e,"display"),c&&(l?a.insertBefore(e,l):a?a.appendChild(e):_docElement.removeChild(e))),t&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},_applySVGOrigin=function i(e,t,r,s,n,a){var l=e._gsap,u=n||_getMatrix(e,!0),c=l.xOrigin||0,p=l.yOrigin||0,b=l.xOffset||0,P=l.yOffset||0,N=u[0],de=u[1],me=u[2],Ye=u[3],Le=u[4],tt=u[5],Be=t.split(" "),nt=parseFloat(Be[0])||0,ft=parseFloat(Be[1])||0,mt,ht,Et,St;r?u!==_identity2DMatrix&&(ht=N*Ye-de*me)&&(Et=nt*(Ye/ht)+ft*(-me/ht)+(me*tt-Ye*Le)/ht,St=nt*(-de/ht)+ft*(N/ht)-(N*tt-de*Le)/ht,nt=Et,ft=St):(mt=_getBBox(e),nt=mt.x+(~Be[0].indexOf("%")?nt/100*mt.width:nt),ft=mt.y+(~(Be[1]||Be[0]).indexOf("%")?ft/100*mt.height:ft)),s||s!==!1&&l.smooth?(Le=nt-c,tt=ft-p,l.xOffset=b+(Le*N+tt*me)-Le,l.yOffset=P+(Le*de+tt*Ye)-tt):l.xOffset=l.yOffset=0,l.xOrigin=nt,l.yOrigin=ft,l.smooth=!!s,l.origin=t,l.originIsAbsolute=!!r,e.style[_transformOriginProp]="0px 0px",a&&(_addNonTweeningPT(a,l,"xOrigin",c,nt),_addNonTweeningPT(a,l,"yOrigin",p,ft),_addNonTweeningPT(a,l,"xOffset",b,l.xOffset),_addNonTweeningPT(a,l,"yOffset",P,l.yOffset)),e.setAttribute("data-svg-origin",nt+" "+ft)},_parseTransform=function i(e,t){var r=e._gsap||new GSCache(e);if("x"in r&&!t&&!r.uncache)return r;var s=e.style,n=r.scaleX<0,a="px",l="deg",u=getComputedStyle(e),c=_getComputedProperty(e,_transformOriginProp)||"0",p,b,P,N,de,me,Ye,Le,tt,Be,nt,ft,mt,ht,Et,St,bt,Pt,Rt,Dt,kt,Lt,vt,xt,gt,_t,yt,At,wt,It,Ft,zt;return p=b=P=me=Ye=Le=tt=Be=nt=0,N=de=1,r.svg=!!(e.getCTM&&_isSVG(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(s[_transformProp$1]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[_transformProp$1]!=="none"?u[_transformProp$1]:"")),s.scale=s.rotate=s.translate="none"),ht=_getMatrix(e,r.svg),r.svg&&(r.uncache?(gt=e.getBBox(),c=r.xOrigin-gt.x+"px "+(r.yOrigin-gt.y)+"px",xt=""):xt=!t&&e.getAttribute("data-svg-origin"),_applySVGOrigin(e,xt||c,!!xt||r.originIsAbsolute,r.smooth!==!1,ht)),ft=r.xOrigin||0,mt=r.yOrigin||0,ht!==_identity2DMatrix&&(Pt=ht[0],Rt=ht[1],Dt=ht[2],kt=ht[3],p=Lt=ht[4],b=vt=ht[5],ht.length===6?(N=Math.sqrt(Pt*Pt+Rt*Rt),de=Math.sqrt(kt*kt+Dt*Dt),me=Pt||Rt?_atan2(Rt,Pt)*_RAD2DEG:0,tt=Dt||kt?_atan2(Dt,kt)*_RAD2DEG+me:0,tt&&(de*=Math.abs(Math.cos(tt*_DEG2RAD))),r.svg&&(p-=ft-(ft*Pt+mt*Dt),b-=mt-(ft*Rt+mt*kt))):(zt=ht[6],It=ht[7],yt=ht[8],At=ht[9],wt=ht[10],Ft=ht[11],p=ht[12],b=ht[13],P=ht[14],Et=_atan2(zt,wt),Ye=Et*_RAD2DEG,Et&&(St=Math.cos(-Et),bt=Math.sin(-Et),xt=Lt*St+yt*bt,gt=vt*St+At*bt,_t=zt*St+wt*bt,yt=Lt*-bt+yt*St,At=vt*-bt+At*St,wt=zt*-bt+wt*St,Ft=It*-bt+Ft*St,Lt=xt,vt=gt,zt=_t),Et=_atan2(-Dt,wt),Le=Et*_RAD2DEG,Et&&(St=Math.cos(-Et),bt=Math.sin(-Et),xt=Pt*St-yt*bt,gt=Rt*St-At*bt,_t=Dt*St-wt*bt,Ft=kt*bt+Ft*St,Pt=xt,Rt=gt,Dt=_t),Et=_atan2(Rt,Pt),me=Et*_RAD2DEG,Et&&(St=Math.cos(Et),bt=Math.sin(Et),xt=Pt*St+Rt*bt,gt=Lt*St+vt*bt,Rt=Rt*St-Pt*bt,vt=vt*St-Lt*bt,Pt=xt,Lt=gt),Ye&&Math.abs(Ye)+Math.abs(me)>359.9&&(Ye=me=0,Le=180-Le),N=_round$1(Math.sqrt(Pt*Pt+Rt*Rt+Dt*Dt)),de=_round$1(Math.sqrt(vt*vt+zt*zt)),Et=_atan2(Lt,vt),tt=Math.abs(Et)>2e-4?Et*_RAD2DEG:0,nt=Ft?1/(Ft<0?-Ft:Ft):0),r.svg&&(xt=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(e,_transformProp$1)),xt&&e.setAttribute("transform",xt))),Math.abs(tt)>90&&Math.abs(tt)<270&&(n?(N*=-1,tt+=me<=0?180:-180,me+=me<=0?180:-180):(de*=-1,tt+=tt<=0?180:-180)),t=t||r.uncache,r.x=p-((r.xPercent=p&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=b-((r.yPercent=b&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-b)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=P+a,r.scaleX=_round$1(N),r.scaleY=_round$1(de),r.rotation=_round$1(me)+l,r.rotationX=_round$1(Ye)+l,r.rotationY=_round$1(Le)+l,r.skewX=tt+l,r.skewY=Be+l,r.transformPerspective=nt+a,(r.zOrigin=parseFloat(c.split(" ")[2])||!t&&r.zOrigin||0)&&(s[_transformOriginProp]=_firstTwoOnly(c)),r.xOffset=r.yOffset=0,r.force3D=_config.force3D,r.renderTransform=r.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,r.uncache=0,r},_firstTwoOnly=function i(e){return(e=e.split(" "))[0]+" "+e[1]},_addPxTranslate=function i(e,t,r){var s=getUnit(t);return _round$1(parseFloat(t)+parseFloat(_convertToUnit(e,"x",r+"px",s)))+s},_renderNon3DTransforms=function i(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,_renderCSSTransforms(e,t)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function i(e,t){var r=t||this,s=r.xPercent,n=r.yPercent,a=r.x,l=r.y,u=r.z,c=r.rotation,p=r.rotationY,b=r.rotationX,P=r.skewX,N=r.skewY,de=r.scaleX,me=r.scaleY,Ye=r.transformPerspective,Le=r.force3D,tt=r.target,Be=r.zOrigin,nt="",ft=Le==="auto"&&e&&e!==1||Le===!0;if(Be&&(b!==_zeroDeg||p!==_zeroDeg)){var mt=parseFloat(p)*_DEG2RAD,ht=Math.sin(mt),Et=Math.cos(mt),St;mt=parseFloat(b)*_DEG2RAD,St=Math.cos(mt),a=_addPxTranslate(tt,a,ht*St*-Be),l=_addPxTranslate(tt,l,-Math.sin(mt)*-Be),u=_addPxTranslate(tt,u,Et*St*-Be+Be)}Ye!==_zeroPx&&(nt+="perspective("+Ye+_endParenthesis),(s||n)&&(nt+="translate("+s+"%, "+n+"%) "),(ft||a!==_zeroPx||l!==_zeroPx||u!==_zeroPx)&&(nt+=u!==_zeroPx||ft?"translate3d("+a+", "+l+", "+u+") ":"translate("+a+", "+l+_endParenthesis),c!==_zeroDeg&&(nt+="rotate("+c+_endParenthesis),p!==_zeroDeg&&(nt+="rotateY("+p+_endParenthesis),b!==_zeroDeg&&(nt+="rotateX("+b+_endParenthesis),(P!==_zeroDeg||N!==_zeroDeg)&&(nt+="skew("+P+", "+N+_endParenthesis),(de!==1||me!==1)&&(nt+="scale("+de+", "+me+_endParenthesis),tt.style[_transformProp$1]=nt||"translate(0, 0)"},_renderSVGTransforms=function i(e,t){var r=t||this,s=r.xPercent,n=r.yPercent,a=r.x,l=r.y,u=r.rotation,c=r.skewX,p=r.skewY,b=r.scaleX,P=r.scaleY,N=r.target,de=r.xOrigin,me=r.yOrigin,Ye=r.xOffset,Le=r.yOffset,tt=r.forceCSS,Be=parseFloat(a),nt=parseFloat(l),ft,mt,ht,Et,St;u=parseFloat(u),c=parseFloat(c),p=parseFloat(p),p&&(p=parseFloat(p),c+=p,u+=p),u||c?(u*=_DEG2RAD,c*=_DEG2RAD,ft=Math.cos(u)*b,mt=Math.sin(u)*b,ht=Math.sin(u-c)*-P,Et=Math.cos(u-c)*P,c&&(p*=_DEG2RAD,St=Math.tan(c-p),St=Math.sqrt(1+St*St),ht*=St,Et*=St,p&&(St=Math.tan(p),St=Math.sqrt(1+St*St),ft*=St,mt*=St)),ft=_round$1(ft),mt=_round$1(mt),ht=_round$1(ht),Et=_round$1(Et)):(ft=b,Et=P,mt=ht=0),(Be&&!~(a+"").indexOf("px")||nt&&!~(l+"").indexOf("px"))&&(Be=_convertToUnit(N,"x",a,"px"),nt=_convertToUnit(N,"y",l,"px")),(de||me||Ye||Le)&&(Be=_round$1(Be+de-(de*ft+me*ht)+Ye),nt=_round$1(nt+me-(de*mt+me*Et)+Le)),(s||n)&&(St=N.getBBox(),Be=_round$1(Be+s/100*St.width),nt=_round$1(nt+n/100*St.height)),St="matrix("+ft+","+mt+","+ht+","+Et+","+Be+","+nt+")",N.setAttribute("transform",St),tt&&(N.style[_transformProp$1]=St)},_addRotationalPropTween=function i(e,t,r,s,n){var a=360,l=_isString$1(n),u=parseFloat(n)*(l&&~n.indexOf("rad")?_RAD2DEG:1),c=u-s,p=s+c+"deg",b,P;return l&&(b=n.split("_")[1],b==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),b==="cw"&&c<0?c=(c+a*_bigNum)%a-~~(c/a)*a:b==="ccw"&&c>0&&(c=(c-a*_bigNum)%a-~~(c/a)*a)),e._pt=P=new PropTween(e._pt,t,r,s,c,_renderPropWithEnd),P.e=p,P.u="deg",e._props.push(r),P},_assign=function i(e,t){for(var r in t)e[r]=t[r];return e},_addRawTransformPTs=function i(e,t,r){var s=_assign({},r._gsap),n="perspective,force3D,transformOrigin,svgOrigin",a=r.style,l,u,c,p,b,P,N,de;s.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),a[_transformProp$1]=t,l=_parseTransform(r,1),_removeProperty(r,_transformProp$1),r.setAttribute("transform",c)):(c=getComputedStyle(r)[_transformProp$1],a[_transformProp$1]=t,l=_parseTransform(r,1),a[_transformProp$1]=c);for(u in _transformProps)c=s[u],p=l[u],c!==p&&n.indexOf(u)<0&&(N=getUnit(c),de=getUnit(p),b=N!==de?_convertToUnit(r,u,c,de):parseFloat(c),P=parseFloat(p),e._pt=new PropTween(e._pt,l,u,b,P-b,_renderCSSProp),e._pt.u=de||0,e._props.push(u));_assign(l,s)};_forEachName("padding,margin,Width,Radius",function(i,e){var t="Top",r="Right",s="Bottom",n="Left",a=(e<3?[t,r,s,n]:[t+n,t+r,s+r,s+n]).map(function(l){return e<2?i+l:"border"+l+i});_specialProps[e>1?"border"+i:i]=function(l,u,c,p,b){var P,N;if(arguments.length<4)return P=a.map(function(de){return _get(l,de,c)}),N=P.join(" "),N.split(P[0]).length===5?P[0]:N;P=(p+"").split(" "),N={},a.forEach(function(de,me){return N[de]=P[me]=P[me]||P[(me-1)/2|0]}),l.init(u,N,b)}});var CSSPlugin={name:"css",register:_initCore$1,targetTest:function i(e){return e.style&&e.nodeType},init:function i(e,t,r,s,n){var a=this._props,l=e.style,u=r.vars.startAt,c,p,b,P,N,de,me,Ye,Le,tt,Be,nt,ft,mt,ht,Et;_pluginInitted||_initCore$1(),this.styles=this.styles||_getStyleSaver(e),Et=this.styles.props,this.tween=r;for(me in t)if(me!=="autoRound"&&(p=t[me],!(_plugins[me]&&_checkPlugin(me,t,r,s,e,n)))){if(N=typeof p,de=_specialProps[me],N==="function"&&(p=p.call(r,s,e,n),N=typeof p),N==="string"&&~p.indexOf("random(")&&(p=_replaceRandom(p)),de)de(this,e,me,p,r)&&(ht=1);else if(me.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(me)+"").trim(),p+="",_colorExp.lastIndex=0,_colorExp.test(c)||(Ye=getUnit(c),Le=getUnit(p)),Le?Ye!==Le&&(c=_convertToUnit(e,me,c,Le)+Le):Ye&&(p+=Ye),this.add(l,"setProperty",c,p,s,n,0,0,me),a.push(me),Et.push(me,0,l[me]);else if(N!=="undefined"){if(u&&me in u?(c=typeof u[me]=="function"?u[me].call(r,s,e,n):u[me],_isString$1(c)&&~c.indexOf("random(")&&(c=_replaceRandom(c)),getUnit(c+"")||c==="auto"||(c+=_config.units[me]||getUnit(_get(e,me))||""),(c+"").charAt(1)==="="&&(c=_get(e,me))):c=_get(e,me),P=parseFloat(c),tt=N==="string"&&p.charAt(1)==="="&&p.substr(0,2),tt&&(p=p.substr(2)),b=parseFloat(p),me in _propertyAliases&&(me==="autoAlpha"&&(P===1&&_get(e,"visibility")==="hidden"&&b&&(P=0),Et.push("visibility",0,l.visibility),_addNonTweeningPT(this,l,"visibility",P?"inherit":"hidden",b?"inherit":"hidden",!b)),me!=="scale"&&me!=="transform"&&(me=_propertyAliases[me],~me.indexOf(",")&&(me=me.split(",")[0]))),Be=me in _transformProps,Be){if(this.styles.save(me),N==="string"&&p.substring(0,6)==="var(--"&&(p=_getComputedProperty(e,p.substring(4,p.indexOf(")"))),b=parseFloat(p)),nt||(ft=e._gsap,ft.renderTransform&&!t.parseTransform||_parseTransform(e,t.parseTransform),mt=t.smoothOrigin!==!1&&ft.smooth,nt=this._pt=new PropTween(this._pt,l,_transformProp$1,0,1,ft.renderTransform,ft,0,-1),nt.dep=1),me==="scale")this._pt=new PropTween(this._pt,ft,"scaleY",ft.scaleY,(tt?_parseRelative(ft.scaleY,tt+b):b)-ft.scaleY||0,_renderCSSProp),this._pt.u=0,a.push("scaleY",me),me+="X";else if(me==="transformOrigin"){Et.push(_transformOriginProp,0,l[_transformOriginProp]),p=_convertKeywordsToPercentages(p),ft.svg?_applySVGOrigin(e,p,0,mt,0,this):(Le=parseFloat(p.split(" ")[2])||0,Le!==ft.zOrigin&&_addNonTweeningPT(this,ft,"zOrigin",ft.zOrigin,Le),_addNonTweeningPT(this,l,me,_firstTwoOnly(c),_firstTwoOnly(p)));continue}else if(me==="svgOrigin"){_applySVGOrigin(e,p,1,mt,0,this);continue}else if(me in _rotationalProperties){_addRotationalPropTween(this,ft,me,P,tt?_parseRelative(P,tt+p):p);continue}else if(me==="smoothOrigin"){_addNonTweeningPT(this,ft,"smooth",ft.smooth,p);continue}else if(me==="force3D"){ft[me]=p;continue}else if(me==="transform"){_addRawTransformPTs(this,p,e);continue}}else me in l||(me=_checkPropPrefix(me)||me);if(Be||(b||b===0)&&(P||P===0)&&!_complexExp.test(p)&&me in l)Ye=(c+"").substr((P+"").length),b||(b=0),Le=getUnit(p)||(me in _config.units?_config.units[me]:Ye),Ye!==Le&&(P=_convertToUnit(e,me,c,Le)),this._pt=new PropTween(this._pt,Be?ft:l,me,P,(tt?_parseRelative(P,tt+b):b)-P,!Be&&(Le==="px"||me==="zIndex")&&t.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=Le||0,Ye!==Le&&Le!=="%"&&(this._pt.b=c,this._pt.r=_renderCSSPropWithBeginning);else if(me in l)_tweenComplexCSSString.call(this,e,me,c,tt?tt+p:p);else if(me in e)this.add(e,me,c||e[me],tt?tt+p:p,s,n);else if(me!=="parseTransform"){_missingPlugin(me,p);continue}Be||(me in l?Et.push(me,0,l[me]):typeof e[me]=="function"?Et.push(me,2,e[me]()):Et.push(me,1,c||e[me])),a.push(me)}}ht&&_sortPropTweensByPriority(this)},render:function i(e,t){if(t.tween._time||!_reverting())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function i(e,t,r){var s=_propertyAliases[t];return s&&s.indexOf(",")<0&&(t=s),t in _transformProps&&t!==_transformOriginProp&&(e._gsap.x||_get(e,"x"))?r&&_recentSetterPlugin===r?t==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=r||{})&&(t==="scale"?_setterScaleWithRender:_setterTransformWithRender):e.style&&!_isUndefined(e.style[t])?_setterCSSStyle:~t.indexOf("-")?_setterCSSProp:_getSetter(e,t)},core:{_removeProperty,_getMatrix}};gsap$2.utils.checkPrefix=_checkPropPrefix;gsap$2.core.getStyleSaver=_getStyleSaver;(function(i,e,t,r){var s=_forEachName(i+","+e+","+t,function(n){_transformProps[n]=1});_forEachName(e,function(n){_config.units[n]="deg",_rotationalProperties[n]=1}),_propertyAliases[s[13]]=i+","+e,_forEachName(r,function(n){var a=n.split(":");_propertyAliases[a[1]]=s[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){_config.units[i]="px"});gsap$2.registerPlugin(CSSPlugin);var gsapWithCSS=gsap$2.registerPlugin(CSSPlugin)||gsap$2;gsapWithCSS.core.Tween;const TextType=({text:i,as:e="div",typingSpeed:t=50,initialDelay:r=0,pauseDuration:s=2e3,deletingSpeed:n=30,loop:a=!0,className:l="",showCursor:u=!0,hideCursorWhileTyping:c=!1,cursorCharacter:p="|",cursorClassName:b="",cursorBlinkDuration:P=.5,textColors:N=[],variableSpeed:de,onSentenceComplete:me,startOnVisible:Ye=!1,reverseMode:Le=!1,...tt})=>{const[Be,nt]=reactExports.useState(""),[ft,mt]=reactExports.useState(0),[ht,Et]=reactExports.useState(!1),[St,bt]=reactExports.useState(0),[Pt,Rt]=reactExports.useState(!Ye),Dt=reactExports.useRef(null),kt=reactExports.useRef(null),Lt=reactExports.useMemo(()=>Array.isArray(i)?i:[i],[i]),vt=reactExports.useCallback(()=>{if(!de)return t;const{min:_t,max:yt}=de;return Math.random()*(yt-_t)+_t},[de,t]),xt=()=>N.length===0?"#ffffff":N[St%N.length];reactExports.useEffect(()=>{if(!Ye||!kt.current)return;const _t=new IntersectionObserver(yt=>{yt.forEach(At=>{At.isIntersecting&&Rt(!0)})},{threshold:.1});return _t.observe(kt.current),()=>_t.disconnect()},[Ye]),reactExports.useEffect(()=>{u&&Dt.current&&(gsapWithCSS.set(Dt.current,{opacity:1}),gsapWithCSS.to(Dt.current,{opacity:0,duration:P,repeat:-1,yoyo:!0,ease:"power2.inOut"}))},[u,P]),reactExports.useEffect(()=>{if(!Pt)return;let _t;const yt=Lt[St],At=Le?yt.split("").reverse().join(""):yt,wt=()=>{if(ht)if(Be===""){if(Et(!1),St===Lt.length-1&&!a)return;me&&me(Lt[St],St),bt(It=>(It+1)%Lt.length),mt(0),_t=setTimeout(()=>{},s)}else _t=setTimeout(()=>{nt(It=>It.slice(0,-1))},n);else ft<At.length?_t=setTimeout(()=>{nt(It=>It+At[ft]),mt(It=>It+1)},de?vt():t):Lt.length>1&&(_t=setTimeout(()=>{Et(!0)},s))};return ft===0&&!ht&&Be===""?_t=setTimeout(wt,r):wt(),()=>clearTimeout(_t)},[ft,Be,ht,t,n,s,Lt,St,a,r,Pt,Le,de,me]);const gt=c&&(ft<Lt[St].length||ht);return reactExports.createElement(e,{ref:kt,className:`inline-block whitespace-pre-wrap tracking-tight ${l}`,...tt},jsxRuntimeExports.jsx("span",{className:"inline",style:{color:xt()},children:Be}),u&&jsxRuntimeExports.jsx("span",{ref:Dt,className:`ml-1 inline-block opacity-100 ${gt?"hidden":""} ${b}`,children:p}))},springValues={damping:30,stiffness:100,mass:2},Keyvisual=({imageSrc:i="/assets/images/avatar.jpeg",altText:e="Tilted card image",captionText:t="My name is Ty",containerHeight:r="300px",containerWidth:s="100%",imageHeight:n="300px",imageWidth:a="300px",scaleOnHover:l=1.1,rotateAmplitude:u=14,showMobileWarning:c=!0,showTooltip:p=!0,overlayContent:b=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("p",{className:"mt-4 ml-4 bg-black/50 rounded-xl px-2 py-1 font-medium text-white text-sm border border-white/50",children:"Trương Văn Ty"})}),displayOverlayContent:P=!0})=>{const N=reactExports.useRef(null),de=useMotionValue(0),me=useMotionValue(0),Ye=useSpring(useMotionValue(0),springValues),Le=useSpring(useMotionValue(0),springValues),tt=useSpring(1,springValues),Be=useSpring(0),nt=useSpring(0,{stiffness:350,damping:30,mass:1}),[ft,mt]=reactExports.useState(0);function ht(bt){if(!N.current)return;const Pt=N.current.getBoundingClientRect(),Rt=bt.clientX-Pt.left-Pt.width/2,Dt=bt.clientY-Pt.top-Pt.height/2,kt=Dt/(Pt.height/2)*-u,Lt=Rt/(Pt.width/2)*u;Ye.set(kt),Le.set(Lt),de.set(bt.clientX-Pt.left),me.set(bt.clientY-Pt.top);const vt=Dt-ft;nt.set(-vt*.6),mt(Dt)}function Et(){tt.set(l),Be.set(1)}function St(){Be.set(0),tt.set(1),Ye.set(0),Le.set(0),nt.set(0)}return jsxRuntimeExports.jsx(KeyvisualContainer,{className:"h-dvh flex items-center justify-center overflow-hidden bg-gradient-to-br",children:jsxRuntimeExports.jsxs("div",{className:"wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"wrapper-inner",children:[jsxRuntimeExports.jsxs(motion.figure,{ref:N,className:"relative w-full h-full [perspective:800px] flex flex-col items-center justify-center pointer-events-auto",style:{height:r,width:s},onMouseMove:ht,onMouseEnter:Et,onMouseLeave:St,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeInOut",delay:.25},children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative [transform-style:preserve-3d]",style:{width:a,height:n,rotateX:Ye,rotateY:Le,scale:tt},children:[jsxRuntimeExports.jsx(motion.img,{src:i,alt:e,className:"absolute top-0 left-0 object-cover rounded-[15px] will-change-transform [transform:translateZ(0)]",style:{width:a,height:n}}),P&&b&&jsxRuntimeExports.jsx(motion.div,{className:"absolute top-0 left-0 z-[2] will-change-transform [transform:translateZ(30px)]",children:b})]}),p&&jsxRuntimeExports.jsx(motion.figcaption,{className:"pointer-events-none absolute left-0 top-0 rounded-[4px] bg-white px-[10px] py-[4px] text-[10px] text-[#2d2d2d] opacity-0 z-[3] hidden sm:block",style:{x:de,y:me,opacity:Be,rotate:nt},children:t})]}),jsxRuntimeExports.jsx(motion.div,{className:"absolute -bottom-12 -right-12 w-32 h-32",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeInOut",delay:.75},children:jsxRuntimeExports.jsx("div",{className:"mb-8 flex justify-center",children:jsxRuntimeExports.jsx(CircularText,{text:"CONTACT ✦ ME ✦ HERE ✦ ",onHover:"slowDown",spinDuration:20})})})]}),jsxRuntimeExports.jsxs(motion.div,{className:"text-center text-3xl md:text-4xl font-black md:flex md:gap-2 justify-center mb-8",initial:{opacity:0,y:0,scale:1},animate:{opacity:1,scale:[1,1.4,1],y:[0,-50,0]},transition:{duration:.75,delay:1.25},children:[jsxRuntimeExports.jsx("h1",{className:"mb-2 md:mb-0",children:"XIN CHÀO, "}),jsxRuntimeExports.jsx("p",{children:"MÌNH LÀ TY"})]}),jsxRuntimeExports.jsxs(motion.div,{className:"text-center text-3xl font-bold flex items-center justify-center mb-8",initial:{opacity:0,y:0,scale:1},animate:{opacity:1,scale:[1,1.4,1],y:[0,-50,0]},transition:{duration:.75,delay:1},children:[jsxRuntimeExports.jsx("div",{className:"hidden md:block",children:"Mình là "}),jsxRuntimeExports.jsx("div",{className:"inline-block whitespace-pre-wrap tracking-tight text-center text-3xl font-bold ml-2",children:jsxRuntimeExports.jsx(TextType,{text:["Software Engineer_","Front End Developer","Happy coding!"],typingSpeed:75,pauseDuration:1500,showCursor:!0,cursorCharacter:"|",textColors:["rgb(245, 158, 11)","rgb(132, 204, 22)"]})})]}),jsxRuntimeExports.jsx(motion.div,{className:"flex justify-center pointer-events-auto",initial:{opacity:0,y:0,scale:1},animate:{opacity:1,scale:[1,1.4,1],y:[0,-50,0]},transition:{duration:.75,delay:1.75},children:jsxRuntimeExports.jsx("button",{className:"bg-white text-black px-8 md:px-12 py-3 md:py-4 rounded-full font-medium cursor-pointer hover:scale-105 transition-transform duration-200",children:"Xem thêm"})})]})})},IntroLayoutContainer=dt.section``;function _defineProperties(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function _createClass(i,e,t){return e&&_defineProperties(i.prototype,e),i}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$1,_coreInitted$1,_win$1,_doc$1,_docEl$1,_body$1,_isTouch,_pointerType,ScrollTrigger$1,_root$1,_normalizer$1,_eventTypes,_context$1,_getGSAP$1=function i(){return gsap$1||typeof window<"u"&&(gsap$1=window.gsap)&&gsap$1.registerPlugin&&gsap$1},_startup$1=1,_observers=[],_scrollers=[],_proxies=[],_getTime$1=Date.now,_bridge=function i(e,t){return t},_integrate=function i(){var e=ScrollTrigger$1.core,t=e.bridge||{},r=e._scrollers,s=e._proxies;r.push.apply(r,_scrollers),s.push.apply(s,_proxies),_scrollers=r,_proxies=s,_bridge=function(a,l){return t[a](l)}},_getProxyProp=function i(e,t){return~_proxies.indexOf(e)&&_proxies[_proxies.indexOf(e)+1][t]},_isViewport$1=function i(e){return!!~_root$1.indexOf(e)},_addListener$1=function i(e,t,r,s,n){return e.addEventListener(t,r,{passive:s!==!1,capture:!!n})},_removeListener$1=function i(e,t,r,s){return e.removeEventListener(t,r,!!s)},_scrollLeft="scrollLeft",_scrollTop="scrollTop",_onScroll$1=function i(){return _normalizer$1&&_normalizer$1.isPressed||_scrollers.cache++},_scrollCacheFunc=function i(e,t){var r=function s(n){if(n||n===0){_startup$1&&(_win$1.history.scrollRestoration="manual");var a=_normalizer$1&&_normalizer$1.isPressed;n=s.v=Math.round(n)||(_normalizer$1&&_normalizer$1.iOS?1:0),e(n),s.cacheID=_scrollers.cache,a&&_bridge("ss",n)}else(t||_scrollers.cache!==s.cacheID||_bridge("ref"))&&(s.cacheID=_scrollers.cache,s.v=e());return s.v+s.offset};return r.offset=0,e&&r},_horizontal={s:_scrollLeft,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:_scrollCacheFunc(function(i){return arguments.length?_win$1.scrollTo(i,_vertical.sc()):_win$1.pageXOffset||_doc$1[_scrollLeft]||_docEl$1[_scrollLeft]||_body$1[_scrollLeft]||0})},_vertical={s:_scrollTop,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:_horizontal,sc:_scrollCacheFunc(function(i){return arguments.length?_win$1.scrollTo(_horizontal.sc(),i):_win$1.pageYOffset||_doc$1[_scrollTop]||_docEl$1[_scrollTop]||_body$1[_scrollTop]||0})},_getTarget=function i(e,t){return(t&&t._ctx&&t._ctx.selector||gsap$1.utils.toArray)(e)[0]||(typeof e=="string"&&gsap$1.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},_isWithin=function i(e,t){for(var r=t.length;r--;)if(t[r]===e||t[r].contains(e))return!0;return!1},_getScrollFunc=function i(e,t){var r=t.s,s=t.sc;_isViewport$1(e)&&(e=_doc$1.scrollingElement||_docEl$1);var n=_scrollers.indexOf(e),a=s===_vertical.sc?1:2;!~n&&(n=_scrollers.push(e)-1),_scrollers[n+a]||_addListener$1(e,"scroll",_onScroll$1);var l=_scrollers[n+a],u=l||(_scrollers[n+a]=_scrollCacheFunc(_getProxyProp(e,r),!0)||(_isViewport$1(e)?s:_scrollCacheFunc(function(c){return arguments.length?e[r]=c:e[r]})));return u.target=e,l||(u.smooth=gsap$1.getProperty(e,"scrollBehavior")==="smooth"),u},_getVelocityProp=function i(e,t,r){var s=e,n=e,a=_getTime$1(),l=a,u=t||50,c=Math.max(500,u*3),p=function(de,me){var Ye=_getTime$1();me||Ye-a>u?(n=s,s=de,l=a,a=Ye):r?s+=de:s=n+(de-n)/(Ye-l)*(a-l)},b=function(){n=s=r?0:s,l=a=0},P=function(de){var me=l,Ye=n,Le=_getTime$1();return(de||de===0)&&de!==s&&p(de),a===l||Le-l>c?0:(s+(r?Ye:-Ye))/((r?Le:a)-me)*1e3};return{update:p,reset:b,getVelocity:P}},_getEvent=function i(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},_getAbsoluteMax=function i(e){var t=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(r)?t:r},_setScrollTrigger=function i(){ScrollTrigger$1=gsap$1.core.globals().ScrollTrigger,ScrollTrigger$1&&ScrollTrigger$1.core&&_integrate()},_initCore=function i(e){return gsap$1=e||_getGSAP$1(),!_coreInitted$1&&gsap$1&&typeof document<"u"&&document.body&&(_win$1=window,_doc$1=document,_docEl$1=_doc$1.documentElement,_body$1=_doc$1.body,_root$1=[_win$1,_doc$1,_docEl$1,_body$1],gsap$1.utils.clamp,_context$1=gsap$1.core.context||function(){},_pointerType="onpointerenter"in _body$1?"pointer":"mouse",_isTouch=Observer$1.isTouch=_win$1.matchMedia&&_win$1.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in _win$1||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,_eventTypes=Observer$1.eventTypes=("ontouchstart"in _docEl$1?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _docEl$1?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return _startup$1=0},500),_setScrollTrigger(),_coreInitted$1=1),_coreInitted$1};_horizontal.op=_vertical;_scrollers.cache=0;var Observer$1=function(){function i(t){this.init(t)}var e=i.prototype;return e.init=function(r){_coreInitted$1||_initCore(gsap$1)||console.warn("Please gsap.registerPlugin(Observer)"),ScrollTrigger$1||_setScrollTrigger();var s=r.tolerance,n=r.dragMinimum,a=r.type,l=r.target,u=r.lineHeight,c=r.debounce,p=r.preventDefault,b=r.onStop,P=r.onStopDelay,N=r.ignore,de=r.wheelSpeed,me=r.event,Ye=r.onDragStart,Le=r.onDragEnd,tt=r.onDrag,Be=r.onPress,nt=r.onRelease,ft=r.onRight,mt=r.onLeft,ht=r.onUp,Et=r.onDown,St=r.onChangeX,bt=r.onChangeY,Pt=r.onChange,Rt=r.onToggleX,Dt=r.onToggleY,kt=r.onHover,Lt=r.onHoverEnd,vt=r.onMove,xt=r.ignoreCheck,gt=r.isNormalizer,_t=r.onGestureStart,yt=r.onGestureEnd,At=r.onWheel,wt=r.onEnable,It=r.onDisable,Ft=r.onClick,zt=r.scrollSpeed,Ut=r.capture,Qt=r.allowClicks,Xt=r.lockAxis,Jt=r.onLockAxis;this.target=l=_getTarget(l)||_docEl$1,this.vars=r,N&&(N=gsap$1.utils.toArray(N)),s=s||1e-9,n=n||0,de=de||1,zt=zt||1,a=a||"wheel,touch,pointer",c=c!==!1,u||(u=parseFloat(_win$1.getComputedStyle(_body$1).lineHeight)||22);var mi,ni,pi,Zt,Yt,ji,ri,Bt=this,vi=0,Oi=0,Ri=r.passive||!p&&r.passive!==!1,ui=_getScrollFunc(l,_horizontal),Vi=_getScrollFunc(l,_vertical),Zi=ui(),Ki=Vi(),wi=~a.indexOf("touch")&&!~a.indexOf("pointer")&&_eventTypes[0]==="pointerdown",Li=_isViewport$1(l),hi=l.ownerDocument||_doc$1,zi=[0,0,0],Ai=[0,0,0],dr=0,Fr=function(){return dr=_getTime$1()},tr=function(ai,yi){return(Bt.event=ai)&&N&&_isWithin(ai.target,N)||yi&&wi&&ai.pointerType!=="touch"||xt&&xt(ai,yi)},ys=function(){Bt._vx.reset(),Bt._vy.reset(),ni.pause(),b&&b(Bt)},wr=function(){var ai=Bt.deltaX=_getAbsoluteMax(zi),yi=Bt.deltaY=_getAbsoluteMax(Ai),Wt=Math.abs(ai)>=s,ii=Math.abs(yi)>=s;Pt&&(Wt||ii)&&Pt(Bt,ai,yi,zi,Ai),Wt&&(ft&&Bt.deltaX>0&&ft(Bt),mt&&Bt.deltaX<0&&mt(Bt),St&&St(Bt),Rt&&Bt.deltaX<0!=vi<0&&Rt(Bt),vi=Bt.deltaX,zi[0]=zi[1]=zi[2]=0),ii&&(Et&&Bt.deltaY>0&&Et(Bt),ht&&Bt.deltaY<0&&ht(Bt),bt&&bt(Bt),Dt&&Bt.deltaY<0!=Oi<0&&Dt(Bt),Oi=Bt.deltaY,Ai[0]=Ai[1]=Ai[2]=0),(Zt||pi)&&(vt&&vt(Bt),pi&&(Ye&&pi===1&&Ye(Bt),tt&&tt(Bt),pi=0),Zt=!1),ji&&!(ji=!1)&&Jt&&Jt(Bt),Yt&&(At(Bt),Yt=!1),mi=0},Lr=function(ai,yi,Wt){zi[Wt]+=ai,Ai[Wt]+=yi,Bt._vx.update(ai),Bt._vy.update(yi),c?mi||(mi=requestAnimationFrame(wr)):wr()},as=function(ai,yi){Xt&&!ri&&(Bt.axis=ri=Math.abs(ai)>Math.abs(yi)?"x":"y",ji=!0),ri!=="y"&&(zi[2]+=ai,Bt._vx.update(ai,!0)),ri!=="x"&&(Ai[2]+=yi,Bt._vy.update(yi,!0)),c?mi||(mi=requestAnimationFrame(wr)):wr()},Mr=function(ai){if(!tr(ai,1)){ai=_getEvent(ai,p);var yi=ai.clientX,Wt=ai.clientY,ii=yi-Bt.x,ti=Wt-Bt.y,fi=Bt.isDragging;Bt.x=yi,Bt.y=Wt,(fi||(ii||ti)&&(Math.abs(Bt.startX-yi)>=n||Math.abs(Bt.startY-Wt)>=n))&&(pi=fi?2:1,fi||(Bt.isDragging=!0),as(ii,ti))}},vs=Bt.onPress=function(di){tr(di,1)||di&&di.button||(Bt.axis=ri=null,ni.pause(),Bt.isPressed=!0,di=_getEvent(di),vi=Oi=0,Bt.startX=Bt.x=di.clientX,Bt.startY=Bt.y=di.clientY,Bt._vx.reset(),Bt._vy.reset(),_addListener$1(gt?l:hi,_eventTypes[1],Mr,Ri,!0),Bt.deltaX=Bt.deltaY=0,Be&&Be(Bt))},gi=Bt.onRelease=function(di){if(!tr(di,1)){_removeListener$1(gt?l:hi,_eventTypes[1],Mr,!0);var ai=!isNaN(Bt.y-Bt.startY),yi=Bt.isDragging,Wt=yi&&(Math.abs(Bt.x-Bt.startX)>3||Math.abs(Bt.y-Bt.startY)>3),ii=_getEvent(di);!Wt&&ai&&(Bt._vx.reset(),Bt._vy.reset(),p&&Qt&&gsap$1.delayedCall(.08,function(){if(_getTime$1()-dr>300&&!di.defaultPrevented){if(di.target.click)di.target.click();else if(hi.createEvent){var ti=hi.createEvent("MouseEvents");ti.initMouseEvent("click",!0,!0,_win$1,1,ii.screenX,ii.screenY,ii.clientX,ii.clientY,!1,!1,!1,!1,0,null),di.target.dispatchEvent(ti)}}})),Bt.isDragging=Bt.isGesturing=Bt.isPressed=!1,b&&yi&&!gt&&ni.restart(!0),pi&&wr(),Le&&yi&&Le(Bt),nt&&nt(Bt,Wt)}},cs=function(ai){return ai.touches&&ai.touches.length>1&&(Bt.isGesturing=!0)&&_t(ai,Bt.isDragging)},Cr=function(){return(Bt.isGesturing=!1)||yt(Bt)},_r=function(ai){if(!tr(ai)){var yi=ui(),Wt=Vi();Lr((yi-Zi)*zt,(Wt-Ki)*zt,1),Zi=yi,Ki=Wt,b&&ni.restart(!0)}},Nr=function(ai){if(!tr(ai)){ai=_getEvent(ai,p),At&&(Yt=!0);var yi=(ai.deltaMode===1?u:ai.deltaMode===2?_win$1.innerHeight:1)*de;Lr(ai.deltaX*yi,ai.deltaY*yi,0),b&&!gt&&ni.restart(!0)}},fs=function(ai){if(!tr(ai)){var yi=ai.clientX,Wt=ai.clientY,ii=yi-Bt.x,ti=Wt-Bt.y;Bt.x=yi,Bt.y=Wt,Zt=!0,b&&ni.restart(!0),(ii||ti)&&as(ii,ti)}},Es=function(ai){Bt.event=ai,kt(Bt)},Br=function(ai){Bt.event=ai,Lt(Bt)},_s=function(ai){return tr(ai)||_getEvent(ai,p)&&Ft(Bt)};ni=Bt._dc=gsap$1.delayedCall(P||.25,ys).pause(),Bt.deltaX=Bt.deltaY=0,Bt._vx=_getVelocityProp(0,50,!0),Bt._vy=_getVelocityProp(0,50,!0),Bt.scrollX=ui,Bt.scrollY=Vi,Bt.isDragging=Bt.isGesturing=Bt.isPressed=!1,_context$1(this),Bt.enable=function(di){return Bt.isEnabled||(_addListener$1(Li?hi:l,"scroll",_onScroll$1),a.indexOf("scroll")>=0&&_addListener$1(Li?hi:l,"scroll",_r,Ri,Ut),a.indexOf("wheel")>=0&&_addListener$1(l,"wheel",Nr,Ri,Ut),(a.indexOf("touch")>=0&&_isTouch||a.indexOf("pointer")>=0)&&(_addListener$1(l,_eventTypes[0],vs,Ri,Ut),_addListener$1(hi,_eventTypes[2],gi),_addListener$1(hi,_eventTypes[3],gi),Qt&&_addListener$1(l,"click",Fr,!0,!0),Ft&&_addListener$1(l,"click",_s),_t&&_addListener$1(hi,"gesturestart",cs),yt&&_addListener$1(hi,"gestureend",Cr),kt&&_addListener$1(l,_pointerType+"enter",Es),Lt&&_addListener$1(l,_pointerType+"leave",Br),vt&&_addListener$1(l,_pointerType+"move",fs)),Bt.isEnabled=!0,Bt.isDragging=Bt.isGesturing=Bt.isPressed=Zt=pi=!1,Bt._vx.reset(),Bt._vy.reset(),Zi=ui(),Ki=Vi(),di&&di.type&&vs(di),wt&&wt(Bt)),Bt},Bt.disable=function(){Bt.isEnabled&&(_observers.filter(function(di){return di!==Bt&&_isViewport$1(di.target)}).length||_removeListener$1(Li?hi:l,"scroll",_onScroll$1),Bt.isPressed&&(Bt._vx.reset(),Bt._vy.reset(),_removeListener$1(gt?l:hi,_eventTypes[1],Mr,!0)),_removeListener$1(Li?hi:l,"scroll",_r,Ut),_removeListener$1(l,"wheel",Nr,Ut),_removeListener$1(l,_eventTypes[0],vs,Ut),_removeListener$1(hi,_eventTypes[2],gi),_removeListener$1(hi,_eventTypes[3],gi),_removeListener$1(l,"click",Fr,!0),_removeListener$1(l,"click",_s),_removeListener$1(hi,"gesturestart",cs),_removeListener$1(hi,"gestureend",Cr),_removeListener$1(l,_pointerType+"enter",Es),_removeListener$1(l,_pointerType+"leave",Br),_removeListener$1(l,_pointerType+"move",fs),Bt.isEnabled=Bt.isPressed=Bt.isDragging=!1,It&&It(Bt))},Bt.kill=Bt.revert=function(){Bt.disable();var di=_observers.indexOf(Bt);di>=0&&_observers.splice(di,1),_normalizer$1===Bt&&(_normalizer$1=0)},_observers.push(Bt),gt&&_isViewport$1(l)&&(_normalizer$1=Bt),Bt.enable(me)},_createClass(i,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),i}();Observer$1.version="3.13.0";Observer$1.create=function(i){return new Observer$1(i)};Observer$1.register=_initCore;Observer$1.getAll=function(){return _observers.slice()};Observer$1.getById=function(i){return _observers.filter(function(e){return e.vars.id===i})[0]};_getGSAP$1()&&gsap$1.registerPlugin(Observer$1);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var gsap,_coreInitted,_win,_doc,_docEl,_body,_root,_resizeDelay,_toArray,_clamp,_time2,_syncInterval,_refreshing,_pointerIsDown,_transformProp,_i,_prevWidth,_prevHeight,_autoRefresh,_sort,_suppressOverwrites,_ignoreResize,_normalizer,_ignoreMobileResize,_baseScreenHeight,_baseScreenWidth,_fixIOSBug,_context,_scrollRestoration,_div100vh,_100vh,_isReverted,_clampingMax,_limitCallbacks,_startup=1,_getTime=Date.now,_time1=_getTime(),_lastScrollTime=0,_enabled=0,_parseClamp=function i(e,t,r){var s=_isString(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+t+"Clamp"]=s,s?e.substr(6,e.length-7):e},_keepClamp=function i(e,t){return t&&(!_isString(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},_rafBugFix=function i(){return _enabled&&requestAnimationFrame(i)},_pointerDownHandler=function i(){return _pointerIsDown=1},_pointerUpHandler=function i(){return _pointerIsDown=0},_passThrough=function i(e){return e},_round=function i(e){return Math.round(e*1e5)/1e5||0},_windowExists=function i(){return typeof window<"u"},_getGSAP=function i(){return gsap||_windowExists()&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_isViewport=function i(e){return!!~_root.indexOf(e)},_getViewportDimension=function i(e){return(e==="Height"?_100vh:_win["inner"+e])||_docEl["client"+e]||_body["client"+e]},_getBoundsFunc=function i(e){return _getProxyProp(e,"getBoundingClientRect")||(_isViewport(e)?function(){return _winOffsets.width=_win.innerWidth,_winOffsets.height=_100vh,_winOffsets}:function(){return _getBounds(e)})},_getSizeFunc=function i(e,t,r){var s=r.d,n=r.d2,a=r.a;return(a=_getProxyProp(e,"getBoundingClientRect"))?function(){return a()[s]}:function(){return(t?_getViewportDimension(n):e["client"+n])||0}},_getOffsetsFunc=function i(e,t){return!t||~_proxies.indexOf(e)?_getBoundsFunc(e):function(){return _winOffsets}},_maxScroll=function i(e,t){var r=t.s,s=t.d2,n=t.d,a=t.a;return Math.max(0,(r="scroll"+s)&&(a=_getProxyProp(e,r))?a()-_getBoundsFunc(e)()[n]:_isViewport(e)?(_docEl[r]||_body[r])-_getViewportDimension(s):e[r]-e["offset"+s])},_iterateAutoRefresh=function i(e,t){for(var r=0;r<_autoRefresh.length;r+=3)(!t||~t.indexOf(_autoRefresh[r+1]))&&e(_autoRefresh[r],_autoRefresh[r+1],_autoRefresh[r+2])},_isString=function i(e){return typeof e=="string"},_isFunction=function i(e){return typeof e=="function"},_isNumber=function i(e){return typeof e=="number"},_isObject=function i(e){return typeof e=="object"},_endAnimation=function i(e,t,r){return e&&e.progress(t?0:1)&&r&&e.pause()},_callback=function i(e,t){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return t(e)}):t(e);r&&r.totalTime&&(e.callbackAnimation=r)}},_abs=Math.abs,_left="left",_top="top",_right="right",_bottom="bottom",_width="width",_height="height",_Right="Right",_Left="Left",_Top="Top",_Bottom="Bottom",_padding="padding",_margin="margin",_Width="Width",_Height="Height",_px="px",_getComputedStyle=function i(e){return _win.getComputedStyle(e)},_makePositionable=function i(e){var t=_getComputedStyle(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},_setDefaults=function i(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},_getBounds=function i(e,t){var r=t&&_getComputedStyle(e)[_transformProp]!=="matrix(1, 0, 0, 1, 0, 0)"&&gsap.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),s=e.getBoundingClientRect();return r&&r.progress(0).kill(),s},_getSize=function i(e,t){var r=t.d2;return e["offset"+r]||e["client"+r]||0},_getLabelRatioArray=function i(e){var t=[],r=e.labels,s=e.duration(),n;for(n in r)t.push(r[n]/s);return t},_getClosestLabel=function i(e){return function(t){return gsap.utils.snap(_getLabelRatioArray(e),t)}},_snapDirectional=function i(e){var t=gsap.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(s,n){return s-n});return r?function(s,n,a){a===void 0&&(a=.001);var l;if(!n)return t(s);if(n>0){for(s-=a,l=0;l<r.length;l++)if(r[l]>=s)return r[l];return r[l-1]}else for(l=r.length,s+=a;l--;)if(r[l]<=s)return r[l];return r[0]}:function(s,n,a){a===void 0&&(a=.001);var l=t(s);return!n||Math.abs(l-s)<a||l-s<0==n<0?l:t(n<0?s-e:s+e)}},_getLabelAtDirection=function i(e){return function(t,r){return _snapDirectional(_getLabelRatioArray(e))(t,r.direction)}},_multiListener=function i(e,t,r,s){return r.split(",").forEach(function(n){return e(t,n,s)})},_addListener=function i(e,t,r,s,n){return e.addEventListener(t,r,{passive:!s,capture:!!n})},_removeListener=function i(e,t,r,s){return e.removeEventListener(t,r,!!s)},_wheelListener=function i(e,t,r){r=r&&r.wheelHandler,r&&(e(t,"wheel",r),e(t,"touchmove",r))},_markerDefaults={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_defaults={toggleActions:"play",anticipatePin:0},_keywords={top:0,left:0,center:.5,bottom:1,right:1},_offsetToPx=function i(e,t){if(_isString(e)){var r=e.indexOf("="),s=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(s*=t/100),e=e.substr(0,r-1)),e=s+(e in _keywords?_keywords[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},_createMarker=function i(e,t,r,s,n,a,l,u){var c=n.startColor,p=n.endColor,b=n.fontSize,P=n.indent,N=n.fontWeight,de=_doc.createElement("div"),me=_isViewport(r)||_getProxyProp(r,"pinType")==="fixed",Ye=e.indexOf("scroller")!==-1,Le=me?_body:r,tt=e.indexOf("start")!==-1,Be=tt?c:p,nt="border-color:"+Be+";font-size:"+b+";color:"+Be+";font-weight:"+N+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return nt+="position:"+((Ye||u)&&me?"fixed;":"absolute;"),(Ye||u||!me)&&(nt+=(s===_vertical?_right:_bottom)+":"+(a+parseFloat(P))+"px;"),l&&(nt+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),de._isStart=tt,de.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),de.style.cssText=nt,de.innerText=t||t===0?e+"-"+t:e,Le.children[0]?Le.insertBefore(de,Le.children[0]):Le.appendChild(de),de._offset=de["offset"+s.op.d2],_positionMarker(de,0,s,tt),de},_positionMarker=function i(e,t,r,s){var n={display:"block"},a=r[s?"os2":"p2"],l=r[s?"p2":"os2"];e._isFlipped=s,n[r.a+"Percent"]=s?-100:0,n[r.a]=s?"1px":0,n["border"+a+_Width]=1,n["border"+l+_Width]=0,n[r.p]=t+"px",gsap.set(e,n)},_triggers=[],_ids={},_rafID,_sync=function i(){return _getTime()-_lastScrollTime>34&&(_rafID||(_rafID=requestAnimationFrame(_updateAll)))},_onScroll=function i(){(!_normalizer||!_normalizer.isPressed||_normalizer.startX>_body.clientWidth)&&(_scrollers.cache++,_normalizer?_rafID||(_rafID=requestAnimationFrame(_updateAll)):_updateAll(),_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime())},_setBaseDimensions=function i(){_baseScreenWidth=_win.innerWidth,_baseScreenHeight=_win.innerHeight},_onResize=function i(e){_scrollers.cache++,(e===!0||!_refreshing&&!_ignoreResize&&!_doc.fullscreenElement&&!_doc.webkitFullscreenElement&&(!_ignoreMobileResize||_baseScreenWidth!==_win.innerWidth||Math.abs(_win.innerHeight-_baseScreenHeight)>_win.innerHeight*.25))&&_resizeDelay.restart(!0)},_listeners={},_emptyArray=[],_softRefresh=function i(){return _removeListener(ScrollTrigger,"scrollEnd",i)||_refreshAll(!0)},_dispatch=function i(e){return _listeners[e]&&_listeners[e].map(function(t){return t()})||_emptyArray},_savedStyles=[],_revertRecorded=function i(e){for(var t=0;t<_savedStyles.length;t+=5)(!e||_savedStyles[t+4]&&_savedStyles[t+4].query===e)&&(_savedStyles[t].style.cssText=_savedStyles[t+1],_savedStyles[t].getBBox&&_savedStyles[t].setAttribute("transform",_savedStyles[t+2]||""),_savedStyles[t+3].uncache=1)},_revertAll=function i(e,t){var r;for(_i=0;_i<_triggers.length;_i++)r=_triggers[_i],r&&(!t||r._ctx===t)&&(e?r.kill(1):r.revert(!0,!0));_isReverted=!0,t&&_revertRecorded(t),t||_dispatch("revert")},_clearScrollMemory=function i(e,t){_scrollers.cache++,(t||!_refreshingAll)&&_scrollers.forEach(function(r){return _isFunction(r)&&r.cacheID++&&(r.rec=0)}),_isString(e)&&(_win.history.scrollRestoration=_scrollRestoration=e)},_refreshingAll,_refreshID=0,_queueRefreshID,_queueRefreshAll=function i(){if(_queueRefreshID!==_refreshID){var e=_queueRefreshID=_refreshID;requestAnimationFrame(function(){return e===_refreshID&&_refreshAll(!0)})}},_refresh100vh=function i(){_body.appendChild(_div100vh),_100vh=!_normalizer&&_div100vh.offsetHeight||_win.innerHeight,_body.removeChild(_div100vh)},_hideAllMarkers=function i(e){return _toArray(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},_refreshAll=function i(e,t){if(_docEl=_doc.documentElement,_body=_doc.body,_root=[_win,_doc,_docEl,_body],_lastScrollTime&&!e&&!_isReverted){_addListener(ScrollTrigger,"scrollEnd",_softRefresh);return}_refresh100vh(),_refreshingAll=ScrollTrigger.isRefreshing=!0,_scrollers.forEach(function(s){return _isFunction(s)&&++s.cacheID&&(s.rec=s())});var r=_dispatch("refreshInit");_sort&&ScrollTrigger.sort(),t||_revertAll(),_scrollers.forEach(function(s){_isFunction(s)&&(s.smooth&&(s.target.style.scrollBehavior="auto"),s(0))}),_triggers.slice(0).forEach(function(s){return s.refresh()}),_isReverted=!1,_triggers.forEach(function(s){if(s._subPinOffset&&s.pin){var n=s.vars.horizontal?"offsetWidth":"offsetHeight",a=s.pin[n];s.revert(!0,1),s.adjustPinSpacing(s.pin[n]-a),s.refresh()}}),_clampingMax=1,_hideAllMarkers(!0),_triggers.forEach(function(s){var n=_maxScroll(s.scroller,s._dir),a=s.vars.end==="max"||s._endClamp&&s.end>n,l=s._startClamp&&s.start>=n;(a||l)&&s.setPositions(l?n-1:s.start,a?Math.max(l?n:s.start+1,n):s.end,!0)}),_hideAllMarkers(!1),_clampingMax=0,r.forEach(function(s){return s&&s.render&&s.render(-1)}),_scrollers.forEach(function(s){_isFunction(s)&&(s.smooth&&requestAnimationFrame(function(){return s.target.style.scrollBehavior="smooth"}),s.rec&&s(s.rec))}),_clearScrollMemory(_scrollRestoration,1),_resizeDelay.pause(),_refreshID++,_refreshingAll=2,_updateAll(2),_triggers.forEach(function(s){return _isFunction(s.vars.onRefresh)&&s.vars.onRefresh(s)}),_refreshingAll=ScrollTrigger.isRefreshing=!1,_dispatch("refresh")},_lastScroll=0,_direction=1,_primary,_updateAll=function i(e){if(e===2||!_refreshingAll&&!_isReverted){ScrollTrigger.isUpdating=!0,_primary&&_primary.update(0);var t=_triggers.length,r=_getTime(),s=r-_time1>=50,n=t&&_triggers[0].scroll();if(_direction=_lastScroll>n?-1:1,_refreshingAll||(_lastScroll=n),s&&(_lastScrollTime&&!_pointerIsDown&&r-_lastScrollTime>200&&(_lastScrollTime=0,_dispatch("scrollEnd")),_time2=_time1,_time1=r),_direction<0){for(_i=t;_i-- >0;)_triggers[_i]&&_triggers[_i].update(0,s);_direction=1}else for(_i=0;_i<t;_i++)_triggers[_i]&&_triggers[_i].update(0,s);ScrollTrigger.isUpdating=!1}_rafID=0},_propNamesToCopy=[_left,_top,_bottom,_right,_margin+_Bottom,_margin+_Right,_margin+_Top,_margin+_Left,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],_stateProps=_propNamesToCopy.concat([_width,_height,"boxSizing","max"+_Width,"max"+_Height,"position",_margin,_padding,_padding+_Top,_padding+_Right,_padding+_Bottom,_padding+_Left]),_swapPinOut=function i(e,t,r){_setState(r);var s=e._gsap;if(s.spacerIsNative)_setState(s.spacerState);else if(e._gsap.swappedIn){var n=t.parentNode;n&&(n.insertBefore(e,t),n.removeChild(t))}e._gsap.swappedIn=!1},_swapPinIn=function i(e,t,r,s){if(!e._gsap.swappedIn){for(var n=_propNamesToCopy.length,a=t.style,l=e.style,u;n--;)u=_propNamesToCopy[n],a[u]=r[u];a.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(a.display="inline-block"),l[_bottom]=l[_right]="auto",a.flexBasis=r.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[_width]=_getSize(e,_horizontal)+_px,a[_height]=_getSize(e,_vertical)+_px,a[_padding]=l[_margin]=l[_top]=l[_left]="0",_setState(s),l[_width]=l["max"+_Width]=r[_width],l[_height]=l["max"+_Height]=r[_height],l[_padding]=r[_padding],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},_capsExp=/([A-Z])/g,_setState=function i(e){if(e){var t=e.t.style,r=e.length,s=0,n,a;for((e.t._gsap||gsap.core.getCache(e.t)).uncache=1;s<r;s+=2)a=e[s+1],n=e[s],a?t[n]=a:t[n]&&t.removeProperty(n.replace(_capsExp,"-$1").toLowerCase())}},_getState=function i(e){for(var t=_stateProps.length,r=e.style,s=[],n=0;n<t;n++)s.push(_stateProps[n],r[_stateProps[n]]);return s.t=e,s},_copyState=function i(e,t,r){for(var s=[],n=e.length,a=r?8:0,l;a<n;a+=2)l=e[a],s.push(l,l in t?t[l]:e[a+1]);return s.t=e.t,s},_winOffsets={left:0,top:0},_parsePosition=function i(e,t,r,s,n,a,l,u,c,p,b,P,N,de){_isFunction(e)&&(e=e(u)),_isString(e)&&e.substr(0,3)==="max"&&(e=P+(e.charAt(4)==="="?_offsetToPx("0"+e.substr(3),r):0));var me=N?N.time():0,Ye,Le,tt;if(N&&N.seek(0),isNaN(e)||(e=+e),_isNumber(e))N&&(e=gsap.utils.mapRange(N.scrollTrigger.start,N.scrollTrigger.end,0,P,e)),l&&_positionMarker(l,r,s,!0);else{_isFunction(t)&&(t=t(u));var Be=(e||"0").split(" "),nt,ft,mt,ht;tt=_getTarget(t,u)||_body,nt=_getBounds(tt)||{},(!nt||!nt.left&&!nt.top)&&_getComputedStyle(tt).display==="none"&&(ht=tt.style.display,tt.style.display="block",nt=_getBounds(tt),ht?tt.style.display=ht:tt.style.removeProperty("display")),ft=_offsetToPx(Be[0],nt[s.d]),mt=_offsetToPx(Be[1]||"0",r),e=nt[s.p]-c[s.p]-p+ft+n-mt,l&&_positionMarker(l,mt,s,r-mt<20||l._isStart&&mt>20),r-=r-mt}if(de&&(u[de]=e||-.001,e<0&&(e=0)),a){var Et=e+r,St=a._isStart;Ye="scroll"+s.d2,_positionMarker(a,Et,s,St&&Et>20||!St&&(b?Math.max(_body[Ye],_docEl[Ye]):a.parentNode[Ye])<=Et+1),b&&(c=_getBounds(l),b&&(a.style[s.op.p]=c[s.op.p]-s.op.m-a._offset+_px))}return N&&tt&&(Ye=_getBounds(tt),N.seek(P),Le=_getBounds(tt),N._caScrollDist=Ye[s.p]-Le[s.p],e=e/N._caScrollDist*P),N&&N.seek(me),N?e:Math.round(e)},_prefixExp=/(webkit|moz|length|cssText|inset)/i,_reparent=function i(e,t,r,s){if(e.parentNode!==t){var n=e.style,a,l;if(t===_body){e._stOrig=n.cssText,l=_getComputedStyle(e);for(a in l)!+a&&!_prefixExp.test(a)&&l[a]&&typeof n[a]=="string"&&a!=="0"&&(n[a]=l[a]);n.top=r,n.left=s}else n.cssText=e._stOrig;gsap.core.getCache(e).uncache=1,t.appendChild(e)}},_interruptionTracker=function i(e,t,r){var s=t,n=s;return function(a){var l=Math.round(e());return l!==s&&l!==n&&Math.abs(l-s)>3&&Math.abs(l-n)>3&&(a=l,r&&r()),n=s,s=Math.round(a),s}},_shiftMarker=function i(e,t,r){var s={};s[t.p]="+="+r,gsap.set(e,s)},_getTweenCreator=function i(e,t){var r=_getScrollFunc(e,t),s="_scroll"+t.p2,n=function a(l,u,c,p,b){var P=a.tween,N=u.onComplete,de={};c=c||r();var me=_interruptionTracker(r,c,function(){P.kill(),a.tween=0});return b=p&&b||0,p=p||l-c,P&&P.kill(),u[s]=l,u.inherit=!1,u.modifiers=de,de[s]=function(){return me(c+p*P.ratio+b*P.ratio*P.ratio)},u.onUpdate=function(){_scrollers.cache++,a.tween&&_updateAll()},u.onComplete=function(){a.tween=0,N&&N.call(P)},P=a.tween=gsap.to(e,u),P};return e[s]=r,r.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},_addListener(e,"wheel",r.wheelHandler),ScrollTrigger.isTouch&&_addListener(e,"touchmove",r.wheelHandler),n},ScrollTrigger=function(){function i(t,r){_coreInitted||i.register(gsap)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),_context(this),this.init(t,r)}var e=i.prototype;return e.init=function(r,s){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!_enabled){this.update=this.refresh=this.kill=_passThrough;return}r=_setDefaults(_isString(r)||_isNumber(r)||r.nodeType?{trigger:r}:r,_defaults);var n=r,a=n.onUpdate,l=n.toggleClass,u=n.id,c=n.onToggle,p=n.onRefresh,b=n.scrub,P=n.trigger,N=n.pin,de=n.pinSpacing,me=n.invalidateOnRefresh,Ye=n.anticipatePin,Le=n.onScrubComplete,tt=n.onSnapComplete,Be=n.once,nt=n.snap,ft=n.pinReparent,mt=n.pinSpacer,ht=n.containerAnimation,Et=n.fastScrollEnd,St=n.preventOverlaps,bt=r.horizontal||r.containerAnimation&&r.horizontal!==!1?_horizontal:_vertical,Pt=!b&&b!==0,Rt=_getTarget(r.scroller||_win),Dt=gsap.core.getCache(Rt),kt=_isViewport(Rt),Lt=("pinType"in r?r.pinType:_getProxyProp(Rt,"pinType")||kt&&"fixed")==="fixed",vt=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],xt=Pt&&r.toggleActions.split(" "),gt="markers"in r?r.markers:_defaults.markers,_t=kt?0:parseFloat(_getComputedStyle(Rt)["border"+bt.p2+_Width])||0,yt=this,At=r.onRefreshInit&&function(){return r.onRefreshInit(yt)},wt=_getSizeFunc(Rt,kt,bt),It=_getOffsetsFunc(Rt,kt),Ft=0,zt=0,Ut=0,Qt=_getScrollFunc(Rt,bt),Xt,Jt,mi,ni,pi,Zt,Yt,ji,ri,Bt,vi,Oi,Ri,ui,Vi,Zi,Ki,wi,Li,hi,zi,Ai,dr,Fr,tr,ys,wr,Lr,as,Mr,vs,gi,cs,Cr,_r,Nr,fs,Es,Br;if(yt._startClamp=yt._endClamp=!1,yt._dir=bt,Ye*=45,yt.scroller=Rt,yt.scroll=ht?ht.time.bind(ht):Qt,ni=Qt(),yt.vars=r,s=s||r.animation,"refreshPriority"in r&&(_sort=1,r.refreshPriority===-9999&&(_primary=yt)),Dt.tweenScroll=Dt.tweenScroll||{top:_getTweenCreator(Rt,_vertical),left:_getTweenCreator(Rt,_horizontal)},yt.tweenTo=Xt=Dt.tweenScroll[bt.p],yt.scrubDuration=function(Wt){cs=_isNumber(Wt)&&Wt,cs?gi?gi.duration(Wt):gi=gsap.to(s,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:cs,paused:!0,onComplete:function(){return Le&&Le(yt)}}):(gi&&gi.progress(1).kill(),gi=0)},s&&(s.vars.lazy=!1,s._initted&&!yt.isReverted||s.vars.immediateRender!==!1&&r.immediateRender!==!1&&s.duration()&&s.render(0,!0,!0),yt.animation=s.pause(),s.scrollTrigger=yt,yt.scrubDuration(b),Mr=0,u||(u=s.vars.id)),nt&&((!_isObject(nt)||nt.push)&&(nt={snapTo:nt}),"scrollBehavior"in _body.style&&gsap.set(kt?[_body,_docEl]:Rt,{scrollBehavior:"auto"}),_scrollers.forEach(function(Wt){return _isFunction(Wt)&&Wt.target===(kt?_doc.scrollingElement||_docEl:Rt)&&(Wt.smooth=!1)}),mi=_isFunction(nt.snapTo)?nt.snapTo:nt.snapTo==="labels"?_getClosestLabel(s):nt.snapTo==="labelsDirectional"?_getLabelAtDirection(s):nt.directional!==!1?function(Wt,ii){return _snapDirectional(nt.snapTo)(Wt,_getTime()-zt<500?0:ii.direction)}:gsap.utils.snap(nt.snapTo),Cr=nt.duration||{min:.1,max:2},Cr=_isObject(Cr)?_clamp(Cr.min,Cr.max):_clamp(Cr,Cr),_r=gsap.delayedCall(nt.delay||cs/2||.1,function(){var Wt=Qt(),ii=_getTime()-zt<500,ti=Xt.tween;if((ii||Math.abs(yt.getVelocity())<10)&&!ti&&!_pointerIsDown&&Ft!==Wt){var fi=(Wt-Zt)/ui,lr=s&&!Pt?s.totalProgress():fi,xi=ii?0:(lr-vs)/(_getTime()-_time2)*1e3||0,Xi=gsap.utils.clamp(-fi,1-fi,_abs(xi/2)*xi/.185),ir=fi+(nt.inertia===!1?0:Xi),qi,Ii,Ci=nt,Sr=Ci.onStart,Fi=Ci.onInterrupt,Mi=Ci.onComplete;if(qi=mi(ir,yt),_isNumber(qi)||(qi=ir),Ii=Math.max(0,Math.round(Zt+qi*ui)),Wt<=Yt&&Wt>=Zt&&Ii!==Wt){if(ti&&!ti._initted&&ti.data<=_abs(Ii-Wt))return;nt.inertia===!1&&(Xi=qi-fi),Xt(Ii,{duration:Cr(_abs(Math.max(_abs(ir-lr),_abs(qi-lr))*.185/xi/.05||0)),ease:nt.ease||"power3",data:_abs(Ii-Wt),onInterrupt:function(){return _r.restart(!0)&&Fi&&Fi(yt)},onComplete:function(){yt.update(),Ft=Qt(),s&&!Pt&&(gi?gi.resetTo("totalProgress",qi,s._tTime/s._tDur):s.progress(qi)),Mr=vs=s&&!Pt?s.totalProgress():yt.progress,tt&&tt(yt),Mi&&Mi(yt)}},Wt,Xi*ui,Ii-Wt-Xi*ui),Sr&&Sr(yt,Xt.tween)}}else yt.isActive&&Ft!==Wt&&_r.restart(!0)}).pause()),u&&(_ids[u]=yt),P=yt.trigger=_getTarget(P||N!==!0&&N),Br=P&&P._gsap&&P._gsap.stRevert,Br&&(Br=Br(yt)),N=N===!0?P:_getTarget(N),_isString(l)&&(l={targets:P,className:l}),N&&(de===!1||de===_margin||(de=!de&&N.parentNode&&N.parentNode.style&&_getComputedStyle(N.parentNode).display==="flex"?!1:_padding),yt.pin=N,Jt=gsap.core.getCache(N),Jt.spacer?Vi=Jt.pinState:(mt&&(mt=_getTarget(mt),mt&&!mt.nodeType&&(mt=mt.current||mt.nativeElement),Jt.spacerIsNative=!!mt,mt&&(Jt.spacerState=_getState(mt))),Jt.spacer=wi=mt||_doc.createElement("div"),wi.classList.add("pin-spacer"),u&&wi.classList.add("pin-spacer-"+u),Jt.pinState=Vi=_getState(N)),r.force3D!==!1&&gsap.set(N,{force3D:!0}),yt.spacer=wi=Jt.spacer,as=_getComputedStyle(N),Fr=as[de+bt.os2],hi=gsap.getProperty(N),zi=gsap.quickSetter(N,bt.a,_px),_swapPinIn(N,wi,as),Ki=_getState(N)),gt){Oi=_isObject(gt)?_setDefaults(gt,_markerDefaults):_markerDefaults,Bt=_createMarker("scroller-start",u,Rt,bt,Oi,0),vi=_createMarker("scroller-end",u,Rt,bt,Oi,0,Bt),Li=Bt["offset"+bt.op.d2];var _s=_getTarget(_getProxyProp(Rt,"content")||Rt);ji=this.markerStart=_createMarker("start",u,_s,bt,Oi,Li,0,ht),ri=this.markerEnd=_createMarker("end",u,_s,bt,Oi,Li,0,ht),ht&&(Es=gsap.quickSetter([ji,ri],bt.a,_px)),!Lt&&!(_proxies.length&&_getProxyProp(Rt,"fixedMarkers")===!0)&&(_makePositionable(kt?_body:Rt),gsap.set([Bt,vi],{force3D:!0}),ys=gsap.quickSetter(Bt,bt.a,_px),Lr=gsap.quickSetter(vi,bt.a,_px))}if(ht){var di=ht.vars.onUpdate,ai=ht.vars.onUpdateParams;ht.eventCallback("onUpdate",function(){yt.update(0,0,1),di&&di.apply(ht,ai||[])})}if(yt.previous=function(){return _triggers[_triggers.indexOf(yt)-1]},yt.next=function(){return _triggers[_triggers.indexOf(yt)+1]},yt.revert=function(Wt,ii){if(!ii)return yt.kill(!0);var ti=Wt!==!1||!yt.enabled,fi=_refreshing;ti!==yt.isReverted&&(ti&&(Nr=Math.max(Qt(),yt.scroll.rec||0),Ut=yt.progress,fs=s&&s.progress()),ji&&[ji,ri,Bt,vi].forEach(function(lr){return lr.style.display=ti?"none":"block"}),ti&&(_refreshing=yt,yt.update(ti)),N&&(!ft||!yt.isActive)&&(ti?_swapPinOut(N,wi,Vi):_swapPinIn(N,wi,_getComputedStyle(N),tr)),ti||yt.update(ti),_refreshing=fi,yt.isReverted=ti)},yt.refresh=function(Wt,ii,ti,fi){if(!((_refreshing||!yt.enabled)&&!ii)){if(N&&Wt&&_lastScrollTime){_addListener(i,"scrollEnd",_softRefresh);return}!_refreshingAll&&At&&At(yt),_refreshing=yt,Xt.tween&&!ti&&(Xt.tween.kill(),Xt.tween=0),gi&&gi.pause(),me&&s&&(s.revert({kill:!1}).invalidate(),s.getChildren&&s.getChildren(!0,!0,!1).forEach(function(Xr){return Xr.vars.immediateRender&&Xr.render(0,!0,!0)})),yt.isReverted||yt.revert(!0,!0),yt._subPinOffset=!1;var lr=wt(),xi=It(),Xi=ht?ht.duration():_maxScroll(Rt,bt),ir=ui<=.01||!ui,qi=0,Ii=fi||0,Ci=_isObject(ti)?ti.end:r.end,Sr=r.endTrigger||P,Fi=_isObject(ti)?ti.start:r.start||(r.start===0||!P?0:N?"0 0":"0 100%"),Mi=yt.pinnedContainer=r.pinnedContainer&&_getTarget(r.pinnedContainer,yt),Vr=P&&Math.max(0,_triggers.indexOf(yt))||0,ur=Vr,Wi,Ji,Ss,un,pr,nr,Pr,Bs,Yr,xs,$r,Wr,Vs;for(gt&&_isObject(ti)&&(Wr=gsap.getProperty(Bt,bt.p),Vs=gsap.getProperty(vi,bt.p));ur-- >0;)nr=_triggers[ur],nr.end||nr.refresh(0,1)||(_refreshing=yt),Pr=nr.pin,Pr&&(Pr===P||Pr===N||Pr===Mi)&&!nr.isReverted&&(xs||(xs=[]),xs.unshift(nr),nr.revert(!0,!0)),nr!==_triggers[ur]&&(Vr--,ur--);for(_isFunction(Fi)&&(Fi=Fi(yt)),Fi=_parseClamp(Fi,"start",yt),Zt=_parsePosition(Fi,P,lr,bt,Qt(),ji,Bt,yt,xi,_t,Lt,Xi,ht,yt._startClamp&&"_startClamp")||(N?-.001:0),_isFunction(Ci)&&(Ci=Ci(yt)),_isString(Ci)&&!Ci.indexOf("+=")&&(~Ci.indexOf(" ")?Ci=(_isString(Fi)?Fi.split(" ")[0]:"")+Ci:(qi=_offsetToPx(Ci.substr(2),lr),Ci=_isString(Fi)?Fi:(ht?gsap.utils.mapRange(0,ht.duration(),ht.scrollTrigger.start,ht.scrollTrigger.end,Zt):Zt)+qi,Sr=P)),Ci=_parseClamp(Ci,"end",yt),Yt=Math.max(Zt,_parsePosition(Ci||(Sr?"100% 0":Xi),Sr,lr,bt,Qt()+qi,ri,vi,yt,xi,_t,Lt,Xi,ht,yt._endClamp&&"_endClamp"))||-.001,qi=0,ur=Vr;ur--;)nr=_triggers[ur],Pr=nr.pin,Pr&&nr.start-nr._pinPush<=Zt&&!ht&&nr.end>0&&(Wi=nr.end-(yt._startClamp?Math.max(0,nr.start):nr.start),(Pr===P&&nr.start-nr._pinPush<Zt||Pr===Mi)&&isNaN(Fi)&&(qi+=Wi*(1-nr.progress)),Pr===N&&(Ii+=Wi));if(Zt+=qi,Yt+=qi,yt._startClamp&&(yt._startClamp+=qi),yt._endClamp&&!_refreshingAll&&(yt._endClamp=Yt||-.001,Yt=Math.min(Yt,_maxScroll(Rt,bt))),ui=Yt-Zt||(Zt-=.01)&&.001,ir&&(Ut=gsap.utils.clamp(0,1,gsap.utils.normalize(Zt,Yt,Nr))),yt._pinPush=Ii,ji&&qi&&(Wi={},Wi[bt.a]="+="+qi,Mi&&(Wi[bt.p]="-="+Qt()),gsap.set([ji,ri],Wi)),N&&!(_clampingMax&&yt.end>=_maxScroll(Rt,bt)))Wi=_getComputedStyle(N),un=bt===_vertical,Ss=Qt(),Ai=parseFloat(hi(bt.a))+Ii,!Xi&&Yt>1&&($r=(kt?_doc.scrollingElement||_docEl:Rt).style,$r={style:$r,value:$r["overflow"+bt.a.toUpperCase()]},kt&&_getComputedStyle(_body)["overflow"+bt.a.toUpperCase()]!=="scroll"&&($r.style["overflow"+bt.a.toUpperCase()]="scroll")),_swapPinIn(N,wi,Wi),Ki=_getState(N),Ji=_getBounds(N,!0),Bs=Lt&&_getScrollFunc(Rt,un?_horizontal:_vertical)(),de?(tr=[de+bt.os2,ui+Ii+_px],tr.t=wi,ur=de===_padding?_getSize(N,bt)+ui+Ii:0,ur&&(tr.push(bt.d,ur+_px),wi.style.flexBasis!=="auto"&&(wi.style.flexBasis=ur+_px)),_setState(tr),Mi&&_triggers.forEach(function(Xr){Xr.pin===Mi&&Xr.vars.pinSpacing!==!1&&(Xr._subPinOffset=!0)}),Lt&&Qt(Nr)):(ur=_getSize(N,bt),ur&&wi.style.flexBasis!=="auto"&&(wi.style.flexBasis=ur+_px)),Lt&&(pr={top:Ji.top+(un?Ss-Zt:Bs)+_px,left:Ji.left+(un?Bs:Ss-Zt)+_px,boxSizing:"border-box",position:"fixed"},pr[_width]=pr["max"+_Width]=Math.ceil(Ji.width)+_px,pr[_height]=pr["max"+_Height]=Math.ceil(Ji.height)+_px,pr[_margin]=pr[_margin+_Top]=pr[_margin+_Right]=pr[_margin+_Bottom]=pr[_margin+_Left]="0",pr[_padding]=Wi[_padding],pr[_padding+_Top]=Wi[_padding+_Top],pr[_padding+_Right]=Wi[_padding+_Right],pr[_padding+_Bottom]=Wi[_padding+_Bottom],pr[_padding+_Left]=Wi[_padding+_Left],Zi=_copyState(Vi,pr,ft),_refreshingAll&&Qt(0)),s?(Yr=s._initted,_suppressOverwrites(1),s.render(s.duration(),!0,!0),dr=hi(bt.a)-Ai+ui+Ii,wr=Math.abs(ui-dr)>1,Lt&&wr&&Zi.splice(Zi.length-2,2),s.render(0,!0,!0),Yr||s.invalidate(!0),s.parent||s.totalTime(s.totalTime()),_suppressOverwrites(0)):dr=ui,$r&&($r.value?$r.style["overflow"+bt.a.toUpperCase()]=$r.value:$r.style.removeProperty("overflow-"+bt.a));else if(P&&Qt()&&!ht)for(Ji=P.parentNode;Ji&&Ji!==_body;)Ji._pinOffset&&(Zt-=Ji._pinOffset,Yt-=Ji._pinOffset),Ji=Ji.parentNode;xs&&xs.forEach(function(Xr){return Xr.revert(!1,!0)}),yt.start=Zt,yt.end=Yt,ni=pi=_refreshingAll?Nr:Qt(),!ht&&!_refreshingAll&&(ni<Nr&&Qt(Nr),yt.scroll.rec=0),yt.revert(!1,!0),zt=_getTime(),_r&&(Ft=-1,_r.restart(!0)),_refreshing=0,s&&Pt&&(s._initted||fs)&&s.progress()!==fs&&s.progress(fs||0,!0).render(s.time(),!0,!0),(ir||Ut!==yt.progress||ht||me||s&&!s._initted)&&(s&&!Pt&&(s._initted||Ut||s.vars.immediateRender!==!1)&&s.totalProgress(ht&&Zt<-.001&&!Ut?gsap.utils.normalize(Zt,Yt,0):Ut,!0),yt.progress=ir||(ni-Zt)/ui===Ut?0:Ut),N&&de&&(wi._pinOffset=Math.round(yt.progress*dr)),gi&&gi.invalidate(),isNaN(Wr)||(Wr-=gsap.getProperty(Bt,bt.p),Vs-=gsap.getProperty(vi,bt.p),_shiftMarker(Bt,bt,Wr),_shiftMarker(ji,bt,Wr-(fi||0)),_shiftMarker(vi,bt,Vs),_shiftMarker(ri,bt,Vs-(fi||0))),ir&&!_refreshingAll&&yt.update(),p&&!_refreshingAll&&!Ri&&(Ri=!0,p(yt),Ri=!1)}},yt.getVelocity=function(){return(Qt()-pi)/(_getTime()-_time2)*1e3||0},yt.endAnimation=function(){_endAnimation(yt.callbackAnimation),s&&(gi?gi.progress(1):s.paused()?Pt||_endAnimation(s,yt.direction<0,1):_endAnimation(s,s.reversed()))},yt.labelToScroll=function(Wt){return s&&s.labels&&(Zt||yt.refresh()||Zt)+s.labels[Wt]/s.duration()*ui||0},yt.getTrailing=function(Wt){var ii=_triggers.indexOf(yt),ti=yt.direction>0?_triggers.slice(0,ii).reverse():_triggers.slice(ii+1);return(_isString(Wt)?ti.filter(function(fi){return fi.vars.preventOverlaps===Wt}):ti).filter(function(fi){return yt.direction>0?fi.end<=Zt:fi.start>=Yt})},yt.update=function(Wt,ii,ti){if(!(ht&&!ti&&!Wt)){var fi=_refreshingAll===!0?Nr:yt.scroll(),lr=Wt?0:(fi-Zt)/ui,xi=lr<0?0:lr>1?1:lr||0,Xi=yt.progress,ir,qi,Ii,Ci,Sr,Fi,Mi,Vr;if(ii&&(pi=ni,ni=ht?Qt():fi,nt&&(vs=Mr,Mr=s&&!Pt?s.totalProgress():xi)),Ye&&N&&!_refreshing&&!_startup&&_lastScrollTime&&(!xi&&Zt<fi+(fi-pi)/(_getTime()-_time2)*Ye?xi=1e-4:xi===1&&Yt>fi+(fi-pi)/(_getTime()-_time2)*Ye&&(xi=.9999)),xi!==Xi&&yt.enabled){if(ir=yt.isActive=!!xi&&xi<1,qi=!!Xi&&Xi<1,Fi=ir!==qi,Sr=Fi||!!xi!=!!Xi,yt.direction=xi>Xi?1:-1,yt.progress=xi,Sr&&!_refreshing&&(Ii=xi&&!Xi?0:xi===1?1:Xi===1?2:3,Pt&&(Ci=!Fi&&xt[Ii+1]!=="none"&&xt[Ii+1]||xt[Ii],Vr=s&&(Ci==="complete"||Ci==="reset"||Ci in s))),St&&(Fi||Vr)&&(Vr||b||!s)&&(_isFunction(St)?St(yt):yt.getTrailing(St).forEach(function(Ss){return Ss.endAnimation()})),Pt||(gi&&!_refreshing&&!_startup?(gi._dp._time-gi._start!==gi._time&&gi.render(gi._dp._time-gi._start),gi.resetTo?gi.resetTo("totalProgress",xi,s._tTime/s._tDur):(gi.vars.totalProgress=xi,gi.invalidate().restart())):s&&s.totalProgress(xi,!!(_refreshing&&(zt||Wt)))),N){if(Wt&&de&&(wi.style[de+bt.os2]=Fr),!Lt)zi(_round(Ai+dr*xi));else if(Sr){if(Mi=!Wt&&xi>Xi&&Yt+1>fi&&fi+1>=_maxScroll(Rt,bt),ft)if(!Wt&&(ir||Mi)){var ur=_getBounds(N,!0),Wi=fi-Zt;_reparent(N,_body,ur.top+(bt===_vertical?Wi:0)+_px,ur.left+(bt===_vertical?0:Wi)+_px)}else _reparent(N,wi);_setState(ir||Mi?Zi:Ki),wr&&xi<1&&ir||zi(Ai+(xi===1&&!Mi?dr:0))}}nt&&!Xt.tween&&!_refreshing&&!_startup&&_r.restart(!0),l&&(Fi||Be&&xi&&(xi<1||!_limitCallbacks))&&_toArray(l.targets).forEach(function(Ss){return Ss.classList[ir||Be?"add":"remove"](l.className)}),a&&!Pt&&!Wt&&a(yt),Sr&&!_refreshing?(Pt&&(Vr&&(Ci==="complete"?s.pause().totalProgress(1):Ci==="reset"?s.restart(!0).pause():Ci==="restart"?s.restart(!0):s[Ci]()),a&&a(yt)),(Fi||!_limitCallbacks)&&(c&&Fi&&_callback(yt,c),vt[Ii]&&_callback(yt,vt[Ii]),Be&&(xi===1?yt.kill(!1,1):vt[Ii]=0),Fi||(Ii=xi===1?1:3,vt[Ii]&&_callback(yt,vt[Ii]))),Et&&!ir&&Math.abs(yt.getVelocity())>(_isNumber(Et)?Et:2500)&&(_endAnimation(yt.callbackAnimation),gi?gi.progress(1):_endAnimation(s,Ci==="reverse"?1:!xi,1))):Pt&&a&&!_refreshing&&a(yt)}if(Lr){var Ji=ht?fi/ht.duration()*(ht._caScrollDist||0):fi;ys(Ji+(Bt._isFlipped?1:0)),Lr(Ji)}Es&&Es(-fi/ht.duration()*(ht._caScrollDist||0))}},yt.enable=function(Wt,ii){yt.enabled||(yt.enabled=!0,_addListener(Rt,"resize",_onResize),kt||_addListener(Rt,"scroll",_onScroll),At&&_addListener(i,"refreshInit",At),Wt!==!1&&(yt.progress=Ut=0,ni=pi=Ft=Qt()),ii!==!1&&yt.refresh())},yt.getTween=function(Wt){return Wt&&Xt?Xt.tween:gi},yt.setPositions=function(Wt,ii,ti,fi){if(ht){var lr=ht.scrollTrigger,xi=ht.duration(),Xi=lr.end-lr.start;Wt=lr.start+Xi*Wt/xi,ii=lr.start+Xi*ii/xi}yt.refresh(!1,!1,{start:_keepClamp(Wt,ti&&!!yt._startClamp),end:_keepClamp(ii,ti&&!!yt._endClamp)},fi),yt.update()},yt.adjustPinSpacing=function(Wt){if(tr&&Wt){var ii=tr.indexOf(bt.d)+1;tr[ii]=parseFloat(tr[ii])+Wt+_px,tr[1]=parseFloat(tr[1])+Wt+_px,_setState(tr)}},yt.disable=function(Wt,ii){if(yt.enabled&&(Wt!==!1&&yt.revert(!0,!0),yt.enabled=yt.isActive=!1,ii||gi&&gi.pause(),Nr=0,Jt&&(Jt.uncache=1),At&&_removeListener(i,"refreshInit",At),_r&&(_r.pause(),Xt.tween&&Xt.tween.kill()&&(Xt.tween=0)),!kt)){for(var ti=_triggers.length;ti--;)if(_triggers[ti].scroller===Rt&&_triggers[ti]!==yt)return;_removeListener(Rt,"resize",_onResize),kt||_removeListener(Rt,"scroll",_onScroll)}},yt.kill=function(Wt,ii){yt.disable(Wt,ii),gi&&!ii&&gi.kill(),u&&delete _ids[u];var ti=_triggers.indexOf(yt);ti>=0&&_triggers.splice(ti,1),ti===_i&&_direction>0&&_i--,ti=0,_triggers.forEach(function(fi){return fi.scroller===yt.scroller&&(ti=1)}),ti||_refreshingAll||(yt.scroll.rec=0),s&&(s.scrollTrigger=null,Wt&&s.revert({kill:!1}),ii||s.kill()),ji&&[ji,ri,Bt,vi].forEach(function(fi){return fi.parentNode&&fi.parentNode.removeChild(fi)}),_primary===yt&&(_primary=0),N&&(Jt&&(Jt.uncache=1),ti=0,_triggers.forEach(function(fi){return fi.pin===N&&ti++}),ti||(Jt.spacer=0)),r.onKill&&r.onKill(yt)},_triggers.push(yt),yt.enable(!1,!1),Br&&Br(yt),s&&s.add&&!ui){var yi=yt.update;yt.update=function(){yt.update=yi,_scrollers.cache++,Zt||Yt||yt.refresh()},gsap.delayedCall(.01,yt.update),ui=.01,Zt=Yt=0}else yt.refresh();N&&_queueRefreshAll()},i.register=function(r){return _coreInitted||(gsap=r||_getGSAP(),_windowExists()&&window.document&&i.enable(),_coreInitted=_enabled),_coreInitted},i.defaults=function(r){if(r)for(var s in r)_defaults[s]=r[s];return _defaults},i.disable=function(r,s){_enabled=0,_triggers.forEach(function(a){return a[s?"kill":"disable"](r)}),_removeListener(_win,"wheel",_onScroll),_removeListener(_doc,"scroll",_onScroll),clearInterval(_syncInterval),_removeListener(_doc,"touchcancel",_passThrough),_removeListener(_body,"touchstart",_passThrough),_multiListener(_removeListener,_doc,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_removeListener,_doc,"pointerup,touchend,mouseup",_pointerUpHandler),_resizeDelay.kill(),_iterateAutoRefresh(_removeListener);for(var n=0;n<_scrollers.length;n+=3)_wheelListener(_removeListener,_scrollers[n],_scrollers[n+1]),_wheelListener(_removeListener,_scrollers[n],_scrollers[n+2])},i.enable=function(){if(_win=window,_doc=document,_docEl=_doc.documentElement,_body=_doc.body,gsap&&(_toArray=gsap.utils.toArray,_clamp=gsap.utils.clamp,_context=gsap.core.context||_passThrough,_suppressOverwrites=gsap.core.suppressOverwrites||_passThrough,_scrollRestoration=_win.history.scrollRestoration||"auto",_lastScroll=_win.pageYOffset||0,gsap.core.globals("ScrollTrigger",i),_body)){_enabled=1,_div100vh=document.createElement("div"),_div100vh.style.height="100vh",_div100vh.style.position="absolute",_refresh100vh(),_rafBugFix(),Observer$1.register(gsap),i.isTouch=Observer$1.isTouch,_fixIOSBug=Observer$1.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),_ignoreMobileResize=Observer$1.isTouch===1,_addListener(_win,"wheel",_onScroll),_root=[_win,_doc,_docEl,_body],gsap.matchMedia?(i.matchMedia=function(c){var p=gsap.matchMedia(),b;for(b in c)p.add(b,c[b]);return p},gsap.addEventListener("matchMediaInit",function(){return _revertAll()}),gsap.addEventListener("matchMediaRevert",function(){return _revertRecorded()}),gsap.addEventListener("matchMedia",function(){_refreshAll(0,1),_dispatch("matchMedia")}),gsap.matchMedia().add("(orientation: portrait)",function(){return _setBaseDimensions(),_setBaseDimensions})):console.warn("Requires GSAP 3.11.0 or later"),_setBaseDimensions(),_addListener(_doc,"scroll",_onScroll);var r=_body.hasAttribute("style"),s=_body.style,n=s.borderTopStyle,a=gsap.core.Animation.prototype,l,u;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),s.borderTopStyle="solid",l=_getBounds(_body),_vertical.m=Math.round(l.top+_vertical.sc())||0,_horizontal.m=Math.round(l.left+_horizontal.sc())||0,n?s.borderTopStyle=n:s.removeProperty("border-top-style"),r||(_body.setAttribute("style",""),_body.removeAttribute("style")),_syncInterval=setInterval(_sync,250),gsap.delayedCall(.5,function(){return _startup=0}),_addListener(_doc,"touchcancel",_passThrough),_addListener(_body,"touchstart",_passThrough),_multiListener(_addListener,_doc,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_addListener,_doc,"pointerup,touchend,mouseup",_pointerUpHandler),_transformProp=gsap.utils.checkPrefix("transform"),_stateProps.push(_transformProp),_coreInitted=_getTime(),_resizeDelay=gsap.delayedCall(.2,_refreshAll).pause(),_autoRefresh=[_doc,"visibilitychange",function(){var c=_win.innerWidth,p=_win.innerHeight;_doc.hidden?(_prevWidth=c,_prevHeight=p):(_prevWidth!==c||_prevHeight!==p)&&_onResize()},_doc,"DOMContentLoaded",_refreshAll,_win,"load",_refreshAll,_win,"resize",_onResize],_iterateAutoRefresh(_addListener),_triggers.forEach(function(c){return c.enable(0,1)}),u=0;u<_scrollers.length;u+=3)_wheelListener(_removeListener,_scrollers[u],_scrollers[u+1]),_wheelListener(_removeListener,_scrollers[u],_scrollers[u+2])}},i.config=function(r){"limitCallbacks"in r&&(_limitCallbacks=!!r.limitCallbacks);var s=r.syncInterval;s&&clearInterval(_syncInterval)||(_syncInterval=s)&&setInterval(_sync,s),"ignoreMobileResize"in r&&(_ignoreMobileResize=i.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(_iterateAutoRefresh(_removeListener)||_iterateAutoRefresh(_addListener,r.autoRefreshEvents||"none"),_ignoreResize=(r.autoRefreshEvents+"").indexOf("resize")===-1)},i.scrollerProxy=function(r,s){var n=_getTarget(r),a=_scrollers.indexOf(n),l=_isViewport(n);~a&&_scrollers.splice(a,l?6:2),s&&(l?_proxies.unshift(_win,s,_body,s,_docEl,s):_proxies.unshift(n,s))},i.clearMatchMedia=function(r){_triggers.forEach(function(s){return s._ctx&&s._ctx.query===r&&s._ctx.kill(!0,!0)})},i.isInViewport=function(r,s,n){var a=(_isString(r)?_getTarget(r):r).getBoundingClientRect(),l=a[n?_width:_height]*s||0;return n?a.right-l>0&&a.left+l<_win.innerWidth:a.bottom-l>0&&a.top+l<_win.innerHeight},i.positionInViewport=function(r,s,n){_isString(r)&&(r=_getTarget(r));var a=r.getBoundingClientRect(),l=a[n?_width:_height],u=s==null?l/2:s in _keywords?_keywords[s]*l:~s.indexOf("%")?parseFloat(s)*l/100:parseFloat(s)||0;return n?(a.left+u)/_win.innerWidth:(a.top+u)/_win.innerHeight},i.killAll=function(r){if(_triggers.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),r!==!0){var s=_listeners.killAll||[];_listeners={},s.forEach(function(n){return n()})}},i}();ScrollTrigger.version="3.13.0";ScrollTrigger.saveStyles=function(i){return i?_toArray(i).forEach(function(e){if(e&&e.style){var t=_savedStyles.indexOf(e);t>=0&&_savedStyles.splice(t,5),_savedStyles.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),gsap.core.getCache(e),_context())}}):_savedStyles};ScrollTrigger.revert=function(i,e){return _revertAll(!i,e)};ScrollTrigger.create=function(i,e){return new ScrollTrigger(i,e)};ScrollTrigger.refresh=function(i){return i?_onResize(!0):(_coreInitted||ScrollTrigger.register())&&_refreshAll(!0)};ScrollTrigger.update=function(i){return++_scrollers.cache&&_updateAll(i===!0?2:0)};ScrollTrigger.clearScrollMemory=_clearScrollMemory;ScrollTrigger.maxScroll=function(i,e){return _maxScroll(i,e?_horizontal:_vertical)};ScrollTrigger.getScrollFunc=function(i,e){return _getScrollFunc(_getTarget(i),e?_horizontal:_vertical)};ScrollTrigger.getById=function(i){return _ids[i]};ScrollTrigger.getAll=function(){return _triggers.filter(function(i){return i.vars.id!=="ScrollSmoother"})};ScrollTrigger.isScrolling=function(){return!!_lastScrollTime};ScrollTrigger.snapDirectional=_snapDirectional;ScrollTrigger.addEventListener=function(i,e){var t=_listeners[i]||(_listeners[i]=[]);~t.indexOf(e)||t.push(e)};ScrollTrigger.removeEventListener=function(i,e){var t=_listeners[i],r=t&&t.indexOf(e);r>=0&&t.splice(r,1)};ScrollTrigger.batch=function(i,e){var t=[],r={},s=e.interval||.016,n=e.batchMax||1e9,a=function(c,p){var b=[],P=[],N=gsap.delayedCall(s,function(){p(b,P),b=[],P=[]}).pause();return function(de){b.length||N.restart(!0),b.push(de.trigger),P.push(de),n<=b.length&&N.progress(1)}},l;for(l in e)r[l]=l.substr(0,2)==="on"&&_isFunction(e[l])&&l!=="onRefreshInit"?a(l,e[l]):e[l];return _isFunction(n)&&(n=n(),_addListener(ScrollTrigger,"refresh",function(){return n=e.batchMax()})),_toArray(i).forEach(function(u){var c={};for(l in r)c[l]=r[l];c.trigger=u,t.push(ScrollTrigger.create(c))}),t};var _clampScrollAndGetDurationMultiplier=function i(e,t,r,s){return t>s?e(s):t<0&&e(0),r>s?(s-t)/(r-t):r<0?t/(t-r):1},_allowNativePanning=function i(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Observer$1.isTouch?" pinch-zoom":""):"none",e===_docEl&&i(_body,t)},_overflow={auto:1,scroll:1},_nestedScroll=function i(e){var t=e.event,r=e.target,s=e.axis,n=(t.changedTouches?t.changedTouches[0]:t).target,a=n._gsap||gsap.core.getCache(n),l=_getTime(),u;if(!a._isScrollT||l-a._isScrollT>2e3){for(;n&&n!==_body&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(_overflow[(u=_getComputedStyle(n)).overflowY]||_overflow[u.overflowX]));)n=n.parentNode;a._isScroll=n&&n!==r&&!_isViewport(n)&&(_overflow[(u=_getComputedStyle(n)).overflowY]||_overflow[u.overflowX]),a._isScrollT=l}(a._isScroll||s==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},_inputObserver=function i(e,t,r,s){return Observer$1.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:s=s&&_nestedScroll,onPress:s,onDrag:s,onScroll:s,onEnable:function(){return r&&_addListener(_doc,Observer$1.eventTypes[0],_captureInputs,!1,!0)},onDisable:function(){return _removeListener(_doc,Observer$1.eventTypes[0],_captureInputs,!0)}})},_inputExp=/(input|label|select|textarea)/i,_inputIsFocused,_captureInputs=function i(e){var t=_inputExp.test(e.target.tagName);(t||_inputIsFocused)&&(e._gsapAllow=!0,_inputIsFocused=t)},_getScrollNormalizer=function i(e){_isObject(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,r=t.normalizeScrollX,s=t.momentum,n=t.allowNestedScroll,a=t.onRelease,l,u,c=_getTarget(e.target)||_docEl,p=gsap.core.globals().ScrollSmoother,b=p&&p.get(),P=_fixIOSBug&&(e.content&&_getTarget(e.content)||b&&e.content!==!1&&!b.smooth()&&b.content()),N=_getScrollFunc(c,_vertical),de=_getScrollFunc(c,_horizontal),me=1,Ye=(Observer$1.isTouch&&_win.visualViewport?_win.visualViewport.scale*_win.visualViewport.width:_win.outerWidth)/_win.innerWidth,Le=0,tt=_isFunction(s)?function(){return s(l)}:function(){return s||2.8},Be,nt,ft=_inputObserver(c,e.type,!0,n),mt=function(){return nt=!1},ht=_passThrough,Et=_passThrough,St=function(){u=_maxScroll(c,_vertical),Et=_clamp(_fixIOSBug?1:0,u),r&&(ht=_clamp(0,_maxScroll(c,_horizontal))),Be=_refreshID},bt=function(){P._gsap.y=_round(parseFloat(P._gsap.y)+N.offset)+"px",P.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(P._gsap.y)+", 0, 1)",N.offset=N.cacheID=0},Pt=function(){if(nt){requestAnimationFrame(mt);var gt=_round(l.deltaY/2),_t=Et(N.v-gt);if(P&&_t!==N.v+N.offset){N.offset=_t-N.v;var yt=_round((parseFloat(P&&P._gsap.y)||0)-N.offset);P.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+yt+", 0, 1)",P._gsap.y=yt+"px",N.cacheID=_scrollers.cache,_updateAll()}return!0}N.offset&&bt(),nt=!0},Rt,Dt,kt,Lt,vt=function(){St(),Rt.isActive()&&Rt.vars.scrollY>u&&(N()>u?Rt.progress(1)&&N(u):Rt.resetTo("scrollY",u))};return P&&gsap.set(P,{y:"+=0"}),e.ignoreCheck=function(xt){return _fixIOSBug&&xt.type==="touchmove"&&Pt()||me>1.05&&xt.type!=="touchstart"||l.isGesturing||xt.touches&&xt.touches.length>1},e.onPress=function(){nt=!1;var xt=me;me=_round((_win.visualViewport&&_win.visualViewport.scale||1)/Ye),Rt.pause(),xt!==me&&_allowNativePanning(c,me>1.01?!0:r?!1:"x"),Dt=de(),kt=N(),St(),Be=_refreshID},e.onRelease=e.onGestureStart=function(xt,gt){if(N.offset&&bt(),!gt)Lt.restart(!0);else{_scrollers.cache++;var _t=tt(),yt,At;r&&(yt=de(),At=yt+_t*.05*-xt.velocityX/.227,_t*=_clampScrollAndGetDurationMultiplier(de,yt,At,_maxScroll(c,_horizontal)),Rt.vars.scrollX=ht(At)),yt=N(),At=yt+_t*.05*-xt.velocityY/.227,_t*=_clampScrollAndGetDurationMultiplier(N,yt,At,_maxScroll(c,_vertical)),Rt.vars.scrollY=Et(At),Rt.invalidate().duration(_t).play(.01),(_fixIOSBug&&Rt.vars.scrollY>=u||yt>=u-1)&&gsap.to({},{onUpdate:vt,duration:_t})}a&&a(xt)},e.onWheel=function(){Rt._ts&&Rt.pause(),_getTime()-Le>1e3&&(Be=0,Le=_getTime())},e.onChange=function(xt,gt,_t,yt,At){if(_refreshID!==Be&&St(),gt&&r&&de(ht(yt[2]===gt?Dt+(xt.startX-xt.x):de()+gt-yt[1])),_t){N.offset&&bt();var wt=At[2]===_t,It=wt?kt+xt.startY-xt.y:N()+_t-At[1],Ft=Et(It);wt&&It!==Ft&&(kt+=Ft-It),N(Ft)}(_t||gt)&&_updateAll()},e.onEnable=function(){_allowNativePanning(c,r?!1:"x"),ScrollTrigger.addEventListener("refresh",vt),_addListener(_win,"resize",vt),N.smooth&&(N.target.style.scrollBehavior="auto",N.smooth=de.smooth=!1),ft.enable()},e.onDisable=function(){_allowNativePanning(c,!0),_removeListener(_win,"resize",vt),ScrollTrigger.removeEventListener("refresh",vt),ft.kill()},e.lockAxis=e.lockAxis!==!1,l=new Observer$1(e),l.iOS=_fixIOSBug,_fixIOSBug&&!N()&&N(1),_fixIOSBug&&gsap.ticker.add(_passThrough),Lt=l._dc,Rt=gsap.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:_interruptionTracker(N,N(),function(){return Rt.pause()})},onUpdate:_updateAll,onComplete:Lt.vars.onComplete}),l};ScrollTrigger.sort=function(i){if(_isFunction(i))return _triggers.sort(i);var e=_win.pageYOffset||0;return ScrollTrigger.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+_win.innerHeight}),_triggers.sort(i||function(t,r){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((r.vars.containerAnimation?1e6:r._sortY)+(r.vars.refreshPriority||0)*-1e6)})};ScrollTrigger.observe=function(i){return new Observer$1(i)};ScrollTrigger.normalizeScroll=function(i){if(typeof i>"u")return _normalizer;if(i===!0&&_normalizer)return _normalizer.enable();if(i===!1){_normalizer&&_normalizer.kill(),_normalizer=i;return}var e=i instanceof Observer$1?i:_getScrollNormalizer(i);return _normalizer&&_normalizer.target===e.target&&_normalizer.kill(),_isViewport(e.target)&&(_normalizer=e),e};ScrollTrigger.core={_getVelocityProp,_inputObserver,_scrollers,_proxies,bridge:{ss:function i(){_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime()},ref:function i(){return _refreshing}}};_getGSAP()&&gsap.registerPlugin(ScrollTrigger);gsapWithCSS.registerPlugin(ScrollTrigger);const ScrollReveal=({children:i,scrollContainerRef:e,enableBlur:t=!0,baseOpacity:r=.1,baseRotation:s=3,blurStrength:n=4,containerClassName:a="",textClassName:l="",rotationEnd:u="bottom bottom",wordAnimationEnd:c="bottom bottom"})=>{const p=reactExports.useRef(null),b=reactExports.useMemo(()=>(typeof i=="string"?i:"").split(/(\s+)/).map((N,de)=>N.match(/^\s+$/)?N:jsxRuntimeExports.jsx("span",{className:"inline-block word",children:N},de)),[i]);return reactExports.useEffect(()=>{const P=p.current;if(!P)return;const N=e&&e.current?e.current:window;gsapWithCSS.fromTo(P,{transformOrigin:"0% 50%",rotate:s},{ease:"none",rotate:0,scrollTrigger:{trigger:P,scroller:N,start:"top bottom",end:u,scrub:!0}});const de=P.querySelectorAll(".word");return gsapWithCSS.fromTo(de,{opacity:r,willChange:"opacity"},{ease:"none",opacity:1,stagger:.05,scrollTrigger:{trigger:P,scroller:N,start:"top bottom-=20%",end:c,scrub:!0}}),t&&gsapWithCSS.fromTo(de,{filter:`blur(${n}px)`},{ease:"none",filter:"blur(0px)",stagger:.05,scrollTrigger:{trigger:P,scroller:N,start:"top bottom-=20%",end:c,scrub:!0}}),()=>{ScrollTrigger.getAll().forEach(me=>me.kill())}},[e,t,s,r,u,c,n]),jsxRuntimeExports.jsx("h2",{ref:p,className:`my-5 ${a}`,children:jsxRuntimeExports.jsx("p",{className:`text-[clamp(1.6rem,4vw,3rem)] leading-[1.5] font-semibold ${l}`,children:b})})},Intro=()=>jsxRuntimeExports.jsx(IntroLayoutContainer,{className:"relative overflow-hidden bg-gray-900",children:jsxRuntimeExports.jsx("div",{className:"wrapper",children:jsxRuntimeExports.jsx("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-10 md:py-20 xl:py-32",children:jsxRuntimeExports.jsx(ScrollReveal,{baseOpacity:0,enableBlur:!0,baseRotation:5,blurStrength:10,children:"When does a man die? When he is hit by a bullet? No! When he suffers a disease? No! When he ate a soup made out of a poisonous mushroom? No! A man dies when he is forgotten!"})})})}),SkillContainer=dt.section``;var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;function i(n){if(typeof window>"u")return;const a=document.createElement("style");return a.setAttribute("type","text/css"),a.innerHTML=n,document.head.appendChild(a),n}Object.defineProperty(dist,"__esModule",{value:!0});var e=requireReact();function t(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var r=t(e);i(`.rfm-marquee-container {
  overflow-x: hidden;
  display: flex;
  flex-direction: row;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.rfm-marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.rfm-marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.rfm-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.rfm-overlay::before, .rfm-overlay::after {
  background: linear-gradient(to right, var(--gradient-color), rgba(255, 255, 255, 0));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
  pointer-events: none;
  touch-action: none;
}
.rfm-overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.rfm-overlay::before {
  left: 0;
  top: 0;
}

.rfm-marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.rfm-initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
  align-items: center;
}

.rfm-child {
  transform: var(--transform);
}`);const s=e.forwardRef(function({style:a={},className:l="",autoFill:u=!1,play:c=!0,pauseOnHover:p=!1,pauseOnClick:b=!1,direction:P="left",speed:N=50,delay:de=0,loop:me=0,gradient:Ye=!1,gradientColor:Le="white",gradientWidth:tt=200,onFinish:Be,onCycleComplete:nt,onMount:ft,children:mt},ht){const[Et,St]=e.useState(0),[bt,Pt]=e.useState(0),[Rt,Dt]=e.useState(1),[kt,Lt]=e.useState(!1),vt=e.useRef(null),xt=ht||vt,gt=e.useRef(null),_t=e.useCallback(()=>{if(gt.current&&xt.current){const Ut=xt.current.getBoundingClientRect(),Qt=gt.current.getBoundingClientRect();let Xt=Ut.width,Jt=Qt.width;(P==="up"||P==="down")&&(Xt=Ut.height,Jt=Qt.height),Dt(u&&Xt&&Jt&&Jt<Xt?Math.ceil(Xt/Jt):1),St(Xt),Pt(Jt)}},[u,xt,P]);e.useEffect(()=>{if(kt&&(_t(),gt.current&&xt.current)){const Ut=new ResizeObserver(()=>_t());return Ut.observe(xt.current),Ut.observe(gt.current),()=>{Ut&&Ut.disconnect()}}},[_t,xt,kt]),e.useEffect(()=>{_t()},[_t,mt]),e.useEffect(()=>{Lt(!0)},[]),e.useEffect(()=>{typeof ft=="function"&&ft()},[]);const yt=e.useMemo(()=>u?bt*Rt/N:bt<Et?Et/N:bt/N,[u,Et,bt,Rt,N]),At=e.useMemo(()=>Object.assign(Object.assign({},a),{"--pause-on-hover":!c||p?"paused":"running","--pause-on-click":!c||p&&!b||b?"paused":"running","--width":P==="up"||P==="down"?"100vh":"100%","--transform":P==="up"?"rotate(-90deg)":P==="down"?"rotate(90deg)":"none"}),[a,c,p,b,P]),wt=e.useMemo(()=>({"--gradient-color":Le,"--gradient-width":typeof tt=="number"?`${tt}px`:tt}),[Le,tt]),It=e.useMemo(()=>({"--play":c?"running":"paused","--direction":P==="left"?"normal":"reverse","--duration":`${yt}s`,"--delay":`${de}s`,"--iteration-count":me?`${me}`:"infinite","--min-width":u?"auto":"100%"}),[c,P,yt,de,me,u]),Ft=e.useMemo(()=>({"--transform":P==="up"?"rotate(90deg)":P==="down"?"rotate(-90deg)":"none"}),[P]),zt=e.useCallback(Ut=>[...Array(Number.isFinite(Ut)&&Ut>=0?Ut:0)].map((Qt,Xt)=>r.default.createElement(e.Fragment,{key:Xt},e.Children.map(mt,Jt=>r.default.createElement("div",{style:Ft,className:"rfm-child"},Jt)))),[Ft,mt]);return kt?r.default.createElement("div",{ref:xt,style:At,className:"rfm-marquee-container "+l},Ye&&r.default.createElement("div",{style:wt,className:"rfm-overlay"}),r.default.createElement("div",{className:"rfm-marquee",style:It,onAnimationIteration:nt,onAnimationEnd:Be},r.default.createElement("div",{className:"rfm-initial-child-container",ref:gt},e.Children.map(mt,Ut=>r.default.createElement("div",{style:Ft,className:"rfm-child"},Ut))),zt(Rt-1)),r.default.createElement("div",{className:"rfm-marquee",style:It},zt(Rt))):null});return dist.default=s,dist}var distExports=requireDist();const Marquee=getDefaultExportFromCjs$1(distExports),SkillItem=({name:i,icon:e})=>jsxRuntimeExports.jsxs("div",{className:"group flex flex-col items-center space-y-2 p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 hover:border-amber-500/50 transition-all duration-300 hover:scale-105 min-w-[161px]",children:[jsxRuntimeExports.jsx("div",{className:"group-hover:scale-110 transition-transform duration-300 mb-4",children:jsxRuntimeExports.jsx("img",{alt:i,loading:"lazy",width:24,height:24,decoding:"async",className:"w-8 h-8",src:e})}),jsxRuntimeExports.jsx("p",{className:"text-xs font-medium group-hover:text-amber-400 transition-colors duration-300",children:i})]}),skills=[{name:"HTML",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/html5/html5-original.svg"},{name:"CSS",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/css3/css3-original.svg"},{name:"JavaScript",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/javascript/javascript-original.svg"},{name:"TypeScript",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/typescript/typescript-original.svg"},{name:"React",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/react/react-original.svg"},{name:"Next.js",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/nextjs/nextjs-original.svg"},{name:"Node.js",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/nodejs/nodejs-original.svg"},{name:"Express",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/express/express-original.svg"},{name:"MongoDB",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/mongodb/mongodb-original.svg"},{name:"PostgreSQL",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/postgresql/postgresql-original.svg"},{name:"Docker",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/docker/docker-original.svg"},{name:"Git",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/git/git-original.svg"}],SkillMarquee=()=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(Marquee,{gradient:!1,speed:50,direction:"left",pauseOnHover:!0,autoFill:!0,style:{height:120},children:skills.slice(0,6).map(i=>jsxRuntimeExports.jsx("div",{className:"mx-[10px]",children:jsxRuntimeExports.jsx(SkillItem,{name:i.name,icon:i.icon})}))}),jsxRuntimeExports.jsx(Marquee,{gradient:!1,speed:50,direction:"right",pauseOnHover:!0,autoFill:!0,style:{height:120},children:skills.slice(6).map(i=>jsxRuntimeExports.jsx("div",{className:"mx-[10px]",children:jsxRuntimeExports.jsx(SkillItem,{name:i.name,icon:i.icon})}))})]}),Skill=()=>{const i=reactExports.useRef(null),e=reactExports.useRef(null),t=useInView(i,{once:!0,margin:"-100px"}),r=useInView(e,{once:!0,margin:"-100px"});return jsxRuntimeExports.jsx(SkillContainer,{className:"relative w-full min-h-screen flex items-center justify-center py-20 pt-32 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"wrapper",children:jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4",children:[jsxRuntimeExports.jsxs("div",{ref:i,className:"grid lg:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs(motion.div,{className:"space-y-8",initial:{opacity:0,x:-500,scale:0},animate:t?{opacity:1,scale:1,x:0}:{opacity:0,scale:0,x:-500},transition:{duration:.5},children:[jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/10 border border-amber-500/30 rounded-full text-amber-400 text-sm font-medium",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-code w-4 h-4","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"m16 18 6-6-6-6"}),jsxRuntimeExports.jsx("path",{d:"m8 6-6 6 6 6"})]}),"5+ Năm Kinh Nghiệm"]})}),jsxRuntimeExports.jsxs("h2",{className:"text-4xl lg:text-5xl font-black text-white leading-tight",children:[jsxRuntimeExports.jsx("span",{className:"text-amber-500",children:"FULLSTACK"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-white/90",children:"REMOTE"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-white/70",children:"ENGINEER"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-white/60 leading-relaxed max-w-lg",children:"Mình tạo ra những sản phẩm kỹ thuật số bằng khả năng làm việc với frontend đến backend, database đến deployment."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 md:gap-8",children:[jsxRuntimeExports.jsx(motion.div,{className:"group relative p-4 md:p-8 rounded-3xl bg-blue-500/10 border border-blue-500/30 hover:scale-105 transition-all duration-300 cursor-pointer",initial:{opacity:0,rotate:-360,scale:0},animate:t?{opacity:1,scale:1,rotate:0}:{opacity:0,scale:0,rotate:-360},transition:{duration:.5,delay:.25},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-code-xml w-8 h-8 md:w-12 md:h-12 mx-auto text-blue-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"m18 16 4-4-4-4"}),jsxRuntimeExports.jsx("path",{d:"m6 8-4 4 4 4"}),jsxRuntimeExports.jsx("path",{d:"m14.5 4-5 16"})]}),jsxRuntimeExports.jsx("p",{className:"md:text-lg font-bold text-blue-400",children:"Frontend"})]})}),jsxRuntimeExports.jsx(motion.div,{className:"group relative p-4 md:p-8 rounded-3xl bg-green-500/10 border border-green-500/30 hover:scale-105 transition-all duration-300 cursor-pointer",initial:{opacity:0,rotate:-360,scale:0},animate:t?{opacity:1,scale:1,rotate:0}:{opacity:0,scale:0,rotate:-360},transition:{duration:.5,delay:.5},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-server w-8 h-8 md:w-12 md:h-12 mx-auto text-green-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:[jsxRuntimeExports.jsx("rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("line",{x1:"6",x2:"6.01",y1:"6",y2:"6"}),jsxRuntimeExports.jsx("line",{x1:"6",x2:"6.01",y1:"18",y2:"18"})]}),jsxRuntimeExports.jsx("p",{className:"md:text-lg font-bold text-green-400",children:"Backend"})]})}),jsxRuntimeExports.jsx(motion.div,{className:"group relative p-4 md:p-8 rounded-3xl bg-purple-500/10 border border-purple-500/30 hover:scale-105 transition-all duration-300 cursor-pointer",initial:{opacity:0,rotate:-360,scale:0},animate:t?{opacity:1,scale:1,rotate:0}:{opacity:0,scale:0,rotate:-360},transition:{duration:.5,delay:.75},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-database w-8 h-8 md:w-12 md:h-12 mx-auto text-purple-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:[jsxRuntimeExports.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),jsxRuntimeExports.jsx("path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}),jsxRuntimeExports.jsx("path",{d:"M3 12A9 3 0 0 0 21 12"})]}),jsxRuntimeExports.jsx("p",{className:"md:text-lg font-bold text-purple-400",children:"Database"})]})}),jsxRuntimeExports.jsx(motion.div,{className:"group relative p-4 md:p-8 rounded-3xl bg-amber-500/10 border border-amber-500/30 hover:scale-105 transition-all duration-300 cursor-pointer",initial:{opacity:0,rotate:-360,scale:0},animate:t?{opacity:1,scale:1,rotate:0}:{opacity:0,scale:0,rotate:-360},transition:{duration:.5,delay:1},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-globe w-8 h-8 md:w-12 md:h-12 mx-auto text-amber-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),jsxRuntimeExports.jsx("path",{d:"M2 12h20"})]}),jsxRuntimeExports.jsx("p",{className:"md:text-lg font-bold text-amber-400",children:"Web3"})]})})]})]}),jsxRuntimeExports.jsxs("div",{ref:e,className:"mt-20 text-center",children:[jsxRuntimeExports.jsx(motion.p,{className:"text-white/40 text-sm font-medium mb-8",initial:{opacity:0,y:100},animate:r?{opacity:1,y:0}:{opacity:0,y:100},transition:{duration:.5},children:"CÔNG NGHỆ CHÍNH"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:100},animate:r?{opacity:1,y:0}:{opacity:0,y:100},transition:{duration:.5,delay:.3},children:jsxRuntimeExports.jsx(SkillMarquee,{})})]})]})})})},SocialContainer=dt.section`
  .swiper-wrapper {
    padding: 10px 0;
  }
  .swiper-slide {
    max-width: 300px;
    width: 100%;
  }
  .swiper-slide-shadow-right,
  .swiper-slide-shadow-left {
    border-radius: 15px;
  }
  .swiper-slide-active {
    .bg-gradient-to-t {
      background-image: unset;
    }
    img,
    video {
      opacity: 1;
    }
    div {
      background: unset;
      opacity: 1;
      transition: all 0.26s ease;
    }
    h3 {
      color: #fff;
    }
  }
  @media (width<=768px) {
    .swiper-slide {
      max-width: 500px;
    }
  }
`,isFiniteNumber=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},isSafeInteger=Number.isSafeInteger||function(i){return typeof i=="number"&&Math.abs(i)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;let ErrorTypes=function(i){return i.NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",i}({}),ErrorDetails=function(i){return i.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",i.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",i.KEY_SYSTEM_NO_SESSION="keySystemNoSession",i.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",i.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",i.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",i.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",i.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",i.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",i.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",i.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",i.MANIFEST_LOAD_ERROR="manifestLoadError",i.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",i.MANIFEST_PARSING_ERROR="manifestParsingError",i.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",i.LEVEL_EMPTY_ERROR="levelEmptyError",i.LEVEL_LOAD_ERROR="levelLoadError",i.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",i.LEVEL_PARSING_ERROR="levelParsingError",i.LEVEL_SWITCH_ERROR="levelSwitchError",i.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",i.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",i.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",i.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",i.FRAG_LOAD_ERROR="fragLoadError",i.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",i.FRAG_DECRYPT_ERROR="fragDecryptError",i.FRAG_PARSING_ERROR="fragParsingError",i.FRAG_GAP="fragGap",i.REMUX_ALLOC_ERROR="remuxAllocError",i.KEY_LOAD_ERROR="keyLoadError",i.KEY_LOAD_TIMEOUT="keyLoadTimeOut",i.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",i.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",i.BUFFER_APPEND_ERROR="bufferAppendError",i.BUFFER_APPENDING_ERROR="bufferAppendingError",i.BUFFER_STALLED_ERROR="bufferStalledError",i.BUFFER_FULL_ERROR="bufferFullError",i.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",i.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",i.ASSET_LIST_LOAD_ERROR="assetListLoadError",i.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",i.ASSET_LIST_PARSING_ERROR="assetListParsingError",i.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",i.INTERNAL_EXCEPTION="internalException",i.INTERNAL_ABORTED="aborted",i.ATTACH_MEDIA_ERROR="attachMediaError",i.UNKNOWN="unknown",i}({}),Events=function(i){return i.MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.MEDIA_ENDED="hlsMediaEnded",i.STALL_RESOLVED="hlsStallResolved",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFERED_TO_END="hlsBufferedToEnd",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached",i.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",i.ASSET_LIST_LOADING="hlsAssetListLoading",i.ASSET_LIST_LOADED="hlsAssetListLoaded",i.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",i.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",i.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",i.INTERSTITIAL_STARTED="hlsInterstitialStarted",i.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",i.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",i.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",i.INTERSTITIAL_ENDED="hlsInterstitialEnded",i.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",i.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",i.EVENT_CUE_ENTER="hlsEventCueEnter",i}({});var PlaylistContextType={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},PlaylistLevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class EWMA{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class EwmaBandWidthEstimator{constructor(e,t,r,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new EWMA(e),this.fast_=new EWMA(t),this.defaultTTFB_=s,this.ttfb_=new EWMA(e)}update(e,t){const{slow_:r,fast_:s,ttfb_:n}=this;r.halfLife!==e&&(this.slow_=new EWMA(e,r.getEstimate(),r.getTotalWeight())),s.halfLife!==t&&(this.fast_=new EWMA(t,s.getEstimate(),s.getTotalWeight())),n.halfLife!==e&&(this.ttfb_=new EWMA(e,n.getEstimate(),n.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const r=8*t,s=e/1e3,n=r/s;this.fast_.sample(s,n),this.slow_.sample(s,n)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function _defineProperty(i,e,t){return(e=_toPropertyKey(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},_extends$1.apply(null,arguments)}function ownKeys(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,r)}return t}function _objectSpread2(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function _toPrimitive(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function _toPropertyKey(i){var e=_toPrimitive(i,"string");return typeof e=="symbol"?e:e+""}class Logger{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=noop,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)}}const noop=function i(){},fakeLogger={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop};function createLogger(){return _extends$1({},fakeLogger)}function consolePrintFn(i,e){const t=self.console[i];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${i}] >`):noop}function getLoggerFn(i,e,t){return e[i]?e[i].bind(e):consolePrintFn(i,t)}const exportedLogger=createLogger();function enableLogs(i,e,t){const r=createLogger();if(typeof console=="object"&&i===!0||typeof i=="object"){const s=["debug","log","info","warn","error"];s.forEach(n=>{r[n]=getLoggerFn(n,i,t)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.11`)}catch{return createLogger()}s.forEach(n=>{exportedLogger[n]=getLoggerFn(n,i)})}else _extends$1(exportedLogger,r);return r}const logger=exportedLogger;function getMediaSource(i=!0){return typeof self>"u"?void 0:(i||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function isManagedMediaSource(i){return typeof self<"u"&&i===self.ManagedMediaSource}function isCompatibleTrackChange(i,e){const t=Object.keys(i),r=Object.keys(e),s=t.length,n=r.length;return!s||!n||s===n&&!t.some(a=>r.indexOf(a)===-1)}function utf8ArrayToStr(i,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(i);if(e){const p=c.indexOf("\0");return p!==-1?c.substring(0,p):c}return c.replace(/\0/g,"")}const t=i.length;let r,s,n,a="",l=0;for(;l<t;){if(r=i[l++],r===0&&e)return a;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:s=i[l++],a+=String.fromCharCode((r&31)<<6|s&63);break;case 14:s=i[l++],n=i[l++],a+=String.fromCharCode((r&15)<<12|(s&63)<<6|(n&63)<<0);break}}return a}function arrayToHex(i){let e="";for(let t=0;t<i.length;t++){let r=i[t].toString(16);r.length<2&&(r="0"+r),e+=r}return e}function hexToArrayBuffer(i){return Uint8Array.from(i.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var urlToolkit={exports:{}},hasRequiredUrlToolkit;function requireUrlToolkit(){return hasRequiredUrlToolkit||(hasRequiredUrlToolkit=1,function(i,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l={buildAbsoluteURL:function(u,c,p){if(p=p||{},u=u.trim(),c=c.trim(),!c){if(!p.alwaysNormalize)return u;var b=l.parseURL(u);if(!b)throw new Error("Error trying to parse base URL.");return b.path=l.normalizePath(b.path),l.buildURLFromParts(b)}var P=l.parseURL(c);if(!P)throw new Error("Error trying to parse relative URL.");if(P.scheme)return p.alwaysNormalize?(P.path=l.normalizePath(P.path),l.buildURLFromParts(P)):c;var N=l.parseURL(u);if(!N)throw new Error("Error trying to parse base URL.");if(!N.netLoc&&N.path&&N.path[0]!=="/"){var de=s.exec(N.path);N.netLoc=de[1],N.path=de[2]}N.netLoc&&!N.path&&(N.path="/");var me={scheme:N.scheme,netLoc:P.netLoc,path:null,params:P.params,query:P.query,fragment:P.fragment};if(!P.netLoc&&(me.netLoc=N.netLoc,P.path[0]!=="/"))if(!P.path)me.path=N.path,P.params||(me.params=N.params,P.query||(me.query=N.query));else{var Ye=N.path,Le=Ye.substring(0,Ye.lastIndexOf("/")+1)+P.path;me.path=l.normalizePath(Le)}return me.path===null&&(me.path=p.alwaysNormalize?l.normalizePath(P.path):P.path),l.buildURLFromParts(me)},parseURL:function(u){var c=r.exec(u);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(n,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};i.exports=l})()}(urlToolkit)),urlToolkit.exports}var urlToolkitExports=requireUrlToolkit();class LoadStats{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ElementaryStreamTypes={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class BaseSegment{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,makeEnumerable(this,"stats")}setByteRange(e,t){const r=e.split("@",2);let s;r.length===1?s=t?.byteRangeEndOffset||0:s=parseInt(r[1]),this._byteRange=[s,parseInt(r[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[ElementaryStreamTypes.AUDIO]:null,[ElementaryStreamTypes.VIDEO]:null,[ElementaryStreamTypes.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new LoadStats),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=urlToolkitExports.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[ElementaryStreamTypes.AUDIO]=null,e[ElementaryStreamTypes.VIDEO]=null,e[ElementaryStreamTypes.AUDIOVIDEO]=null}}function isMediaFragment(i){return i.sn!=="initSegment"}class Fragment extends BaseSegment{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(isFiniteNumber(e)&&isFiniteNumber(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1){const s=this._decryptdata=this.levelkeys[r[0]]||null;if(s)return s.getDecryptData(this.sn)}}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=isFiniteNumber(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const r=Object.keys(this.levelkeys),s=r.length;if(s>1||s===1&&(t=this.levelkeys[r[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!isFiniteNumber(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return isMediaFragment(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,r,s,n,a=!1){const{elementaryStreams:l}=this,u=l[e];if(!u){l[e]={startPTS:t,endPTS:r,startDTS:s,endDTS:n,partial:a};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,r),u.startDTS=Math.min(u.startDTS,s),u.endDTS=Math.max(u.endDTS,n)}}class Part extends BaseSegment{constructor(e,t,r,s,n){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,n),n&&(this.fragOffset=n.fragOffset+n.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function getOwnPropertyDescriptorFromPrototypeChain(i,e){const t=Object.getPrototypeOf(i);if(t){const r=Object.getOwnPropertyDescriptor(t,e);return r||getOwnPropertyDescriptorFromPrototypeChain(t,e)}}function makeEnumerable(i,e){const t=getOwnPropertyDescriptorFromPrototypeChain(i,e);t&&(t.enumerable=!0,Object.defineProperty(i,e,t))}const UINT32_MAX$1=Math.pow(2,32)-1,push=[].push,RemuxerTrackIdConfig={video:1,audio:2,id3:3,text:4};function bin2str(i){return String.fromCharCode.apply(null,i)}function readUint16(i,e){const t=i[e]<<8|i[e+1];return t<0?65536+t:t}function readUint32(i,e){const t=readSint32(i,e);return t<0?4294967296+t:t}function readUint64(i,e){let t=readUint32(i,e);return t*=Math.pow(2,32),t+=readUint32(i,e+4),t}function readSint32(i,e){return i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}function hasMoofData(i){const e=i.byteLength;for(let t=0;t<e;){const r=readUint32(i,t);if(r>8&&i[t+4]===109&&i[t+5]===111&&i[t+6]===111&&i[t+7]===102)return!0;t=r>1?t+r:e}return!1}function findBox(i,e){const t=[];if(!e.length)return t;const r=i.byteLength;for(let s=0;s<r;){const n=readUint32(i,s),a=bin2str(i.subarray(s+4,s+8)),l=n>1?s+n:r;if(a===e[0])if(e.length===1)t.push(i.subarray(s+8,l));else{const u=findBox(i.subarray(s+8,l),e.slice(1));u.length&&push.apply(t,u)}s=l}return t}function parseSegmentIndex(i){const e=[],t=i[0];let r=8;const s=readUint32(i,r);r+=4;let n=0,a=0;t===0?(n=readUint32(i,r),a=readUint32(i,r+4),r+=8):(n=readUint64(i,r),a=readUint64(i,r+8),r+=16),r+=2;let l=i.length+a;const u=readUint16(i,r);r+=2;for(let c=0;c<u;c++){let p=r;const b=readUint32(i,p);p+=4;const P=b&2147483647;if((b&2147483648)>>>31===1)return logger.warn("SIDX has hierarchical references (not supported)"),null;const de=readUint32(i,p);p+=4,e.push({referenceSize:P,subsegmentDuration:de,info:{duration:de/s,start:l,end:l+P-1}}),l+=P,p+=4,r=p}return{earliestPresentationTime:n,timescale:s,version:t,referencesCount:u,references:e}}function parseInitSegment(i){const e=[],t=findBox(i,["moov","trak"]);for(let s=0;s<t.length;s++){const n=t[s],a=findBox(n,["tkhd"])[0];if(a){let l=a[0];const u=readUint32(a,l===0?12:20),c=findBox(n,["mdia","mdhd"])[0];if(c){l=c[0];const p=readUint32(c,l===0?12:20),b=findBox(n,["mdia","hdlr"])[0];if(b){const P=bin2str(b.subarray(8,12)),N={soun:ElementaryStreamTypes.AUDIO,vide:ElementaryStreamTypes.VIDEO}[P],de=findBox(n,["mdia","minf","stbl","stsd"])[0],me=parseStsd(de);N?(e[u]={timescale:p,type:N,stsd:me},e[N]=_objectSpread2({timescale:p,id:u},me)):e[u]={timescale:p,type:P,stsd:me}}}}}return findBox(i,["moov","mvex","trex"]).forEach(s=>{const n=readUint32(s,4),a=e[n];a&&(a.default={duration:readUint32(s,12),flags:readUint32(s,20)})}),e}function parseStsd(i){const e=i.subarray(8),t=e.subarray(86),r=bin2str(e.subarray(4,8));let s=r,n;const a=r==="enca"||r==="encv";if(a){const c=findBox(e,[r])[0].subarray(r==="enca"?28:78);findBox(c,["sinf"]).forEach(b=>{const P=findBox(b,["schm"])[0];if(P){const N=bin2str(P.subarray(4,8));if(N==="cbcs"||N==="cenc"){const de=findBox(b,["frma"])[0];de&&(s=bin2str(de))}}})}const l=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const u=findBox(t,["avcC"])[0];u&&u.length>3&&(s+="."+toHex(u[1])+toHex(u[2])+toHex(u[3]),n=parseSupplementalDoViCodec(l==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const u=findBox(e,[r])[0],c=findBox(u.subarray(28),["esds"])[0];if(c&&c.length>7){let p=4;if(c[p++]!==3)break;p=skipBERInteger(c,p),p+=2;const b=c[p++];if(b&128&&(p+=2),b&64&&(p+=c[p++]),c[p++]!==4)break;p=skipBERInteger(c,p);const P=c[p++];if(P===64)s+="."+toHex(P);else break;if(p+=12,c[p++]!==5)break;p=skipBERInteger(c,p);const N=c[p++];let de=(N&248)>>3;de===31&&(de+=1+((N&7)<<3)+((c[p]&224)>>5)),s+="."+de}break}case"hvc1":case"hev1":{const u=findBox(t,["hvcC"])[0];if(u&&u.length>12){const c=u[1],p=["","A","B","C"][c>>6],b=c&31,P=readUint32(u,2),N=(c&32)>>5?"H":"L",de=u[12],me=u.subarray(6,12);s+="."+p+b,s+="."+reverse32BitInt(P).toString(16).toUpperCase(),s+="."+N+de;let Ye="";for(let Le=me.length;Le--;){const tt=me[Le];(tt||Ye)&&(Ye="."+tt.toString(16).toUpperCase()+Ye)}s+=Ye}n=parseSupplementalDoViCodec(l=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=parseSupplementalDoViCodec(s,t)||s;break}case"vp09":{const u=findBox(t,["vpcC"])[0];if(u&&u.length>6){const c=u[4],p=u[5],b=u[6]>>4&15;s+="."+addLeadingZero(c)+"."+addLeadingZero(p)+"."+addLeadingZero(b)}break}case"av01":{const u=findBox(t,["av1C"])[0];if(u&&u.length>2){const c=u[1]>>>5,p=u[1]&31,b=u[2]>>>7?"H":"M",P=(u[2]&64)>>6,N=(u[2]&32)>>5,de=c===2&&P?N?12:10:P?10:8,me=(u[2]&16)>>4,Ye=(u[2]&8)>>3,Le=(u[2]&4)>>2,tt=u[2]&3;s+="."+c+"."+addLeadingZero(p)+b+"."+addLeadingZero(de)+"."+me+"."+Ye+Le+tt+"."+addLeadingZero(1)+"."+addLeadingZero(1)+"."+addLeadingZero(1)+"."+0,n=parseSupplementalDoViCodec("dav1",t)}break}}return{codec:s,encrypted:a,supplemental:n}}function parseSupplementalDoViCodec(i,e){const t=findBox(e,["dvvC"]),r=t.length?t[0]:findBox(e,["dvcC"])[0];if(r){const s=r[2]>>1&127,n=r[2]<<5&32|r[3]>>3&31;return i+"."+addLeadingZero(s)+"."+addLeadingZero(n)}}function reverse32BitInt(i){let e=0;for(let t=0;t<32;t++)e|=(i>>t&1)<<31-t;return e>>>0}function skipBERInteger(i,e){const t=e+5;for(;i[e++]&128&&e<t;);return e}function toHex(i){return("0"+i.toString(16).toUpperCase()).slice(-2)}function addLeadingZero(i){return(i<10?"0":"")+i}function patchEncyptionData(i,e){if(!i||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&findBox(i,["moov","trak"]).forEach(s=>{const a=findBox(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let l=findBox(a,["enca"]);const u=l.length>0;u||(l=findBox(a,["encv"])),l.forEach(c=>{const p=u?c.subarray(28):c.subarray(78);findBox(p,["sinf"]).forEach(P=>{const N=parseSinf(P);if(N){const de=N.subarray(8,24);de.some(me=>me!==0)||(logger.log(`[eme] Patching keyId in 'enc${u?"a":"v"}>sinf>>tenc' box: ${arrayToHex(de)} -> ${arrayToHex(t)}`),N.set(t,8))}})})})}function parseSinf(i){const e=findBox(i,["schm"])[0];if(e){const t=bin2str(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return findBox(i,["schi","tenc"])[0]}return null}function getSampleData(i,e,t){const r={},s=findBox(i,["moof","traf"]);for(let n=0;n<s.length;n++){const a=s[n],l=findBox(a,["tfhd"])[0],u=readUint32(l,4),c=e[u];if(!c)continue;r[u]||(r[u]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const p=r[u],b=findBox(a,["tfdt"])[0];if(b){const Be=b[0];let nt=readUint32(b,4);Be===1&&(nt===UINT32_MAX$1?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(nt*=UINT32_MAX$1+1,nt+=readUint32(b,8))),isFiniteNumber(nt)&&(!isFiniteNumber(p.start)||nt<p.start)&&(p.start=nt)}const P=c.default,N=readUint32(l,0)|P?.flags;let de=P?.duration||0;N&8&&(N&2?de=readUint32(l,12):de=readUint32(l,8));const me=findBox(a,["trun"]);let Ye=p.start||0,Le=0,tt=de;for(let Be=0;Be<me.length;Be++){const nt=me[Be],ft=readUint32(nt,4),mt=p.sampleCount;p.sampleCount+=ft;const ht=nt[3]&1,Et=nt[3]&4,St=nt[2]&1,bt=nt[2]&2,Pt=nt[2]&4,Rt=nt[2]&8;let Dt=8,kt=ft;for(ht&&(Dt+=4),Et&&ft&&(!(nt[Dt+1]&1)&&p.keyFrameIndex===void 0&&(p.keyFrameIndex=mt),Dt+=4,St?(tt=readUint32(nt,Dt),Dt+=4):tt=de,bt&&(Dt+=4),Rt&&(Dt+=4),Ye+=tt,Le+=tt,kt--);kt--;)St?(tt=readUint32(nt,Dt),Dt+=4):tt=de,bt&&(Dt+=4),Pt&&(nt[Dt+1]&1||p.keyFrameIndex===void 0&&(p.keyFrameIndex=p.sampleCount-(kt+1),p.keyFrameStart=Ye),Dt+=4),Rt&&(Dt+=4),Ye+=tt,Le+=tt;!Le&&de&&(Le+=de*ft)}p.duration+=Le}if(!Object.keys(r).some(n=>r[n].duration)){let n=1/0,a=0;const l=findBox(i,["sidx"]);for(let u=0;u<l.length;u++){const c=parseSegmentIndex(l[u]);if(c!=null&&c.references){n=Math.min(n,c.earliestPresentationTime/c.timescale);const p=c.references.reduce((b,P)=>b+P.info.duration||0,0);a=Math.max(a,p+c.earliestPresentationTime/c.timescale)}}a&&isFiniteNumber(a)&&Object.keys(r).forEach(u=>{r[u].duration||(r[u].duration=a*r[u].timescale-r[u].start)})}return r}function segmentValidRange(i){const e={valid:null,remainder:null},t=findBox(i,["moof"]);if(t.length<2)return e.remainder=i,e;const r=t[t.length-1];return e.valid=i.slice(0,r.byteOffset-8),e.remainder=i.slice(r.byteOffset-8),e}function appendUint8Array(i,e){const t=new Uint8Array(i.length+e.length);return t.set(i),t.set(e,i.length),t}function parseSamples(i,e){const t=[],r=e.samples,s=e.timescale,n=e.id;let a=!1;return findBox(r,["moof"]).map(u=>{const c=u.byteOffset-8;findBox(u,["traf"]).map(b=>{const P=findBox(b,["tfdt"]).map(N=>{const de=N[0];let me=readUint32(N,4);return de===1&&(me*=Math.pow(2,32),me+=readUint32(N,8)),me/s})[0];return P!==void 0&&(i=P),findBox(b,["tfhd"]).map(N=>{const de=readUint32(N,4),me=readUint32(N,0)&16777215,Ye=(me&1)!==0,Le=(me&2)!==0,tt=(me&8)!==0;let Be=0;const nt=(me&16)!==0;let ft=0;const mt=(me&32)!==0;let ht=8;de===n&&(Ye&&(ht+=8),Le&&(ht+=4),tt&&(Be=readUint32(N,ht),ht+=4),nt&&(ft=readUint32(N,ht),ht+=4),mt&&(ht+=4),e.type==="video"&&(a=isHEVC(e.codec)),findBox(b,["trun"]).map(Et=>{const St=Et[0],bt=readUint32(Et,0)&16777215,Pt=(bt&1)!==0;let Rt=0;const Dt=(bt&4)!==0,kt=(bt&256)!==0;let Lt=0;const vt=(bt&512)!==0;let xt=0;const gt=(bt&1024)!==0,_t=(bt&2048)!==0;let yt=0;const At=readUint32(Et,4);let wt=8;Pt&&(Rt=readUint32(Et,wt),wt+=4),Dt&&(wt+=4);let It=Rt+c;for(let Ft=0;Ft<At;Ft++){if(kt?(Lt=readUint32(Et,wt),wt+=4):Lt=Be,vt?(xt=readUint32(Et,wt),wt+=4):xt=ft,gt&&(wt+=4),_t&&(St===0?yt=readUint32(Et,wt):yt=readSint32(Et,wt),wt+=4),e.type===ElementaryStreamTypes.VIDEO){let zt=0;for(;zt<xt;){const Ut=readUint32(r,It);if(It+=4,isSEIMessage(a,r[It])){const Qt=r.subarray(It,It+Ut);parseSEIMessageFromNALu(Qt,a?2:1,i+yt/s,t)}It+=Ut,zt+=Ut+4}}i+=Lt/s}}))})})}),t}function isHEVC(i){if(!i)return!1;const e=i.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function isSEIMessage(i,e){if(i){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function parseSEIMessageFromNALu(i,e,t,r){const s=discardEPB(i);let n=0;n+=e;let a=0,l=0,u=0;for(;n<s.length;){a=0;do{if(n>=s.length)break;u=s[n++],a+=u}while(u===255);l=0;do{if(n>=s.length)break;u=s[n++],l+=u}while(u===255);const c=s.length-n;let p=n;if(l<c)n+=l;else if(l>c){logger.error(`Malformed SEI payload. ${l} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(s[p++]===181){const P=readUint16(s,p);if(p+=2,P===49){const N=readUint32(s,p);if(p+=4,N===1195456820){const de=s[p++];if(de===3){const me=s[p++],Ye=31&me,Le=64&me,tt=Le?2+Ye*3:0,Be=new Uint8Array(tt);if(Le){Be[0]=me;for(let nt=1;nt<tt;nt++)Be[nt]=s[p++]}r.push({type:de,payloadType:a,pts:t,bytes:Be})}}}}}else if(a===5&&l>16){const b=[];for(let de=0;de<16;de++){const me=s[p++].toString(16);b.push(me.length==1?"0"+me:me),(de===3||de===5||de===7||de===9)&&b.push("-")}const P=l-16,N=new Uint8Array(P);for(let de=0;de<P;de++)N[de]=s[p++];r.push({payloadType:a,pts:t,uuid:b.join(""),userData:utf8ArrayToStr(N),userDataBytes:N})}}}function discardEPB(i){const e=i.byteLength,t=[];let r=1;for(;r<e-2;)i[r]===0&&i[r+1]===0&&i[r+2]===3?(t.push(r+2),r+=2):r++;if(t.length===0)return i;const s=e-t.length,n=new Uint8Array(s);let a=0;for(r=0;r<s;a++,r++)a===t[0]&&(a++,t.shift()),n[r]=i[a];return n}function parseEmsg(i){const e=i[0];let t="",r="",s=0,n=0,a=0,l=0,u=0,c=0;if(e===0){for(;bin2str(i.subarray(c,c+1))!=="\0";)t+=bin2str(i.subarray(c,c+1)),c+=1;for(t+=bin2str(i.subarray(c,c+1)),c+=1;bin2str(i.subarray(c,c+1))!=="\0";)r+=bin2str(i.subarray(c,c+1)),c+=1;r+=bin2str(i.subarray(c,c+1)),c+=1,s=readUint32(i,12),n=readUint32(i,16),l=readUint32(i,20),u=readUint32(i,24),c=28}else if(e===1){c+=4,s=readUint32(i,c),c+=4;const b=readUint32(i,c);c+=4;const P=readUint32(i,c);for(c+=4,a=2**32*b+P,isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,logger.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=readUint32(i,c),c+=4,u=readUint32(i,c),c+=4;bin2str(i.subarray(c,c+1))!=="\0";)t+=bin2str(i.subarray(c,c+1)),c+=1;for(t+=bin2str(i.subarray(c,c+1)),c+=1;bin2str(i.subarray(c,c+1))!=="\0";)r+=bin2str(i.subarray(c,c+1)),c+=1;r+=bin2str(i.subarray(c,c+1)),c+=1}const p=i.subarray(c,i.byteLength);return{schemeIdUri:t,value:r,timeScale:s,presentationTime:a,presentationTimeDelta:n,eventDuration:l,id:u,payload:p}}function mp4Box(i,...e){const t=e.length;let r=8,s=t;for(;s--;)r+=e[s].byteLength;const n=new Uint8Array(r);for(n[0]=r>>24&255,n[1]=r>>16&255,n[2]=r>>8&255,n[3]=r&255,n.set(i,4),s=0,r=8;s<t;s++)n.set(e[s],r),r+=e[s].byteLength;return n}function mp4pssh(i,e,t){if(i.byteLength!==16)throw new RangeError("Invalid system id");let r,s;r=0,s=new Uint8Array;let n;r>0?(n=new Uint8Array(4),e.length>0&&new DataView(n.buffer).setUint32(0,e.length,!1)):n=new Uint8Array;const a=new Uint8Array(4);return t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),mp4Box([112,115,115,104],new Uint8Array([r,0,0,0]),i,n,s,a,t)}const userAgentHevcSupportIsInaccurate=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),sampleEntryCodesISO={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function isCodecType(i,e){const t=sampleEntryCodesISO[e];return!!t&&!!t[i.slice(0,4)]}function areCodecsMediaSourceSupported(i,e,t=!0){return!i.split(",").some(r=>!isCodecMediaSourceSupported(r,e,t))}function isCodecMediaSourceSupported(i,e,t=!0){var r;const s=getMediaSource(t);return(r=s?.isTypeSupported(mimeTypeForCodec(i,e)))!=null?r:!1}function mimeTypeForCodec(i,e){return`${e}/mp4;codecs=${i}`}function videoCodecPreferenceValue(i){if(i){const e=i.substring(0,4);return sampleEntryCodesISO.video[e]}return 2}function codecsSetSelectionPreferenceValue(i){const e=userAgentHevcSupportIsInaccurate();return i.split(",").reduce((t,r)=>{const n=e&&isHEVC(r)?9:sampleEntryCodesISO.video[r];return n?(n*2+t)/(t?3:2):(sampleEntryCodesISO.audio[r]+t)/(t?2:1)},0)}const CODEC_COMPATIBLE_NAMES={};function getCodecCompatibleNameLower(i,e=!0){if(CODEC_COMPATIBLE_NAMES[i])return CODEC_COMPATIBLE_NAMES[i];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[i];for(let s=0;s<t.length;s++){var r;if(isCodecMediaSourceSupported(t[s],"audio",e))return CODEC_COMPATIBLE_NAMES[i]=t[s],t[s];if(t[s]==="mp3"&&(r=getMediaSource(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return i}const AUDIO_CODEC_REGEXP=/flac|opus|mp4a\.40\.34/i;function getCodecCompatibleName(i,e=!0){return i.replace(AUDIO_CODEC_REGEXP,t=>getCodecCompatibleNameLower(t.toLowerCase(),e))}function replaceVideoCodec(i,e){const t=[];if(i){const r=i.split(",");for(let s=0;s<r.length;s++)isCodecType(r[s],"video")||t.push(r[s])}return e&&t.push(e),t.join(",")}function pickMostCompleteCodecName(i,e){if(i&&(i.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(i)!==-1)&&(isCodecSupportedAsType(i,"audio")||isCodecSupportedAsType(i,"video")))return i;if(e){const t=e.split(",");if(t.length>1){if(i){for(let r=t.length;r--;)if(t[r].substring(0,4)===i.substring(0,4))return t[r]}return t[0]}}return e||i}function isCodecSupportedAsType(i,e){return isCodecType(i,e)&&isCodecMediaSourceSupported(i,e)}function convertAVC1ToAVCOTI(i){const e=i.split(",");for(let t=0;t<e.length;t++){const r=e[t].split(".");r.length>2&&r[0]==="avc1"&&(e[t]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function fillInMissingAV01Params(i){if(i.startsWith("av01.")){const e=i.split("."),t=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=t[r-4];return e.join(".")}return i}function getM2TSSupportedAudioTypes(i){const e=getMediaSource(i)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function getCodecsForMimeType(i){return i.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const supportedResult={supported:!0,powerEfficient:!0,smooth:!0},unsupportedResult={supported:!1,smooth:!1,powerEfficient:!1},SUPPORTED_INFO_DEFAULT={supported:!0,configurations:[],decodingInfoResults:[supportedResult]};function getUnsupportedResult(i,e){return{supported:!1,configurations:e,decodingInfoResults:[unsupportedResult],error:i}}function requiresMediaCapabilitiesDecodingInfo(i,e,t,r,s,n){const a=i.videoCodec,l=i.audioCodec?i.audioGroups:null,u=n?.audioCodec,c=n?.channels,p=c?parseInt(c):u?1/0:2;let b=null;if(l!=null&&l.length)try{l.length===1&&l[0]?b=e.groups[l[0]].channels:b=l.reduce((P,N)=>{if(N){const de=e.groups[N];if(!de)throw new Error(`Audio track group ${N} not found`);Object.keys(de.channels).forEach(me=>{P[me]=(P[me]||0)+de.channels[me]})}return P},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(P=>isHEVC(P))||i.width>1920&&i.height>1088||i.height>1920&&i.width>1088||i.frameRate>Math.max(r,30)||i.videoRange!=="SDR"&&i.videoRange!==t||i.bitrate>Math.max(s,8e6))||!!b&&isFiniteNumber(p)&&Object.keys(b).some(P=>parseInt(P)>p)}function getMediaDecodingInfoPromise(i,e,t,r={}){const s=i.videoCodec;if(!s&&!i.audioCodec||!t)return Promise.resolve(SUPPORTED_INFO_DEFAULT);const n=[],a=makeVideoConfigurations(i),l=a.length,u=makeAudioConfigurations(i,e,l>0),c=u.length;for(let p=l||1*c||1;p--;){const b={type:"media-source"};if(l&&(b.video=a[p%l]),c){b.audio=u[p%c];const P=b.audio.bitrate;b.video&&P&&(b.video.bitrate-=P)}n.push(b)}if(s){const p=navigator.userAgent;if(s.split(",").some(b=>isHEVC(b))&&userAgentHevcSupportIsInaccurate())return Promise.resolve(getUnsupportedResult(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${p})`),n))}return Promise.all(n.map(p=>{const b=getMediaDecodingInfoKey(p);return r[b]||(r[b]=t.decodingInfo(p))})).then(p=>({supported:!p.some(b=>!b.supported),configurations:n,decodingInfoResults:p})).catch(p=>({supported:!1,configurations:n,decodingInfoResults:[],error:p}))}function makeVideoConfigurations(i){var e;const t=(e=i.videoCodec)==null?void 0:e.split(","),r=getVariantDecodingBitrate(i),s=i.width||640,n=i.height||480,a=i.frameRate||30,l=i.videoRange.toLowerCase();return t?t.map(u=>{const c={contentType:mimeTypeForCodec(fillInMissingAV01Params(u),"video"),width:s,height:n,bitrate:r,framerate:a};return l!=="sdr"&&(c.transferFunction=l),c}):[]}function makeAudioConfigurations(i,e,t){var r;const s=(r=i.audioCodec)==null?void 0:r.split(","),n=getVariantDecodingBitrate(i);return s&&i.audioGroups?i.audioGroups.reduce((a,l)=>{var u;const c=l?(u=e.groups[l])==null?void 0:u.tracks:null;return c?c.reduce((p,b)=>{if(b.groupId===l){const P=parseFloat(b.channels||"");s.forEach(N=>{const de={contentType:mimeTypeForCodec(N,"audio"),bitrate:t?estimatedAudioBitrate(N,n):n};P&&(de.channels=""+P),p.push(de)})}return p},a):a},[]):[]}function estimatedAudioBitrate(i,e){if(e<=1)return 1;let t=128e3;return i==="ec-3"?t=768e3:i==="ac-3"&&(t=64e4),Math.min(e/2,t)}function getVariantDecodingBitrate(i){return Math.ceil(Math.max(i.bitrate*.9,i.averageBitrate)/1e3)*1e3||1}function getMediaDecodingInfoKey(i){let e="";const{audio:t,video:r}=i;if(r){const s=getCodecsForMimeType(r.contentType);e+=`${s}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(t){const s=getCodecsForMimeType(t.contentType);e+=`${r?"_":""}${s}_c${t.channels}`}return e}const HdcpLevels=["NONE","TYPE-0","TYPE-1",null];function isHdcpLevel(i){return HdcpLevels.indexOf(i)>-1}const VideoRangeValues=["SDR","PQ","HLG"];function isVideoRange(i){return!!i&&VideoRangeValues.indexOf(i)>-1}var HlsSkip={No:"",Yes:"YES",v2:"v2"};function getSkipValue(i){const{canSkipUntil:e,canSkipDateRanges:t,age:r}=i,s=r<e/2;return e&&s?t?HlsSkip.v2:HlsSkip.Yes:HlsSkip.No}class HlsUrlParameters{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Level{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const r=(t=e.supplemental)==null?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return hasGroup(this._audioGroups,e)}hasSubtitleGroup(e){return hasGroup(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(t)===-1&&r.push(t)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(t)===-1&&r.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function hasGroup(i,e){return!e||!i?!1:i.indexOf(e)!==-1}function isHdrSupported(){if(typeof matchMedia=="function"){const i=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(i.media!==e.media)return i.matches===!0}return!1}function getVideoSelectionOptions(i,e){let t=!1,r=[];if(i&&(t=i!=="SDR",r=[i]),e){r=e.allowedVideoRanges||VideoRangeValues.slice(0);const s=r.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:s&&isHdrSupported(),t||(r=["SDR"])}return{preferHDR:t,allowedVideoRanges:r}}const omitCircularRefsReplacer=i=>{const e=new WeakSet;return(t,r)=>{if(i&&(r=i(t,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},stringify=(i,e)=>JSON.stringify(i,omitCircularRefsReplacer(e));function getStartCodecTier(i,e,t,r,s){const n=Object.keys(i),a=r?.channels,l=r?.audioCodec,u=s?.videoCodec,c=a&&parseInt(a)===2;let p=!1,b=!1,P=1/0,N=1/0,de=1/0,me=1/0,Ye=0,Le=[];const{preferHDR:tt,allowedVideoRanges:Be}=getVideoSelectionOptions(e,s);for(let Et=n.length;Et--;){const St=i[n[Et]];p||(p=St.channels[2]>0),P=Math.min(P,St.minHeight),N=Math.min(N,St.minFramerate),de=Math.min(de,St.minBitrate),Be.filter(Pt=>St.videoRanges[Pt]>0).length>0&&(b=!0)}P=isFiniteNumber(P)?P:0,N=isFiniteNumber(N)?N:0;const nt=Math.max(1080,P),ft=Math.max(30,N);de=isFiniteNumber(de)?de:t,t=Math.max(de,t),b||(e=void 0);const mt=n.length>1;return{codecSet:n.reduce((Et,St)=>{const bt=i[St];if(St===Et)return Et;if(Le=b?Be.filter(Pt=>bt.videoRanges[Pt]>0):[],mt){if(bt.minBitrate>t)return logStartCodecCandidateIgnored(St,`min bitrate of ${bt.minBitrate} > current estimate of ${t}`),Et;if(!bt.hasDefaultAudio)return logStartCodecCandidateIgnored(St,"no renditions with default or auto-select sound found"),Et;if(l&&St.indexOf(l.substring(0,4))%5!==0)return logStartCodecCandidateIgnored(St,`audio codec preference "${l}" not found`),Et;if(a&&!c){if(!bt.channels[a])return logStartCodecCandidateIgnored(St,`no renditions with ${a} channel sound found (channels options: ${Object.keys(bt.channels)})`),Et}else if((!l||c)&&p&&bt.channels[2]===0)return logStartCodecCandidateIgnored(St,"no renditions with stereo sound found"),Et;if(bt.minHeight>nt)return logStartCodecCandidateIgnored(St,`min resolution of ${bt.minHeight} > maximum of ${nt}`),Et;if(bt.minFramerate>ft)return logStartCodecCandidateIgnored(St,`min framerate of ${bt.minFramerate} > maximum of ${ft}`),Et;if(!Le.some(Pt=>bt.videoRanges[Pt]>0))return logStartCodecCandidateIgnored(St,`no variants with VIDEO-RANGE of ${stringify(Le)} found`),Et;if(u&&St.indexOf(u.substring(0,4))%5!==0)return logStartCodecCandidateIgnored(St,`video codec preference "${u}" not found`),Et;if(bt.maxScore<Ye)return logStartCodecCandidateIgnored(St,`max score of ${bt.maxScore} < selected max of ${Ye}`),Et}return Et&&(codecsSetSelectionPreferenceValue(St)>=codecsSetSelectionPreferenceValue(Et)||bt.fragmentError>i[Et].fragmentError)?Et:(me=bt.minIndex,Ye=bt.maxScore,St)},void 0),videoRanges:Le,preferHDR:tt,minFramerate:N,minBitrate:de,minIndex:me}}function logStartCodecCandidateIgnored(i,e){logger.log(`[abr] start candidates with "${i}" ignored because ${e}`)}function getAudioTracksByGroup(i){return i.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const s=t.channels||"2";return r.channels[s]=(r.channels[s]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function getCodecTiers(i,e,t,r){return i.slice(t,r+1).reduce((s,n,a)=>{if(!n.codecSet)return s;const l=n.audioGroups;let u=s[n.codecSet];u||(s[n.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!l,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,n.bitrate);const c=Math.min(n.height,n.width);return u.minHeight=Math.min(u.minHeight,c),u.minFramerate=Math.min(u.minFramerate,n.frameRate),u.minIndex=Math.min(u.minIndex,a),u.maxScore=Math.max(u.maxScore,n.score),u.fragmentError+=n.fragmentError,u.videoRanges[n.videoRange]=(u.videoRanges[n.videoRange]||0)+1,l&&l.forEach(p=>{if(!p)return;const b=e.groups[p];b&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?b.hasDefault:b.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(b.channels).forEach(P=>{u.channels[P]=(u.channels[P]||0)+b.channels[P]}))}),s},{})}function getBasicSelectionOption(i){if(!i)return i;const{lang:e,assocLang:t,characteristics:r,channels:s,audioCodec:n}=i;return{lang:e,assocLang:t,characteristics:r,channels:s,audioCodec:n}}function findMatchingOption(i,e,t){if("attrs"in i){const r=e.indexOf(i);if(r!==-1)return r}for(let r=0;r<e.length;r++){const s=e[r];if(matchesOption(i,s,t))return r}return-1}function matchesOption(i,e,t){const{groupId:r,name:s,lang:n,assocLang:a,default:l}=i,u=i.forced;return(r===void 0||e.groupId===r)&&(s===void 0||e.name===s)&&(n===void 0||languagesMatch(n,e.lang))&&(n===void 0||e.assocLang===a)&&(l===void 0||e.default===l)&&(u===void 0||e.forced===u)&&(!("characteristics"in i)||characteristicsMatch(i.characteristics||"",e.characteristics))&&(t===void 0||t(i,e))}function languagesMatch(i,e="--"){return i.length===e.length?i===e:i.startsWith(e)||e.startsWith(i)}function characteristicsMatch(i,e=""){const t=i.split(","),r=e.split(",");return t.length===r.length&&!t.some(s=>r.indexOf(s)===-1)}function audioMatchPredicate(i,e){const{audioCodec:t,channels:r}=i;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function findClosestLevelWithAudioGroup(i,e,t,r,s){const n=e[r],l=e.reduce((P,N,de)=>{const me=N.uri;return(P[me]||(P[me]=[])).push(de),P},{})[n.uri];l.length>1&&(r=Math.max.apply(Math,l));const u=n.videoRange,c=n.frameRate,p=n.codecSet.substring(0,4),b=searchDownAndUpList(e,r,P=>{if(P.videoRange!==u||P.frameRate!==c||P.codecSet.substring(0,4)!==p)return!1;const N=P.audioGroups,de=t.filter(me=>!N||N.indexOf(me.groupId)!==-1);return findMatchingOption(i,de,s)>-1});return b>-1?b:searchDownAndUpList(e,r,P=>{const N=P.audioGroups,de=t.filter(me=>!N||N.indexOf(me.groupId)!==-1);return findMatchingOption(i,de,s)>-1})}function searchDownAndUpList(i,e,t){for(let r=e;r>-1;r--)if(t(i[r]))return r;for(let r=e+1;r<i.length;r++)if(t(i[r]))return r;return-1}function useAlternateAudio(i,e){var t;return!!i&&i!==((t=e.loadLevelObj)==null?void 0:t.uri)}class AbrController extends Logger{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var r;const{fragCurrent:s,partCurrent:n,hls:a}=this,{autoLevelEnabled:l,media:u}=a;if(!s||!u)return;const c=performance.now(),p=n?n.stats:s.stats,b=n?n.duration:s.duration,P=c-p.loading.start,N=a.minAutoLevel,de=s.level,me=this._nextAutoLevel;if(p.aborted||p.loaded&&p.loaded===p.total||de<=N){this.clearTimer(),this._nextAutoLevel=-1;return}if(!l)return;const Ye=me>-1&&me!==de,Le=!!t||Ye;if(!Le&&(u.paused||!u.playbackRate||!u.readyState))return;const tt=a.mainForwardBufferInfo;if(!Le&&tt===null)return;const Be=this.bwEstimator.getEstimateTTFB(),nt=Math.abs(u.playbackRate);if(P<=Math.max(Be,1e3*(b/(nt*2))))return;const ft=tt?tt.len/nt:0,mt=p.loading.first?p.loading.first-p.loading.start:-1,ht=p.loaded&&mt>-1,Et=this.getBwEstimate(),St=a.levels,bt=St[de],Pt=Math.max(p.loaded,Math.round(b*(s.bitrate||bt.averageBitrate)/8));let Rt=ht?P-mt:P;Rt<1&&ht&&(Rt=Math.min(P,p.loaded*8/Et));const Dt=ht?p.loaded*1e3/Rt:0,kt=Be/1e3,Lt=Dt?(Pt-p.loaded)/Dt:Pt*8/Et+kt;if(Lt<=ft)return;const vt=Dt?Dt*8:Et,xt=((r=t?.details||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,gt=this.hls.config.abrBandWidthUpFactor;let _t=Number.POSITIVE_INFINITY,yt;for(yt=de-1;yt>N;yt--){const Ft=St[yt].maxBitrate,zt=!St[yt].details||xt;if(_t=this.getTimeToLoadFrag(kt,vt,b*Ft,zt),_t<Math.min(ft,b+kt))break}if(_t>=Lt||_t>b*10)return;ht?this.bwEstimator.sample(P-Math.min(Be,mt),p.loaded):this.bwEstimator.sampleTTFB(P);const At=St[yt].maxBitrate;this.getBwEstimate()*gt>At&&this.resetEstimator(At);const wt=this.findBestLevel(At,N,yt,0,ft,1,1);wt>-1&&(yt=wt),this.warn(`Fragment ${s.sn}${n?" part "+n.index:""} of level ${de} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${ft.toFixed(3)} s
      Estimated load time for current fragment: ${Lt.toFixed(3)} s
      Estimated load time for down switch fragment: ${_t.toFixed(3)} s
      TTFB estimate: ${mt|0} ms
      Current BW estimate: ${isFiniteNumber(Et)?Et|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${yt} @ ${At|0} bps`),a.nextLoadLevel=a.nextAutoLevel=yt,this.clearTimer();const It=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===yt&&yt>0){const Ft=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${yt>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${Ft.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,yt>N){let zt=this.findBestLevel(this.hls.levels[N].bitrate,N,yt,0,Ft,1,1);zt===-1&&(zt=N),this.hls.nextLoadLevel=this.hls.nextAutoLevel=zt,this.resetEstimator(this.hls.levels[zt].bitrate)}}};Ye||Lt>_t*2?It():this.timer=self.setInterval(It,_t*1e3),a.trigger(Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:n,stats:p})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new EwmaBandWidthEstimator(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.FRAG_LOADING,this.onFragLoading,this),e.on(Events.FRAG_LOADED,this.onFragLoaded,this),e.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Events.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.FRAG_LOADING,this.onFragLoading,this),e.off(Events.FRAG_LOADED,this.onFragLoaded,this),e.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Events.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Events.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var s;this.fragCurrent=r,this.partCurrent=(s=t.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ErrorDetails.FRAG_LOAD_TIMEOUT:{const r=t.frag,{fragCurrent:s,partCurrent:n}=this;if(r&&s&&r.sn===s.sn&&r.level===s.level){const a=performance.now(),l=n?n.stats:r.stats,u=a-l.loading.start,c=l.loading.first?l.loading.first-l.loading.start:-1;if(l.loaded&&c>-1){const b=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(b,c),l.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,r,s){const n=e+r/t,a=s?e+this.lastLevelLoadSec:0;return n+a}onLevelLoaded(e,t){const r=this.hls.config,{loading:s}=t.stats,n=s.end-s.first;isFiniteNumber(n)&&(this.lastLevelLoadSec=n/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:r}){const s=r?r.stats:t.stats;if(t.type===PlaylistLevelType.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const n=r?r.duration:t.duration,a=this.hls.levels[t.level],l=(a.loaded?a.loaded.bytes:0)+s.loaded,u=(a.loaded?a.loaded.duration:0)+n;a.loaded={bytes:l,duration:u},a.realBitrate=Math.round(8*l/u)}if(t.bitrateTest){const n={stats:s,frag:t,part:r,id:t.type};this.onFragBuffered(Events.FRAG_BUFFERED,n),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:s}=t,n=s!=null&&s.stats.loaded?s.stats:r.stats;if(n.aborted||this.ignoreFragment(r))return;const a=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==PlaylistLevelType.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,n=this.findBestLevel(r,t,e,0,s,1,1);if(n>-1)return n;const a=this.hls.firstLevel,l=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${l}`),l}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const n=r&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,n)&&a[e].loadError<=a[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:s,config:n,minAutoLevel:a}=r,l=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),c=this.getStarvationDelay();let p=n.abrBandWidthFactor,b=n.abrBandWidthUpFactor;if(c){const Ye=this.findBestLevel(u,a,s,c,0,p,b);if(Ye>=0)return this.rebufferNotice=-1,Ye}let P=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay;if(!c){const Ye=this.bitrateTestDelay;Ye&&(P=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-Ye,this.info(`bitrate test took ${Math.round(1e3*Ye)}ms, set first fragment max fetchDuration to ${Math.round(1e3*P)} ms`),p=b=1)}const N=this.findBestLevel(u,a,s,c,P,p,b);if(this.rebufferNotice!==N&&(this.rebufferNotice=N,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${N}`)),N>-1)return N;const de=r.levels[a],me=r.loadLevelObj;return me&&de?.bitrate<me.bitrate?a:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,s,n,a,l){var u;const c=s+n,p=this.lastLoadedFragLevel,b=p===-1?this.hls.firstLevel:p,{fragCurrent:P,partCurrent:N}=this,{levels:de,allAudioTracks:me,loadLevel:Ye,config:Le}=this.hls;if(de.length===1)return 0;const tt=de[b],Be=!!((u=this.hls.latestLevelDetails)!=null&&u.live),nt=Ye===-1||p===-1;let ft,mt="SDR",ht=tt?.frameRate||0;const{audioPreference:Et,videoPreference:St}=Le,bt=this.audioTracksByGroup||(this.audioTracksByGroup=getAudioTracksByGroup(me));let Pt=-1;if(nt){if(this.firstSelection!==-1)return this.firstSelection;const vt=this.codecTiers||(this.codecTiers=getCodecTiers(de,bt,t,r)),xt=getStartCodecTier(vt,mt,e,Et,St),{codecSet:gt,videoRanges:_t,minFramerate:yt,minBitrate:At,minIndex:wt,preferHDR:It}=xt;Pt=wt,ft=gt,mt=It?_t[_t.length-1]:_t[0],ht=yt,e=Math.max(e,At),this.log(`picked start tier ${stringify(xt)}`)}else ft=tt?.codecSet,mt=tt?.videoRange;const Rt=N?N.duration:P?P.duration:0,Dt=this.bwEstimator.getEstimateTTFB()/1e3,kt=[];for(let vt=r;vt>=t;vt--){var Lt;const xt=de[vt],gt=vt>b;if(!xt)continue;if(Le.useMediaCapabilities&&!xt.supportedResult&&!xt.supportedPromise){const zt=navigator.mediaCapabilities;typeof zt?.decodingInfo=="function"&&requiresMediaCapabilitiesDecodingInfo(xt,bt,mt,ht,e,Et)?(xt.supportedPromise=getMediaDecodingInfoPromise(xt,bt,zt,this.supportedCache),xt.supportedPromise.then(Ut=>{if(!this.hls)return;xt.supportedResult=Ut;const Qt=this.hls.levels,Xt=Qt.indexOf(xt);Ut.error?this.warn(`MediaCapabilities decodingInfo error: "${Ut.error}" for level ${Xt} ${stringify(Ut)}`):Ut.supported?Ut.decodingInfoResults.some(Jt=>Jt.smooth===!1||Jt.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Xt} not smooth or powerEfficient: ${stringify(Ut)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Xt} ${stringify(Ut)}`),Xt>-1&&Qt.length>1&&(this.log(`Removing unsupported level ${Xt}`),this.hls.removeLevel(Xt),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Ut=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Ut}`)})):xt.supportedResult=SUPPORTED_INFO_DEFAULT}if((ft&&xt.codecSet!==ft||mt&&xt.videoRange!==mt||gt&&ht>xt.frameRate||!gt&&ht>0&&ht<xt.frameRate||(Lt=xt.supportedResult)!=null&&(Lt=Lt.decodingInfoResults)!=null&&Lt.some(zt=>zt.smooth===!1))&&(!nt||vt!==Pt)){kt.push(vt);continue}const _t=xt.details,yt=(N?_t?.partTarget:_t?.averagetargetduration)||Rt;let At;gt?At=l*e:At=a*e;const wt=Rt&&s>=Rt*2&&n===0?xt.averageBitrate:xt.maxBitrate,It=this.getTimeToLoadFrag(Dt,At,wt*yt,_t===void 0);if(At>=wt&&(vt===p||xt.loadError===0&&xt.fragmentError===0)&&(It<=Dt||!isFiniteNumber(It)||Be&&!this.bitrateTestDelay||It<c)){const zt=this.forcedAutoLevel;return vt!==Ye&&(zt===-1||zt!==Ye)&&(kt.length&&this.trace(`Skipped level(s) ${kt.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${de[kt[0]].codecs}" ${de[kt[0]].videoRange}; not compatible with "${ft}" ${mt}`),this.info(`switch candidate:${b}->${vt} adjustedbw(${Math.round(At)})-bitrate=${Math.round(At-wt)} ttfb:${Dt.toFixed(1)} avgDuration:${yt.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${It.toFixed(1)} firstSelection:${nt} codecSet:${xt.codecSet} videoRange:${xt.videoRange} hls.loadLevel:${Ye}`)),nt&&(this.firstSelection=vt),vt}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),t)}}const BinarySearch={search:function(i,e){let t=0,r=i.length-1,s=null,n=null;for(;t<=r;){s=(t+r)/2|0,n=i[s];const a=e(n);if(a>0)t=s+1;else if(a<0)r=s-1;else return n}return null}};function findFragmentByPDT(i,e,t){if(e===null||!Array.isArray(i)||!i.length||!isFiniteNumber(e))return null;const r=i[0].programDateTime;if(e<(r||0))return null;const s=i[i.length-1].endProgramDateTime;if(e>=(s||0))return null;for(let n=0;n<i.length;++n){const a=i[n];if(pdtWithinToleranceTest(e,t,a))return a}return null}function findFragmentByPTS(i,e,t=0,r=0,s=.005){let n=null;if(i){n=e[1+i.sn-e[0].sn]||null;const l=i.endDTS-t;l>0&&l<15e-7&&(t+=15e-7),n&&i.level!==n.level&&n.end<=i.end&&(n=e[2+i.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(n=e[0]);if(n&&((!i||i.level===n.level)&&fragmentWithinToleranceTest(t,r,n)===0||fragmentWithinFastStartSwitch(n,i,Math.min(s,r))))return n;const a=BinarySearch.search(e,fragmentWithinToleranceTest.bind(null,t,r));return a&&(a!==i||!n)?a:n}function fragmentWithinFastStartSwitch(i,e,t){if(e&&e.start===0&&e.level<i.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((s,n)=>(n[0]==="INF"&&(s+=parseFloat(n[1])),s),t);return i.start<=r}return!1}function fragmentWithinToleranceTest(i=0,e=0,t){if(t.start<=i&&t.start+t.duration>i)return 0;const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=i?1:t.start-r>i&&t.start?-1:0}function pdtWithinToleranceTest(i,e,t){const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-r>i}function findNearestWithCC(i,e,t){if(i&&i.startCC<=e&&i.endCC>=e){let r=i.fragments;const{fragmentHint:s}=i;s&&(r=r.concat(s));let n;return BinarySearch.search(r,a=>a.cc<e?1:a.cc>e?-1:(n=a,a.end<=t?1:a.start>t?-1:0)),n||null}return null}function isTimeoutError(i){switch(i.details){case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_TIMEOUT:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function getRetryConfig(i,e){const t=isTimeoutError(e);return i.default[`${t?"timeout":"error"}Retry`]}function getRetryDelay(i,e){const t=i.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*i.retryDelayMs,i.maxRetryDelayMs)}function getLoaderConfigWithoutReties(i){return _objectSpread2(_objectSpread2({},i),{errorRetry:null,timeoutRetry:null})}function shouldRetry(i,e,t,r){if(!i)return!1;const s=r?.code,n=e<i.maxNumRetry&&(retryForHttpStatus(s)||!!t);return i.shouldRetry?i.shouldRetry(i,e,t,r,n):n}function retryForHttpStatus(i){return offlineHttpStatus(i)||!!i&&(i<400||i>499)}function offlineHttpStatus(i){return i===0&&navigator.onLine===!1}var NetworkErrorAction={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},ErrorActionFlags={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class ErrorController extends Logger{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Events.ERROR,this.onError,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Events.ERROR,this.onError,this),e.off(Events.ERROR,this.onErrorOut,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===PlaylistLevelType.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,r=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||r===-1?t.loadLevel:r}variantHasKey(e,t){if(e){var r;if((r=e.details)!=null&&r.hasKey(t))return!0;const s=e.audioGroups;if(s)return this.hls.allAudioTracks.filter(a=>s.indexOf(a.groupId)>=0).some(a=>{var l;return(l=a.details)==null?void 0:l.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var r;if(t.fatal)return;const s=this.hls,n=t.context;switch(t.details){case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case ErrorDetails.FRAG_PARSING_ERROR:if((r=t.frag)!=null&&r.gap){t.errorAction=createDoNothingErrorAction();return}case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox;return}case ErrorDetails.LEVEL_EMPTY_ERROR:case ErrorDetails.LEVEL_PARSING_ERROR:{var a;const u=t.parent===PlaylistLevelType.MAIN?t.level:s.loadLevel;t.details===ErrorDetails.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(a=a.levelDetails)!=null&&a.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,u):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,u))}return;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:typeof n?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.level));return;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.SUBTITLE_LOAD_ERROR:case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:if(n){const u=s.loadLevelObj;if(u&&(n.type===PlaylistContextType.AUDIO_TRACK&&u.hasAudioGroup(n.groupId)||n.type===PlaylistContextType.SUBTITLE_TRACK&&u.hasSubtitleGroup(n.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox,t.errorAction.flags=ErrorActionFlags.MoveAllAlternatesMatchingHost;return}}return;case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHDCP};return;case ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED:case ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case ErrorDetails.KEY_SYSTEM_NO_SESSION:t.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingKey};return;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.REMUX_ALLOC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:if(!t.errorAction){var l;t.errorAction=this.getLevelSwitchAction(t,(l=t.level)!=null?l:s.loadLevel)}return;case ErrorDetails.INTERNAL_EXCEPTION:case ErrorDetails.BUFFER_APPENDING_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:case ErrorDetails.LEVEL_SWITCH_ERROR:case ErrorDetails.BUFFER_STALLED_ERROR:case ErrorDetails.BUFFER_SEEK_OVER_HOLE:case ErrorDetails.BUFFER_NUDGE_ON_STALL:t.errorAction=createDoNothingErrorAction();return}t.type===ErrorTypes.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=createDoNothingErrorAction())}getPlaylistRetryOrSwitchAction(e,t){const r=this.hls,s=getRetryConfig(r.config.playlistLoadPolicy,e),n=this.playlistError++;if(shouldRetry(s,n,isTimeoutError(e),e.response))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:s,retryCount:n};const l=this.getLevelSwitchAction(e,t);return s&&(l.retryConfig=s,l.retryCount=n),l}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),s=t.levels[r],{fragLoadPolicy:n,keyLoadPolicy:a}=t.config,l=getRetryConfig(e.details.startsWith("key")?a:n,e),u=t.levels.reduce((p,b)=>p+b.fragmentError,0);if(s&&(e.details!==ErrorDetails.FRAG_GAP&&s.fragmentError++,shouldRetry(l,u,isTimeoutError(e),e.response)))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:l,retryCount:u};const c=this.getLevelSwitchAction(e,r);return l&&(c.retryConfig=l,c.retryCount=u),c}getLevelSwitchAction(e,t){const r=this.hls;t==null&&(t=r.loadLevel);const s=this.hls.levels[t];if(s){var n,a;const c=e.details;s.loadError++,c===ErrorDetails.BUFFER_APPEND_ERROR&&s.fragmentError++;let p=-1;const{levels:b,loadLevel:P,minAutoLevel:N,maxAutoLevel:de}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const me=(n=e.frag)==null?void 0:n.type,Le=(me===PlaylistLevelType.AUDIO&&c===ErrorDetails.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===ErrorDetails.BUFFER_ADD_CODEC_ERROR||c===ErrorDetails.BUFFER_APPEND_ERROR))&&b.some(({audioCodec:mt})=>s.audioCodec!==mt),Be=e.sourceBufferName==="video"&&(c===ErrorDetails.BUFFER_ADD_CODEC_ERROR||c===ErrorDetails.BUFFER_APPEND_ERROR)&&b.some(({codecSet:mt,audioCodec:ht})=>s.codecSet!==mt&&s.audioCodec===ht),{type:nt,groupId:ft}=(a=e.context)!=null?a:{};for(let mt=b.length;mt--;){const ht=(mt+P)%b.length;if(ht!==P&&ht>=N&&ht<=de&&b[ht].loadError===0){var l,u;const Et=b[ht];if(c===ErrorDetails.FRAG_GAP&&me===PlaylistLevelType.MAIN&&e.frag){const St=b[ht].details;if(St){const bt=findFragmentByPTS(e.frag,St.fragments,e.frag.start);if(bt!=null&&bt.gap)continue}}else{if(nt===PlaylistContextType.AUDIO_TRACK&&Et.hasAudioGroup(ft)||nt===PlaylistContextType.SUBTITLE_TRACK&&Et.hasSubtitleGroup(ft))continue;if(me===PlaylistLevelType.AUDIO&&(l=s.audioGroups)!=null&&l.some(St=>Et.hasAudioGroup(St))||me===PlaylistLevelType.SUBTITLE&&(u=s.subtitleGroups)!=null&&u.some(St=>Et.hasSubtitleGroup(St))||Le&&s.audioCodec===Et.audioCodec||Be&&s.codecSet===Et.codecSet||!Le&&s.codecSet!==Et.codecSet)continue}p=ht;break}}if(p>-1&&r.loadLevel!==p)return e.levelRetry=!0,this.playlistError=0,{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.None,nextAutoLevel:p}}return{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var r;switch((r=t.errorAction)==null?void 0:r.action){case NetworkErrorAction.DoNothing:break;case NetworkErrorAction.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==ErrorDetails.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:s}=r,n=r.nextAutoLevel;switch(s){case ErrorActionFlags.None:this.switchLevel(e,n);break;case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:{const u=this.getVariantLevelIndex(e.frag),c=t.levels[u],p=c?.attrs["HDCP-LEVEL"];if(r.hdcpLevel=p,p){t.maxHdcpLevel=HdcpLevels[HdcpLevels.indexOf(p)-1],r.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case ErrorActionFlags.MoveAllAlternatesMatchingKey:{const u=e.decryptdata;if(u){const c=this.hls.levels;for(let p=c.length;p--;)if(this.variantHasKey(c[p],u)){var a,l;this.log(`Banned key found in level ${p} (${c[p].bitrate}bps) or audio group "${(a=c[p].audioGroups)==null?void 0:a.join(",")}" (${(l=e.frag)==null?void 0:l.type} fragment) ${arrayToHex(u.keyId||[])}`),c[p].fragmentError++,c[p].loadError++,this.log(`Removing level ${p} with key error (${e.error})`),this.hls.removeLevel(p)}c.length&&(r.resolved=!0)}break}}r.resolved||this.switchLevel(e,n)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===ErrorDetails.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=getCodecsForMimeType(e.mimeType),s=this.hls.levels;for(let n=s.length;n--;)s[n][`${e.sourceBufferName}Codec`]===r&&(this.log(`Removing level ${n} for ${e.details} ("${r}" not supported)`),this.hls.removeLevel(n))}}}function createDoNothingErrorAction(i){const e={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return i&&(e.resolved=!0),e}var FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class FragmentTracker{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Events.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Events.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let s=r.length;s--;){const n=r[s];if(!n)break;if(n.start<=e&&e<=n.end&&n.loaded)return n}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,r){const{fragments:s}=this,n=Object.keys(s);for(let a=n.length;a--;){const l=s[n[a]];if(l?.body.type===t&&(!r||l.buffered)){const u=l.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,r,s,n){this.timeRanges&&(this.timeRanges[e]=t);const a=s?.fragment.sn||-1;Object.keys(this.fragments).forEach(l=>{const u=this.fragments[l];if(!u||a>=u.body.sn)return;if(!u.buffered&&(!u.loaded||n)){u.body.type===r&&this.removeFragment(u.body);return}const c=u.range[e];if(c){if(c.time.length===0){this.removeFragment(u.body);return}c.time.some(p=>{const b=!this.isTimeBuffered(p.startPTS,p.endPTS,t);return b&&this.removeFragment(u.body),b})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const r=e.frag,s=getFragmentKey(r),n=this.fragments[s];if(!n||n.buffered&&r.gap)return;const a=!r.relurl;Object.keys(t).forEach(l=>{const u=r.elementaryStreams[l];if(!u)return;const c=t[l],p=a||u.partial===!0;n.range[l]=this.getBufferedTimes(r,e.part,p,c)}),n.loaded=null,Object.keys(n.range).length?(n.buffered=!0,(n.body.endList=r.endList||n.body.endList)&&(this.endListFragments[n.body.type]=n),isPartial(n)||this.removeParts(r.sn-1,r.type)):this.removeFragment(n.body)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=filterParts(r,s=>s.fragment.sn>=e))}fragBuffered(e,t){const r=getFragmentKey(e);let s=this.fragments[r];!s&&t&&(s=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,r,s){const n={time:[],partial:r},a=e.start,l=e.end,u=e.minEndPTS||l,c=e.maxStartPTS||a;for(let p=0;p<s.length;p++){const b=s.start(p)-this.bufferPadding,P=s.end(p)+this.bufferPadding;if(c>=b&&u<=P){n.time.push({startPTS:Math.max(a,s.start(p)),endPTS:Math.min(l,s.end(p))});break}else if(a<P&&l>b){const N=Math.max(a,s.start(p)),de=Math.min(l,s.end(p));de>N&&(n.partial=!0,n.time.push({startPTS:N,endPTS:de}))}else if(l<=b)break}return n}getPartialFragment(e){let t=null,r,s,n,a=0;const{bufferPadding:l,fragments:u}=this;return Object.keys(u).forEach(c=>{const p=u[c];p&&isPartial(p)&&(s=p.body.start-l,n=p.body.end+l,e>=s&&e<=n&&(r=Math.min(e-s,n-e),a<=r&&(t=p.body,a=r)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||isPartial(t))}getState(e){const t=getFragmentKey(e),r=this.fragments[t];return r?r.buffered?isPartial(r)?FragmentState.PARTIAL:FragmentState.OK:FragmentState.APPENDING:FragmentState.NOT_LOADED}isTimeBuffered(e,t,r){let s,n;for(let a=0;a<r.length;a++){if(s=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,e>=s&&t<=n)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const r=t.frag,s=t.part?null:t,n=getFragmentKey(r);this.fragments[n]={body:r,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:s,timeRanges:n,type:a}=t;if(r.sn==="initSegment")return;const l=r.type;if(s){let c=this.activePartLists[l];c||(this.activePartLists[l]=c=[]),c.push(s)}this.timeRanges=n;const u=n[a];this.detectEvictedFragments(a,u,l,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=getFragmentKey(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,r=Object.keys(t);if(!e)return r.length>0;for(let s=r.length;s--;){const n=t[r[s]];if(n?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,r,s,n){s&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const l=this.fragments[a];if(!l)return;const u=l.body;u.type!==r||s&&!u.gap||u.start<t&&u.end>e&&(l.buffered||n)&&this.removeFragment(u)})}removeFragment(e){const t=getFragmentKey(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const s=e.sn;this.activePartLists[e.type]=filterParts(r,n=>n.fragment.sn!==s)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(r=>r.clearElementaryStreamInfo())}}function isPartial(i){var e,t,r;return i.buffered&&!!(i.body.gap||(e=i.range.video)!=null&&e.partial||(t=i.range.audio)!=null&&t.partial||(r=i.range.audiovideo)!=null&&r.partial)}function getFragmentKey(i){return`${i.type}_${i.level}_${i.sn}`}function filterParts(i,e){return i.filter(t=>{const r=e(t);return r||t.clearElementaryStreamInfo(),r})}var DecrypterAesMode={cbc:0,ctr:1};class AESCrypto{constructor(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}decrypt(e,t){switch(this.aesMode){case DecrypterAesMode.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case DecrypterAesMode.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function removePadding(i){const e=i.byteLength,t=e&&new DataView(i.buffer).getUint8(e-1);return t?i.slice(0,e-t):i}class AESDecryptor{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let s=0;s<4;s++)r[s]=t.getUint32(s*4);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,s=r[0],n=r[1],a=r[2],l=r[3],u=this.invSubMix,c=u[0],p=u[1],b=u[2],P=u[3],N=new Uint32Array(256);let de=0,me=0,Ye=0;for(Ye=0;Ye<256;Ye++)Ye<128?N[Ye]=Ye<<1:N[Ye]=Ye<<1^283;for(Ye=0;Ye<256;Ye++){let Le=me^me<<1^me<<2^me<<3^me<<4;Le=Le>>>8^Le&255^99,e[de]=Le,t[Le]=de;const tt=N[de],Be=N[tt],nt=N[Be];let ft=N[Le]*257^Le*16843008;s[de]=ft<<24|ft>>>8,n[de]=ft<<16|ft>>>16,a[de]=ft<<8|ft>>>24,l[de]=ft,ft=nt*16843009^Be*65537^tt*257^de*16843008,c[Le]=ft<<24|ft>>>8,p[Le]=ft<<16|ft>>>16,b[Le]=ft<<8|ft>>>24,P[Le]=ft,de?(de=tt^N[N[N[nt^tt]]],me^=N[N[me]]):de=me=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,s=0;for(;s<t.length&&r;)r=t[s]===this.key[s],s++;if(r)return;this.key=t;const n=this.keySize=t.length;if(n!==4&&n!==6&&n!==8)throw new Error("Invalid aes key size="+n);const a=this.ksRows=(n+6+1)*4;let l,u;const c=this.keySchedule=new Uint32Array(a),p=this.invKeySchedule=new Uint32Array(a),b=this.sBox,P=this.rcon,N=this.invSubMix,de=N[0],me=N[1],Ye=N[2],Le=N[3];let tt,Be;for(l=0;l<a;l++){if(l<n){tt=c[l]=t[l];continue}Be=tt,l%n===0?(Be=Be<<8|Be>>>24,Be=b[Be>>>24]<<24|b[Be>>>16&255]<<16|b[Be>>>8&255]<<8|b[Be&255],Be^=P[l/n|0]<<24):n>6&&l%n===4&&(Be=b[Be>>>24]<<24|b[Be>>>16&255]<<16|b[Be>>>8&255]<<8|b[Be&255]),c[l]=tt=(c[l-n]^Be)>>>0}for(u=0;u<a;u++)l=a-u,u&3?Be=c[l]:Be=c[l-4],u<4||l<=4?p[u]=Be:p[u]=de[b[Be>>>24]]^me[b[Be>>>16&255]]^Ye[b[Be>>>8&255]]^Le[b[Be&255]],p[u]=p[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,r){const s=this.keySize+6,n=this.invKeySchedule,a=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],p=l[2],b=l[3],P=this.uint8ArrayToUint32Array_(r);let N=P[0],de=P[1],me=P[2],Ye=P[3];const Le=new Int32Array(e),tt=new Int32Array(Le.length);let Be,nt,ft,mt,ht,Et,St,bt,Pt,Rt,Dt,kt,Lt,vt;const xt=this.networkToHostOrderSwap;for(;t<Le.length;){for(Pt=xt(Le[t]),Rt=xt(Le[t+1]),Dt=xt(Le[t+2]),kt=xt(Le[t+3]),ht=Pt^n[0],Et=kt^n[1],St=Dt^n[2],bt=Rt^n[3],Lt=4,vt=1;vt<s;vt++)Be=u[ht>>>24]^c[Et>>16&255]^p[St>>8&255]^b[bt&255]^n[Lt],nt=u[Et>>>24]^c[St>>16&255]^p[bt>>8&255]^b[ht&255]^n[Lt+1],ft=u[St>>>24]^c[bt>>16&255]^p[ht>>8&255]^b[Et&255]^n[Lt+2],mt=u[bt>>>24]^c[ht>>16&255]^p[Et>>8&255]^b[St&255]^n[Lt+3],ht=Be,Et=nt,St=ft,bt=mt,Lt=Lt+4;Be=a[ht>>>24]<<24^a[Et>>16&255]<<16^a[St>>8&255]<<8^a[bt&255]^n[Lt],nt=a[Et>>>24]<<24^a[St>>16&255]<<16^a[bt>>8&255]<<8^a[ht&255]^n[Lt+1],ft=a[St>>>24]<<24^a[bt>>16&255]<<16^a[ht>>8&255]<<8^a[Et&255]^n[Lt+2],mt=a[bt>>>24]<<24^a[ht>>16&255]<<16^a[Et>>8&255]<<8^a[St&255]^n[Lt+3],tt[t]=xt(Be^N),tt[t+1]=xt(mt^de),tt[t+2]=xt(ft^me),tt[t+3]=xt(nt^Ye),N=Pt,de=Rt,me=Dt,Ye=kt,t=t+4}return tt.buffer}}class FastAESKey{constructor(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}expandKey(){const e=getSubtleAlgoName(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function getSubtleAlgoName(i){switch(i){case DecrypterAesMode.cbc:return"AES-CBC";case DecrypterAesMode.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${i}`)}}const CHUNK_SIZE=16;class Decrypter{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?removePadding(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r,s){return this.useSoftware?new Promise((n,a)=>{const l=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(l,t,r,s);const u=this.flush();u?n(u.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r,s)}softwareDecrypt(e,t,r,s){const{currentIV:n,currentResult:a,remainderData:l}=this;if(s!==DecrypterAesMode.cbc||t.byteLength!==16)return logger.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),l&&(e=appendUint8Array(l,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;n&&(r=n);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new AESDecryptor),c.expandKey(t);const p=a;return this.currentResult=c.decrypt(u.buffer,0,r),this.currentIV=u.slice(-16).buffer,p||null}webCryptoDecrypt(e,t,r,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,s));this.key=t,this.fastAesKey=new FastAESKey(this.subtle,t,s)}return this.fastAesKey.expandKey().then(n=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new AESCrypto(this.subtle,new Uint8Array(r),s).decrypt(e.buffer,n)):Promise.reject(new Error("web crypto not initialized"))).catch(n=>(logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${n.name}: ${n.message}`),this.onWebCryptoError(e,t,r,s)))}onWebCryptoError(e,t,r,s){const n=this.enableSoftwareAES;if(n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,s);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(n?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%CHUNK_SIZE;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t}logOnce(e){this.logEnabled&&(logger.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const MIN_CHUNK_SIZE=Math.pow(2,17);class FragmentLoader{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,n=s.fLoader,a=s.loader;return new Promise((l,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(de=>de[0]==="GAP")){u(createGapLoadError(e));return}else e.gap=!1;const c=this.loader=n?new n(s):new a(s),p=createLoaderContext(e);e.loader=c;const b=getLoaderConfigWithoutReties(s.fragLoadPolicy.default),P={loadPolicy:b,timeout:b.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:MIN_CHUNK_SIZE};e.stats=c.stats;const N={onSuccess:(de,me,Ye,Le)=>{this.resetLoader(e,c);let tt=de.data;Ye.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(tt.slice(0,16)),tt=tt.slice(16)),l({frag:e,part:null,payload:tt,networkDetails:Le})},onError:(de,me,Ye,Le)=>{this.resetLoader(e,c),u(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:_objectSpread2({url:r,data:void 0},de),error:new Error(`HTTP Error ${de.code} ${de.text}`),networkDetails:Ye,stats:Le}))},onAbort:(de,me,Ye)=>{this.resetLoader(e,c),u(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:Ye,stats:de}))},onTimeout:(de,me,Ye)=>{this.resetLoader(e,c),u(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${P.timeout}ms`),networkDetails:Ye,stats:de}))}};t&&(N.onProgress=(de,me,Ye,Le)=>t({frag:e,part:null,payload:Ye,networkDetails:Le})),c.load(p,P,N)})}loadPart(e,t,r){this.abort();const s=this.config,n=s.fLoader,a=s.loader;return new Promise((l,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(createGapLoadError(e,t));return}const c=this.loader=n?new n(s):new a(s),p=createLoaderContext(e,t);e.loader=c;const b=getLoaderConfigWithoutReties(s.fragLoadPolicy.default),P={loadPolicy:b,timeout:b.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MIN_CHUNK_SIZE};t.stats=c.stats,c.load(p,P,{onSuccess:(N,de,me,Ye)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const Le={frag:e,part:t,payload:N.data,networkDetails:Ye};r(Le),l(Le)},onError:(N,de,me,Ye)=>{this.resetLoader(e,c),u(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:_objectSpread2({url:p.url,data:void 0},N),error:new Error(`HTTP Error ${N.code} ${N.text}`),networkDetails:me,stats:Ye}))},onAbort:(N,de,me)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),u(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:me,stats:N}))},onTimeout:(N,de,me)=>{this.resetLoader(e,c),u(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${P.timeout}ms`),networkDetails:me,stats:N}))}})})}updateStatsFromPart(e,t){const r=e.stats,s=t.stats,n=s.total;if(r.loaded+=s.loaded,n){const u=Math.round(e.duration/t.duration),c=Math.min(Math.round(r.loaded/n),u),b=(u-c)*Math.round(r.loaded/c);r.total=r.loaded+b}else r.total=Math.max(r.loaded,r.total);const a=r.loading,l=s.loading;a.start?a.first+=l.first-l.start:(a.start=l.start,a.first=l.first),a.end=l.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function createLoaderContext(i,e=null){const t=e||i,r={frag:i,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,n=t.byteRangeEndOffset;if(isFiniteNumber(s)&&isFiniteNumber(n)){var a;let l=s,u=n;if(i.sn==="initSegment"&&isMethodFullSegmentAesCbc((a=i.decryptdata)==null?void 0:a.method)){const c=n-s;c%16&&(u=n+(16-c%16)),s!==0&&(r.resetIV=!0,l=s-16)}r.rangeStart=l,r.rangeEnd=u}return r}function createGapLoadError(i,e){const t=new Error(`GAP ${i.gap?"tag":"attribute"} found`),r={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_GAP,fatal:!1,frag:i,error:t,networkDetails:null};return e&&(r.part=e),(e||i).stats.aborted=!0,new LoadError(r)}function isMethodFullSegmentAesCbc(i){return i==="AES-128"||i==="AES-256"}class LoadError extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class TaskLoop extends Logger{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class ChunkMetadata{constructor(e,t,r,s=0,n=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=getNewPerformanceTiming(),this.buffering={audio:getNewPerformanceTiming(),video:getNewPerformanceTiming(),audiovideo:getNewPerformanceTiming()},this.level=e,this.sn=t,this.id=r,this.size=s,this.part=n,this.partial=a}}function getNewPerformanceTiming(){return{start:0,executeStart:0,executeEnd:0,end:0}}const noopBuffered={length:0,start:()=>0,end:()=>0};class BufferHelper{static isBuffered(e,t){if(e){const r=BufferHelper.getBuffered(e);for(let s=r.length;s--;)if(t>=r.start(s)&&t<=r.end(s))return!0}return!1}static bufferedRanges(e){if(e){const t=BufferHelper.getBuffered(e);return BufferHelper.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}static bufferInfo(e,t,r){if(e){const s=BufferHelper.bufferedRanges(e);if(s.length)return BufferHelper.bufferedInfo(s,t,r)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.length>1&&e.sort((p,b)=>p.start-b.start||b.end-p.end);let s=-1,n=[];if(r)for(let p=0;p<e.length;p++){t>=e[p].start&&t<=e[p].end&&(s=p);const b=n.length;if(b){const P=n[b-1].end;e[p].start-P<r?e[p].end>P&&(n[b-1].end=e[p].end):n.push(e[p])}else n.push(e[p])}else n=e;let a=0,l,u=t,c=t;for(let p=0;p<n.length;p++){const b=n[p].start,P=n[p].end;if(s===-1&&t>=b&&t<=P&&(s=p),t+r>=b&&t<P)u=b,c=P,a=c-t;else if(t+r<b){l=b;break}}return{len:a,start:u||0,end:c||0,nextStart:l,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||noopBuffered}catch(t){return logger.log("failed to get media.buffered",t),noopBuffered}}}const VARIABLE_REPLACEMENT_REGEX=/\{\$([a-zA-Z0-9-_]+)\}/g;function hasVariableReferences(i){return VARIABLE_REPLACEMENT_REGEX.test(i)}function substituteVariables(i,e){if(i.variableList!==null||i.hasVariableRefs){const t=i.variableList;return e.replace(VARIABLE_REPLACEMENT_REGEX,r=>{const s=r.substring(2,r.length-1),n=t?.[s];return n===void 0?(i.playlistParsingError||(i.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),r):n})}return e}function addVariableDefinition(i,e,t){let r=i.variableList;r||(i.variableList=r={});let s,n;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(s))n=a.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${t}"`)}catch(a){i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else s=e.NAME,n=e.VALUE;s in r?i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=n||""}function importVariableDefinition(i,e,t){const r=e.IMPORT;if(t&&r in t){let s=i.variableList;s||(i.variableList=s={}),s[r]=t[r]}else i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/,ATTR_LIST_REGEX=/(.+?)=(".*?"|.*?)(?:,|$)/g;class AttrList{constructor(e,t){typeof e=="string"&&(e=AttrList.parseAttrList(e,t)),_extends$1(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const r=new Uint8Array(t.length/2);for(let s=0;s<t.length/2;s++)r[s]=parseInt(t.slice(s*2,s*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((s,n)=>(s[n.toLowerCase()]=!0,s),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=DECIMAL_RESOLUTION_REGEX.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let r;const s={};for(ATTR_LIST_REGEX.lastIndex=0;(r=ATTR_LIST_REGEX.exec(e))!==null;){const a=r[1].trim();let l=r[2];const u=l.indexOf('"')===0&&l.lastIndexOf('"')===l.length-1;let c=!1;if(u)l=l.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(u||c))l=substituteVariables(t,l);else if(!c&&!u)switch(a){case"CLOSED-CAPTIONS":if(l==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":logger.warn(`${e}: attribute ${a} is missing quotes`)}s[a]=l}return s}}const CLASS_INTERSTITIAL="com.apple.hls.interstitial";function isDateRangeCueAttribute(i){return i!=="ID"&&i!=="CLASS"&&i!=="CUE"&&i!=="START-DATE"&&i!=="DURATION"&&i!=="END-DATE"&&i!=="END-ON-NEXT"}function isSCTE35Attribute(i){return i==="SCTE35-OUT"||i==="SCTE35-IN"||i==="SCTE35-CMD"}class DateRange{constructor(e,t,r=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(s=t?.tagOrder)!=null?s:r,t){const n=t.attr;for(const a in n)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==n[a]){logger.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=_extends$1(new AttrList({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=t?.endDate||new Date(this.attr["END-DATE"]);isFiniteNumber(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(logger.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(isFiniteNumber(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===CLASS_INTERSTITIAL}get isValid(){return!!this.id&&!this._badValueForSameId&&isFiniteNumber(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const DEFAULT_TARGET_DURATION=10;class LevelDetails{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let r=t.decryptdata;return r||(t.setKeyFormat(e.keyFormat),r=t.decryptdata),!!r&&e.matches(r)})}get hasProgramDateTime(){return this.fragments.length?isFiniteNumber(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||DEFAULT_TARGET_DURATION}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function arrayValuesMatch(i,e){return i.length===e.length?!i.some((t,r)=>t!==e[r]):!1}function optionalArrayValuesMatch(i,e){return!i&&!e?!0:!i||!e?!1:arrayValuesMatch(i,e)}function isFullSegmentEncryption(i){return i==="AES-128"||i==="AES-256"||i==="AES-256-CTR"}function getAesModeFromFullSegmentMethod(i){switch(i){case"AES-128":case"AES-256":return DecrypterAesMode.cbc;case"AES-256-CTR":return DecrypterAesMode.ctr;default:throw new Error(`invalid full segment method ${i}`)}}function base64Decode(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0))}function strToUtf8array(i){return Uint8Array.from(unescape(encodeURIComponent(i)),e=>e.charCodeAt(0))}function getKeyIdBytes(i){const e=strToUtf8array(i).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function changeEndianness(i){const e=function(r,s,n){const a=r[s];r[s]=r[n],r[n]=a};e(i,0,3),e(i,1,2),e(i,4,5),e(i,6,7)}function convertDataUriToArrayBytes(i){const e=i.split(":");let t=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),s=r[r.length-1].split(",");if(s.length===2){const n=s[0]==="base64",a=s[1];n?(r.splice(-1,1),t=base64Decode(a)):t=getKeyIdBytes(a)}}return t}const optionalSelf=typeof self<"u"?self:void 0;var KeySystems={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},KeySystemFormats={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function keySystemFormatToKeySystemDomain(i){switch(i){case KeySystemFormats.FAIRPLAY:return KeySystems.FAIRPLAY;case KeySystemFormats.PLAYREADY:return KeySystems.PLAYREADY;case KeySystemFormats.WIDEVINE:return KeySystems.WIDEVINE;case KeySystemFormats.CLEARKEY:return KeySystems.CLEARKEY}}function keySystemDomainToKeySystemFormat(i){switch(i){case KeySystems.FAIRPLAY:return KeySystemFormats.FAIRPLAY;case KeySystems.PLAYREADY:return KeySystemFormats.PLAYREADY;case KeySystems.WIDEVINE:return KeySystemFormats.WIDEVINE;case KeySystems.CLEARKEY:return KeySystemFormats.CLEARKEY}}function getKeySystemsForConfig(i){const{drmSystems:e,widevineLicenseUrl:t}=i,r=e?[KeySystems.FAIRPLAY,KeySystems.WIDEVINE,KeySystems.PLAYREADY,KeySystems.CLEARKEY].filter(s=>!!e[s]):[];return!r[KeySystems.WIDEVINE]&&t&&r.push(KeySystems.WIDEVINE),r}const requestMediaKeySystemAccess=function(i){return optionalSelf!=null&&(i=optionalSelf.navigator)!=null&&i.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function getSupportedMediaKeySystemConfigurations(i,e,t,r){let s;switch(i){case KeySystems.FAIRPLAY:s=["cenc","sinf"];break;case KeySystems.WIDEVINE:case KeySystems.PLAYREADY:s=["cenc"];break;case KeySystems.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${i}`)}return createMediaKeySystemConfigurations(s,e,t,r)}function createMediaKeySystemConfigurations(i,e,t,r){return[{initDataTypes:i,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(n=>({contentType:`audio/mp4; codecs=${n}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:t.map(n=>({contentType:`video/mp4; codecs=${n}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function isPersistentSessionType(i){var e;return!!i&&(i.sessionType==="persistent-license"||!!((e=i.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function parsePlayReadyWRM(i){const e=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),r=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(a){const l=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(l){const u=base64Decode(l).subarray(0,16);return changeEndianness(u),u}}return null}let keyUriToKeyIdMap={};class LevelKey{static clearKeyUriToKeyIdMap(){keyUriToKeyIdMap={}}constructor(e,t,r,s=[1],n=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=s,this.iv=n,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!isFullSegmentEncryption(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(hexToArrayBuffer(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&arrayValuesMatch(e.keyFormatVersions,this.keyFormatVersions)&&optionalArrayValuesMatch(e.iv,this.iv)&&optionalArrayValuesMatch(e.keyId,this.keyId)}isSupported(){if(this.method){if(isFullSegmentEncryption(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case KeySystemFormats.FAIRPLAY:case KeySystemFormats.WIDEVINE:case KeySystemFormats.PLAYREADY:case KeySystemFormats.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(isFullSegmentEncryption(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(logger.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=createInitializationVector(e);return new LevelKey(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;const t=convertDataUriToArrayBytes(this.uri);if(t)switch(this.keyFormat){case KeySystemFormats.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const r=t.length-22;this.keyId=t.subarray(r,r+16)}break;case KeySystemFormats.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mp4pssh(r,null,t),this.keyId=parsePlayReadyWRM(t);break}default:{let r=t.subarray(0,16);if(r.length!==16){const s=new Uint8Array(16);s.set(r,16-r.length),r=s}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=keyUriToKeyIdMap[this.uri];if(!r){const s=Object.keys(keyUriToKeyIdMap).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,s),keyUriToKeyIdMap[this.uri]=r}this.keyId=r}return this}}function createInitializationVector(i){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=i>>8*(15-t)&255;return e}const MASTER_PLAYLIST_REGEX=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,MASTER_PLAYLIST_MEDIA_REGEX=/#EXT-X-MEDIA:(.*)/g,IS_MEDIA_PLAYLIST=/^#EXT(?:INF|-X-TARGETDURATION):/m,LEVEL_PLAYLIST_REGEX_FAST=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),LEVEL_PLAYLIST_REGEX_SLOW=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class M3U8Parser{static findGroup(e,t){for(let r=0;r<e.length;r++){const s=e[r];if(s.id===t)return s}}static resolve(e,t){return urlToolkitExports.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return IS_MEDIA_PLAYLIST.test(e)}static parseMasterPlaylist(e,t){const r=hasVariableReferences(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},n=[];MASTER_PLAYLIST_REGEX.lastIndex=0;let a;for(;(a=MASTER_PLAYLIST_REGEX.exec(e))!=null;)if(a[1]){var l;const c=new AttrList(a[1],s),p=substituteVariables(s,a[2]),b={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:M3U8Parser.resolve(p,t)},P=c.decimalResolution("RESOLUTION");P&&(b.width=P.width,b.height=P.height),setCodecs(c.CODECS,b);const N=c["SUPPLEMENTAL-CODECS"];N&&(b.supplemental={},setCodecs(N,b.supplemental)),(l=b.unknownCodecs)!=null&&l.length||n.push(b),s.levels.push(b)}else if(a[3]){const c=a[3],p=a[4];switch(c){case"SESSION-DATA":{const b=new AttrList(p,s),P=b["DATA-ID"];P&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[P]=b);break}case"SESSION-KEY":{const b=parseKey(p,t,s);b.encrypted&&b.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(b)):logger.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${p}"`);break}case"DEFINE":{{const b=new AttrList(p,s);addVariableDefinition(s,b,t)}break}case"CONTENT-STEERING":{const b=new AttrList(p,s);s.contentSteering={uri:M3U8Parser.resolve(b["SERVER-URI"],t),pathwayId:b["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=parseStartTimeOffset(p);break}}}const u=n.length>0&&n.length<s.levels.length;return s.levels=u?n:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,r){let s;const n={},a=r.levels,l={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(MASTER_PLAYLIST_MEDIA_REGEX.lastIndex=0;(s=MASTER_PLAYLIST_MEDIA_REGEX.exec(e))!==null;){const c=new AttrList(s[1],r),p=c.TYPE;if(p){const b=l[p],P=n[p]||[];n[p]=P;const N=c.LANGUAGE,de=c["ASSOC-LANGUAGE"],me=c.CHANNELS,Ye=c.CHARACTERISTICS,Le=c["INSTREAM-ID"],tt={attrs:c,bitrate:0,id:u++,groupId:c["GROUP-ID"]||"",name:c.NAME||N||"",type:p,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:N,url:c.URI?M3U8Parser.resolve(c.URI,t):""};if(de&&(tt.assocLang=de),me&&(tt.channels=me),Ye&&(tt.characteristics=Ye),Le&&(tt.instreamId=Le),b!=null&&b.length){const Be=M3U8Parser.findGroup(b,tt.groupId)||b[0];assignCodec(tt,Be,"audioCodec"),assignCodec(tt,Be,"textCodec")}P.push(tt)}}return n}static parseLevelPlaylist(e,t,r,s,n,a){var l;const u={url:t},c=new LevelDetails(t),p=c.fragments,b=[];let P=null,N=0,de=0,me=0,Ye=0,Le=0,tt=null,Be=new Fragment(s,u),nt,ft,mt,ht=-1,Et=!1,St=null,bt;if(LEVEL_PLAYLIST_REGEX_FAST.lastIndex=0,c.m3u8=e,c.hasVariableRefs=hasVariableReferences(e),((l=LEVEL_PLAYLIST_REGEX_FAST.exec(e))==null?void 0:l[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(nt=LEVEL_PLAYLIST_REGEX_FAST.exec(e))!==null;){Et&&(Et=!1,Be=new Fragment(s,u),Be.playlistOffset=me,Be.setStart(me),Be.sn=N,Be.cc=Ye,Le&&(Be.bitrate=Le),Be.level=r,P&&(Be.initSegment=P,P.rawProgramDateTime&&(Be.rawProgramDateTime=P.rawProgramDateTime,P.rawProgramDateTime=null),St&&(Be.setByteRange(St),St=null)));const kt=nt[1];if(kt){Be.duration=parseFloat(kt);const Lt=(" "+nt[2]).slice(1);Be.title=Lt||null,Be.tagList.push(Lt?["INF",kt,Lt]:["INF",kt])}else if(nt[3]){if(isFiniteNumber(Be.duration)){Be.playlistOffset=me,Be.setStart(me),mt&&setFragLevelKeys(Be,mt,c),Be.sn=N,Be.level=r,Be.cc=Ye,p.push(Be);const Lt=(" "+nt[3]).slice(1);Be.relurl=substituteVariables(c,Lt),assignProgramDateTime(Be,tt,b),tt=Be,me+=Be.duration,N++,de=0,Et=!0}}else{if(nt=nt[0].match(LEVEL_PLAYLIST_REGEX_SLOW),!nt){logger.warn("No matches on slow regex match for level playlist!");continue}for(ft=1;ft<nt.length&&nt[ft]===void 0;ft++);const Lt=(" "+nt[ft]).slice(1),vt=(" "+nt[ft+1]).slice(1),xt=nt[ft+2]?(" "+nt[ft+2]).slice(1):null;switch(Lt){case"BYTERANGE":tt?Be.setByteRange(vt,tt):Be.setByteRange(vt);break;case"PROGRAM-DATE-TIME":Be.rawProgramDateTime=vt,Be.tagList.push(["PROGRAM-DATE-TIME",vt]),ht===-1&&(ht=p.length);break;case"PLAYLIST-TYPE":c.type&&assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt),c.type=vt.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt):p.length>0&&assignMustAppearBeforeSegmentsError(c,Lt,nt),N=c.startSN=parseInt(vt);break;case"SKIP":{c.skippedSegments&&assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt);const gt=new AttrList(vt,c),_t=gt.decimalInteger("SKIPPED-SEGMENTS");if(isFiniteNumber(_t)){c.skippedSegments+=_t;for(let At=_t;At--;)p.push(null);N+=_t}const yt=gt.enumeratedString("RECENTLY-REMOVED-DATERANGES");yt&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(yt.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt),c.targetduration=Math.max(parseInt(vt),1);break;case"VERSION":c.version!==null&&assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt),c.version=parseInt(vt);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt),c.live=!1;break;case"#":(vt||xt)&&Be.tagList.push(xt?[vt,xt]:[vt]);break;case"DISCONTINUITY":Ye++,Be.tagList.push(["DIS"]);break;case"GAP":Be.gap=!0,Be.tagList.push([Lt]);break;case"BITRATE":Be.tagList.push([Lt,vt]),Le=parseInt(vt)*1e3,isFiniteNumber(Le)?Be.bitrate=Le:Le=0;break;case"DATERANGE":{const gt=new AttrList(vt,c),_t=new DateRange(gt,c.dateRanges[gt.ID],c.dateRangeTagCount);c.dateRangeTagCount++,_t.isValid||c.skippedSegments?c.dateRanges[_t.id]=_t:logger.warn(`Ignoring invalid DATERANGE tag: "${vt}"`),Be.tagList.push(["EXT-X-DATERANGE",vt]);break}case"DEFINE":{{const gt=new AttrList(vt,c);"IMPORT"in gt?importVariableDefinition(c,gt,a):addVariableDefinition(c,gt,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt):p.length>0&&assignMustAppearBeforeSegmentsError(c,Lt,nt),c.startCC=Ye=parseInt(vt);break;case"KEY":{const gt=parseKey(vt,t,c);if(gt.isSupported()){if(gt.method==="NONE"){mt=void 0;break}mt||(mt={});const _t=mt[gt.keyFormat];_t!=null&&_t.matches(gt)||(_t&&(mt=_extends$1({},mt)),mt[gt.keyFormat]=gt)}else logger.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${vt}"`);break}case"START":c.startTimeOffset=parseStartTimeOffset(vt);break;case"MAP":{const gt=new AttrList(vt,c);if(Be.duration){const _t=new Fragment(s,u);setInitSegment(_t,gt,r,mt),P=_t,Be.initSegment=P,P.rawProgramDateTime&&!Be.rawProgramDateTime&&(Be.rawProgramDateTime=P.rawProgramDateTime)}else{const _t=Be.byteRangeEndOffset;if(_t){const yt=Be.byteRangeStartOffset;St=`${_t-yt}@${yt}`}else St=null;setInitSegment(Be,gt,r,mt),P=Be,Et=!0}P.cc=Ye;break}case"SERVER-CONTROL":{bt&&assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt),bt=new AttrList(vt),c.canBlockReload=bt.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=bt.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&bt.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=bt.optionalFloat("PART-HOLD-BACK",0),c.holdBack=bt.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&assignMultipleMediaPlaylistTagOccuranceError(c,Lt,nt);const gt=new AttrList(vt);c.partTarget=gt.decimalFloatingPoint("PART-TARGET");break}case"PART":{let gt=c.partList;gt||(gt=c.partList=[]);const _t=de>0?gt[gt.length-1]:void 0,yt=de++,At=new AttrList(vt,c),wt=new Part(At,Be,u,yt,_t);gt.push(wt),Be.duration+=wt.duration;break}case"PRELOAD-HINT":{const gt=new AttrList(vt,c);c.preloadHint=gt;break}case"RENDITION-REPORT":{const gt=new AttrList(vt,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(gt);break}default:logger.warn(`line parsed but not handled: ${nt}`);break}}}tt&&!tt.relurl?(p.pop(),me-=tt.duration,c.partList&&(c.fragmentHint=tt)):c.partList&&(assignProgramDateTime(Be,tt,b),Be.cc=Ye,c.fragmentHint=Be,mt&&setFragLevelKeys(Be,mt,c)),c.targetduration||(c.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const Pt=p.length,Rt=p[0],Dt=p[Pt-1];if(me+=c.skippedSegments*c.targetduration,me>0&&Pt&&Dt){c.averagetargetduration=me/Pt;const kt=Dt.sn;c.endSN=kt!=="initSegment"?kt:0,c.live||(Dt.endList=!0),ht>0&&(backfillProgramDateTimes(p,ht),Rt&&b.unshift(Rt))}return c.fragmentHint&&(me+=c.fragmentHint.duration),c.totalduration=me,b.length&&c.dateRangeTagCount&&Rt&&mapDateRanges(b,c),c.endCC=Ye,c}}function mapDateRanges(i,e){let t=i.length;if(!t)if(e.hasProgramDateTime){const l=e.fragments[e.fragments.length-1];i.push(l),t++}else return;const r=i[t-1],s=e.live?1/0:e.totalduration,n=Object.keys(e.dateRanges);for(let l=n.length;l--;){const u=e.dateRanges[n[l]],c=u.startDate.getTime();u.tagAnchor=r.ref;for(let p=t;p--;){var a;if(((a=i[p])==null?void 0:a.sn)<e.startSN)break;const b=findFragmentWithStartDate(e,c,i,p,s);if(b!==-1){u.tagAnchor=e.fragments[b].ref;break}}}}function findFragmentWithStartDate(i,e,t,r,s){const n=t[r];if(n){const l=n.programDateTime;if(e>=l||r===0){var a;const u=(((a=t[r+1])==null?void 0:a.start)||s)-n.start;if(e<=l+u*1e3){const c=t[r].sn-i.startSN;if(c<0)return-1;const p=i.fragments;if(p.length>t.length){const P=(t[r+1]||p[p.length-1]).sn-i.startSN;for(let N=P;N>c;N--){const de=p[N].programDateTime;if(e>=de&&e<de+p[N].duration*1e3)return N}}return c}}}return-1}function parseKey(i,e,t){var r,s;const n=new AttrList(i,t),a=(r=n.METHOD)!=null?r:"",l=n.URI,u=n.hexadecimalInteger("IV"),c=n.KEYFORMATVERSIONS,p=(s=n.KEYFORMAT)!=null?s:"identity";l&&n.IV&&!u&&logger.error(`Invalid IV: ${n.IV}`);const b=l?M3U8Parser.resolve(l,e):"",P=(c||"1").split("/").map(Number).filter(Number.isFinite);return new LevelKey(a,b,p,P,u,n.KEYID)}function parseStartTimeOffset(i){const t=new AttrList(i).decimalFloatingPoint("TIME-OFFSET");return isFiniteNumber(t)?t:null}function setCodecs(i,e){let t=(i||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const s=t.filter(n=>isCodecType(n,r));s.length&&(e[`${r}Codec`]=s.map(n=>n.split("/")[0]).join(","),t=t.filter(n=>s.indexOf(n)===-1))}),e.unknownCodecs=t}function assignCodec(i,e,t){const r=e[t];r&&(i[t]=r)}function backfillProgramDateTimes(i,e){let t=i[e];for(let r=e;r--;){const s=i[r];if(!s)return;s.programDateTime=t.programDateTime-s.duration*1e3,t=s}}function assignProgramDateTime(i,e,t){i.rawProgramDateTime?t.push(i):e!=null&&e.programDateTime&&(i.programDateTime=e.endProgramDateTime)}function setInitSegment(i,e,t,r){i.relurl=e.URI,e.BYTERANGE&&i.setByteRange(e.BYTERANGE),i.level=t,i.sn="initSegment",r&&(i.levelkeys=r),i.initSegment=null}function setFragLevelKeys(i,e,t){i.levelkeys=e;const{encryptedFragments:r}=t;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&r.push(i)}function assignMultipleMediaPlaylistTagOccuranceError(i,e,t){i.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function assignMustAppearBeforeSegmentsError(i,e,t){i.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function updateFromToPTS(i,e){const t=e.startPTS;if(isFiniteNumber(t)){let r=0,s;e.sn>i.sn?(r=t-i.start,s=i):(r=i.start-t,s=e),s.duration!==r&&s.setDuration(r)}else e.sn>i.sn?i.cc===e.cc&&i.minEndPTS?e.setStart(i.start+(i.minEndPTS-i.start)):e.setStart(i.start+i.duration):e.setStart(Math.max(i.start-e.duration,0))}function updateFragPTSDTS(i,e,t,r,s,n,a){r-t<=0&&(a.warn("Fragment should have a positive duration",e),r=t+e.duration,n=s+e.duration);let u=t,c=r;const p=e.startPTS,b=e.endPTS;if(isFiniteNumber(p)){const Le=Math.abs(p-t);i&&Le>i.totalduration?a.warn(`media timestamps and playlist times differ by ${Le}s for level ${e.level} ${i.url}`):isFiniteNumber(e.deltaPTS)?e.deltaPTS=Math.max(Le,e.deltaPTS):e.deltaPTS=Le,u=Math.max(t,p),t=Math.min(t,p),s=e.startDTS!==void 0?Math.min(s,e.startDTS):s,c=Math.min(r,b),r=Math.max(r,b),n=e.endDTS!==void 0?Math.max(n,e.endDTS):n}const P=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(r-e.start),e.startPTS=t,e.maxStartPTS=u,e.startDTS=s,e.endPTS=r,e.minEndPTS=c,e.endDTS=n;const N=e.sn;if(!i||N<i.startSN||N>i.endSN)return 0;let de;const me=N-i.startSN,Ye=i.fragments;for(Ye[me]=e,de=me;de>0;de--)updateFromToPTS(Ye[de],Ye[de-1]);for(de=me;de<Ye.length-1;de++)updateFromToPTS(Ye[de],Ye[de+1]);return i.fragmentHint&&updateFromToPTS(Ye[Ye.length-1],i.fragmentHint),i.PTSKnown=i.alignedSliding=!0,P}function mergeDetails(i,e,t){if(i===e)return;let r=null;const s=i.fragments;for(let p=s.length-1;p>=0;p--){const b=s[p].initSegment;if(b){r=b;break}}i.fragmentHint&&delete i.fragmentHint.endPTS;let n;mapFragmentIntersection(i,e,(p,b,P,N)=>{if((!e.startCC||e.skippedSegments)&&b.cc!==p.cc){const de=p.cc-b.cc;for(let me=P;me<N.length;me++)N[me].cc+=de;e.endCC=N[N.length-1].cc}isFiniteNumber(p.startPTS)&&isFiniteNumber(p.endPTS)&&(b.setStart(b.startPTS=p.startPTS),b.startDTS=p.startDTS,b.maxStartPTS=p.maxStartPTS,b.endPTS=p.endPTS,b.endDTS=p.endDTS,b.minEndPTS=p.minEndPTS,b.setDuration(p.endPTS-p.startPTS),b.duration&&(n=b),e.PTSKnown=e.alignedSliding=!0),p.hasStreams&&(b.elementaryStreams=p.elementaryStreams),b.loader=p.loader,p.hasStats&&(b.stats=p.stats),p.initSegment&&(b.initSegment=p.initSegment,r=p.initSegment)});const a=e.fragments,l=e.fragmentHint?a.concat(e.fragmentHint):a;if(r&&l.forEach(p=>{var b;p&&(!p.initSegment||p.initSegment.relurl===((b=r)==null?void 0:b.relurl))&&(p.initSegment=r)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(p=>!p),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let p=e.skippedSegments;p--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=mergeDateRanges(i.dateRanges,e,t));const p=i.fragments.filter(b=>b.rawProgramDateTime);if(i.hasProgramDateTime&&!e.hasProgramDateTime)for(let b=1;b<l.length;b++)l[b].programDateTime===null&&assignProgramDateTime(l[b],l[b-1],p);mapDateRanges(p,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var u;const p=getFragmentWithSN(i,e.startSN-1);e.startCC=(u=p?.cc)!=null?u:a[0].cc}mapPartIntersection(i.partList,e.partList,(p,b)=>{b.elementaryStreams=p.elementaryStreams,b.stats=p.stats}),n?updateFragPTSDTS(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS,t):adjustSliding(i,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=i.driftStartTime,e.driftStart=i.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const p=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=p),e.driftEndTime=c,e.driftEnd=p}else e.driftEndTime=i.driftEndTime,e.driftEnd=i.driftEnd,e.advancedDateTime=i.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=i.requestScheduled)}function mergeDateRanges(i,e,t){const{dateRanges:r,recentlyRemovedDateranges:s}=e,n=_extends$1({},i);s&&s.forEach(u=>{delete n[u]});const l=Object.keys(n).length;return l?(Object.keys(r).forEach(u=>{const c=n[u],p=new DateRange(r[u].attr,c);p.isValid?(n[u]=p,c||(p.tagOrder+=l)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${stringify(r[u].attr)}"`)}),n):r}function mapPartIntersection(i,e,t){if(i&&e){let r=0;for(let s=0,n=i.length;s<=n;s++){const a=i[s],l=e[s+r];a&&l&&a.index===l.index&&a.fragment.sn===l.fragment.sn?t(a,l):r--}}}function mapFragmentIntersection(i,e,t){const r=e.skippedSegments,s=Math.max(i.startSN,e.startSN)-e.startSN,n=(i.fragmentHint?1:0)+(r?e.endSN:Math.min(i.endSN,e.endSN))-e.startSN,a=e.startSN-i.startSN,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments;for(let c=s;c<=n;c++){const p=u[a+c];let b=l[c];if(r&&!b&&p&&(b=e.fragments[c]=p),p&&b){t(p,b,c,l);const P=p.relurl,N=b.relurl;if(P&&notEqualAfterStrippingQueries(P,N)){e.playlistParsingError=getSequenceError(`media sequence mismatch ${b.sn}:`,i,e,p,b);return}else if(p.cc!==b.cc){e.playlistParsingError=getSequenceError(`discontinuity sequence mismatch (${p.cc}!=${b.cc})`,i,e,p,b);return}}}}function getSequenceError(i,e,t,r,s){return new Error(`${i} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function adjustSliding(i,e,t=!0){const r=e.startSN+e.skippedSegments-i.startSN,s=i.fragments,n=r>=0;let a=0;if(n&&r<s.length)a=s[r].start;else if(n&&e.startSN===i.endSN+1)a=i.fragmentEnd;else if(n&&t)a=i.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=i.fragmentStart;else return;addSliding(e,a)}function addSliding(i,e){if(e){const t=i.fragments;for(let r=i.skippedSegments;r<t.length;r++)t[r].addStart(e);i.fragmentHint&&i.fragmentHint.addStart(e)}}function computeReloadInterval(i,e=1/0){let t=1e3*i.targetduration;if(i.updated){const r=i.fragments;if(r.length&&t*4>e){const n=r[r.length-1].duration*1e3;n<t&&(t=n)}}else t/=2;return Math.round(t)}function getFragmentWithSN(i,e,t){if(!i)return null;let r=i.fragments[e-i.startSN];return r||(r=i.fragmentHint,r&&r.sn===e)?r:e<i.startSN&&t&&t.sn===e?t:null}function getPartWith(i,e,t){return i?findPart(i.partList,e,t):null}function findPart(i,e,t){if(i)for(let r=i.length;r--;){const s=i[r];if(s.index===t&&s.fragment.sn===e)return s}return null}function reassignFragmentLevelIndexes(i){i.forEach((e,t)=>{var r;(r=e.details)==null||r.fragments.forEach(s=>{s.level=t,s.initSegment&&(s.initSegment.level=t)})})}function notEqualAfterStrippingQueries(i,e){return i!==e&&e?stripQuery(i)!==stripQuery(e):!1}function stripQuery(i){return i.replace(/\?[^?]*$/,"")}function findFirstFragWithCC(i,e){for(let r=0,s=i.length;r<s;r++){var t;if(((t=i[r])==null?void 0:t.cc)===e)return i[r]}return null}function shouldAlignOnDiscontinuities(i,e){return!!(i&&e.startCC<i.endCC&&e.endCC>i.startCC)}function adjustFragmentStart(i,e){const t=i.start+e;i.startPTS=t,i.setStart(t),i.endPTS=t+i.duration}function adjustSlidingStart(i,e){const t=e.fragments;for(let r=0,s=t.length;r<s;r++)adjustFragmentStart(t[r],i);e.fragmentHint&&adjustFragmentStart(e.fragmentHint,i),e.alignedSliding=!0}function alignStream(i,e){i&&(alignDiscontinuities(e,i),e.alignedSliding||alignMediaPlaylistByPDT(e,i),!e.alignedSliding&&!e.skippedSegments&&adjustSliding(i,e,!1))}function alignDiscontinuities(i,e){if(!shouldAlignOnDiscontinuities(e,i))return;const t=Math.min(e.endCC,i.endCC),r=findFirstFragWithCC(e.fragments,t),s=findFirstFragWithCC(i.fragments,t);if(!r||!s)return;logger.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const n=r.start-s.start;adjustSlidingStart(n,i)}function alignMediaPlaylistByPDT(i,e){if(!i.hasProgramDateTime||!e.hasProgramDateTime)return;const t=i.fragments,r=e.fragments;if(!t.length||!r.length)return;let s,n;const a=Math.min(e.endCC,i.endCC);e.startCC<a&&i.startCC<a&&(s=findFirstFragWithCC(r,a),n=findFirstFragWithCC(t,a)),(!s||!n)&&(s=r[Math.floor(r.length/2)],n=findFirstFragWithCC(t,s.cc)||t[Math.floor(t.length/2)]);const l=s.programDateTime,u=n.programDateTime;if(!l||!u)return;const c=(u-l)/1e3-(n.start-s.start);adjustSlidingStart(c,i)}function addEventListener(i,e,t){removeEventListener(i,e,t),i.addEventListener(e,t)}function removeEventListener(i,e,t){i.removeEventListener(e,t)}const TimeRanges={toString:function(i){let e="";const t=i.length;for(let r=0;r<t;r++)e+=`[${i.start(r).toFixed(3)}-${i.end(r).toFixed(3)}]`;return e}},State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BaseStreamController extends TaskLoop{constructor(e,t,r,s,n){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=State.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:l,media:u,mediaBuffer:c,state:p}=this,b=u?u.currentTime:0,P=BufferHelper.bufferInfo(c||u,b,a.maxBufferHole),N=!P.len;if(this.log(`Media seeking to ${isFiniteNumber(b)?b.toFixed(3):b}, state: ${p}, ${N?"out of":"in"} buffer`),this.state===State.ENDED)this.resetLoadingState();else if(l){const de=a.maxFragLookUpTolerance,me=l.start-de,Ye=l.start+l.duration+de;if(N||Ye<P.start||me>P.end){const Le=b>Ye;(b<me||Le)&&(Le&&l.loader&&(this.log(`Cancelling fragment load for seek (sn: ${l.sn})`),l.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(b,1/0,this.playlistType,!0);const de=this.lastCurrentTime;if(b>de&&(this.lastCurrentTime=b),!this.loadingParts){const me=Math.max(P.end,b),Ye=this.shouldLoadParts(this.getLevelDetails(),me);Ye&&(this.log(`LL-Part loading ON after seeking to ${b.toFixed(2)} with buffer @${me.toFixed(2)}`),this.loadingParts=Ye)}}this.hls.hasEnoughToStart||(this.log(`Setting ${N?"startPosition":"nextLoadPosition"} to ${b} for seek without enough to start`),this.nextLoadPosition=b,N&&(this.startPosition=b)),N&&this.state===State.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=n,this.hls=e,this.fragmentLoader=new FragmentLoader(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Decrypter(e.config)}registerListeners(){const{hls:e}=this;e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===State.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=State.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const r=e.end||0,s=this.config.timelineOffset||0;if(r<=s)return!1;const n=e.buffered;this.config.maxBufferHole&&n&&n.length>1&&(e=BufferHelper.bufferedInfo(n,e.start,0));const a=e.nextStart;if(a&&a>s&&a<t.edge||this.media.currentTime<e.start)return!1;const u=t.partList;if(u!=null&&u.length){const p=u[u.length-1];return BufferHelper.isBuffered(this.media,p.start+p.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;addEventListener(r,"seeking",this.onMediaSeeking),addEventListener(r,"ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===State.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const r=!!t.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),removeEventListener(s,"seeking",this.onMediaSeeking),removeEventListener(s,"ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=State.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){const s=n=>{const a=n.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${n.part?" part: "+n.part.index:""} of ${this.fragInfo(a,!1,n.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(n)};this._doFragLoad(e,t,r,s).then(n=>{if(!n)return;const a=this.state,l=n.frag;if(this.fragContextChanged(l)){(a===State.FRAG_LOADING||!this.fragCurrent&&a===State.PARSING)&&(this.fragmentTracker.removeFragment(l),this.state=State.IDLE);return}"payload"in n&&(this.log(`Loaded ${l.type} sn: ${l.sn} of ${this.playlistLabel()} ${l.level}`),this.hls.trigger(Events.FRAG_LOADED,n)),this._handleFragmentLoadComplete(n)}).catch(n=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(`Frag error: ${n?.message||n}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===FragmentState.APPENDING){const n=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,n),l=Math.max(e.duration,a?a.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(l,e.duration))&&r.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===FragmentState.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:r};this.hls.trigger(Events.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(r=>{const s=r?.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:s}=this,{frag:n,payload:a}=r,l=n.decryptdata;if(a&&a.byteLength>0&&l!=null&&l.key&&l.iv&&isFullSegmentEncryption(l.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),l.key.buffer,l.iv.buffer,getAesModeFromFullSegmentMethod(l.method)).catch(c=>{throw s.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:n}),c}).then(c=>{const p=self.performance.now();return s.trigger(Events.FRAG_DECRYPTED,{frag:n,payload:c,stats:{tstart:u,tdecrypt:p}}),r.payload=c,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==State.STOPPED&&(this.state=State.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var r,s;const n=e.tracks;if(n&&!t.encrypted&&((r=n.audio)!=null&&r.encrypted||(s=n.video)!=null&&s.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,l=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(l.message),!a||a.mediaKeys?!1:(this.hls.trigger(Events.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!1,error:l,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${r?TimeRanges.toString(BufferHelper.getBuffered(r)):"(detached)"})`),isMediaFragment(e)){var s;if(e.type!==PlaylistLevelType.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(l=>!!a[l])){this.state=State.IDLE;return}}const n=(s=this.levels)==null?void 0:s[e.level];n!=null&&n.fragmentError&&(this.log(`Resetting level fragment error count of ${n.fragmentError} on frag buffered`),n.fragmentError=0)}this.state=State.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:s,partsLoaded:n}=e,a=!n||n.length===0||n.some(u=>!u),l=new ChunkMetadata(r.level,r.sn,r.stats.chunkCount+1,0,s?s.index:-1,!a);t.flush(l)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,s){var n;this.fragCurrent=e;const a=t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let l=null;if(e.encrypted&&!((n=e.decryptdata)!=null&&n.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=State.KEY_LOADING,this.fragCurrent=e,l=this.keyLoader.load(e).then(P=>{if(!this.fragContextChanged(P.frag))return this.hls.trigger(Events.KEY_LOADED,P),this.state===State.KEY_LOADING&&(this.state=State.IDLE),P}),this.hls.trigger(Events.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(l=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),l&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(isMediaFragment(e)&&(!u||e.sn!==u.sn)){const P=this.shouldLoadParts(t.details,e.end);P!==this.loadingParts&&(this.log(`LL-Part loading ${P?"ON":"OFF"} loading sn ${u?.sn}->${e.sn}`),this.loadingParts=P)}if(r=Math.max(e.start,r||0),this.loadingParts&&isMediaFragment(e)){const P=a.partList;if(P&&s){r>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const N=this.getNextPart(P,e,r);if(N>-1){const de=P[N];e=this.fragCurrent=de.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${de.index} (${N}/${P.length-1}) of ${this.fragInfo(e,!1,de)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=de.start+de.duration,this.state=State.FRAG_LOADING;let me;return l?me=l.then(Ye=>!Ye||this.fragContextChanged(Ye.frag)?null:this.doFragPartsLoad(e,de,t,s)).catch(Ye=>this.handleFragLoadError(Ye)):me=this.doFragPartsLoad(e,de,t,s).catch(Ye=>this.handleFragLoadError(Ye)),this.hls.trigger(Events.FRAG_LOADING,{frag:e,part:de,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):me}else if(!e.url||this.loadedEndOfParts(P,r))return Promise.resolve(null)}}if(isMediaFragment(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=a.partList)==null?void 0:c.filter(P=>P.loaded).map(P=>`[${P.start}-${P.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(r.toFixed(3))}`),isFiniteNumber(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=State.FRAG_LOADING;const p=this.config.progressive;let b;return p&&l?b=l.then(P=>!P||this.fragContextChanged(P.frag)?null:this.fragmentLoader.load(e,s)).catch(P=>this.handleFragLoadError(P)):b=Promise.all([this.fragmentLoader.load(e,p?s:void 0),l]).then(([P])=>(!p&&s&&s(P),P)).catch(P=>this.handleFragLoadError(P)),this.hls.trigger(Events.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):b}doFragPartsLoad(e,t,r,s){return new Promise((n,a)=>{var l;const u=[],c=(l=r.details)==null?void 0:l.partList,p=b=>{this.fragmentLoader.loadPart(e,b,s).then(P=>{u[b.index]=P;const N=P.part;this.hls.trigger(Events.FRAG_LOADED,P);const de=getPartWith(r.details,e.sn,b.index+1)||findPart(c,e.sn,b.index+1);if(de)p(de);else return n({frag:e,part:N,partsLoaded:u})}).catch(a)};p(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===ErrorTypes.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetFragmentLoading(t.frag)):this.hls.trigger(Events.ERROR,t)}else this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==State.PARSING){!this.fragCurrent&&this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.state=State.IDLE);return}const{frag:r,part:s,level:n}=t,a=self.performance.now();r.stats.parsing.end=a,s&&(s.stats.parsing.end=a);const l=this.getLevelDetails(),c=l&&r.sn>l.endSN||this.shouldLoadParts(l,r.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(r,s,n,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var r;const n=e.partList[0];if(n.fragment.type===PlaylistLevelType.SUBTITLE)return!1;const a=n.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(t>=a){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>n.start-n.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:s,sn:n,part:a}=e;if(!(t!=null&&t[s]))return this.warn(`Levels object was unset while buffering fragment ${n} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const l=t[s],u=l.details,c=a>-1?getPartWith(u,n,a):null,p=c?c.fragment:getFragmentWithSN(u,n,r);return p?(r&&r!==p&&(p.stats=r.stats),{frag:p,part:c,level:l}):null}bufferFragmentData(e,t,r,s,n){if(this.state!==State.PARSING)return;const{data1:a,data2:l}=e;let u=a;if(l&&(u=appendUint8Array(a,l)),!u.length)return;const c=this.initPTS[t.cc],p=c?-c.baseTime/c.timescale:void 0,b={type:e.type,frag:t,part:r,chunkMeta:s,offset:p,parent:t.type,data:u};if(this.hls.trigger(Events.BUFFER_APPENDING,b),e.dropped&&e.independent&&!r){if(n)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!BufferHelper.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const r=t.currentTime,s=BufferHelper.bufferInfo(t,r,0),n=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,n*.25),l=Math.max(Math.min(e.start-a,s.end-a),r+a);e.start-l>a&&this.flushMainBuffer(l,e.start)}getFwdBufferInfo(e,t){var r;const s=this.getLoadPosition();if(!isFiniteNumber(s))return null;const a=this.lastCurrentTime>s||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,a)}getFwdBufferInfoAtPos(e,t,r,s){const n=BufferHelper.bufferInfo(e,t,s);if(n.len===0&&n.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,r);if(a&&(n.nextStart<=a.end||a.gap)){const l=Math.max(Math.min(n.nextStart,a.end)-t,s);return BufferHelper.bufferInfo(e,t,l)}}return n}getMaxBufferLength(e){const{config:t}=this;let r;return e?r=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):r=t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,s=Math.max(Math.min(e-t,r.maxBufferLength),t),n=Math.max(e-t*3,r.maxMaxBufferLength/2,s);return n>=s?(r.maxMaxBufferLength=n,this.warn(`Reduce max buffer length to ${n}s`),!0):!1}getAppendedFrag(e,t=PlaylistLevelType.MAIN){const r=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const r=t.fragments,s=r.length;if(!s)return null;const{config:n}=this,a=r[0].start,l=n.lowLatencyMode&&!!t.partList;let u=null;if(t.live){const b=n.initialLiveManifestSize;if(s<b)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${b})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;l&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(t);const P=this.hls.startPosition,N=this.hls.liveSyncPosition,de=u?(P!==-1&&P>=a?P:N)||u.start:e;this.log(`Setting startPosition to ${de} to match start frag at live edge. mainStart: ${P} liveSyncPosition: ${N} frag.start: ${(c=u)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=de}}else e<=a&&(u=r[0]);if(!u){const b=this.loadingParts?t.partEnd:t.fragmentEnd;u=this.getFragmentAtPosition(e,b,t)}let p=this.filterReplacedPrimary(u,t);if(!p&&u){const b=u.sn-t.startSN;p=this.filterReplacedPrimary(r[b+1]||null,t)}return this.mapToInitFragWhenRequired(p)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===FragmentState.OK||r===FragmentState.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,s,n){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&r.nextStart)){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,s,0);if(l!==null&&r.len+l.len>=n){const u=a.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(interstitialsEnabled(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(interstitialsEnabled(this.config)&&e.type!==PlaylistLevelType.SUBTITLE){const r=this.hls.interstitialsManager,s=r?.bufferingItem;if(s){const a=s.event;if(a){if(a.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&t?.live===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const n=r?.playerQueue;if(n)for(let a=n.length;a--;){const l=n[a].interstitial;if(l.appendInPlace&&e.start>=l.startTime&&e.end<=l.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,r){let s=-1,n=!1,a=!0;for(let l=0,u=e.length;l<u;l++){const c=e[l];if(a=a&&!c.independent,s>-1&&r<c.start)break;const p=c.loaded;p?s=-1:(n||(c.independent||a)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${r} but next unloaded part starts at ${c.start}`),s=l),n=p}return s}loadedEndOfParts(e,t){let r;for(let s=e.length;s--;){if(r=e[s],!r.loaded)return!1;if(t>r.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let s=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),s=findFragmentByPDT(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const n=r.sn+1;if(n>=e.startSN&&n<=e.endSN){const a=t[n-e.startSN];r.cc===a.cc&&(s=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=findNearestWithCC(e,r.cc,r.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const n=this.hls.liveSyncPosition;n!==null&&(s=this.getFragmentAtPosition(n,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,r){const{config:s}=this;let{fragPrevious:n}=this,{fragments:a,endSN:l}=r;const{fragmentHint:u}=r,{maxFragLookUpTolerance:c}=s,p=r.partList,b=!!(this.loadingParts&&p!=null&&p.length&&u);b&&!this.bitrateTest&&p[p.length-1].fragment.sn===u.sn&&(a=a.concat(u),l=u.sn);let P;if(e<t){var N;const me=e<this.lastCurrentTime||e>t-c||(N=this.media)!=null&&N.paused||!this.startFragRequested?0:c;P=findFragmentByPTS(n,a,e,me)}else P=a[a.length-1];if(P){const de=P.sn-r.startSN,me=this.fragmentTracker.getState(P);if((me===FragmentState.OK||me===FragmentState.PARTIAL&&P.gap)&&(n=P),n&&P.sn===n.sn&&(!b||p[0].fragment.sn>P.sn||!r.live)&&P.level===n.level){const Le=a[de+1];P.sn<l&&this.fragmentTracker.getState(Le)!==FragmentState.OK?P=Le:P=null}}return P}alignPlaylists(e,t,r){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const n=e.fragmentStart,a=!t,l=e.alignedSliding&&isFiniteNumber(n);if(a||!l&&!n){alignStream(r,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),u}return n}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const s=this.timelineOffset;if(r===-1){const n=this.startTimeOffset!==null,a=n?this.startTimeOffset:e.startTimeOffset;a!==null&&isFiniteNumber(a)?(r=t+a,a<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${a} found in ${n?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+s}this.nextLoadPosition=r+s}getLoadPosition(){var e;const{media:t}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&isMediaFragment(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==State.FRAG_LOADING_WAITING_RETRY)&&(this.state=State.IDLE)}onFragmentOrKeyLoadError(e,t){var r;if(t.chunkMeta&&!t.frag){const Le=this.getCurrentContext(t.chunkMeta);Le&&(t.frag=Le.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var n;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(n=this.fragCurrent)==null?void 0:n.url}`);return}const a=t.details===ErrorDetails.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(s,!0);const l=t.errorAction;if(!l){this.state=State.ERROR;return}const{action:u,flags:c,retryCount:p=0,retryConfig:b}=l,P=!!b,N=P&&u===NetworkErrorAction.RetryRequest,de=P&&!l.resolved&&c===ErrorActionFlags.MoveAllAlternatesMatchingHost,me=(r=this.hls.latestLevelDetails)==null?void 0:r.live;if(!N&&de&&isMediaFragment(s)&&!s.endList&&me)this.resetFragmentErrors(e),this.treatAsGap(s),l.resolved=!0;else if((N||de)&&p<b.maxNumRetry){var Ye;const Le=offlineHttpStatus((Ye=t.response)==null?void 0:Ye.code),tt=getRetryDelay(b,p);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+tt,this.state=State.FRAG_LOADING_WAITING_RETRY,l.resolved=!0,Le){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${p+1}/${b.maxNumRetry} in ${tt}ms`)}else if(b)if(this.resetFragmentErrors(e),p<b.maxNumRetry)!a&&u!==NetworkErrorAction.RemoveAlternatePermanently&&(l.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${p})`);return}else u===NetworkErrorAction.SendAlternateToPenaltyBox?this.state=State.WAITING_LEVEL:this.state=State.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,r=t===1/0;(!t||e>=t||r&&!offlineHttpStatus(0))&&(r&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=State.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===State.PARSING||this.state===State.PARSED){const t=e.frag,r=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,r),n=s&&s.len>.5;n&&this.reduceMaxBufferLength(s.len,t?.duration||10);const a=!n;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==State.STOPPED&&(this.state=State.IDLE)}afterBufferFlushed(e,t,r){if(!e)return;const s=BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,r),this.state===State.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==State.STOPPED&&(this.state=State.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,s){const n=r.details;if(!n){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,c)=>{const p=e.elementaryStreams[c];if(p){const b=p.endPTS-p.startPTS;if(b<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${b})`),u||!1;const P=s?0:updateFragPTSDTS(n,e,p.startPTS,p.endPTS,p.startDTS,p.endDTS,this);return this.hls.trigger(Events.LEVEL_PTS_UPDATED,{details:n,level:r,drift:P,type:c,frag:e,start:p.startPTS,end:p.endPTS}),!0}return u},!1)){var l;if(r.fragmentError===0&&this.treatAsGap(e,r),((l=this.transmuxer)==null?void 0:l.error)===null){const u=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=State.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(Events.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===PlaylistLevelType.MAIN?"level":"track"}fragInfo(e,t=!0,r){var s,n;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((s=t&&!r?e.startPTS:(r||e).start)!=null?s:NaN).toFixed(3)}-${((n=t&&!r?e.endPTS:(r||e).end)!=null?n:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function interstitialsEnabled(i){return!!i.interstitialsController&&i.enableInterstitialPlayback!==!1}class ChunkCache{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;if(e.length)e.length===1?r=e[0]:r=concatUint8Arrays(e,t);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function concatUint8Arrays(i,e){const t=new Uint8Array(e);let r=0;for(let s=0;s<i.length;s++){const n=i[s];t.set(n,r),r+=n.length}return t}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(i){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(u,c,p){this.fn=u,this.context=c,this.once=p||!1}function n(u,c,p,b,P){if(typeof p!="function")throw new TypeError("The listener must be a function");var N=new s(p,b||u,P),de=t?t+c:c;return u._events[de]?u._events[de].fn?u._events[de]=[u._events[de],N]:u._events[de].push(N):(u._events[de]=N,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],p,b;if(this._eventsCount===0)return c;for(b in p=this._events)e.call(p,b)&&c.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(p)):c},l.prototype.listeners=function(c){var p=t?t+c:c,b=this._events[p];if(!b)return[];if(b.fn)return[b.fn];for(var P=0,N=b.length,de=new Array(N);P<N;P++)de[P]=b[P].fn;return de},l.prototype.listenerCount=function(c){var p=t?t+c:c,b=this._events[p];return b?b.fn?1:b.length:0},l.prototype.emit=function(c,p,b,P,N,de){var me=t?t+c:c;if(!this._events[me])return!1;var Ye=this._events[me],Le=arguments.length,tt,Be;if(Ye.fn){switch(Ye.once&&this.removeListener(c,Ye.fn,void 0,!0),Le){case 1:return Ye.fn.call(Ye.context),!0;case 2:return Ye.fn.call(Ye.context,p),!0;case 3:return Ye.fn.call(Ye.context,p,b),!0;case 4:return Ye.fn.call(Ye.context,p,b,P),!0;case 5:return Ye.fn.call(Ye.context,p,b,P,N),!0;case 6:return Ye.fn.call(Ye.context,p,b,P,N,de),!0}for(Be=1,tt=new Array(Le-1);Be<Le;Be++)tt[Be-1]=arguments[Be];Ye.fn.apply(Ye.context,tt)}else{var nt=Ye.length,ft;for(Be=0;Be<nt;Be++)switch(Ye[Be].once&&this.removeListener(c,Ye[Be].fn,void 0,!0),Le){case 1:Ye[Be].fn.call(Ye[Be].context);break;case 2:Ye[Be].fn.call(Ye[Be].context,p);break;case 3:Ye[Be].fn.call(Ye[Be].context,p,b);break;case 4:Ye[Be].fn.call(Ye[Be].context,p,b,P);break;default:if(!tt)for(ft=1,tt=new Array(Le-1);ft<Le;ft++)tt[ft-1]=arguments[ft];Ye[Be].fn.apply(Ye[Be].context,tt)}}return!0},l.prototype.on=function(c,p,b){return n(this,c,p,b,!1)},l.prototype.once=function(c,p,b){return n(this,c,p,b,!0)},l.prototype.removeListener=function(c,p,b,P){var N=t?t+c:c;if(!this._events[N])return this;if(!p)return a(this,N),this;var de=this._events[N];if(de.fn)de.fn===p&&(!P||de.once)&&(!b||de.context===b)&&a(this,N);else{for(var me=0,Ye=[],Le=de.length;me<Le;me++)(de[me].fn!==p||P&&!de[me].once||b&&de[me].context!==b)&&Ye.push(de[me]);Ye.length?this._events[N]=Ye.length===1?Ye[0]:Ye:a(this,N)}return this},l.prototype.removeAllListeners=function(c){var p;return c?(p=t?t+c:c,this._events[p]&&a(this,p)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,i.exports=l}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3(),EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);const version="1.6.11",workerStore={};function hasUMDWorker(){return typeof __HLS_WORKER_BUNDLE__=="function"}function injectWorker(){const i=workerStore[version];if(i)return i.clientCount++,i;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),s={worker:new self.Worker(t),objectURL:t,clientCount:1};return workerStore[version]=s,s}function loadWorker(i){const e=workerStore[i];if(e)return e.clientCount++,e;const t=new self.URL(i,self.location.href).href,s={worker:new self.Worker(t),scriptURL:t,clientCount:1};return workerStore[i]=s,s}function removeWorkerFromStore(i){const e=workerStore[i||version];if(e&&e.clientCount--===1){const{worker:r,objectURL:s}=e;delete workerStore[i||version],s&&self.URL.revokeObjectURL(s),r.terminate()}}function isId3Footer(i,e){return e+10<=i.length&&i[e]===51&&i[e+1]===68&&i[e+2]===73&&i[e+3]<255&&i[e+4]<255&&i[e+6]<128&&i[e+7]<128&&i[e+8]<128&&i[e+9]<128}function isId3Header(i,e){return e+10<=i.length&&i[e]===73&&i[e+1]===68&&i[e+2]===51&&i[e+3]<255&&i[e+4]<255&&i[e+6]<128&&i[e+7]<128&&i[e+8]<128&&i[e+9]<128}function readId3Size(i,e){let t=0;return t=(i[e]&127)<<21,t|=(i[e+1]&127)<<14,t|=(i[e+2]&127)<<7,t|=i[e+3]&127,t}function getId3Data(i,e){const t=e;let r=0;for(;isId3Header(i,e);){r+=10;const s=readId3Size(i,e+6);r+=s,isId3Footer(i,e+10)&&(r+=10),e+=r}if(r>0)return i.subarray(t,t+r)}function getAudioConfig(i,e,t,r){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=e[t+2],a=n>>2&15;if(a>12){const N=new Error(`invalid ADTS sampling index:${a}`);i.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,error:N,reason:N.message});return}const l=(n>>6&3)+1,u=e[t+3]>>6&3|(n&1)<<2,c="mp4a.40."+l,p=s[a];let b=a;(l===5||l===29)&&(b-=3);const P=[l<<3|(b&14)>>1,(b&1)<<7|u<<3];return logger.log(`manifest codec:${r}, parsed codec:${c}, channels:${u}, rate:${p} (ADTS object type:${l} sampling index:${a})`),{config:P,samplerate:p,channelCount:u,codec:c,parsedCodec:c,manifestCodec:r}}function isHeaderPattern$1(i,e){return i[e]===255&&(i[e+1]&246)===240}function getHeaderLength(i,e){return i[e+1]&1?7:9}function getFullFrameLength(i,e){return(i[e+3]&3)<<11|i[e+4]<<3|(i[e+5]&224)>>>5}function canGetFrameLength(i,e){return e+5<i.length}function isHeader$1(i,e){return e+1<i.length&&isHeaderPattern$1(i,e)}function canParse$1(i,e){return canGetFrameLength(i,e)&&isHeaderPattern$1(i,e)&&getFullFrameLength(i,e)<=i.length-e}function probe$1(i,e){if(isHeader$1(i,e)){const t=getHeaderLength(i,e);if(e+t>=i.length)return!1;const r=getFullFrameLength(i,e);if(r<=t)return!1;const s=e+r;return s===i.length||isHeader$1(i,s)}return!1}function initTrackConfig(i,e,t,r,s){if(!i.samplerate){const n=getAudioConfig(e,t,r,s);if(!n)return;_extends$1(i,n)}}function getFrameDuration(i){return 1024*9e4/i}function parseFrameHeader(i,e){const t=getHeaderLength(i,e);if(e+t<=i.length){const r=getFullFrameLength(i,e)-t;if(r>0)return{headerLength:t,frameLength:r}}}function appendFrame$2(i,e,t,r,s){const n=getFrameDuration(i.samplerate),a=r+s*n,l=parseFrameHeader(e,t);let u;if(l){const{frameLength:b,headerLength:P}=l,N=P+b,de=Math.max(0,t+N-e.length);de?(u=new Uint8Array(N-P),u.set(e.subarray(t+P,e.length),0)):u=e.subarray(t+P,t+N);const me={unit:u,pts:a};return de||i.samples.push(me),{sample:me,length:N,missing:de}}const c=e.length-t;return u=new Uint8Array(c),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:a},length:c,missing:-1}}function canParseId3(i,e){return isId3Header(i,e)&&readId3Size(i,e+6)+10<=i.length-e}function toArrayBuffer(i){return i instanceof ArrayBuffer?i:i.byteOffset==0&&i.byteLength==i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer}function toUint8(i,e=0,t=1/0){return view(i,e,t,Uint8Array)}function view(i,e,t,r){const s=unsafeGetArrayBuffer(i);let n=1;"BYTES_PER_ELEMENT"in r&&(n=r.BYTES_PER_ELEMENT);const a=isArrayBufferView(i)?i.byteOffset:0,l=(a+i.byteLength)/n,u=(a+e)/n,c=Math.floor(Math.max(0,Math.min(u,l))),p=Math.floor(Math.min(c+Math.max(t,0),l));return new r(s,c,p-c)}function unsafeGetArrayBuffer(i){return i instanceof ArrayBuffer?i:i.buffer}function isArrayBufferView(i){return i&&i.buffer instanceof ArrayBuffer&&i.byteLength!==void 0&&i.byteOffset!==void 0}function decodeId3ImageFrame(i){const e={key:i.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(i.size<2)return;if(i.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const r=i.data.subarray(1).indexOf(0);if(r===-1)return;const s=utf8ArrayToStr(toUint8(i.data,1,r)),n=i.data[2+r],a=i.data.subarray(3+r).indexOf(0);if(a===-1)return;const l=utf8ArrayToStr(toUint8(i.data,3+r,a));let u;return s==="-->"?u=utf8ArrayToStr(toUint8(i.data,4+r+a)):u=toArrayBuffer(i.data.subarray(4+r+a)),e.mimeType=s,e.pictureType=n,e.description=l,e.data=u,e}function decodeId3PrivFrame(i){if(i.size<2)return;const e=utf8ArrayToStr(i.data,!0),t=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:t.buffer}}function decodeId3TextFrame(i){if(i.size<2)return;if(i.type==="TXXX"){let t=1;const r=utf8ArrayToStr(i.data.subarray(t),!0);t+=r.length+1;const s=utf8ArrayToStr(i.data.subarray(t));return{key:i.type,info:r,data:s}}const e=utf8ArrayToStr(i.data.subarray(1));return{key:i.type,info:"",data:e}}function decodeId3UrlFrame(i){if(i.type==="WXXX"){if(i.size<2)return;let t=1;const r=utf8ArrayToStr(i.data.subarray(t),!0);t+=r.length+1;const s=utf8ArrayToStr(i.data.subarray(t));return{key:i.type,info:r,data:s}}const e=utf8ArrayToStr(i.data);return{key:i.type,info:"",data:e}}function decodeId3Frame(i){return i.type==="PRIV"?decodeId3PrivFrame(i):i.type[0]==="W"?decodeId3UrlFrame(i):i.type==="APIC"?decodeId3ImageFrame(i):decodeId3TextFrame(i)}function getId3FrameData(i){const e=String.fromCharCode(i[0],i[1],i[2],i[3]),t=readId3Size(i,4),r=10;return{type:e,size:t,data:i.subarray(r,r+t)}}const HEADER_FOOTER_SIZE=10,FRAME_SIZE=10;function getId3Frames(i){let e=0;const t=[];for(;isId3Header(i,e);){const r=readId3Size(i,e+6);i[e+5]>>6&1&&(e+=HEADER_FOOTER_SIZE),e+=HEADER_FOOTER_SIZE;const s=e+r;for(;e+FRAME_SIZE<s;){const n=getId3FrameData(i.subarray(e)),a=decodeId3Frame(n);a&&t.push(a),e+=n.size+HEADER_FOOTER_SIZE}isId3Footer(i,e)&&(e+=HEADER_FOOTER_SIZE)}return t}function isId3TimestampFrame(i){return i&&i.key==="PRIV"&&i.info==="com.apple.streaming.transportStreamTimestamp"}function readId3Timestamp(i){if(i.data.byteLength===8){const e=new Uint8Array(i.data),t=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,t&&(r+=4772185884e-2),Math.round(r)}}function getId3Timestamp(i){const e=getId3Frames(i);for(let t=0;t<e.length;t++){const r=e[t];if(isId3TimestampFrame(r))return readId3Timestamp(r)}}let MetadataSchema=function(i){return i.audioId3="org.id3",i.dateRange="com.apple.quicktime.HLS",i.emsg="https://aomedia.org/emsg/ID3",i.misbklv="urn:misb:KLV:bin:1910.1",i}({});function dummyTrack(i="",e=9e4){return{type:i,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class BaseAudioDemuxer{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=appendUint8Array(this.cachedData,e),this.cachedData=null);let r=getId3Data(e,0),s=r?r.length:0,n;const a=this._audioTrack,l=this._id3Track,u=r?getId3Timestamp(r):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&isFiniteNumber(u))&&(this.basePTS=initPTSFn(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});s<c;){if(this.canParse(e,s)){const p=this.appendFrame(a,e,s);p?(this.frameIndex++,this.lastPTS=p.sample.pts,s+=p.length,n=s):s=c}else canParseId3(e,s)?(r=getId3Data(e,s),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),s+=r.length,n=s):s++;if(s===c&&n!==c){const p=e.slice(n);this.cachedData?this.cachedData=appendUint8Array(this.cachedData,p):this.cachedData=p}}return{audioTrack:a,videoTrack:dummyTrack(),id3Track:l,textTrack:dummyTrack()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:dummyTrack(),id3Track:this._id3Track,textTrack:dummyTrack()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const initPTSFn=(i,e,t)=>{if(isFiniteNumber(i))return i*90;const r=t?t.baseTime*9e4/t.timescale:0;return e*9e4+r};let chromeVersion$1=null;const BitratesMap=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot=[0,1,1,4];function appendFrame$1(i,e,t,r,s){if(t+24>e.length)return;const n=parseHeader(e,t);if(n&&t+n.frameLength<=e.length){const a=n.samplesPerFrame*9e4/n.sampleRate,l=r+s*a,u={unit:e.subarray(t,t+n.frameLength),pts:l,dts:l};return i.config=[],i.channelCount=n.channelCount,i.samplerate=n.sampleRate,i.samples.push(u),{sample:u,length:n.frameLength,missing:0}}}function parseHeader(i,e){const t=i[e+1]>>3&3,r=i[e+1]>>1&3,s=i[e+2]>>4&15,n=i[e+2]>>2&3;if(t!==1&&s!==0&&s!==15&&n!==3){const a=i[e+2]>>1&1,l=i[e+3]>>6,u=t===3?3-r:r===3?3:4,c=BitratesMap[u*14+s-1]*1e3,b=SamplingRateMap[(t===3?0:t===2?1:2)*3+n],P=l===3?1:2,N=SamplesCoefficients[t][r],de=BytesInSlot[r],me=N*8*de,Ye=Math.floor(N*c/b+a)*de;if(chromeVersion$1===null){const Be=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion$1=Be?parseInt(Be[1]):0}return!!chromeVersion$1&&chromeVersion$1<=87&&r===2&&c>=224e3&&l===0&&(i[e+3]=i[e+3]|128),{sampleRate:b,channelCount:P,frameLength:Ye,samplesPerFrame:me}}}function isHeaderPattern(i,e){return i[e]===255&&(i[e+1]&224)===224&&(i[e+1]&6)!==0}function isHeader(i,e){return e+1<i.length&&isHeaderPattern(i,e)}function canParse(i,e){return isHeaderPattern(i,e)&&4<=i.length-e}function probe(i,e){if(e+1<i.length&&isHeaderPattern(i,e)){const r=parseHeader(i,e);let s=4;r!=null&&r.frameLength&&(s=r.frameLength);const n=e+s;return n===i.length||isHeader(i,n)}return!1}class AACDemuxer extends BaseAudioDemuxer{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,s){super.resetInitSegment(e,t,r,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const r=getId3Data(e,0);let s=r?.length||0;if(probe(e,s))return!1;for(let n=e.length;s<n;s++)if(probe$1(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return canParse$1(e,t)}appendFrame(e,t,r){initTrackConfig(e,this.observer,t,r,e.manifestCodec);const s=appendFrame$2(e,t,r,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const getAudioBSID=(i,e)=>{let t=0,r=5;e+=r;const s=new Uint32Array(1),n=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=i[e];const l=Math.min(r,8),u=8-l;n[0]=4278190080>>>24+u<<u,s[0]=(a[0]&n[0])>>u,t=t?t<<l|s[0]:s[0],e+=1,r-=l}return t};class AC3Demuxer extends BaseAudioDemuxer{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,s){super.resetInitSegment(e,t,r,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const s=appendFrame(e,t,r,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=getId3Data(e,0);if(!t)return!1;const r=t.length;return e[r]===11&&e[r+1]===119&&getId3Timestamp(t)!==void 0&&getAudioBSID(e,r)<16}}function appendFrame(i,e,t,r,s){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const n=e[t+4]>>6;if(n>=3)return-1;const l=[48e3,44100,32e3][n],u=e[t+4]&63,p=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+n]*2;if(t+p>e.length)return-1;const b=e[t+6]>>5;let P=0;b===2?P+=2:(b&1&&b!==1&&(P+=2),b&4&&(P+=2));const N=(e[t+6]<<8|e[t+7])>>12-P&1,me=[2,1,2,3,3,4,4,5][b]+N,Ye=e[t+5]>>3,Le=e[t+5]&7,tt=new Uint8Array([n<<6|Ye<<1|Le>>2,(Le&3)<<6|b<<3|N<<2|u>>4,u<<4&224]),Be=1536/l*9e4,nt=r+s*Be,ft=e.subarray(t,t+p);return i.config=tt,i.channelCount=me,i.samplerate=l,i.samples.push({unit:ft,pts:nt}),p}class MP3Demuxer extends BaseAudioDemuxer{resetInitSegment(e,t,r,s){super.resetInitSegment(e,t,r,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=getId3Data(e,0);let r=t?.length||0;if(t&&e[r]===11&&e[r+1]===119&&getId3Timestamp(t)!==void 0&&getAudioBSID(e,r)<=16)return!1;for(let s=e.length;r<s;r++)if(probe(e,r))return logger.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return canParse(e,t)}appendFrame(e,t,r){if(this.basePTS!==null)return appendFrame$1(e,t,r,this.basePTS,this.frameIndex)}}const emsgSchemePattern=/\/emsg[-/]ID3/i;class MP4Demuxer{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,s){const n=this.videoTrack=dummyTrack("video",1),a=this.audioTrack=dummyTrack("audio",1),l=this.txtTrack=dummyTrack("text",1);if(this.id3Track=dummyTrack("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=parseInitSegment(e);if(u.video){const{id:c,timescale:p,codec:b,supplemental:P}=u.video;n.id=c,n.timescale=l.timescale=p,n.codec=b,n.supplemental=P}if(u.audio){const{id:c,timescale:p,codec:b}=u.audio;a.id=c,a.timescale=p,a.codec=b}l.id=RemuxerTrackIdConfig.text,n.sampleDuration=0,n.duration=a.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return hasMoofData(e)}demux(e,t){this.timeOffset=t;let r=e;const s=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=appendUint8Array(this.remainderData,e));const l=segmentValidRange(r);this.remainderData=l.remainder,s.samples=l.valid||new Uint8Array}else s.samples=r;const a=this.extractID3Track(s,t);return n.samples=parseSamples(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return r.samples=parseSamples(e,t),{videoTrack:t,audioTrack:dummyTrack(),id3Track:s,textTrack:dummyTrack()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const s=findBox(e.samples,["emsg"]);s&&s.forEach(n=>{const a=parseEmsg(n);if(emsgSchemePattern.test(a.schemeIdUri)){const l=getEmsgStartTime(a,t);let u=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const c=a.payload;r.samples.push({data:c,len:c.byteLength,dts:l,pts:l,type:MetadataSchema.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const l=getEmsgStartTime(a,t);r.samples.push({data:a.payload,len:a.payload.byteLength,dts:l,pts:l,type:MetadataSchema.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function getEmsgStartTime(i,e){return isFiniteNumber(i.presentationTime)?i.presentationTime/i.timeScale:e+i.presentationTimeDelta/i.timeScale}class SampleAesDecrypter{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Decrypter(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,DecrypterAesMode.cbc)}decryptAacSample(e,t,r){const s=e[t].unit;if(s.length<=16)return;const n=s.subarray(16,s.length-s.length%16),a=n.buffer.slice(n.byteOffset,n.byteOffset+n.length);this.decryptBuffer(a).then(l=>{const u=new Uint8Array(l);s.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)}).catch(r)}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(t);let s=0;for(let n=32;n<e.length-16;n+=160,s+=16)r.set(e.subarray(n,n+16),s);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let s=0;for(let n=32;n<e.length-16;n+=160,s+=16)e.set(r.subarray(s,s+16),n);return e}decryptAvcSample(e,t,r,s,n){const a=discardEPB(n.data),l=this.getAvcEncryptedData(a);this.decryptBuffer(l.buffer).then(u=>{n.data=this.getAvcDecryptedUnit(a,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,s)}).catch(s)}decryptAvcSamples(e,t,r,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){s();return}const n=e[t].units;for(;!(r>=n.length);r++){const a=n[r];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,r,s,a),!this.decrypter.isSync()))return}}}}class BaseVideoParser{constructor(){this.VideoSample=null}createVideoSample(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}}getLastNalUnit(e){var t;let r=this.VideoSample,s;if((!r||r.units.length===0)&&(r=e[e.length-1]),(t=r)!=null&&t.units){const n=r.units;s=n[n.length-1]}return s}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const r=t.samples,s=r.length;if(s){const n=r[s-1];e.pts=n.pts,e.dts=n.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,r){const s=t.byteLength;let n=e.naluState||0;const a=n,l=[];let u=0,c,p,b,P=-1,N=0;for(n===-1&&(P=0,N=this.getNALuType(t,0),n=0,u=1);u<s;){if(c=t[u++],!n){n=c?0:1;continue}if(n===1){n=c?0:2;continue}if(!c)n=3;else if(c===1){if(p=u-n-1,P>=0){const de={data:t.subarray(P,p),type:N};l.push(de)}else{const de=this.getLastNalUnit(e.samples);de&&(a&&u<=4-a&&de.state&&(de.data=de.data.subarray(0,de.data.byteLength-a)),p>0&&(de.data=appendUint8Array(de.data,t.subarray(0,p)),de.state=0))}u<s?(b=this.getNALuType(t,u),P=u,N=b,n=0):n=-1}else n=0}if(P>=0&&n>=0){const de={data:t.subarray(P,s),type:N,state:n};l.push(de)}if(l.length===0){const de=this.getLastNalUnit(e.samples);de&&(de.data=appendUint8Array(de.data,t))}return e.naluState=n,l}}class ExpGolomb{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,s=new Uint8Array(4),n=Math.min(4,t);if(n===0)throw new Error("no bytes available");s.set(e.subarray(r,r+n)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=n*8,this.bytesAvailable-=n}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class AvcVideoParser extends BaseVideoParser{parsePES(e,t,r,s){const n=this.parseNALu(e,r.data,s);let a=this.VideoSample,l,u=!1;r.data=null,a&&n.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),n.forEach(c=>{var p,b;switch(c.type){case 1:{let me=!1;l=!0;const Ye=c.data;if(u&&Ye.length>4){const Le=this.readSliceType(Ye);(Le===2||Le===4||Le===7||Le===9)&&(me=!0)}if(me){var P;(P=a)!=null&&P.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.frame=!0,a.key=me;break}case 5:l=!0,(p=a)!=null&&p.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0,a.frame=!0;break;case 6:{l=!0,parseSEIMessageFromNALu(c.data,1,r.pts,t.samples);break}case 7:{var N,de;l=!0,u=!0;const me=c.data,Ye=this.readSPS(me);if(!e.sps||e.width!==Ye.width||e.height!==Ye.height||((N=e.pixelRatio)==null?void 0:N[0])!==Ye.pixelRatio[0]||((de=e.pixelRatio)==null?void 0:de[1])!==Ye.pixelRatio[1]){e.width=Ye.width,e.height=Ye.height,e.pixelRatio=Ye.pixelRatio,e.sps=[me];const Le=me.subarray(1,4);let tt="avc1.";for(let Be=0;Be<3;Be++){let nt=Le[Be].toString(16);nt.length<2&&(nt="0"+nt),tt+=nt}e.codec=tt}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,(b=a)!=null&&b.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:l=!0;break;default:l=!1;break}a&&l&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new ExpGolomb(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let r=8,s=8,n;for(let a=0;a<e;a++)s!==0&&(n=t.readEG(),s=(r+n+256)%256),r=s===0?r:s}readSPS(e){const t=new ExpGolomb(e);let r=0,s=0,n=0,a=0,l,u,c;const p=t.readUByte.bind(t),b=t.readBits.bind(t),P=t.readUEG.bind(t),N=t.readBoolean.bind(t),de=t.skipBits.bind(t),me=t.skipEG.bind(t),Ye=t.skipUEG.bind(t),Le=this.skipScalingList.bind(this);p();const tt=p();if(b(5),de(3),p(),Ye(),tt===100||tt===110||tt===122||tt===244||tt===44||tt===83||tt===86||tt===118||tt===128){const Et=P();if(Et===3&&de(1),Ye(),Ye(),de(1),N())for(u=Et!==3?8:12,c=0;c<u;c++)N()&&(c<6?Le(16,t):Le(64,t))}Ye();const Be=P();if(Be===0)P();else if(Be===1)for(de(1),me(),me(),l=P(),c=0;c<l;c++)me();Ye(),de(1);const nt=P(),ft=P(),mt=b(1);mt===0&&de(1),de(1),N()&&(r=P(),s=P(),n=P(),a=P());let ht=[1,1];if(N()&&N())switch(p()){case 1:ht=[1,1];break;case 2:ht=[12,11];break;case 3:ht=[10,11];break;case 4:ht=[16,11];break;case 5:ht=[40,33];break;case 6:ht=[24,11];break;case 7:ht=[20,11];break;case 8:ht=[32,11];break;case 9:ht=[80,33];break;case 10:ht=[18,11];break;case 11:ht=[15,11];break;case 12:ht=[64,33];break;case 13:ht=[160,99];break;case 14:ht=[4,3];break;case 15:ht=[3,2];break;case 16:ht=[2,1];break;case 255:{ht=[p()<<8|p(),p()<<8|p()];break}}return{width:Math.ceil((nt+1)*16-r*2-s*2),height:(2-mt)*(ft+1)*16-(mt?2:4)*(n+a),pixelRatio:ht}}}class HevcVideoParser extends BaseVideoParser{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,r,s){const n=this.parseNALu(e,r.data,s);let a=this.VideoSample,l,u=!1;r.data=null,a&&n.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),n.forEach(c=>{var p,b;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.frame=!0,l=!0;break;case 16:case 17:case 18:case 21:if(l=!0,u){var P;(P=a)!=null&&P.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:l=!0,(p=a)!=null&&p.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0,a.frame=!0;break;case 39:l=!0,parseSEIMessageFromNALu(c.data,2,r.pts,t.samples);break;case 32:l=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=_extends$1(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(l=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const N=this.readSPS(c.data);e.width=N.width,e.height=N.height,e.pixelRatio=N.pixelRatio,e.codec=N.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const de in N.params)e.params[de]=N.params[de]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0;break;case 34:if(l=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const N=this.readPPS(c.data);for(const de in N)e.params[de]=N[de]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:l=!0,e.audFound=!0,(b=a)!=null&&b.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:l=!1;break}a&&l&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let r=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(t[r]=e[s],r++);return new Uint8Array(t.buffer,0,r)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new ExpGolomb(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const r=t.readBits(3),s=t.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:s}}readSPS(e){const t=new ExpGolomb(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const r=t.readBits(3);t.readBoolean();const s=t.readBits(2),n=t.readBoolean(),a=t.readBits(5),l=t.readUByte(),u=t.readUByte(),c=t.readUByte(),p=t.readUByte(),b=t.readUByte(),P=t.readUByte(),N=t.readUByte(),de=t.readUByte(),me=t.readUByte(),Ye=t.readUByte(),Le=t.readUByte(),tt=[],Be=[];for(let ri=0;ri<r;ri++)tt.push(t.readBoolean()),Be.push(t.readBoolean());if(r>0)for(let ri=r;ri<8;ri++)t.readBits(2);for(let ri=0;ri<r;ri++)tt[ri]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),Be[ri]&&t.readUByte();t.readUEG();const nt=t.readUEG();nt==3&&t.skipBits(1);const ft=t.readUEG(),mt=t.readUEG(),ht=t.readBoolean();let Et=0,St=0,bt=0,Pt=0;ht&&(Et+=t.readUEG(),St+=t.readUEG(),bt+=t.readUEG(),Pt+=t.readUEG());const Rt=t.readUEG(),Dt=t.readUEG(),kt=t.readUEG(),Lt=t.readBoolean();for(let ri=Lt?0:r;ri<=r;ri++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let Bt=0;Bt<4;Bt++)for(let vi=0;vi<(Bt===3?2:6);vi++)if(!t.readBoolean())t.readUEG();else{const Ri=Math.min(64,1<<4+(Bt<<1));Bt>1&&t.readEG();for(let ui=0;ui<Ri;ui++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const gt=t.readUEG();let _t=0;for(let ri=0;ri<gt;ri++){let Bt=!1;if(ri!==0&&(Bt=t.readBoolean()),Bt){ri===gt&&t.readUEG(),t.readBoolean(),t.readUEG();let vi=0;for(let Oi=0;Oi<=_t;Oi++){const Ri=t.readBoolean();let ui=!1;Ri||(ui=t.readBoolean()),(Ri||ui)&&vi++}_t=vi}else{const vi=t.readUEG(),Oi=t.readUEG();_t=vi+Oi;for(let Ri=0;Ri<vi;Ri++)t.readUEG(),t.readBoolean();for(let Ri=0;Ri<Oi;Ri++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const ri=t.readUEG();for(let Bt=0;Bt<ri;Bt++){for(let vi=0;vi<kt+4;vi++)t.readBits(1);t.readBits(1)}}let At=0,wt=1,It=1,Ft=!0,zt=1,Ut=0;t.readBoolean(),t.readBoolean();let Qt=!1;if(t.readBoolean()){if(t.readBoolean()){const Vi=t.readUByte(),Zi=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ki=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Vi>0&&Vi<16?(wt=Zi[Vi-1],It=Ki[Vi-1]):Vi===255&&(wt=t.readBits(16),It=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),Qt=t.readBoolean(),Qt&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(zt=t.readBits(32),Ut=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Ki=t.readBoolean(),wi=t.readBoolean();let Li=!1;(Ki||wi)&&(Li=t.readBoolean(),Li&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),Li&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let hi=0;hi<=r;hi++){Ft=t.readBoolean();const zi=Ft||t.readBoolean();let Ai=!1;zi?t.readEG():Ai=t.readBoolean();const dr=Ai?1:t.readUEG()+1;if(Ki)for(let Fr=0;Fr<dr;Fr++)t.readUEG(),t.readUEG(),Li&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(wi)for(let Fr=0;Fr<dr;Fr++)t.readUEG(),t.readUEG(),Li&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),At=t.readUEG())}let Jt=ft,mi=mt;if(ht){let ri=1,Bt=1;nt===1?ri=Bt=2:nt==2&&(ri=2),Jt=ft-ri*St-ri*Et,mi=mt-Bt*Pt-Bt*bt}const ni=s?["A","B","C"][s]:"",pi=l<<24|u<<16|c<<8|p;let Zt=0;for(let ri=0;ri<32;ri++)Zt=(Zt|(pi>>ri&1)<<31-ri)>>>0;let Yt=Zt.toString(16);return a===1&&Yt==="2"&&(Yt="6"),{codecString:`hvc1.${ni}${a}.${Yt}.${n?"H":"L"}${Le}.B0`,params:{general_tier_flag:n,general_profile_idc:a,general_profile_space:s,general_profile_compatibility_flags:[l,u,c,p],general_constraint_indicator_flags:[b,P,N,de,me,Ye],general_level_idc:Le,bit_depth:Rt+8,bit_depth_luma_minus8:Rt,bit_depth_chroma_minus8:Dt,min_spatial_segmentation_idc:At,chroma_format_idc:nt,frame_rate:{fixed:Ft,fps:Ut/zt}},width:Jt,height:mi,pixelRatio:[wt,It]}}readPPS(e){const t=new ExpGolomb(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const s=t.readBoolean(),n=t.readBoolean();let a=1;return n&&s?a=0:n?a=3:s&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const PACKET_LENGTH=188;class TSDemuxer{constructor(e,t,r,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=s,this.videoParser=null}static probe(e,t){const r=TSDemuxer.syncOffset(e);return r>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const t=e.length;let r=Math.min(PACKET_LENGTH*5,t-PACKET_LENGTH)+1,s=0;for(;s<r;){let n=!1,a=-1,l=0;for(let u=s;u<t;u+=PACKET_LENGTH)if(e[u]===71&&(t-u===PACKET_LENGTH||e[u+PACKET_LENGTH]===71)){if(l++,a===-1&&(a=u,a!==0&&(r=Math.min(a+PACKET_LENGTH*99,e.length-PACKET_LENGTH)+1)),n||(n=parsePID(e,u)===0),n&&l>1&&(a===0&&l>2||u+PACKET_LENGTH>r))return a}else{if(l)return-1;break}s++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,r,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=TSDemuxer.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=TSDemuxer.createTrack("audio",s),this._id3Track=TSDemuxer.createTrack("id3"),this._txtTrack=TSDemuxer.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,s=!1){r||(this.sampleAes=null);let n;const a=this._videoTrack,l=this._audioTrack,u=this._id3Track,c=this._txtTrack;let p=a.pid,b=a.pesData,P=l.pid,N=u.pid,de=l.pesData,me=u.pesData,Ye=null,Le=this.pmtParsed,tt=this._pmtId,Be=e.length;if(this.remainderData&&(e=appendUint8Array(this.remainderData,e),Be=e.length,this.remainderData=null),Be<PACKET_LENGTH&&!s)return this.remainderData=e,{audioTrack:l,videoTrack:a,id3Track:u,textTrack:c};const nt=Math.max(0,TSDemuxer.syncOffset(e));Be-=(Be-nt)%PACKET_LENGTH,Be<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,Be,e.buffer.byteLength-Be));let ft=0;for(let ht=nt;ht<Be;ht+=PACKET_LENGTH)if(e[ht]===71){const Et=!!(e[ht+1]&64),St=parsePID(e,ht),bt=(e[ht+3]&48)>>4;let Pt;if(bt>1){if(Pt=ht+5+e[ht+4],Pt===ht+PACKET_LENGTH)continue}else Pt=ht+4;switch(St){case p:Et&&(b&&(n=parsePES(b,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,c,n,!1)),b={data:[],size:0}),b&&(b.data.push(e.subarray(Pt,ht+PACKET_LENGTH)),b.size+=ht+PACKET_LENGTH-Pt);break;case P:if(Et){if(de&&(n=parsePES(de,this.logger)))switch(l.segmentCodec){case"aac":this.parseAACPES(l,n);break;case"mp3":this.parseMPEGPES(l,n);break;case"ac3":this.parseAC3PES(l,n);break}de={data:[],size:0}}de&&(de.data.push(e.subarray(Pt,ht+PACKET_LENGTH)),de.size+=ht+PACKET_LENGTH-Pt);break;case N:Et&&(me&&(n=parsePES(me,this.logger))&&this.parseID3PES(u,n),me={data:[],size:0}),me&&(me.data.push(e.subarray(Pt,ht+PACKET_LENGTH)),me.size+=ht+PACKET_LENGTH-Pt);break;case 0:Et&&(Pt+=e[Pt]+1),tt=this._pmtId=parsePAT(e,Pt);break;case tt:{Et&&(Pt+=e[Pt]+1);const Rt=parsePMT(e,Pt,this.typeSupported,r,this.observer,this.logger);p=Rt.videoPid,p>0&&(a.pid=p,a.segmentCodec=Rt.segmentVideoCodec),P=Rt.audioPid,P>0&&(l.pid=P,l.segmentCodec=Rt.segmentAudioCodec),N=Rt.id3Pid,N>0&&(u.pid=N),Ye!==null&&!Le&&(this.logger.warn(`MPEG-TS PMT found at ${ht} after unknown PID '${Ye}'. Backtracking to sync byte @${nt} to parse all TS packets.`),Ye=null,ht=nt-188),Le=this.pmtParsed=!0;break}case 17:case 8191:break;default:Ye=St;break}}else ft++;ft>0&&emitParsingError(this.observer,new Error(`Found ${ft} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=b,l.pesData=de,u.pesData=me;const mt={audioTrack:l,videoTrack:a,id3Track:u,textTrack:c};return s&&this.extractRemainingSamples(mt),mt}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:s,textTrack:n}=e,a=r.pesData,l=t.pesData,u=s.pesData;let c;if(a&&(c=parsePES(a,this.logger))?(this.readyVideoParser(r.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(r,n,c,!0),r.pesData=null)):r.pesData=a,l&&(c=parsePES(l,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else l!=null&&l.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=l;u&&(c=parsePES(u,this.logger))?(this.parseID3PES(s,c),s.pesData=null):s.pesData=u}demuxSampleAes(e,t,r){const s=this.demux(e,r,!0,!this.config.progressive),n=this.sampleAes=new SampleAesDecrypter(this.observer,this.config,t);return this.decrypt(s,n)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new AvcVideoParser:e==="hevc"&&(this.videoParser=new HevcVideoParser))}decrypt(e,t){return new Promise(r=>{const{audioTrack:s,videoTrack:n}=e;s.samples&&s.segmentCodec==="aac"?t.decryptAacSamples(s.samples,0,()=>{n.samples?t.decryptAvcSamples(n.samples,0,0,()=>{r(e)}):r(e)}):n.samples&&t.decryptAvcSamples(n.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let r=0;const s=this.aacOverFlow;let n=t.data;if(s){this.aacOverFlow=null;const b=s.missing,P=s.sample.unit.byteLength;if(b===-1)n=appendUint8Array(s.sample.unit,n);else{const N=P-b;s.sample.unit.set(n.subarray(0,b),N),e.samples.push(s.sample),r=s.missing}}let a,l;for(a=r,l=n.length;a<l-1&&!isHeader$1(n,a);a++);if(a!==r){let b;const P=a<l-1;if(P?b=`AAC PES did not start with ADTS header,offset:${a}`:b="No ADTS header found in AAC PES",emitParsingError(this.observer,new Error(b),P,this.logger),!P)return}initTrackConfig(e,this.observer,n,a,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(s){const b=getFrameDuration(e.samplerate);u=s.sample.pts+b}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,p;for(;a<l;)if(p=appendFrame$2(e,n,a,u,c),a+=p.length,p.missing){this.aacOverFlow=p;break}else for(c++;a<l-1&&!isHeader$1(n,a);a++);}parseMPEGPES(e,t){const r=t.data,s=r.length;let n=0,a=0;const l=t.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<s;)if(isHeader(r,a)){const u=appendFrame$1(e,r,a,l,n);if(u)a+=u.length,n++;else break}else a++}parseAC3PES(e,t){{const r=t.data,s=t.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const n=r.length;let a=0,l=0,u;for(;l<n&&(u=appendFrame(e,r,l,s,a++))>0;)l+=u}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=_extends$1({},t,{type:this._videoTrack?MetadataSchema.emsg:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function parsePID(i,e){return((i[e+1]&31)<<8)+i[e+2]}function parsePAT(i,e){return(i[e+10]&31)<<8|i[e+11]}function parsePMT(i,e,t,r,s,n){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},l=(i[e+1]&15)<<8|i[e+2],u=e+3+l-4,c=(i[e+10]&15)<<8|i[e+11];for(e+=12+c;e<u;){const p=parsePID(i,e),b=(i[e+3]&15)<<8|i[e+4];switch(i[e]){case 207:if(!r){logEncryptedSamplesFoundInUnencryptedStream("ADTS AAC",n);break}case 15:a.audioPid===-1&&(a.audioPid=p);break;case 21:a.id3Pid===-1&&(a.id3Pid=p);break;case 219:if(!r){logEncryptedSamplesFoundInUnencryptedStream("H.264",n);break}case 27:a.videoPid===-1&&(a.videoPid=p);break;case 3:case 4:!t.mpeg&&!t.mp3?n.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=p,a.segmentAudioCodec="mp3");break;case 193:if(!r){logEncryptedSamplesFoundInUnencryptedStream("AC-3",n);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=p,a.segmentAudioCodec="ac3"):n.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&b>0){let P=e+5,N=b;for(;N>2;){switch(i[P]){case 106:t.ac3!==!0?n.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=p,a.segmentAudioCodec="ac3");break}const me=i[P+1]+2;P+=me,N-=me}}break;case 194:case 135:return emitParsingError(s,new Error("Unsupported EC-3 in M2TS found"),void 0,n),a;case 36:a.videoPid===-1&&(a.videoPid=p,a.segmentVideoCodec="hevc",n.log("HEVC in M2TS found"));break}e+=b+5}return a}function emitParsingError(i,e,t,r){r.warn(`parsing error: ${e.message}`),i.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function logEncryptedSamplesFoundInUnencryptedStream(i,e){e.log(`${i} with AES-128-CBC encryption found in unencrypted stream`)}function parsePES(i,e){let t=0,r,s,n,a,l;const u=i.data;if(!i||i.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=appendUint8Array(u[0],u[1]),u.splice(1,1);if(r=u[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(s=(r[4]<<8)+r[5],s&&s>i.size-6)return null;const p=r[7];p&192&&(a=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,p&64?(l=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,a-l>60*9e4&&(e.warn(`${Math.round((a-l)/9e4)}s delta between PTS and DTS, align them`),a=l)):l=a),n=r[8];let b=n+9;if(i.size<=b)return null;i.size-=b;const P=new Uint8Array(i.size);for(let N=0,de=u.length;N<de;N++){r=u[N];let me=r.byteLength;if(b)if(b>me){b-=me;continue}else r=r.subarray(b),me-=b,b=0;P.set(r,t),t+=me}return s&&(s-=n+3),{data:P,pts:a,dts:l,len:s}}return null}class AAC{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const UINT32_MAX=Math.pow(2,32)-1;class MP4{static init(){MP4.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in MP4.types)MP4.types.hasOwnProperty(e)&&(MP4.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:t,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=n,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),l=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,a,u,a,l),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,s))}static box(e,...t){let r=8,s=t.length;const n=s;for(;s--;)r+=t[s].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(e,4),s=0,r=8;s<n;s++)a.set(t[s],r),r+=t[s].byteLength;return a}static hdlr(e){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[e])}static mdat(e){return MP4.box(MP4.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(UINT32_MAX+1)),s=Math.floor(t%(UINT32_MAX+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return MP4.box(MP4.types.mdia,MP4.mdhd(e.timescale||0,e.duration||0),MP4.hdlr(e.type),MP4.minf(e))}static mfhd(e){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(e)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(e))}static moof(e,t,r){return MP4.box(MP4.types.moof,MP4.mfhd(e),MP4.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=MP4.trak(e[t]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(MP4.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=MP4.trex(e[t]);return MP4.box.apply(null,[MP4.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(UINT32_MAX+1)),s=Math.floor(t%(UINT32_MAX+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,n)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let s,n;for(s=0;s<t.length;s++)n=t[s].flags,r[s+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return MP4.box(MP4.types.sdtp,r)}static stbl(e){return MP4.box(MP4.types.stbl,MP4.stsd(e),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))}static avc1(e){let t=[],r=[],s,n,a;for(s=0;s<e.sps.length;s++)n=e.sps[s],a=n.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(n));for(s=0;s<e.pps.length;s++)n=e.pps[s],a=n.byteLength,r.push(a>>>8&255),r.push(a&255),r=r.concat(Array.prototype.slice.call(n));const l=MP4.box(MP4.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),u=e.width,c=e.height,p=e.pixelRatio[0],b=e.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,b>>24,b>>16&255,b>>8&255,b&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return MP4.box(MP4.types.mp4a,MP4.audioStsd(e),MP4.box(MP4.types.esds,MP4.esds(e)))}static mp3(e){return MP4.box(MP4.types[".mp3"],MP4.audioStsd(e))}static ac3(e){return MP4.box(MP4.types["ac-3"],MP4.audioStsd(e),MP4.box(MP4.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(e));if(t==="ac3"&&e.config)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.ac3(e));if(t==="mp3"&&e.codec==="mp3")return MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(e));if(t==="hevc"&&e.vps)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,r=(e.duration||0)*(e.timescale||0),s=e.width||0,n=e.height||0,a=Math.floor(r/(UINT32_MAX+1)),l=Math.floor(r%(UINT32_MAX+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,l>>24,l>>16&255,l>>8&255,l&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,n>>8&255,n&255,0,0]))}static traf(e,t){const r=MP4.sdtp(e),s=e.id,n=Math.floor(t/(UINT32_MAX+1)),a=Math.floor(t%(UINT32_MAX+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,a>>24,a>>16&255,a>>8&255,a&255])),MP4.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(e),MP4.mdia(e))}static trex(e){const t=e.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],s=r.length,n=12+16*s,a=new Uint8Array(n);let l,u,c,p,b,P;for(t+=8+n,a.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),l=0;l<s;l++)u=r[l],c=u.duration,p=u.size,b=u.flags,P=u.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,p>>>24&255,p>>>16&255,p>>>8&255,p&255,b.isLeading<<2|b.dependsOn,b.isDependedOn<<6|b.hasRedundancy<<4|b.paddingValue<<1|b.isNonSync,b.degradPrio&61440,b.degradPrio&15,P>>>24&255,P>>>16&255,P>>>8&255,P&255],12+16*l);return MP4.box(MP4.types.trun,a)}static initSegment(e){MP4.types||MP4.init();const t=MP4.moov(e);return appendUint8Array(MP4.FTYP,t)}static hvc1(e){const t=e.params,r=[e.vps,e.sps,e.pps],s=4,n=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),s-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),r.length]);let a=n.length;for(let de=0;de<r.length;de+=1){a+=3;for(let me=0;me<r[de].length;me+=1)a+=2+r[de][me].length}const l=new Uint8Array(a);l.set(n,0),a=n.length;const u=r.length-1;for(let de=0;de<r.length;de+=1){l.set(new Uint8Array([32+de|(de===u?128:0),0,r[de].length]),a),a+=3;for(let me=0;me<r[de].length;me+=1)l.set(new Uint8Array([r[de][me].length>>8,r[de][me].length&255]),a),a+=2,l.set(r[de][me],a),a+=r[de][me].length}const c=MP4.box(MP4.types.hvcC,l),p=e.width,b=e.height,P=e.pixelRatio[0],N=e.pixelRatio[1];return MP4.box(MP4.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,p>>8&255,p&255,b>>8&255,b&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([P>>24,P>>16&255,P>>8&255,P&255,N>>24,N>>16&255,N>>8&255,N&255])))}}MP4.types=void 0;MP4.HDLR_TYPES=void 0;MP4.STTS=void 0;MP4.STSC=void 0;MP4.STCO=void 0;MP4.STSZ=void 0;MP4.VMHD=void 0;MP4.SMHD=void 0;MP4.STSD=void 0;MP4.FTYP=void 0;MP4.DINF=void 0;const MPEG_TS_CLOCK_FREQ_HZ=9e4;function toTimescaleFromBase(i,e,t=1,r=!1){const s=i*e*t;return r?Math.round(s):s}function toTimescaleFromScale(i,e,t=1,r=!1){return toTimescaleFromBase(i,e,1/t,r)}function toMsFromMpegTsClock(i,e=!1){return toTimescaleFromBase(i,1e3,1/MPEG_TS_CLOCK_FREQ_HZ,e)}function toMpegTsClockFromTimescale(i,e=1){return toTimescaleFromBase(i,MPEG_TS_CLOCK_FREQ_HZ,1/e)}const MAX_SILENT_FRAME_DURATION=10*1e3,AAC_SAMPLES_PER_FRAME=1024,MPEG_AUDIO_SAMPLE_PER_FRAME=1152,AC3_SAMPLES_PER_FRAME=1536;let chromeVersion=null,safariWebkitVersion=null;function createMp4Sample(i,e,t,r){return{duration:e,size:t,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:i?2:1,isNonSync:i?0:1}}}class MP4Remuxer extends Logger{constructor(e,t,r,s){if(super("mp4-remuxer",s),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,chromeVersion===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion=a?parseInt(a[1]):0}if(safariWebkitVersion===null){const n=navigator.userAgent.match(/Safari\/(\d+)/i);safariWebkitVersion=n?parseInt(n[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,s=e.reduce((n,a)=>{let l=a.pts,u=l-n;return u<-4294967296&&(t=!0,l=normalizePts(l,r),u=l-n),u>0?n:l},r);return t&&this.debug("PTS rollover detected"),s}remux(e,t,r,s,n,a,l,u){let c,p,b,P,N,de,me=n,Ye=n;const Le=e.pid>-1,tt=t.pid>-1,Be=t.samples.length,nt=e.samples.length>0,ft=l&&Be>0||Be>1;if((!Le||nt)&&(!tt||ft)||this.ISGenerated||l){if(this.ISGenerated){var ht,Et,St,bt;const kt=this.videoTrackConfig;(kt&&(t.width!==kt.width||t.height!==kt.height||((ht=t.pixelRatio)==null?void 0:ht[0])!==((Et=kt.pixelRatio)==null?void 0:Et[0])||((St=t.pixelRatio)==null?void 0:St[1])!==((bt=kt.pixelRatio)==null?void 0:bt[1]))||!kt&&ft||this.nextAudioTs===null&&nt)&&this.resetInitSegment()}this.ISGenerated||(b=this.generateIS(e,t,n,a));const Pt=this.isVideoContiguous;let Rt=-1,Dt;if(ft&&(Rt=findKeyframeIndex(t.samples),!Pt&&this.config.forceKeyFrameOnDiscontinuity))if(de=!0,Rt>0){this.warn(`Dropped ${Rt} out of ${Be} video samples due to a missing keyframe`);const kt=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Rt),t.dropped+=Rt,Ye+=(t.samples[0].pts-kt)/t.inputTimeScale,Dt=Ye}else Rt===-1&&(this.warn(`No keyframe found out of ${Be} video samples`),de=!1);if(this.ISGenerated){if(nt&&ft){const kt=this.getVideoStartPts(t.samples),vt=(normalizePts(e.samples[0].pts,kt)-kt)/t.inputTimeScale;me+=Math.max(0,vt),Ye+=Math.max(0,-vt)}if(nt){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),b=this.generateIS(e,t,n,a)),p=this.remuxAudio(e,me,this.isAudioContiguous,a,tt||ft||u===PlaylistLevelType.AUDIO?Ye:void 0),ft){const kt=p?p.endPTS-p.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),b=this.generateIS(e,t,n,a)),c=this.remuxVideo(t,Ye,Pt,kt)}}else ft&&(c=this.remuxVideo(t,Ye,Pt,0));c&&(c.firstKeyFrame=Rt,c.independent=Rt!==-1,c.firstKeyFramePTS=Dt)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(N=flushTextTrackMetadataCueSamples(r,n,this._initPTS,this._initDTS)),s.samples.length&&(P=flushTextTrackUserdataCueSamples(s,n,this._initPTS))),{audio:p,video:c,initSegment:b,independent:de,text:P,id3:N}}generateIS(e,t,r,s){const n=e.samples,a=t.samples,l=this.typeSupported,u={},c=this._initPTS;let p=!c||s,b="audio/mp4",P,N,de,me=-1;if(p&&(P=N=1/0),e.config&&n.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":l.mpeg?(b="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:b,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&l.mpeg?new Uint8Array(0):MP4.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(me=e.id,de=e.inputTimeScale,!c||de!==c.timescale?P=N=n[0].pts-Math.round(de*r):p=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:MP4.initSegment([t]),metadata:{width:t.width,height:t.height}},p)if(me=t.id,de=t.inputTimeScale,!c||de!==c.timescale){const Ye=this.getVideoStartPts(a),Le=Math.round(de*r);N=Math.min(N,normalizePts(a[0].dts,Ye)-Le),P=Math.min(P,Ye-Le)}else p=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,p?(c&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${r} ${P/de} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${P/de} (${P}/${de}) trackId: ${me}`),this._initPTS={baseTime:P,timescale:de,trackId:me},this._initDTS={baseTime:N,timescale:de,trackId:me}):P=de=void 0,{tracks:u,initPTS:P,timescale:de,trackId:me}}remuxVideo(e,t,r,s){const n=e.inputTimeScale,a=e.samples,l=[],u=a.length,c=this._initPTS,p=c.baseTime*n/c.timescale;let b=this.nextVideoTs,P=8,N=this.videoSampleDuration,de,me,Ye=Number.POSITIVE_INFINITY,Le=Number.NEGATIVE_INFINITY,tt=!1;if(!r||b===null){const At=p+t*n,wt=a[0].pts-normalizePts(a[0].dts,a[0].pts);chromeVersion&&b!==null&&Math.abs(At-wt-(b+p))<15e3?r=!0:b=At-wt-p}const Be=b+p;for(let At=0;At<u;At++){const wt=a[At];wt.pts=normalizePts(wt.pts,Be),wt.dts=normalizePts(wt.dts,Be),wt.dts<a[At>0?At-1:At].dts&&(tt=!0)}tt&&a.sort(function(At,wt){const It=At.dts-wt.dts,Ft=At.pts-wt.pts;return It||Ft}),de=a[0].dts,me=a[a.length-1].dts;const nt=me-de,ft=nt?Math.round(nt/(u-1)):N||e.inputTimeScale/30;if(r){const At=de-Be,wt=At>ft,It=At<-1;if((wt||It)&&(wt?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${toMsFromMpegTsClock(At,!0)} ms (${At}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${toMsFromMpegTsClock(-At,!0)} ms (${At}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!It||Be>=a[0].pts||chromeVersion)){de=Be;const Ft=a[0].pts-At;if(wt)a[0].dts=de,a[0].pts=Ft;else{let zt=!0;for(let Ut=0;Ut<a.length&&!(a[Ut].dts>Ft&&zt);Ut++){const Qt=a[Ut].pts;if(a[Ut].dts-=At,a[Ut].pts-=At,Ut<a.length-1){const Xt=a[Ut+1].pts,Jt=a[Ut].pts,mi=Xt<=Jt,ni=Xt<=Qt;zt=mi==ni}}}this.log(`Video: Initial PTS/DTS adjusted: ${toMsFromMpegTsClock(Ft,!0)}/${toMsFromMpegTsClock(de,!0)}, delta: ${toMsFromMpegTsClock(At,!0)} ms`)}}de=Math.max(0,de);let mt=0,ht=0,Et=de;for(let At=0;At<u;At++){const wt=a[At],It=wt.units,Ft=It.length;let zt=0;for(let Ut=0;Ut<Ft;Ut++)zt+=It[Ut].data.length;ht+=zt,mt+=Ft,wt.length=zt,wt.dts<Et?(wt.dts=Et,Et+=ft/4|0||1):Et=wt.dts,Ye=Math.min(wt.pts,Ye),Le=Math.max(wt.pts,Le)}me=a[u-1].dts;const St=ht+4*mt+8;let bt;try{bt=new Uint8Array(St)}catch(At){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:At,bytes:St,reason:`fail allocating video mdat ${St}`});return}const Pt=new DataView(bt.buffer);Pt.setUint32(0,St),bt.set(MP4.types.mdat,4);let Rt=!1,Dt=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY,Lt=Number.NEGATIVE_INFINITY,vt=Number.NEGATIVE_INFINITY;for(let At=0;At<u;At++){const wt=a[At],It=wt.units;let Ft=0;for(let Qt=0,Xt=It.length;Qt<Xt;Qt++){const Jt=It[Qt],mi=Jt.data,ni=Jt.data.byteLength;Pt.setUint32(P,ni),P+=4,bt.set(mi,P),P+=ni,Ft+=4+ni}let zt;if(At<u-1)N=a[At+1].dts-wt.dts,zt=a[At+1].pts-wt.pts;else{const Qt=this.config,Xt=At>0?wt.dts-a[At-1].dts:ft;if(zt=At>0?wt.pts-a[At-1].pts:ft,Qt.stretchShortVideoTrack&&this.nextAudioTs!==null){const Jt=Math.floor(Qt.maxBufferHole*n),mi=(s?Ye+s*n:this.nextAudioTs+p)-wt.pts;mi>Jt?(N=mi-Xt,N<0?N=Xt:Rt=!0,this.log(`It is approximately ${mi/90} ms to the next segment; using duration ${N/90} ms for the last video frame.`)):N=Xt}else N=Xt}const Ut=Math.round(wt.pts-wt.dts);Dt=Math.min(Dt,N),Lt=Math.max(Lt,N),kt=Math.min(kt,zt),vt=Math.max(vt,zt),l.push(createMp4Sample(wt.key,N,Ft,Ut))}if(l.length){if(chromeVersion){if(chromeVersion<70){const At=l[0].flags;At.dependsOn=2,At.isNonSync=0}}else if(safariWebkitVersion&&vt-kt<Lt-Dt&&ft/Lt<.025&&l[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let At=de;for(let wt=0,It=l.length;wt<It;wt++){const Ft=At+l[wt].duration,zt=At+l[wt].cts;if(wt<It-1){const Ut=Ft+l[wt+1].cts;l[wt].duration=Ut-zt}else l[wt].duration=wt?l[wt-1].duration:ft;l[wt].cts=0,At=Ft}}}N=Rt||!N?ft:N;const xt=me+N;this.nextVideoTs=b=xt-p,this.videoSampleDuration=N,this.isVideoContiguous=!0;const yt={data1:MP4.moof(e.sequenceNumber++,de,_extends$1(e,{samples:l})),data2:bt,startPTS:(Ye-p)/n,endPTS:(Le+N-p)/n,startDTS:(de-p)/n,endDTS:b/n,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,yt}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return MPEG_AUDIO_SAMPLE_PER_FRAME;case"ac3":return AC3_SAMPLES_PER_FRAME;default:return AAC_SAMPLES_PER_FRAME}}remuxAudio(e,t,r,s,n){const a=e.inputTimeScale,l=e.samplerate?e.samplerate:a,u=a/l,c=this.getSamplesPerFrame(e),p=c*u,b=this._initPTS,P=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,N=[],de=n!==void 0;let me=e.samples,Ye=P?0:8,Le=this.nextAudioTs||-1;const tt=b.baseTime*a/b.timescale,Be=tt+t*a;if(this.isAudioContiguous=r=r||me.length&&Le>0&&(s&&Math.abs(Be-(Le+tt))<9e3||Math.abs(normalizePts(me[0].pts,Be)-(Le+tt))<20*p),me.forEach(function(vt){vt.pts=normalizePts(vt.pts,Be)}),!r||Le<0){if(me=me.filter(vt=>vt.pts>=0),!me.length)return;n===0?Le=0:s&&!de?Le=Math.max(0,Be-tt):Le=me[0].pts-tt}if(e.segmentCodec==="aac"){const vt=this.config.maxAudioFramesDrift;for(let xt=0,gt=Le+tt;xt<me.length;xt++){const _t=me[xt],yt=_t.pts,At=yt-gt,wt=Math.abs(1e3*At/a);if(At<=-vt*p&&de)xt===0&&(this.warn(`Audio frame @ ${(yt/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*At/a)} ms.`),this.nextAudioTs=Le=yt-tt,gt=yt);else if(At>=vt*p&&wt<MAX_SILENT_FRAME_DURATION&&de){let It=Math.round(At/p);for(gt=yt-It*p;gt<0&&It&&p;)It--,gt+=p;xt===0&&(this.nextAudioTs=Le=gt-tt),this.warn(`Injecting ${It} audio frames @ ${((gt-tt)/a).toFixed(3)}s due to ${Math.round(1e3*At/a)} ms gap.`);for(let Ft=0;Ft<It;Ft++){let zt=AAC.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);zt||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),zt=_t.unit.subarray()),me.splice(xt,0,{unit:zt,pts:gt}),gt+=p,xt++}}_t.pts=gt,gt+=p}}let nt=null,ft=null,mt,ht=0,Et=me.length;for(;Et--;)ht+=me[Et].unit.byteLength;for(let vt=0,xt=me.length;vt<xt;vt++){const gt=me[vt],_t=gt.unit;let yt=gt.pts;if(ft!==null){const wt=N[vt-1];wt.duration=Math.round((yt-ft)/u)}else if(r&&e.segmentCodec==="aac"&&(yt=Le+tt),nt=yt,ht>0){ht+=Ye;try{mt=new Uint8Array(ht)}catch(wt){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:wt,bytes:ht,reason:`fail allocating audio mdat ${ht}`});return}P||(new DataView(mt.buffer).setUint32(0,ht),mt.set(MP4.types.mdat,4))}else return;mt.set(_t,Ye);const At=_t.byteLength;Ye+=At,N.push(createMp4Sample(!0,c,At,0)),ft=yt}const St=N.length;if(!St)return;const bt=N[N.length-1];Le=ft-tt,this.nextAudioTs=Le+u*bt.duration;const Pt=P?new Uint8Array(0):MP4.moof(e.sequenceNumber++,nt/u,_extends$1({},e,{samples:N}));e.samples=[];const Rt=(nt-tt)/a,Dt=Le/a,Lt={data1:Pt,data2:mt,startPTS:Rt,endPTS:Dt,startDTS:Rt,endDTS:Dt,type:"audio",hasAudio:!0,hasVideo:!1,nb:St};return this.isAudioContiguous=!0,Lt}}function normalizePts(i,e){let t;if(e===null)return i;for(e<i?t=-8589934592:t=8589934592;Math.abs(i-e)>4294967296;)i+=t;return i}function findKeyframeIndex(i){for(let e=0;e<i.length;e++)if(i[e].key)return e;return-1}function flushTextTrackMetadataCueSamples(i,e,t,r){const s=i.samples.length;if(!s)return;const n=i.inputTimeScale;for(let l=0;l<s;l++){const u=i.samples[l];u.pts=normalizePts(u.pts-t.baseTime*n/t.timescale,e*n)/n,u.dts=normalizePts(u.dts-r.baseTime*n/r.timescale,e*n)/n}const a=i.samples;return i.samples=[],{samples:a}}function flushTextTrackUserdataCueSamples(i,e,t){const r=i.samples.length;if(!r)return;const s=i.inputTimeScale;for(let a=0;a<r;a++){const l=i.samples[a];l.pts=normalizePts(l.pts-t.baseTime*s/t.timescale,e*s)/s}i.samples.sort((a,l)=>a.pts-l.pts);const n=i.samples;return i.samples=[],{samples:n}}class PassThroughRemuxer extends Logger{constructor(e,t,r,s){super("passthrough-remuxer",s),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,r,s){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(e,s),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:r,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:n,video:a}=this.initData=parseInitSegment(e);if(t)patchEncyptionData(e,t);else{const u=n||a;u!=null&&u.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${u.codec}")!`)}n&&(r=getParsedTrackCodec(n,ElementaryStreamTypes.AUDIO,this)),a&&(s=getParsedTrackCodec(a,ElementaryStreamTypes.VIDEO,this));const l={};n&&a?l.audiovideo={container:"video/mp4",codec:r+","+s,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:n?l.audio={container:"audio/mp4",codec:r,encrypted:n.encrypted,initSegment:e,id:"audio"}:a?l.video={container:"video/mp4",codec:s,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=l}remux(e,t,r,s,n,a){var l,u;let{initPTS:c,lastEndTime:p}=this;const b={audio:void 0,video:void 0,text:s,id3:r,initSegment:void 0};isFiniteNumber(p)||(p=this.lastEndTime=n||0);const P=t.samples;if(!P.length)return b;const N={initPTS:void 0,timescale:void 0,trackId:void 0};let de=this.initData;if((l=de)!=null&&l.length||(this.generateInitSegment(P),de=this.initData),!((u=de)!=null&&u.length))return this.warn("Failed to generate initSegment."),b;this.emitInitSegment&&(N.tracks=this.initTracks,this.emitInitSegment=!1);const me=getSampleData(P,de,this),Ye=de.audio?me[de.audio.id]:null,Le=de.video?me[de.video.id]:null,tt=toStartEndOrDefault(Le,1/0),Be=toStartEndOrDefault(Ye,1/0),nt=toStartEndOrDefault(Le,0,!0),ft=toStartEndOrDefault(Ye,0,!0);let mt=n,ht=0;const Et=Ye&&(!Le||!c&&Be<tt||c&&c.trackId===de.audio.id),St=Et?Ye:Le;if(St){const gt=St.timescale,_t=St.start-n*gt,yt=Et?de.audio.id:de.video.id;mt=St.start/gt,ht=Et?ft-Be:nt-tt,(a||!c)&&(isInvalidInitPts(c,mt,n,ht)||gt!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${n} ${_t/gt} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${mt-n} (${_t}/${gt}) trackId: ${yt}`),c=null,N.initPTS=_t,N.timescale=gt,N.trackId=yt)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${n}`);c?(N.initPTS=c.baseTime,N.timescale=c.timescale,N.trackId=c.trackId):((!N.timescale||N.trackId===void 0||N.initPTS===void 0)&&(this.warn("Could not set initPTS"),N.initPTS=mt,N.timescale=1,N.trackId=-1),this.initPTS=c={baseTime:N.initPTS,timescale:N.timescale,trackId:N.trackId});const bt=mt-c.baseTime/c.timescale,Pt=bt+ht;ht>0?this.lastEndTime=Pt:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Rt=!!de.audio,Dt=!!de.video;let kt="";Rt&&(kt+="audio"),Dt&&(kt+="video");const Lt=(de.audio?de.audio.encrypted:!1)||(de.video?de.video.encrypted:!1),vt={data1:P,startPTS:bt,startDTS:bt,endPTS:Pt,endDTS:Pt,type:kt,hasAudio:Rt,hasVideo:Dt,nb:1,dropped:0,encrypted:Lt};b.audio=Rt&&!Dt?vt:void 0,b.video=Dt?vt:void 0;const xt=Le?.sampleCount;if(xt){const gt=Le.keyFrameIndex,_t=gt!==-1;vt.nb=xt,vt.dropped=gt===0||this.isVideoContiguous?0:_t?gt:xt,vt.independent=_t,vt.firstKeyFrame=gt,_t&&Le.keyFrameStart&&(vt.firstKeyFramePTS=(Le.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(b.independent=_t),this.isVideoContiguous||(this.isVideoContiguous=_t),vt.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${gt}/${xt} dropped: ${vt.dropped} start: ${vt.firstKeyFramePTS||"NA"}`)}return b.initSegment=N,b.id3=flushTextTrackMetadataCueSamples(r,n,c,c),s.samples.length&&(b.text=flushTextTrackUserdataCueSamples(s,n,c)),b}}function toStartEndOrDefault(i,e,t=!1){return i?.start!==void 0?(i.start+(t?i.duration:0))/i.timescale:e}function isInvalidInitPts(i,e,t,r){if(i===null)return!0;const s=Math.max(r,1),n=e-i.baseTime/i.timescale;return Math.abs(n-t)>s}function getParsedTrackCodec(i,e,t){const r=i.codec;return r&&r.length>4?r:e===ElementaryStreamTypes.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?getCodecCompatibleName(r,!1):(t.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(t.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let now$1;try{now$1=self.performance.now.bind(self.performance)}catch(i){now$1=Date.now}const muxConfig=[{demux:MP4Demuxer,remux:PassThroughRemuxer},{demux:TSDemuxer,remux:MP4Remuxer},{demux:AACDemuxer,remux:MP4Remuxer},{demux:MP3Demuxer,remux:MP4Remuxer}];muxConfig.splice(2,0,{demux:AC3Demuxer,remux:MP4Remuxer});class Transmuxer{constructor(e,t,r,s,n,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=n,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,s){const n=r.transmuxing;n.executeStart=now$1();let a=new Uint8Array(e);const{currentTransmuxState:l,transmuxConfig:u}=this;s&&(this.currentTransmuxState=s);const{contiguous:c,discontinuity:p,trackSwitch:b,accurateTimeOffset:P,timeOffset:N,initSegmentChange:de}=s||l,{audioCodec:me,videoCodec:Ye,defaultInitPts:Le,duration:tt,initSegmentData:Be}=u,nt=getEncryptionType(a,t);if(nt&&isFullSegmentEncryption(nt.method)){const Et=this.getDecrypter(),St=getAesModeFromFullSegmentMethod(nt.method);if(Et.isSync()){let bt=Et.softwareDecrypt(a,nt.key.buffer,nt.iv.buffer,St);if(r.part>-1){const Rt=Et.flush();bt=Rt&&Rt.buffer}if(!bt)return n.executeEnd=now$1(),emptyResult(r);a=new Uint8Array(bt)}else return this.asyncResult=!0,this.decryptionPromise=Et.webCryptoDecrypt(a,nt.key.buffer,nt.iv.buffer,St).then(bt=>{const Pt=this.push(bt,null,r);return this.decryptionPromise=null,Pt}),this.decryptionPromise}const ft=this.needsProbing(p,b);if(ft){const Et=this.configureTransmuxer(a);if(Et)return this.logger.warn(`[transmuxer] ${Et.message}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:Et,reason:Et.message}),n.executeEnd=now$1(),emptyResult(r)}(p||b||de||ft)&&this.resetInitSegment(Be,me,Ye,tt,t),(p||de||ft)&&this.resetInitialTimestamp(Le),c||this.resetContiguity();const mt=this.transmux(a,nt,N,P,r);this.asyncResult=isPromise(mt);const ht=this.currentTransmuxState;return ht.contiguous=!0,ht.discontinuity=!1,ht.trackSwitch=!1,n.executeEnd=now$1(),mt}flush(e){const t=e.transmuxing;t.executeStart=now$1();const{decrypter:r,currentTransmuxState:s,decryptionPromise:n}=this;if(n)return this.asyncResult=!0,n.then(()=>this.flush(e));const a=[],{timeOffset:l}=s;if(r){const b=r.flush();b&&a.push(this.push(b.buffer,null,e))}const{demuxer:u,remuxer:c}=this;if(!u||!c){t.executeEnd=now$1();const b=[emptyResult(e)];return this.asyncResult?Promise.resolve(b):b}const p=u.flush(l);return isPromise(p)?(this.asyncResult=!0,p.then(b=>(this.flushRemux(a,b,e),a))):(this.flushRemux(a,p,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,r){const{audioTrack:s,videoTrack:n,id3Track:a,textTrack:l}=t,{accurateTimeOffset:u,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===PlaylistLevelType.MAIN?"level":"track"} ${r.level}`);const p=this.remuxer.remux(s,n,a,l,c,u,!0,this.id);e.push({remuxResult:p,chunkMeta:r}),r.transmuxing.executeEnd=now$1()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,s,n){const{demuxer:a,remuxer:l}=this;!a||!l||(a.resetInitSegment(e,t,r,s),l.resetInitSegment(e,t,r,n))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,s,n){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,r,s,n):a=this.transmuxUnencrypted(e,r,s,n),a}transmuxUnencrypted(e,t,r,s){const{audioTrack:n,videoTrack:a,id3Track:l,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(n,a,l,u,t,r,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,r,s,n){return this.demuxer.demuxSampleAes(e,t,r).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,r,s,!1,this.id),chunkMeta:n}))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:s}=this;let n;for(let b=0,P=muxConfig.length;b<P;b++){var a;if((a=muxConfig[b].demux)!=null&&a.probe(e,this.logger)){n=muxConfig[b];break}}if(!n)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,c=n.remux,p=n.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(r,t,s,this.logger)),(!l||!(l instanceof p))&&(this.demuxer=new p(r,t,s,this.logger),this.probe=p.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Decrypter(this.config)),e}}function getEncryptionType(i,e){let t=null;return i.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const emptyResult=i=>({remuxResult:{},chunkMeta:i});function isPromise(i){return"then"in i&&i.then instanceof Function}class TransmuxConfig{constructor(e,t,r,s,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=s,this.defaultInitPts=n||null}}class TransmuxState{constructor(e,t,r,s,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=s,this.timeOffset=n,this.initSegmentChange=a}}let transmuxerInstanceCount=0;class TransmuxerInterface{constructor(e,t,r,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=transmuxerInstanceCount++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const c=u.data,p=this.hls;if(!(!p||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var b;const P=(b=this.workerContext)==null?void 0:b.objectURL;P&&self.URL.revokeObjectURL(P);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{p.logger[c.data.logType]&&p.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,p.trigger(c.event,c.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const c=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const n=e.config;this.hls=e,this.id=t,this.useWorker=!!n.enableWorker,this.onTransmuxComplete=r,this.onFlush=s;const a=(u,c)=>{c=c||{},c.frag=this.frag||void 0,u===Events.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(u,c)};this.observer=new EventEmitter,this.observer.on(Events.FRAG_DECRYPTED,a),this.observer.on(Events.ERROR,a);const l=getM2TSSupportedAudioTypes(n.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(n.workerPath||hasUMDWorker()){try{n.workerPath?(u.log(`loading Web Worker ${n.workerPath} for "${t}"`),this.workerContext=loadWorker(n.workerPath)):(u.log(`injecting Web Worker for "${t}"`),this.workerContext=injectWorker());const{worker:p}=this.workerContext;p.addEventListener("message",this.onWorkerMessage),p.addEventListener("error",this.onWorkerError),p.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:t,config:stringify(n)})}catch(p){u.warn(`Error setting up "${t}" Web Worker, fallback to inline`,p),this.terminateWorker(),this.error=null,this.transmuxer=new Transmuxer(this.observer,l,n,"",t,e.logger)}return}}this.transmuxer=new Transmuxer(this.observer,l,n,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=transmuxerInstanceCount++;const t=this.hls.config,r=getM2TSSupportedAudioTypes(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:stringify(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),removeWorkerFromStore(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,r,s,n,a,l,u,c,p){var b,P;c.transmuxing.start=self.performance.now();const{instanceNo:N,transmuxer:de}=this,me=a?a.start:n.start,Ye=n.decryptdata,Le=this.frag,tt=!(Le&&n.cc===Le.cc),Be=!(Le&&c.level===Le.level),nt=Le?c.sn-Le.sn:-1,ft=this.part?c.part-this.part.index:-1,mt=nt===0&&c.id>1&&c.id===Le?.stats.chunkCount,ht=!Be&&(nt===1||nt===0&&(ft===1||mt&&ft<=0)),Et=self.performance.now();(Be||nt||n.stats.parsing.start===0)&&(n.stats.parsing.start=Et),a&&(ft||!ht)&&(a.stats.parsing.start=Et);const St=!(Le&&((b=n.initSegment)==null?void 0:b.url)===((P=Le.initSegment)==null?void 0:P.url)),bt=new TransmuxState(tt,ht,u,Be,me,St);if(!ht||tt||St){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${n.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===PlaylistLevelType.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${tt}
        trackSwitch: ${Be}
        contiguous: ${ht}
        accurateTimeOffset: ${u}
        timeOffset: ${me}
        initSegmentChange: ${St}`);const Pt=new TransmuxConfig(r,s,t,l,p);this.configureTransmuxer(Pt)}if(this.frag=n,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:N,cmd:"demux",data:e,decryptdata:Ye,chunkMeta:c,state:bt},e instanceof ArrayBuffer?[e]:[]);else if(de){const Pt=de.push(e,Ye,c,bt);isPromise(Pt)?Pt.then(Rt=>{this.handleTransmuxComplete(Rt)}).catch(Rt=>{this.transmuxerError(Rt,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(Pt)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(r){const s=r.flush(e);isPromise(s)?s.then(n=>{this.handleFlushResult(n,e)}).catch(n=>{this.transmuxerError(n,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const TICK_INTERVAL$3=100;class AudioStreamController extends BaseStreamController{constructor(e,t,r){super(e,t,r,"audio-stream-controller",PlaylistLevelType.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Events.BUFFER_RESET,this.onBufferReset,this),e.on(Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Events.FRAG_LOADING,this.onFragLoading,this),e.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Events.BUFFER_RESET,this.onBufferReset,this),e.off(Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Events.FRAG_LOADING,this.onFragLoading,this),e.off(Events.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:r,initPTS:s,timescale:n,trackId:a}){if(r===PlaylistLevelType.MAIN){const l=t.cc,u=this.fragCurrent;if(this.initPTS[l]={baseTime:s,timescale:n,trackId:a},this.log(`InitPTS for cc: ${l} found from main: ${s/n} (${s}/${n}) trackId: ${a}`),this.mainAnchor=t,this.state===State.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==l)&&this.syncWithAnchor(t,c?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==l?(u.abortRequests(),this.syncWithAnchor(t,u)):this.state===State.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var r;const s=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(t&&s?.cc===t.cc)return;const n=(s||e).cc,a=this.getLevelDetails(),l=this.getLoadPosition(),u=findNearestWithCC(a,n,l);u&&(this.log(`Syncing with main frag at ${u.start} cc ${u.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===State.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=State.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(TICK_INTERVAL$3),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=State.IDLE):this.state=State.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case State.IDLE:this.doTickIdle();break;case State.WAITING_TRACK:{const{levels:e,trackId:t}=this,r=e?.[t],s=r?.details;if(s&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(s))break;this.state=State.WAITING_INIT_PTS}break}case State.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case State.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:r,cache:s,complete:n}=e,a=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=State.FRAG_LOADING;const l=s.flush().buffer,u={frag:t,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(u),n&&super._handleFragmentLoadComplete(u)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=State.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:r,media:s,trackId:n}=this,a=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(r!=null&&r[n]))return;const l=r[n],u=l.details;if(!u||this.waitForLive(l)||this.waitForCdnTuneIn(u)){this.state=State.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,ElementaryStreamTypes.AUDIO,PlaylistLevelType.AUDIO));const p=this.getFwdBufferInfo(c,PlaylistLevelType.AUDIO);if(p===null)return;if(!this.switchingTrack&&this._streamEnded(p,u)){t.trigger(Events.BUFFER_EOS,{type:"audio"}),this.state=State.ENDED;return}const b=p.len,P=t.maxBufferLength,N=u.fragments,de=N[0].start,me=this.getLoadPosition(),Ye=this.flushing?me:p.end;if(this.switchingTrack&&s){const Be=me;u.PTSKnown&&Be<de&&(p.end>de||p.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=de+.05)}if(b>=P&&!this.switchingTrack&&Ye<N[N.length-1].start)return;let Le=this.getNextFragment(Ye,u);if(Le&&this.isLoopLoading(Le,Ye)&&(Le=this.getNextFragmentLoopLoading(Le,u,p,PlaylistLevelType.MAIN,P)),!Le){this.bufferFlushed=!0;return}let tt=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&tt&&isMediaFragment(Le)&&!Le.endList&&(!u.live||!this.loadingParts&&Ye<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(tt)===FragmentState.OK&&(this.mainFragLoading=tt=null),tt&&isMediaFragment(tt))){if(Le.start>tt.end){const nt=this.fragmentTracker.getFragAtPos(Ye,PlaylistLevelType.MAIN);nt&&nt.end>tt.end&&(tt=nt,this.mainFragLoading={frag:nt,targetBufferTime:null})}if(Le.start>tt.end)return}this.loadFragment(Le,l,Ye)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(r=>new Level(r))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==State.STOPPED&&(this.setInterval(TICK_INTERVAL$3),this.state=State.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Events.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,t){var r;const{levels:s}=this,{details:n,id:a,groupId:l,track:u}=t;if(!s){this.warn(`Audio tracks reset while loading track ${a} "${u.name}" of "${l}"`);return}const c=this.mainDetails;if(!c||n.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==State.STOPPED&&(this.state=State.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${u.name}" of "${l}" loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""},duration:${n.totalduration}`);const p=s[a];let b=0;if(n.live||(r=p.details)!=null&&r.live){if(this.checkLiveUpdate(n),n.deltaUpdateFailed)return;if(p.details){var P;b=this.alignPlaylists(n,p.details,(P=this.levelLastLoaded)==null?void 0:P.details)}n.alignedSliding||(alignDiscontinuities(n,c),n.alignedSliding||alignMediaPlaylistByPDT(n,c),b=n.fragmentStart)}p.details=n,this.levelLastLoaded=p,this.startFragRequested||this.setStartPosition(c,b),this.hls.trigger(Events.AUDIO_TRACK_UPDATED,{details:n,id:a,groupId:t.groupId}),this.state===State.WAITING_TRACK&&!this.waitForCdnTuneIn(n)&&(this.state=State.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:s,payload:n}=e,{config:a,trackId:l,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const c=u[l];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const p=c.details;if(!p){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const b=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let P=this.transmuxer;P||(P=this.transmuxer=new TransmuxerInterface(this.hls,PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const N=this.initPTS[r.cc],de=(t=r.initSegment)==null?void 0:t.data;if(N!==void 0){const Ye=s?s.index:-1,Le=Ye!==-1,tt=new ChunkMetadata(r.level,r.sn,r.stats.chunkCount,n.byteLength,Ye,Le);P.push(n,de,b,"",r,s,p.totalduration,!1,tt,N)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${p.startSN} ,${p.endSN}],track ${l}`);const{cache:me}=this.waitingData=this.waitingData||{frag:r,part:s,cache:new ChunkCache,complete:!1};me.push(new Uint8Array(n)),this.state!==State.STOPPED&&(this.state=State.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===PlaylistLevelType.MAIN&&isMediaFragment(t.frag)&&(this.mainFragLoading=t,this.state===State.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:r,part:s}=t;if(r.type!==PlaylistLevelType.AUDIO){!this.audioOnly&&r.type===PlaylistLevelType.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(isMediaFragment(r)){this.fragPrevious=r;const n=this.switchingTrack;n&&(this.bufferedTrack=n,this.switchingTrack=null,this.hls.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},n)))}this.fragBufferedComplete(r,s),this.media&&this.tick()}onError(e,t){var r;if(t.fatal){this.state=State.ERROR;return}switch(t.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO,t);break;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===State.WAITING_TRACK&&((r=t.context)==null?void 0:r.type)===PlaylistContextType.AUDIO_TRACK&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case ErrorDetails.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==ElementaryStreamTypes.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==ElementaryStreamTypes.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===State.ENDED&&(this.state=State.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,t,PlaylistLevelType.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:s}=this,{remuxResult:n,chunkMeta:a}=e,l=this.getCurrentContext(a);if(!l){this.resetWhenMissingContext(a);return}const{frag:u,part:c,level:p}=l,{details:b}=p,{audio:P,text:N,id3:de,initSegment:me}=n;if(this.fragContextChanged(u)||!b){this.fragmentTracker.removeFragment(u);return}if(this.state=State.PARSING,this.switchingTrack&&P&&this.completeAudioSwitch(this.switchingTrack),me!=null&&me.tracks){const Ye=u.initSegment||u;if(this.unhandledEncryptionError(me,u))return;this._bufferInitSegment(p,me.tracks,Ye,a),s.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:Ye,id:r,tracks:me.tracks})}if(P){const{startPTS:Ye,endPTS:Le,startDTS:tt,endDTS:Be}=P;c&&(c.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:Ye,endPTS:Le,startDTS:tt,endDTS:Be}),u.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,Ye,Le,tt,Be),this.bufferFragmentData(P,u,c,a)}if(de!=null&&(t=de.samples)!=null&&t.length){const Ye=_extends$1({id:r,frag:u,details:b},de);s.trigger(Events.FRAG_PARSING_METADATA,Ye)}if(N){const Ye=_extends$1({id:r,frag:u,details:b},N);s.trigger(Events.FRAG_PARSING_USERDATA,Ye)}}_bufferInitSegment(e,t,r,s){if(this.state!==State.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const n=t.audio;n.id=PlaylistLevelType.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${n.container}, codecs[level/parsed]=[${a}/${n.codec}]`),a&&a.split(",").length===1&&(n.levelCodec=a),this.hls.trigger(Events.BUFFER_CODECS,t);const l=n.initSegment;if(l!=null&&l.byteLength){const u={type:"audio",frag:r,part:null,chunkMeta:s,parent:r.type,data:l};this.hls.trigger(Events.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,r){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===FragmentState.NOT_LOADED||s===FragmentState.PARTIAL){var n;if(!isMediaFragment(e))this._loadInitSegment(e,t);else if((n=t.details)!=null&&n.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=State.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&alignMediaPlaylistByPDT(t.details,a)}else super.loadFragment(e,t,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:r,assocLang:s,characteristics:n,audioCodec:a,channels:l}=this.bufferedTrack;matchesOption({name:t,lang:r,assocLang:s,characteristics:n,audioCodec:a,channels:l},e,audioMatchPredicate)||(useAlternateAudio(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},e))}}class BasePlaylistController extends Logger{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const s=t?.renditionReports;if(s){let n=-1;for(let a=0;a<s.length;a++){const l=s[a];let u;try{u=new self.URL(l.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),u=l.URI||""}if(u===e){n=a;break}else u===e.substring(0,u.length)&&(n=a)}if(n!==-1){const a=s[n],l=parseInt(a["LAST-MSN"])||t.lastPartSn;let u=parseInt(a["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const p=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&p>t.partTarget&&(u+=1)}const c=r&&getSkipValue(r);return new HlsUrlParameters(l,u>=0?u:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,t,r){const{details:s,stats:n}=t,a=self.performance.now(),l=n.loading.first?Math.max(0,a-n.loading.first):0;s.advancedDateTime=Date.now()-l;const u=this.hls.config.timelineOffset;if(u!==s.appliedTimelineOffset){const p=Math.max(u||0,0);s.appliedTimelineOffset=p,s.fragments.forEach(b=>{b.setStart(b.playlistOffset+p)})}if(s.live||r!=null&&r.live){const p="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(r),r&&s.fragments.length>0){mergeDetails(r,s,this);const tt=s.playlistParsingError;if(tt){this.warn(tt);const Be=this.hls;if(!Be.config.ignorePlaylistParsingErrors){var c;const{networkDetails:nt}=t;Be.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:tt,reason:tt.message,level:t.level||void 0,parent:(c=s.fragments[0])==null?void 0:c.type,networkDetails:nt,stats:n});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=n.loading.start);const b=this.hls.mainForwardBufferInfo,P=b?b.end-b.len:0,N=(s.edge-P)*1e3,de=computeReloadInterval(s,N);if(s.requestScheduled+de<a?s.requestScheduled=a:s.requestScheduled+=de,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let me,Ye,Le;if(s.canBlockReload&&s.endSN&&s.advanced){const tt=this.hls.config.lowLatencyMode,Be=s.lastPartSn,nt=s.endSN,ft=s.lastPartIndex,mt=ft!==-1,ht=Be===nt;mt?ht?(Ye=nt+1,Le=tt?0:ft):(Ye=Be,Le=tt?ft+1:s.maxPartIndex):Ye=nt+1;const Et=s.age,St=Et+s.ageHeader;let bt=Math.min(St-s.partTarget,s.targetduration*1.5);if(bt>0){if(St>s.targetduration*3)this.log(`Playlist last advanced ${Et.toFixed(2)}s ago. Omitting segment and part directives.`),Ye=void 0,Le=void 0;else if(r!=null&&r.tuneInGoal&&St-s.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${bt} with playlist age: ${s.age}`),bt=0;else{const Pt=Math.floor(bt/s.targetduration);if(Ye+=Pt,Le!==void 0){const Rt=Math.round(bt%s.targetduration/s.partTarget);Le+=Rt}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${Et.toFixed(2)}s goal: ${bt} skip sn ${Pt} to part ${Le}`)}s.tuneInGoal=bt}if(me=this.getDeliveryDirectives(s,t.deliveryDirectives,Ye,Le),tt||!ht){s.requestScheduled=a,this.loadingPlaylist(p,me);return}}else(s.canBlockReload||s.canSkipUntil)&&(me=this.getDeliveryDirectives(s,t.deliveryDirectives,Ye,Le));me&&Ye!==void 0&&s.canBlockReload&&(s.requestScheduled=n.loading.first+Math.max(de-l*2,de/2)),this.scheduleLoading(p,me,s)}else this.clearTimer()}scheduleLoading(e,t,r){const s=r||e.details;if(!s){this.loadingPlaylist(e,t);return}const n=self.performance.now(),a=s.requestScheduled;if(n>=a){this.loadingPlaylist(e,t);return}const l=a-n;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(l)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),l)}getDeliveryDirectives(e,t,r,s){let n=getSkipValue(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,s=t.part,n=HlsSkip.No),new HlsUrlParameters(r,s,n)}checkRetry(e){const t=e.details,r=isTimeoutError(e),s=e.errorAction,{action:n,retryCount:a=0,retryConfig:l}=s||{},u=!!s&&!!l&&(n===NetworkErrorAction.RetryRequest||!s.resolved&&n===NetworkErrorAction.SendAlternateToPenaltyBox);if(u){var c;if(a>=l.maxNumRetry)return!1;if(r&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${l.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const p=getRetryDelay(l,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),p),this.warn(`Retrying playlist loading ${a+1}/${l.maxNumRetry} after "${t}" in ${p}ms`)}e.levelRetry=!0,s.resolved=!0}return u}}function subtitleOptionsIdentical(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!mediaAttributesIdentical(i[t].attrs,e[t].attrs))return!1;return!0}function mediaAttributesIdentical(i,e,t){const r=i["STABLE-RENDITION-ID"];return r&&!t?r===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>i[s]!==e[s])}function subtitleTrackMatchesTextTrack(i,e){return e.label.toLowerCase()===i.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(i.lang||"").toLowerCase())}class AudioTrackController extends BasePlaylistController{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Events.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:s,details:n}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==s){this.warn(`Audio track with id:${r} and group:${s} not found in active group ${a?.groupId}`);return}const l=a.details;a.details=t.details,this.log(`Audio track ${r} "${a.name}" lang:${a.lang} group:${s} loaded [${n.startSN}-${n.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,l)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,s=this.groupIds;let n=this.currentTrack;if(!r||s?.length!==r?.length||r!=null&&r.some(l=>s?.indexOf(l)===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(P=>!r||r.indexOf(P.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(P=>P.default)&&(this.selectDefaultTrack=!1),l.forEach((P,N)=>{P.id=N});else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const u=this.hls.config.audioPreference;if(!n&&u){const P=findMatchingOption(u,l,audioMatchPredicate);if(P>-1)n=l[P];else{const N=findMatchingOption(u,this.tracks);n=this.tracks[N]}}let c=this.findTrackId(n);c===-1&&n&&(c=this.findTrackId(null));const p={audioTracks:l};this.log(`Updating audio tracks, ${l.length} track(s) found in group(s): ${r?.join(",")}`),this.hls.trigger(Events.AUDIO_TRACKS_UPDATED,p);const b=this.trackId;if(c!==-1&&b===-1)this.setAudioTrack(c);else if(l.length&&b===-1){var a;const P=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${l.length}`);this.warn(P.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:P})}}}onError(e,t){t.fatal||!t.context||t.context.type===PlaylistContextType.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const s=this.currentTrack;if(s&&matchesOption(e,s,audioMatchPredicate))return s;const n=findMatchingOption(e,this.tracksInGroup,audioMatchPredicate);if(n>-1){const a=this.tracksInGroup[n];return this.setAudioTrack(n),a}else if(s){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const l=findClosestLevelWithAudioGroup(e,t.levels,r,a,audioMatchPredicate);if(l===-1)return null;t.nextLoadLevel=l}if(e.channels||e.audioCodec){const a=findMatchingOption(e,r);if(a>-1)return r[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,s=t[e],n=s.details&&!s.details.live;if(e===this.trackId&&s===r&&n||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(Events.AUDIO_TRACK_SWITCHING,_objectSpread2({},s)),n))return;const a=this.switchParams(s.url,r?.details,s.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const s=t[r];if(!(this.selectDefaultTrack&&!s.default)&&(!e||matchesOption(e,s,audioMatchPredicate)))return r}if(e){const{name:r,lang:s,assocLang:n,characteristics:a,audioCodec:l,channels:u}=e;for(let c=0;c<t.length;c++){const p=t[c];if(matchesOption({name:r,lang:s,assocLang:n,characteristics:a,audioCodec:l,channels:u},p,audioMatchPredicate))return c}for(let c=0;c<t.length;c++){const p=t[c];if(mediaAttributesIdentical(e.attrs,p.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const p=t[c];if(mediaAttributesIdentical(e.attrs,p.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&useAlternateAudio(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,s=e.groupId,n=this.getUrlWithDirectives(e.url,t),a=e.details,l=a?.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(Events.AUDIO_TRACK_LOADING,{url:n,id:r,groupId:s,deliveryDirectives:t||null,track:e})}}class BufferOperationQueue{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,r){if(this.queues===null||this.tracks===null)return;const s=this.queues[t];s.push(e),s.length===1&&!r&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const r={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const r={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const r=(t=e[0])==null?void 0:t.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(n){var r;if(s.onError(n),this.queues===null||this.tracks===null)return;const a=(r=this.tracks[e])==null?void 0:r.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,r;return(t=this.queues)!=null&&t[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const r=(t=this.tracks)==null?void 0:t[e],s=r?.buffer;return s?`SourceBuffer${s.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(r=>r.label).join(", "))||""}}const VIDEO_CODEC_PROFILE_REPLACE=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,TRACK_REMOVED_ERROR_NAME="HlsJsTrackRemovedError";class HlsJsTrackRemovedError extends Error{constructor(e){super(e),this.name=TRACK_REMOVED_ERROR_NAME}}class BufferController extends Logger{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:s,mediaSource:n}=this;r&&this.log("Media source opened"),!(!s||!n)&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Events.MEDIA_ATTACHED,{media:s,mediaSource:n}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:s}=this;r!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${r})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=isManagedMediaSource(getMediaSource(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events.BUFFER_RESET,this.onBufferReset,this),e.on(Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Events.BUFFER_EOS,this.onBufferEos,this),e.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Events.FRAG_PARSED,this.onFragParsed,this),e.on(Events.FRAG_CHANGED,this.onFragChanged,this),e.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events.BUFFER_RESET,this.onBufferReset,this),e.off(Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Events.BUFFER_EOS,this.onBufferEos,this),e.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Events.FRAG_PARSED,this.onFragParsed,this),e.off(Events.FRAG_CHANGED,this.onFragChanged,this),e.off(Events.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const r={};if(this.operationQueue){const n=this.isUpdating();n||this.operationQueue.removeBlockers();const a=this.isQueued();(n||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${n?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?_extends$1(r,s.tracks):this.sourceBuffers.forEach(n=>{const[a]=n;a&&(r[a]=_extends$1({},this.tracks[a]),this.removeBuffer(a)),n[0]=n[1]=null}),{media:e,mediaSource:t,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var r;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const r=this.media=t.media;this.transferData=this.overrides=void 0;const s=getMediaSource(this.appendSource);if(s){const n=!!t.mediaSource;(n||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(a),n)this._objectUrl=r.src,this.attachTransferred();else{const l=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{r.removeAttribute("src");const u=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||u&&a instanceof u,removeSourceChildren(r),addSource(r,l),r.load()}catch{r.src=l}else r.src=l}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,r;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const r=this.tracks,s=t.tracks,n=s?Object.keys(s):null,a=n?n.length:0,l=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(s&&n&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${stringify(r,(u,c)=>u==="initSegment"?void 0:c)};
transfer tracks: ${stringify(s,(u,c)=>u==="initSegment"?void 0:c)}}`),!isCompatibleTrackChange(s,r)){t.mediaSource=null,t.tracks=void 0;const u=e.currentTime,c=this.details,p=Math.max(u,c?.fragments[0].start||0);if(p-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${p}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(r)}") start time: ${p} currentTime: ${u}`),this.onMediaDetaching(Events.MEDIA_DETACHING,{}),this.onMediaAttaching(Events.MEDIA_ATTACHING,t),e.currentTime=p;return}this.transferData=void 0,n.forEach(u=>{const c=u,p=s[c];if(p){const b=p.buffer;if(b){const P=this.fragmentTracker,N=p.id;if(P.hasFragments(N)||P.hasParts(N)){const Ye=BufferHelper.getBuffered(b);P.detectEvictedFragments(c,Ye,N,null,!0)}const de=sourceBufferNameToIndex(c),me=[c,b];this.sourceBuffers[de]=me,b.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,p)}}}),l(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),l()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const r=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:n,_objectUrl:a}=this;if(n){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([l])=>{l&&this.removeBuffer(l)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const l=n.readyState==="open";try{const u=n.sourceBuffers;for(let c=u.length;c--;)l&&u[c].abort(),n.removeSourceBuffer(u[c]);l&&n.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),r||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(s.removeAttribute("src"),this.appendSource&&removeSourceChildren(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Events.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const r=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),r)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(n){this.warn(`onBufferReset ${e}`,n)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[sourceBufferNameToIndex(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new BufferOperationQueue(this.tracks)}onBufferCodecs(e,t){const r=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const n="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),a=!n&&this.sourceBufferCount&&this.media&&s.some(l=>!r[l]);if(n||a){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${s}" SourceBuffers`);return}s.forEach(l=>{var u,c;const p=t[l],{id:b,codec:P,levelCodec:N,container:de,metadata:me,supplemental:Ye}=p;let Le=r[l];const tt=(u=this.transferData)==null||(u=u.tracks)==null?void 0:u[l],Be=tt!=null&&tt.buffer?tt:Le,nt=Be?.pendingCodec||Be?.codec,ft=Be?.levelCodec;Le||(Le=r[l]={buffer:void 0,listeners:[],codec:P,supplemental:Ye,container:de,levelCodec:N,metadata:me,id:b});const mt=pickMostCompleteCodecName(nt,ft),ht=mt?.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");let Et=pickMostCompleteCodecName(P,N);const St=(c=Et)==null?void 0:c.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");Et&&mt&&ht!==St&&(l.slice(0,5)==="audio"&&(Et=getCodecCompatibleName(Et,this.appendSource)),this.log(`switching codec ${nt} to ${Et}`),Et!==(Le.pendingCodec||Le.codec)&&(Le.pendingCodec=Et),Le.container=de,this.appendChangeType(l,de,Et))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const r=this.tracks[t];return e[t]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,t,r){const s=`${t};codecs=${r}`,n={label:`change-type=${s}`,execute:()=>{const a=this.tracks[e];if(a){const l=a.buffer;l!=null&&l.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),l.changeType(s),a.codec=r,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(n,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const r=e.start,s=r+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(r,PlaylistLevelType.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var l;const u=this.tracks.video;(this.lastVideoAppendEnd>s||u!=null&&u.buffer&&BufferHelper.isBuffered(u.buffer,s)||((l=this.fragmentTracker.getAppendedFrag(s,PlaylistLevelType.MAIN))==null?void 0:l.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn("Error executing block-audio operation",l)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:s,type:n,parent:a,frag:l,part:u,chunkMeta:c,offset:p}=t,b=c.buffering[n],{sn:P,cc:N}=l,de=self.performance.now();b.start=de;const me=l.stats.buffering,Ye=u?u.stats.buffering:null;me.start===0&&(me.start=de),Ye&&Ye.start===0&&(Ye.start=de);const Le=r.audio;let tt=!1;n==="audio"&&Le?.container==="audio/mpeg"&&(tt=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const Be=r.video,nt=Be?.buffer;if(nt&&P!=="initSegment"){const ht=u||l,Et=this.blockedAudioAppend;if(n==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(Be.ending||Be.ended)){const bt=ht.start+ht.duration*.05,Pt=nt.buffered,Rt=this.currentOp("video");!Pt.length&&!Rt?this.blockAudio(ht):!Rt&&!BufferHelper.isBuffered(nt,bt)&&this.lastVideoAppendEnd<bt&&this.blockAudio(ht)}else if(n==="video"){const St=ht.end;if(Et){const bt=Et.frag.start;(St>bt||St<this.lastVideoAppendEnd||BufferHelper.isBuffered(nt,bt))&&this.unblockAudio()}this.lastVideoAppendEnd=St}}const ft=(u||l).start,mt={label:`append-${n}`,execute:()=>{var ht;b.executeStart=self.performance.now();const Et=(ht=this.tracks[n])==null?void 0:ht.buffer;Et&&(tt?this.updateTimestampOffset(Et,ft,.1,n,P,N):p!==void 0&&isFiniteNumber(p)&&this.updateTimestampOffset(Et,p,1e-6,n,P,N)),this.appendExecutor(s,n)},onStart:()=>{},onComplete:()=>{const ht=self.performance.now();b.executeEnd=b.end=ht,me.first===0&&(me.first=ht),Ye&&Ye.first===0&&(Ye.first=ht);const Et={};this.sourceBuffers.forEach(([St,bt])=>{St&&(Et[St]=BufferHelper.getBuffered(bt))}),this.appendErrors[n]=0,n==="audio"||n==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Events.BUFFER_APPENDED,{type:n,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:Et})},onError:ht=>{var Et;const St={type:ErrorTypes.MEDIA_ERROR,parent:l.type,details:ErrorDetails.BUFFER_APPEND_ERROR,sourceBufferName:n,frag:l,part:u,chunkMeta:c,error:ht,err:ht,fatal:!1},bt=(Et=this.media)==null?void 0:Et.error;if(ht.code===DOMException.QUOTA_EXCEEDED_ERR||ht.name=="QuotaExceededError"||"quota"in ht)St.details=ErrorDetails.BUFFER_FULL_ERROR;else if(ht.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!bt)St.errorAction=createDoNothingErrorAction(!0);else if(ht.name===TRACK_REMOVED_ERROR_NAME&&this.sourceBufferCount===0)St.errorAction=createDoNothingErrorAction(!0);else{const Pt=++this.appendErrors[n];this.warn(`Failed ${Pt}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${n}" sourceBuffer (${bt||"no media error"})`),(Pt>=this.hls.config.appendErrorMaxRetry||bt)&&(St.fatal=!0)}this.hls.trigger(Events.ERROR,St)}};this.append(mt,n,this.isPending(this.tracks[n]))}getFlushOp(e,t,r){return this.log(`queuing "${e}" remove ${t}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Events.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${r} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:r,startOffset:s,endOffset:n}=t;r?this.append(this.getFlushOp(r,s,n),r):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,s,n),a)})}onFragParsed(e,t){const{frag:r,part:s}=t,n=[],a=s?s.elementaryStreams:r.elementaryStreams;a[ElementaryStreamTypes.AUDIOVIDEO]?n.push("audiovideo"):(a[ElementaryStreamTypes.AUDIO]&&n.push("audio"),a[ElementaryStreamTypes.VIDEO]&&n.push("video"));const l=()=>{const u=self.performance.now();r.stats.buffering.end=u,s&&(s.stats.buffering.end=u);const c=s?s.stats:r.stats;this.hls.trigger(Events.FRAG_BUFFERED,{frag:r,part:s,stats:c,id:r.type})};n.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(l,n).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var r;this.sourceBuffers.forEach(([a])=>{if(a){const l=this.tracks[a];(!t.type||t.type===a)&&(l.ending=!0,l.ended||(l.ended=!0,this.log(`${a} buffer reached EOS`)))}});const s=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var l;return a&&!((l=this.tracks[a])!=null&&l.ended)})?s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(Events.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(Events.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===ErrorDetails.BUFFER_APPEND_ERROR&&t.frag){var r;const s=(r=t.errorAction)==null?void 0:r.nextAutoLevel;isFiniteNumber(s)&&s!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||t===null||!this.sourceBufferCount)return;const s=e.config,n=r.currentTime,a=t.levelTargetDuration,l=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(isFiniteNumber(l)&&l>=0){const c=Math.max(l,a),p=Math.floor(n/a)*a-c;this.flushBackBuffer(n,a,p)}const u=s.frontBufferFlushThreshold;if(isFiniteNumber(u)&&u>0){const c=Math.max(s.maxBufferLength,u),p=Math.max(c,a),b=Math.floor(n/a)*a+p;this.flushFrontBuffer(n,a,b)}}flushBackBuffer(e,t,r){this.sourceBuffers.forEach(([s,n])=>{if(n){const l=BufferHelper.getBuffered(n);if(l.length>0&&r>l.start(0)){var a;this.hls.trigger(Events.BACK_BUFFER_REACHED,{bufferEnd:r});const u=this.tracks[s];if((a=this.details)!=null&&a.live)this.hls.trigger(Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(u!=null&&u.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:s})}}})}flushFrontBuffer(e,t,r){this.sourceBuffers.forEach(([s,n])=>{if(n){const a=BufferHelper.getBuffered(n),l=a.length;if(l<2)return;const u=a.start(l-1),c=a.end(l-1);if(r>u||e>=u&&e<=c)return;this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||r?.readyState!=="open")return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&r.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),p=Math.max(c,s);return{duration:1/0,start:c,end:p}}return{duration:1/0}}const n=(e=this.overrides)==null?void 0:e.duration;if(n)return isFiniteNumber(n)?{duration:n}:null;const a=this.media.duration,l=isFiniteNumber(r.duration)?r.duration:0;return s>l&&s>a||!isFiniteNumber(a)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:r}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(isFiniteNumber(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),t!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${r}.`),s.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${stringify(r)}`),this.tracksReady){var s;const n=(s=this.transferData)==null?void 0:s.tracks;n&&Object.keys(n).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,r])=>{if(t){const s=this.tracks[t];e[t]={buffer:r,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(Events.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const n in e){const a=n,l=e[a];if(this.isPending(l)){const u=this.getTrackCodec(l,a),c=`${l.container};codecs=${u}`;l.codec=u,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${stringify(l)}`);try{const p=r.addSourceBuffer(c),b=sourceBufferNameToIndex(a),P=[a,p];t[b]=P,l.buffer=p}catch(p){var s;this.error(`error while trying to add sourceBuffer: ${p.message}`),this.shiftAndExecuteNext(a),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[a],this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:p,sourceBufferName:a,mimeType:c,parent:l.id});return}this.trackSourceBuffer(a,l)}}this.bufferCreated()}getTrackCodec(e,t){const r=e.supplemental;let s=e.codec;r&&(t==="video"||t==="audiovideo")&&areCodecsMediaSourceSupported(r,"video")&&(s=replaceVideoCodec(s,r));const n=pickMostCompleteCodecName(s,e.levelCodec);return n?t.slice(0,5)==="audio"?getCodecCompatibleName(n,this.appendSource):n:""}trackSourceBuffer(e,t){const r=t.buffer;if(!r)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:r,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(n,a)=>{const l=a.removedRanges;l!=null&&l.length&&this.hls.trigger(Events.BUFFER_FLUSHED,{type:n})})}get mediaSrc(){var e,t;const r=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return r?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var r;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${s}`,t),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const n=this.currentOp(e);n&&n.onError(s)}updateTimestampOffset(e,t,r,s,n,a){const l=t-e.timestampOffset;Math.abs(l)>=r&&(this.log(`Updating ${s} SourceBuffer timestampOffset to ${t} (sn: ${n} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:s,mediaSource:n}=this,a=this.tracks[e],l=a?.buffer;if(!s||!n||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=isFiniteNumber(s.duration)?s.duration:1/0,c=isFiniteNumber(n.duration)?n.duration:1/0,p=Math.max(0,t),b=Math.min(r,u,c);b>p&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${p},${b}] from the ${e} SourceBuffer`),l.remove(p,b)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.tracks[t],s=r?.buffer;if(!s)throw new HlsJsTrackRemovedError(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,s=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(a=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var r;const s=(r=this.tracks[t])==null?void 0:r.buffer;!s||s.updating||this.shiftAndExecuteNext(t)})}append(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,r){const s=this.tracks[e];if(!s)return;const n=s.buffer;if(!n)return;const a=r.bind(this,e);s.listeners.push({event:t,listener:a}),n.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const r=t.buffer;r&&(t.listeners.forEach(s=>{r.removeEventListener(s.event,s.listener)}),t.listeners.length=0)}}function removeSourceChildren(i){const e=i.querySelectorAll("source");[].slice.call(e).forEach(t=>{i.removeChild(t)})}function addSource(i,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,i.appendChild(t)}function sourceBufferNameToIndex(i){return i==="audio"?1:0}class CapLevelController{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&isFiniteNumber(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((s,n)=>this.isLevelAllowed(s)&&n<=e);return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,!t.width&&!t.height&&(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,t,r){if(!(e!=null&&e.length))return-1;const s=(l,u)=>u?l.width!==u.width||l.height!==u.height:!0;let n=e.length-1;const a=Math.max(t,r);for(let l=0;l<e.length;l+=1){const u=e[l];if((u.width>=a||u.height>=a)&&s(u,e[l+1])){n=l;break}}return n}}const CmObjectType={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},CmcdObjectType=CmObjectType,CmStreamingFormat={HLS:"h"},CmcdStreamingFormat=CmStreamingFormat;class SfItem{constructor(e,t){Array.isArray(e)&&(e=e.map(r=>r instanceof SfItem?r:new SfItem(r))),this.value=e,this.params=t}}const DICT="Dict";function format(i){return Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":typeof i=="object"?JSON.stringify(i):String(i)}function throwError(i,e,t,r){return new Error(`failed to ${i} "${format(e)}" as ${t}`,{cause:r})}function serializeError(i,e,t){return throwError("serialize",i,e,t)}class SfToken{constructor(e){this.description=e}}const BARE_ITEM="Bare Item",BOOLEAN="Boolean";function serializeBoolean(i){if(typeof i!="boolean")throw serializeError(i,BOOLEAN);return i?"?1":"?0"}function encodeBase64(i){return btoa(String.fromCharCode(...i))}const BYTES="Byte Sequence";function serializeByteSequence(i){if(ArrayBuffer.isView(i)===!1)throw serializeError(i,BYTES);return`:${encodeBase64(i)}:`}const INTEGER="Integer";function isInvalidInt(i){return i<-999999999999999||999999999999999<i}function serializeInteger(i){if(isInvalidInt(i))throw serializeError(i,INTEGER);return i.toString()}function serializeDate(i){return`@${serializeInteger(i.getTime()/1e3)}`}function roundToEven(i,e){if(i<0)return-roundToEven(-i,e);const t=Math.pow(10,e);if(Math.abs(i*t%1-.5)<Number.EPSILON){const s=Math.floor(i*t);return(s%2===0?s:s+1)/t}else return Math.round(i*t)/t}const DECIMAL="Decimal";function serializeDecimal(i){const e=roundToEven(i,3);if(Math.floor(Math.abs(e)).toString().length>12)throw serializeError(i,DECIMAL);const t=e.toString();return t.includes(".")?t:`${t}.0`}const STRING="String",STRING_REGEX=/[\x00-\x1f\x7f]+/;function serializeString(i){if(STRING_REGEX.test(i))throw serializeError(i,STRING);return`"${i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function symbolToStr(i){return i.description||i.toString().slice(7,-1)}const TOKEN="Token";function serializeToken(i){const e=symbolToStr(i);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw serializeError(e,TOKEN);return e}function serializeBareItem(i){switch(typeof i){case"number":if(!isFiniteNumber(i))throw serializeError(i,BARE_ITEM);return Number.isInteger(i)?serializeInteger(i):serializeDecimal(i);case"string":return serializeString(i);case"symbol":return serializeToken(i);case"boolean":return serializeBoolean(i);case"object":if(i instanceof Date)return serializeDate(i);if(i instanceof Uint8Array)return serializeByteSequence(i);if(i instanceof SfToken)return serializeToken(i);default:throw serializeError(i,BARE_ITEM)}}const KEY="Key";function serializeKey(i){if(/^[a-z*][a-z0-9\-_.*]*$/.test(i)===!1)throw serializeError(i,KEY);return i}function serializeParams(i){return i==null?"":Object.entries(i).map(([e,t])=>t===!0?`;${serializeKey(e)}`:`;${serializeKey(e)}=${serializeBareItem(t)}`).join("")}function serializeItem(i){return i instanceof SfItem?`${serializeBareItem(i.value)}${serializeParams(i.params)}`:serializeBareItem(i)}function serializeInnerList(i){return`(${i.value.map(serializeItem).join(" ")})${serializeParams(i.params)}`}function serializeDict(i,e={whitespace:!0}){if(typeof i!="object"||i==null)throw serializeError(i,DICT);const t=i instanceof Map?i.entries():Object.entries(i),r=e?.whitespace?" ":"";return Array.from(t).map(([s,n])=>{n instanceof SfItem||(n=new SfItem(n));let a=serializeKey(s);return n.value===!0?a+=serializeParams(n.params):(a+="=",Array.isArray(n.value)?a+=serializeInnerList(n):a+=serializeItem(n)),a}).join(`,${r}`)}function encodeSfDict(i,e){return serializeDict(i,e)}const CMCD_OBJECT="CMCD-Object",CMCD_REQUEST="CMCD-Request",CMCD_SESSION="CMCD-Session",CMCD_STATUS="CMCD-Status",CMCD_HEADER_MAP={br:CMCD_OBJECT,ab:CMCD_OBJECT,d:CMCD_OBJECT,ot:CMCD_OBJECT,tb:CMCD_OBJECT,tpb:CMCD_OBJECT,lb:CMCD_OBJECT,tab:CMCD_OBJECT,lab:CMCD_OBJECT,url:CMCD_OBJECT,pb:CMCD_REQUEST,bl:CMCD_REQUEST,tbl:CMCD_REQUEST,dl:CMCD_REQUEST,ltc:CMCD_REQUEST,mtp:CMCD_REQUEST,nor:CMCD_REQUEST,nrr:CMCD_REQUEST,rc:CMCD_REQUEST,sn:CMCD_REQUEST,sta:CMCD_REQUEST,su:CMCD_REQUEST,ttfb:CMCD_REQUEST,ttfbb:CMCD_REQUEST,ttlb:CMCD_REQUEST,cmsdd:CMCD_REQUEST,cmsds:CMCD_REQUEST,smrt:CMCD_REQUEST,df:CMCD_REQUEST,cs:CMCD_REQUEST,ts:CMCD_REQUEST,cid:CMCD_SESSION,pr:CMCD_SESSION,sf:CMCD_SESSION,sid:CMCD_SESSION,st:CMCD_SESSION,v:CMCD_SESSION,msd:CMCD_SESSION,bs:CMCD_STATUS,bsd:CMCD_STATUS,cdn:CMCD_STATUS,rtp:CMCD_STATUS,bg:CMCD_STATUS,pt:CMCD_STATUS,ec:CMCD_STATUS,e:CMCD_STATUS},CmcdHeaderField={REQUEST:CMCD_REQUEST};function createHeaderMap(i){return Object.keys(i).reduce((e,t)=>{var r;return(r=i[t])===null||r===void 0||r.forEach(s=>e[s]=t),e},{})}function groupCmcdHeaders(i,e){const t={};if(!i)return t;const r=Object.keys(i),s=e?createHeaderMap(e):{};return r.reduce((n,a)=>{var l;const u=CMCD_HEADER_MAP[a]||s[a]||CmcdHeaderField.REQUEST,c=(l=n[u])!==null&&l!==void 0?l:n[u]={};return c[a]=i[a],n},t)}function isTokenField(i){return["ot","sf","st","e","sta"].includes(i)}function isValid(i){return typeof i=="number"?isFiniteNumber(i):i!=null&&i!==""&&i!==!1}const CMCD_EVENT_MODE="event";function urlToRelativePath(i,e){const t=new URL(i),r=new URL(e);if(t.origin!==r.origin)return i;const s=t.pathname.split("/").slice(1),n=r.pathname.split("/").slice(1,-1);for(;s[0]===n[0];)s.shift(),n.shift();for(;n.length;)n.shift(),s.unshift("..");return s.join("/")+t.search+t.hash}const toRounded=i=>Math.round(i),toUrlSafe=(i,e)=>Array.isArray(i)?i.map(t=>toUrlSafe(t,e)):i instanceof SfItem&&typeof i.value=="string"?new SfItem(toUrlSafe(i.value,e),i.params):(e.baseUrl&&(i=urlToRelativePath(i,e.baseUrl)),e.version===1?encodeURIComponent(i):i),toHundred=i=>toRounded(i/100)*100,nor=(i,e)=>{let t=i;return e.version>=2&&(i instanceof SfItem&&typeof i.value=="string"?t=new SfItem([i]):typeof i=="string"&&(t=[i])),toUrlSafe(t,e)},CMCD_FORMATTER_MAP={br:toRounded,d:toRounded,bl:toHundred,dl:toHundred,mtp:toHundred,nor,rtp:toHundred,tb:toRounded},CMCD_REQUEST_MODE="request",CMCD_RESPONSE_MODE="response",CMCD_COMMON_KEYS=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],CMCD_EVENT_KEYS=["e"],CUSTOM_KEY_REGEX=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function isCmcdCustomKey(i){return CUSTOM_KEY_REGEX.test(i)}function isCmcdEventKey(i){return CMCD_COMMON_KEYS.includes(i)||CMCD_EVENT_KEYS.includes(i)||isCmcdCustomKey(i)}const CMCD_REQUEST_KEYS=["d","dl","nor","ot","rtp","su"];function isCmcdRequestKey(i){return CMCD_COMMON_KEYS.includes(i)||CMCD_REQUEST_KEYS.includes(i)||isCmcdCustomKey(i)}const CMCD_RESPONSE_KEYS=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function isCmcdResponseKey(i){return CMCD_COMMON_KEYS.includes(i)||CMCD_REQUEST_KEYS.includes(i)||CMCD_RESPONSE_KEYS.includes(i)||isCmcdCustomKey(i)}const CMCD_V1_KEYS=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function isCmcdV1Key(i){return CMCD_V1_KEYS.includes(i)||isCmcdCustomKey(i)}const filterMap={[CMCD_RESPONSE_MODE]:isCmcdResponseKey,[CMCD_EVENT_MODE]:isCmcdEventKey,[CMCD_REQUEST_MODE]:isCmcdRequestKey};function prepareCmcdData(i,e={}){const t={};if(i==null||typeof i!="object")return t;const r=e.version||i.v||1,s=e.reportingMode||CMCD_REQUEST_MODE,n=r===1?isCmcdV1Key:filterMap[s];let a=Object.keys(i).filter(n);const l=e.filter;typeof l=="function"&&(a=a.filter(l));const u=s===CMCD_RESPONSE_MODE||s===CMCD_EVENT_MODE;u&&!a.includes("ts")&&a.push("ts"),r>1&&!a.includes("v")&&a.push("v");const c=_extends$1({},CMCD_FORMATTER_MAP,e.formatters),p={version:r,reportingMode:s,baseUrl:e.baseUrl};return a.sort().forEach(b=>{let P=i[b];const N=c[b];if(typeof N=="function"&&(P=N(P,p)),b==="v"){if(r===1)return;P=r}b=="pr"&&P===1||(u&&b==="ts"&&!isFiniteNumber(P)&&(P=Date.now()),isValid(P)&&(isTokenField(b)&&typeof P=="string"&&(P=new SfToken(P)),t[b]=P))}),t}function toCmcdHeaders(i,e={}){const t={};if(!i)return t;const r=prepareCmcdData(i,e),s=groupCmcdHeaders(r,e?.customHeaderMap);return Object.entries(s).reduce((n,[a,l])=>{const u=encodeSfDict(l,{whitespace:!1});return u&&(n[a]=u),n},t)}function appendCmcdHeaders(i,e,t){return _extends$1(i,toCmcdHeaders(e,t))}const CMCD_PARAM="CMCD";function encodeCmcd(i,e={}){return i?encodeSfDict(prepareCmcdData(i,e),{whitespace:!1}):""}function toCmcdUrl(i,e={}){if(!i)return"";const t=encodeCmcd(i,e);return encodeURIComponent(t)}function toCmcdQuery(i,e={}){if(!i)return"";const t=toCmcdUrl(i,e);return`${CMCD_PARAM}=${t}`}const REGEX=/CMCD=[^&#]+/;function appendCmcdQuery(i,e,t){const r=toCmcdQuery(e,t);if(!r)return i;if(REGEX.test(i))return i.replace(REGEX,r);const s=i.includes("?")?"&":"?";return`${i}${s}${r}`}class CMCDController{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:CmcdObjectType.MANIFEST,su:!this.initialized})}catch(n){this.hls.logger.warn("Could not generate manifest CMCD data.",n)}},this.applyFragmentData=s=>{try{const{frag:n,part:a}=s,l=this.hls.levels[n.level],u=this.getObjectType(n),c={d:(a||n).duration*1e3,ot:u};(u===CmcdObjectType.VIDEO||u===CmcdObjectType.AUDIO||u==CmcdObjectType.MUXED)&&(c.br=l.bitrate/1e3,c.tb=this.getTopBandwidth(u)/1e3,c.bl=this.getBufferLength(u));const p=a?this.getNextPart(a):this.getNextFrag(n);p!=null&&p.url&&p.url!==n.url&&(c.nor=p.url),this.apply(s,c)}catch(n){this.hls.logger.warn("Could not generate segment CMCD data.",n)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;r!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Events.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Events.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,s;this.audioBuffer=(r=t.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(s=t.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:CmcdStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){_extends$1(t,this.createData());const r=t.ot===CmcdObjectType.INIT||t.ot===CmcdObjectType.VIDEO||t.ot===CmcdObjectType.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((a,l)=>(s.includes(l)&&(a[l]=t[l]),a),{}));const n={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),appendCmcdHeaders(e.headers,t,n)):e.url=appendCmcdQuery(e.url,t,n)}getNextFrag(e){var t;const r=(t=this.hls.levels[e.level])==null?void 0:t.details;if(r){const s=e.sn-r.startSN;return r.fragments[s+1]}}getNextPart(e){var t;const{index:r,fragment:s}=e,n=(t=this.hls.levels[s.level])==null||(t=t.details)==null?void 0:t.partList;if(n){const{sn:a}=s;for(let l=n.length-1;l>=0;l--){const u=n[l];if(u.index===r&&u.fragment.sn===a)return n[l+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return CmcdObjectType.TIMED_TEXT;if(e.sn==="initSegment")return CmcdObjectType.INIT;if(t==="audio")return CmcdObjectType.AUDIO;if(t==="main")return this.hls.audioTracks.length?CmcdObjectType.VIDEO:CmcdObjectType.MUXED}getTopBandwidth(e){let t=0,r;const s=this.hls;if(e===CmcdObjectType.AUDIO)r=s.audioTracks;else{const n=s.maxAutoLevel,a=n>-1?n+1:s.levels.length;r=s.levels.slice(0,a)}return r.forEach(n=>{n.bitrate>t&&(t=n.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,r=e===CmcdObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!t?NaN:BufferHelper.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(n){this.loader=void 0,this.loader=new r(n)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(n,a,l){t(n),this.loader.load(n,a,l)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(n){this.loader=void 0,this.loader=new r(n)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(n,a,l){t(n),this.loader.load(n,a,l)}}}}const PATHWAY_PENALTY_DURATION_MS=3e5;class ContentSteeringController extends Logger{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if(r?.action===NetworkErrorAction.SendAlternateToPenaltyBox&&r.flags===ErrorActionFlags.MoveAllAlternatesMatchingHost){const s=this.levels;let n=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:l,pathwayId:u,type:c}=t.context;l&&s?a=this.getPathwayForGroupId(l,c,a):u&&(a=u)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!n&&s&&(n=this.pathways()),n&&n.length>1&&(this.updatePathwayPriority(n),r.resolved=this.pathwayId!==a),t.details===ErrorDetails.BUFFER_APPEND_ERROR&&!t.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${s&&s.length} priorities: ${stringify(n)} penalized: ${stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const r=this.penalizedPathways,s=performance.now();Object.keys(r).forEach(n=>{s-r[n]>PATHWAY_PENALTY_DURATION_MS&&delete r[n]});for(let n=0;n<e.length;n++){const a=e[n];if(a in r)continue;if(a===this.pathwayId)return;const l=this.hls.nextLoadLevel,u=this.hls.levels[l];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,reassignFragmentLevelIndexes(t),this.hls.trigger(Events.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[l];u&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=l);break}}}getPathwayForGroupId(e,t,r){const s=this.getLevelsForPathway(r).concat(this.levels||[]);for(let n=0;n<s.length;n++)if(t===PlaylistContextType.AUDIO_TRACK&&s[n].hasAudioGroup(e)||t===PlaylistContextType.SUBTITLE_TRACK&&s[n].hasSubtitleGroup(e))return s[n].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},s={};e.forEach(n=>{const{ID:a,"BASE-ID":l,"URI-REPLACEMENT":u}=n;if(t.some(p=>p.pathwayId===a))return;const c=this.getLevelsForPathway(l).map(p=>{const b=new AttrList(p.attrs);b["PATHWAY-ID"]=a;const P=b.AUDIO&&`${b.AUDIO}_clone_${a}`,N=b.SUBTITLES&&`${b.SUBTITLES}_clone_${a}`;P&&(r[b.AUDIO]=P,b.AUDIO=P),N&&(s[b.SUBTITLES]=N,b.SUBTITLES=N);const de=performUriReplacement(p.uri,b["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),me=new Level({attrs:b,audioCodec:p.audioCodec,bitrate:p.bitrate,height:p.height,name:p.name,url:de,videoCodec:p.videoCodec,width:p.width});if(p.audioGroups)for(let Ye=1;Ye<p.audioGroups.length;Ye++)me.addGroupId("audio",`${p.audioGroups[Ye]}_clone_${a}`);if(p.subtitleGroups)for(let Ye=1;Ye<p.subtitleGroups.length;Ye++)me.addGroupId("text",`${p.subtitleGroups[Ye]}_clone_${a}`);return me});t.push(...c),cloneRenditionGroups(this.audioTracks,r,u,a),cloneRenditionGroups(this.subtitleTracks,s,u,a)})}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;this.loader&&this.loader.destroy(),this.loader=new r(t);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const p=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+p)}const n={responseType:"json",url:s.href},a=t.steeringManifestLoadPolicy.default,l=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},c={onSuccess:(p,b,P,N)=>{this.log(`Loaded steering manifest: "${s}"`);const de=p.data;if(de?.VERSION!==1){this.log(`Steering VERSION ${de.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=de.TTL;const{"RELOAD-URI":me,"PATHWAY-CLONES":Ye,"PATHWAY-PRIORITY":Le}=de;if(me)try{this.uri=new self.URL(me,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${me}`);return}this.scheduleRefresh(this.uri||P.url),Ye&&this.clonePathways(Ye);const tt={steeringManifest:de,url:s.toString()};this.hls.trigger(Events.STEERING_MANIFEST_LOADED,tt),Le&&this.updatePathwayPriority(Le)},onError:(p,b,P,N)=>{if(this.log(`Error loading steering manifest: ${p.code} ${p.text} (${b.url})`),this.stopLoad(),p.code===410){this.enabled=!1,this.log(`Steering manifest ${b.url} no longer available`);return}let de=this.timeToLoad*1e3;if(p.code===429){const me=this.loader;if(typeof me?.getResponseHeader=="function"){const Ye=me.getResponseHeader("Retry-After");Ye&&(de=parseFloat(Ye)*1e3)}this.log(`Steering manifest ${b.url} rate limited`);return}this.scheduleRefresh(this.uri||b.url,de)},onTimeout:(p,b,P)=>{this.log(`Timeout loading steering manifest (${b.url})`),this.scheduleRefresh(this.uri||b.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(n,u,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const s=(r=this.hls)==null?void 0:r.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function cloneRenditionGroups(i,e,t,r){i&&Object.keys(e).forEach(s=>{const n=i.filter(a=>a.groupId===s).map(a=>{const l=_extends$1({},a);return l.details=void 0,l.attrs=new AttrList(l.attrs),l.url=l.attrs.URI=performUriReplacement(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),l.groupId=l.attrs["GROUP-ID"]=e[s],l.attrs["PATHWAY-ID"]=r,l});i.push(...n)})}function performUriReplacement(i,e,t,r){const{HOST:s,PARAMS:n,[t]:a}=r;let l;e&&(l=a?.[e],l&&(i=l));const u=new self.URL(i);return s&&!l&&(u.host=s),n&&Object.keys(n).sort().forEach(c=>{c&&u.searchParams.set(c,n[c])}),u.href}class EMEController extends Logger{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=EMEController.CDMCleanupPromise?[EMEController.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:r,initData:s}=t,n=`"${t.type}" event: init data type: "${r}"`;if(this.debug(n),s!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=getKeySystemsForConfig(this.config));const l=a.map(keySystemDomainToKeySystemFormat).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(l)}this.keyFormatPromise.then(a=>{const l=keySystemFormatToKeySystemDomain(a);if(r!=="sinf"||l!==KeySystems.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${r}" for selected key-system ${l}`);return}let u;try{const N=bin2str(new Uint8Array(s)),de=base64Decode(JSON.parse(N).sinf),me=parseSinf(de);if(!me)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(me.subarray(8,24))}catch(N){this.warn(`${n} Failed to parse sinf: ${N}`);return}const c=arrayToHex(u),{keyIdToKeySessionPromise:p,mediaKeySessions:b}=this;let P=p[c];for(let N=0;N<b.length;N++){const de=b[N],me=de.decryptdata;if(!me.keyId)continue;const Ye=arrayToHex(me.keyId);if(c===Ye||me.uri.replace(/-/g,"").indexOf(c)!==-1){if(P=p[Ye],!P)continue;if(me.pssh)break;delete p[Ye],me.pssh=new Uint8Array(s),me.keyId=u,P=p[c]=P.then(()=>this.generateRequestWithPreferredKeySession(de,r,s,"encrypted-event-key-match")),P.catch(Le=>this.handleError(Le));break}}P||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${b.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Events.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Events.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,s=t?.[e];if(s)return s.licenseUrl;if(e===KeySystems.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t?.[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(a,l,u)=>!!a&&u.indexOf(a)===l,s=t.map(a=>a.audioCodec).filter(r),n=t.map(a=>a.videoCodec).filter(r);return s.length+n.length===0&&n.push("avc1.42e01e"),new Promise((a,l)=>{const u=c=>{const p=c.shift();this.getMediaKeysPromise(p,s,n).then(b=>a({keySystem:p,mediaKeys:b})).catch(b=>{c.length?u(c):b instanceof EMEKeyError?l(b):l(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:b,fatal:!0},b.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${r}`;return requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return r(e,t)}getMediaKeysPromise(e,t,r){var s;const n=getSupportedMediaKeySystemConfigurations(e,t,r,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],l=(s=a)==null?void 0:s.keySystemAccess;if(!l){this.log(`Requesting encrypted media "${e}" key-system access with config: ${stringify(n)}`),l=this.requestMediaKeySystemAccess(e,n);const u=a=this.keySystemAccessPromises[e]={keySystemAccess:l};return l.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),l.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const p=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const b=u.mediaKeys=c.createMediaKeys().then(P=>(this.log(`Media-keys created for "${e}"`),u.hasMediaKeys=!0,p.then(N=>N?this.setMediaKeysServerCertificate(P,e,N):P)));return b.catch(P=>{this.error(`Failed to create media-keys for "${e}"}: ${P}`)}),b})}return l.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${arrayToHex(e.keyId||[])}`);const s=r.createSession(),n={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(n),n}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),s=this.getKeyIdString(t),n="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(r,n,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return arrayToHex(e.keyId)}updateKeySession(e,t){const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyId ${arrayToHex(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>keySystemDomainToKeySystemFormat(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:r})=>this.attemptSetMediaKeys(t,r))}selectKeySystem(e){return new Promise((t,r)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:s})=>{const n=keySystemDomainToKeySystemFormat(s);n?t(n):r(new Error(`Unable to find format for key-system "${s}"`))}).catch(r)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=getKeySystemsForConfig(this.config),r=e.map(keySystemFormatToKeySystemDomain).filter(s=>!!s&&t.indexOf(s)!==-1);return this.selectKeySystem(r)}loadKey(e){const t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),s=this.bannedKeyIds[r];if(s){const l=getKeyStatusError(s,t);return this.handleError(l,e.frag),Promise.reject(l)}const n=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${n}`);const a=this.keyIdToKeySessionPromise[r];if(!a){const l=this.getKeySystemForKeyPromise(t).then(({keySystem:u,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${n}`),this.attemptSetMediaKeys(u,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:c,decryptdata:t}))))).then(u=>{const c="cenc",p=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,c,p,"playlist-key")});return l.catch(u=>this.handleError(u,e.frag)),this.keyIdToKeySessionPromise[r]=l,l}return a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){this.hls&&(this.error(e.message),e instanceof EMEKeyError?(t&&(e.data.frag=t),this.hls.trigger(Events.ERROR,e.data)):this.hls.trigger(Events.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){const s=keySystemFormatToKeySystemDomain(e.keyFormat),n=s?[s]:getKeySystemsForConfig(this.config);return this.attemptKeySystemAccess(n)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=getKeySystemsForConfig(this.config)),e.length===0)throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(n=>r.indexOf(n)===-1)})}generateRequestWithPreferredKeySession(e,t,r,s){var n;const a=(n=this.config.drmSystems)==null||(n=n[e.keySystem])==null?void 0:n.generateRequest;if(a)try{const P=a.call(this.hls,t,r,e);if(!P)throw new Error("Invalid response from configured generateRequest filter");t=P.initDataType,r=P.initData?P.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(P){if(this.warn(P.message),this.hls&&this.hls.config.debug)throw P}if(r===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${t} length: ${r.byteLength})`);const u=new EventEmitter,c=e._onmessage=P=>{const N=e.mediaKeysSession;if(!N){u.emit("error",new Error("invalid state"));return}const{messageType:de,message:me}=P;this.log(`"${de}" message event for session "${N.sessionId}" message size: ${me.byteLength}`),de==="license-request"||de==="license-renewal"?this.renewLicense(e,me).catch(Ye=>{u.eventNames().length?u.emit("error",Ye):this.handleError(Ye)}):de==="license-release"?e.keySystem===KeySystems.FAIRPLAY&&(this.updateKeySession(e,strToUtf8array("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${de}"`)},p=e._onkeystatuseschange=P=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}const de=e.keyStatus;this.onKeyStatusChange(e);const me=e.keyStatus;me!==de&&(u.emit("keyStatus",me,e),me==="expired"&&(this.log(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e)))};addEventListener(e.mediaKeysSession,"message",c),addEventListener(e.mediaKeysSession,"keystatuseschange",p);const b=new Promise((P,N)=>{u.on("error",N),u.on("keyStatus",(de,{decryptdata:me})=>{de.startsWith("usable")?P():de==="internal-error"||de==="output-restricted"?N(getKeyStatusError(de,me)):de==="expired"?N(new Error(`key expired while generating request (keyId: ${l})`)):this.warn(`unhandled key status change "${de}" (keyId: ${l})`)})});return e.mediaKeysSession.generateRequest(t,r).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${l}`)}).catch(P=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_SESSION,error:P,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${P}`)}).then(()=>b).catch(P=>{throw u.removeAllListeners(),this.removeSession(e),P}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){const t=arrayToHex(new Uint8Array(e.decryptdata.keyId||[]));e.mediaKeysSession.keyStatuses.forEach((r,s)=>{if(typeof s=="string"&&typeof r=="object"){const l=s;s=r,r=l}const n=arrayToHex("buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s));r==="internal-error"&&(this.bannedKeyIds[n]=r);const a=n===t;this.log(`${a?"":"un"}matched key status change "${r}" for keyStatuses keyId: ${n} session keyId: ${t} uri: ${e.decryptdata.uri}`),a&&(e.keyStatus=r)})}fetchServerCertificate(e){const t=this.config,r=t.loader,s=new r(t),n=this.getServerCertificateUrl(e);return n?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,l)=>{const u={responseType:"arraybuffer",url:n},c=t.certLoadPolicy.default,p={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},b={onSuccess:(P,N,de,me)=>{a(P.data)},onError:(P,N,de,me)=>{l(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:de,response:_objectSpread2({url:u.url,data:void 0},P)},`"${e}" certificate request failed (${n}). Status: ${P.code} (${P.text})`))},onTimeout:(P,N,de)=>{l(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:de,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${n})`))},onAbort:(P,N,de)=>{l(new Error("aborted"))}};s.load(u,p,b)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((s,n)=>{e.setServerCertificate(r).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${r.byteLength}) on "${t}"`),s(e)}).catch(a=>{n(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(s=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:s,fatal:!1},s.message)}))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=new DOMParser().parseFromString(r,"application/xml"),n=s.querySelectorAll("HttpHeader");if(n.length>0){let p;for(let b=0,P=n.length;b<P;b++){var a,l;p=n[b];const N=(a=p.querySelector("name"))==null?void 0:a.textContent,de=(l=p.querySelector("value"))==null?void 0:l.textContent;N&&de&&e.setRequestHeader(N,de)}}const u=s.querySelector("Challenge"),c=u?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return strToUtf8array(atob(c))}setupLicenseXHR(e,t,r,s){const n=this.config.licenseXhrSetup;return n?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return n.call(this.hls,e,t,r,s)}).catch(a=>{if(!r.decryptdata)throw a;return e.open("POST",t,!0),n.call(this.hls,e,t,r,s)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||s})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise((s,n)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return n(new Error("invalid state"));if(l.readyState===4)if(l.status===200){this._requestLicenseFailureCount=0;let u=l.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const c=this.config.licenseResponseCallback;if(c)try{u=c.call(this.hls,l,a,e)}catch(p){this.error(p)}s(u)}else{const u=r.errorRetry,c=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||l.status>=400&&l.status<500)n(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:l,response:{url:a,data:void 0,code:l.status,text:l.statusText}},`License Request XHR failed (${a}). Status: ${l.status} (${l.statusText})`));else{const p=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${p} attempts left`),this.requestLicense(e,t).then(s,n)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=l,this.setupLicenseXHR(l,a,e,t).then(({xhr:u,licenseChallenge:c})=>{e.keySystem==KeySystems.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(u,c)),u.send(c)}).catch(n)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,addEventListener(r,"encrypted",this.onMediaEncrypted),addEventListener(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(removeEventListener(e,"encrypted",this.onMediaEncrypted),removeEventListener(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,LevelKey.clearKeyUriToKeyIdMap();const s=r.length;EMEController.CDMCleanupPromise=Promise.all(r.map(n=>this.removeSession(n)).concat(t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(n=>{this.log(`Could not clear media keys: ${n}`),this.hls&&this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${n}`)})}))).catch(n=>{this.log(`Could not close sessions and clear media keys: ${n}`),this.hls&&this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${n}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=t.reduce((s,n)=>(s.indexOf(n.keyFormat)===-1&&s.push(n.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r,decryptdata:s}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${arrayToHex(s?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const n=this.mediaKeySessions.indexOf(e);n>-1&&this.mediaKeySessions.splice(n,1);const{drmSystemOptions:a}=this.config;return(isPersistentSessionType(a)?new Promise((u,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(u).catch(c)}):Promise.resolve()).catch(u=>{this.log(`Could not remove session: ${u}`),this.hls&&this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>t.close()).catch(u=>{this.log(`Could not close session: ${u}`),this.hls&&this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}}}EMEController.CDMCleanupPromise=void 0;class EMEKeyError extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function getKeyStatusError(i,e){const t=i==="output-restricted",r=t?ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:r,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${i}"`)}class FPSController{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const s=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,r){const s=performance.now();if(t){if(this.lastTime){const n=s-this.lastTime,a=r-this.lastDroppedFrames,l=t-this.lastDecodedFrames,u=1e3*a/n,c=this.hls;if(c.trigger(Events.FPS_DROP,{currentDropped:a,currentDecoded:l,totalDroppedFrames:r}),u>0&&a>c.config.fpsDroppedMonitoringThreshold*l){let p=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+p),p>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=p)&&(p=p-1,c.trigger(Events.FPS_DROP_LEVEL_CAPPING,{level:p,droppedLevel:c.currentLevel}),c.autoLevelCapping=p,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function sendAddTrackEvent(i,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=i,e.dispatchEvent(t)}function addCueToTrack(i,e){const t=i.mode;if(t==="disabled"&&(i.mode="hidden"),i.cues&&!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){logger.debug(`[texttrack-utils]: ${r}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,i.addCue(s)}catch(s){logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}t==="disabled"&&(i.mode=t)}function clearCurrentCues(i,e){const t=i.mode;if(t==="disabled"&&(i.mode="hidden"),i.cues)for(let r=i.cues.length;r--;)e&&i.cues[r].removeEventListener("enter",e),i.removeCue(i.cues[r]);t==="disabled"&&(i.mode=t)}function removeCuesInRange(i,e,t,r){const s=i.mode;if(s==="disabled"&&(i.mode="hidden"),i.cues&&i.cues.length>0){const n=getCuesInRange(i.cues,e,t);for(let a=0;a<n.length;a++)(!r||r(n[a]))&&i.removeCue(n[a])}s==="disabled"&&(i.mode=s)}function getFirstCueIndexFromTime(i,e){if(e<=i[0].startTime)return 0;const t=i.length-1;if(e>i[t].endTime)return-1;let r=0,s=t,n;for(;r<=s;)if(n=Math.floor((s+r)/2),e<i[n].startTime)s=n-1;else if(e>i[n].startTime&&r<t)r=n+1;else return n;return i[r].startTime-e<e-i[s].startTime?r:s}function getCuesInRange(i,e,t){const r=[],s=getFirstCueIndexFromTime(i,e);if(s>-1)for(let n=s,a=i.length;n<a;n++){const l=i[n];if(l.startTime>=e&&l.endTime<=t)r.push(l);else if(l.startTime>t)return r}return r}function filterSubtitleTracks(i){const e=[];for(let t=0;t<i.length;t++){const r=i[t];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(i[t])}return e}class SubtitleTrackController extends BasePlaylistController{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const r=filterSubtitleTracks(this.media.textTracks);for(let n=0;n<r.length;n++)if(r[n].mode==="hidden")t=r[n];else if(r[n].mode==="showing"){t=r[n];break}const s=this.findTrackForTextTrack(t);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Events.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const r=this.media;if(!r)return;const s=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;filterSubtitleTracks(r.textTracks).forEach(a=>{clearCurrentCues(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:s,details:n}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==s){this.warn(`Subtitle track with id:${r} and group:${s} not found in active group ${a?.groupId}`);return}const l=a.details;a.details=t.details,this.log(`Subtitle track ${r} "${a.name}" lang:${a.lang} group:${s} loaded [${n.startSN}-${n.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,l)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,s=this.groupIds;let n=this.currentTrack;if(!r||s?.length!==r?.length||r!=null&&r.some(a=>s?.indexOf(a)===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(p=>!r||r.indexOf(p.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(p=>p.default)&&(this.selectDefaultTrack=!1),a.forEach((p,b)=>{p.id=b});else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.subtitlePreference;if(!n&&l){this.selectDefaultTrack=!1;const p=findMatchingOption(l,a);if(p>-1)n=a[p];else{const b=findMatchingOption(l,this.tracks);n=this.tracks[b]}}let u=this.findTrackId(n);u===-1&&n&&(u=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${r?.join(",")}" group-id`),this.hls.trigger(Events.SUBTITLE_TRACKS_UPDATED,c),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const n=t[s];if(!(r&&!n.default||!r&&!e)&&(!e||matchesOption(n,e)))return s}if(e){for(let s=0;s<t.length;s++){const n=t[s];if(mediaAttributesIdentical(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<t.length;s++){const n=t[s];if(mediaAttributesIdentical(e.attrs,n.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const s=t[r];if(subtitleTrackMatchesTextTrack(s,e))return r}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===PlaylistContextType.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&matchesOption(e,r))return r;const s=findMatchingOption(e,this.tracksInGroup);if(s>-1){const n=this.tracksInGroup[s];return this.setSubtitleTrack(s),n}else{if(r)return null;{const n=findMatchingOption(e,t);if(n>-1)return t[n]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,s=e.groupId,n=this.getUrlWithDirectives(e.url,t),a=e.details,l=a?.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(Events.SUBTITLE_TRACK_LOADING,{url:n,id:r,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=filterSubtitleTracks(e.textTracks),r=this.currentTrack;let s;if(r&&(s=t.filter(n=>subtitleTrackMatchesTextTrack(r,n))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach(n=>{n.mode!=="disabled"&&n!==s&&(n.mode="disabled")}),s){const n=this.subtitleDisplay?"showing":"hidden";s.mode!==n&&(s.mode=n)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!isFiniteNumber(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:e});return}const n=!!s.details&&!s.details.live;if(e===this.trackId&&s===r&&n)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:a,groupId:l="",name:u,type:c,url:p}=s;this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:a,groupId:l,name:u,type:c,url:p});const b=this.switchParams(s.url,r?.details,s.details);this.loadPlaylist(b)}}function uuid(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?n:n&3|8).toString(16)})}}}function hash(i){let e=5381,t=i.length;for(;t;)e=e*33^i.charCodeAt(--t);return(e>>>0).toString()}const ALIGNED_END_THRESHOLD_SECONDS=.025;let TimelineOccupancy=function(i){return i[i.Point=0]="Point",i[i.Range=1]="Range",i}({});function generateAssetIdentifier(i,e,t){return`${i.identifier}-${t+1}-${hash(e)}`}class InterstitialEvent{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return getSnapToFragmentTime(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,r=getSnapToFragmentTime(t,e);return t-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=isFiniteNumber(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return getSnapToFragmentTime(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ALIGNED_END_THRESHOLD_SECONDS))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?TimelineOccupancy.Range:TimelineOccupancy.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return eventToString(this)}}function getSnapToFragmentTime(i,e){return i-e.start<e.duration/2&&!(Math.abs(i-(e.start+e.duration))<ALIGNED_END_THRESHOLD_SECONDS)?e.start:e.start+e.duration}function getInterstitialUrl(i,e,t){const r=new self.URL(i,t);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function getNextAssetIndex(i,e){for(;(t=i.assetList[++e])!=null&&t.error;)var t;return e}function eventToString(i){return`["${i.identifier}" ${i.cue.pre?"<pre>":i.cue.post?"<post>":""}${i.timelineStart.toFixed(2)}-${i.resumeTime.toFixed(2)}]`}function eventAssetToString(i){const e=i.timelineStart,t=i.duration||0;return`["${i.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class HlsAssetPlayer{constructor(e,t,r,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(Events.PLAYOUT_LIMIT_REACHED,{})};const n=this.hls=new e(t);this.interstitial=r,this.assetItem=s;const a=()=>{this.hasDetails=!0};n.once(Events.LEVEL_LOADED,a),n.once(Events.AUDIO_TRACK_LOADED,a),n.once(Events.SUBTITLE_TRACK_LOADED,a),n.on(Events.MEDIA_ATTACHING,(l,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&n.on(Events.BUFFER_APPENDED,()=>{const p=this.bufferedEnd;this.reachedPlayout(p)&&(this._bufferedEosTime=p,n.trigger(Events.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=getInterstitialUrl(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const r=Math.min(this._bufferedEosTime||1/0,this.duration),s=this.timelineOffset,n=BufferHelper.bufferInfo(e,s,0);return this.getAssetTime(n.end)>=r-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=BufferHelper.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const r=t-this.startOffset;if(r>0&&r<e)return r}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const r=e-t;if(Math.abs(r)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=r=>delete r.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,r){var s;(s=this.hls)==null||s.on(e,t)}once(e,t,r){var s;(s=this.hls)==null||s.once(e,t)}off(e,t,r){var s;(s=this.hls)==null||s.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${eventAssetToString(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const ABUTTING_THRESHOLD_SECONDS=.033;class InterstitialsSchedule extends Logger{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((r,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[r]||(t===void 0&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&(n=s[r])!=null&&n.event;){var n;r--}return r}findItemIndexAtTime(e,t){const r=this.items;if(r)for(let s=0;s<r.length;s++){let n=r[s];if(t&&t!=="primary"&&(n=n[t]),e===n.start||e>n.start&&e<n.end)return s}return-1}findJumpRestrictedIndex(e,t){const r=this.items;if(r)for(let s=e;s<=t&&r[s];s++){const n=r[s].event;if(n!=null&&n.restrictions.jump&&!n.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var r;if(((r=t[s].event)==null?void 0:r.identifier)===e)return s}return-1}findAssetIndex(e,t){const r=e.assetList,s=r.length;if(s>1)for(let n=0;n<s;n++){const a=r[n];if(!a.error){const l=a.timelineStart;if(t===l||t>l&&(t<l+(a.duration||0)||n===s-1))return n}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const r=t.assetList,s=r[r.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,t){const r=e.main.details,{dateRanges:s}=r,n=this.events,a=this.parseDateRanges(s,{url:r.url},t),l=Object.keys(s),u=n?n.filter(c=>!l.includes(c.identifier)):[];a.length&&a.sort((c,p)=>{const b=c.cue.pre,P=c.cue.post,N=p.cue.pre,de=p.cue.post;if(b&&!N)return-1;if(N&&!b||P&&!de)return 1;if(de&&!P)return-1;if(!b&&!N&&!P&&!de){const me=c.startTime,Ye=p.startTime;if(me!==Ye)return me-Ye}return c.dateRange.tagOrder-p.dateRange.tagOrder}),this.events=a,u.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,u)}updateSchedule(e,t=[],r=!1){const s=this.events||[];if(s.length||t.length||this.length<2){const n=this.items,a=this.parseSchedule(s,e);(r||t.length||n?.length!==a.length||a.some((u,c)=>Math.abs(u.playout.start-n[c].playout.start)>.005||Math.abs(u.playout.end-n[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,n))}}parseDateRanges(e,t,r){const s=[],n=Object.keys(e);for(let a=0;a<n.length;a++){const l=n[a],u=e[l];if(u.isInterstitial){let c=this.eventMap[l];c?c.setDateRange(u):(c=new InterstitialEvent(u,t),this.eventMap[l]=c,r===!1&&(c.appendInPlace=r)),s.push(c)}}return s}parseSchedule(e,t){const r=[],s=t.main.details,n=s.live?1/0:s.edge;let a=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,t);let u=0,c=0;if(e.forEach((p,b)=>{const P=p.cue.pre,N=p.cue.post,de=e[b-1]||null,me=p.appendInPlace,Ye=N?n:p.startOffset,Le=p.duration,tt=p.timelineOccupancy===TimelineOccupancy.Range?Le:0,Be=p.resumptionOffset,nt=de?.startTime===Ye,ft=Ye+p.cumulativeDuration;let mt=me?ft+Le:Ye+Be;if(P||!N&&Ye<=0){const Et=c;c+=tt,p.timelineStart=ft;const St=a;a+=Le,r.push({event:p,start:ft,end:mt,playout:{start:St,end:a},integrated:{start:Et,end:c}})}else if(Ye<=n){if(!nt){const bt=Ye-u;if(bt>ABUTTING_THRESHOLD_SECONDS){const Pt=u,Rt=c;c+=bt;const Dt=a;a+=bt;const kt={previousEvent:e[b-1]||null,nextEvent:p,start:Pt,end:Pt+bt,playout:{start:Dt,end:a},integrated:{start:Rt,end:c}};r.push(kt)}else bt>0&&de&&(de.cumulativeDuration+=bt,r[r.length-1].end=Ye)}N&&(mt=ft),p.timelineStart=ft;const Et=c;c+=tt;const St=a;a+=Le,r.push({event:p,start:ft,end:mt,playout:{start:St,end:a},integrated:{start:Et,end:c}})}else return;const ht=p.resumeTime;N||ht>n?u=n:u=ht}),u<n){var l;const p=u,b=c,P=n-u;c+=P;const N=a;a+=P,r.push({previousEvent:((l=r[r.length-1])==null?void 0:l.event)||null,nextEvent:null,start:u,end:p+P,playout:{start:N,end:a},integrated:{start:b,end:c}})}this.setDurations(n,a,c)}else r.push({previousEvent:null,nextEvent:null,start:0,end:n,playout:{start:0,end:n},integrated:{start:0,end:n}}),this.setDurations(n,n,n);return r}setDurations(e,t,r){this.durations={primary:e,playout:t,integrated:r}}resolveOffsets(e,t){const r=t.main.details,s=r.live?1/0:r.edge;let n=0,a=-1;e.forEach((l,u)=>{const c=l.cue.pre,p=l.cue.post,b=c?0:p?s:l.startTime;this.updateAssetDurations(l),a===b?l.cumulativeDuration=n:(n=0,a=b),!p&&l.snapOptions.in&&(l.resumeAnchor=findFragmentByPTS(null,r.fragments,l.startOffset+l.resumptionOffset,0,0)||void 0),l.appendInPlace&&!l.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(l,t)||(l.appendInPlace=!1)),!l.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<ABUTTING_THRESHOLD_SECONDS&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${l}`));const N=isFiniteNumber(l.resumeOffset)?l.resumeOffset:l.duration;n+=N})}primaryCanResumeInPlaceAt(e,t){const r=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(r-s)>ALIGNED_END_THRESHOLD_SECONDS?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${s}`),!1):!Object.keys(t).some(a=>{const l=t[a].details,u=l.edge;if(r>=u)return this.log(`"${e.identifier}" resumption ${r} past ${a} playlist end ${u}`),!1;const c=findFragmentByPTS(null,l.fragments,r);if(!c)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${a} playlist (${l.fragStart}-${l.fragmentEnd})`),!0;const p=a==="audio"?.175:0;return Math.abs(c.start-r)<ALIGNED_END_THRESHOLD_SECONDS+p||Math.abs(c.end-r)<ALIGNED_END_THRESHOLD_SECONDS+p?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let r=0,s=!1,n=!1;for(let a=0;a<e.assetList.length;a++){const l=e.assetList[a],u=t+r;l.startOffset=r,l.timelineStart=u,s||(s=l.duration===null),n||(n=!!l.error);const c=l.error?0:l.duration||0;r+=c}s&&!n?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function segmentToString(i){return`[${i.event?'"'+i.event.identifier+'"':"primary"}: ${i.start.toFixed(2)}-${i.end.toFixed(2)}]`}class AssetListLoader{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const r=e.assetListUrl;let s;try{s=getInterstitialUrl(r,this.hls.sessionId,e.baseUrl)}catch(P){const N=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_LOAD_ERROR,P,r);this.hls.trigger(Events.ERROR,N);return}t&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+t);const n=this.hls.config,a=n.loader,l=new a(n),u={responseType:"json",url:s.href},c=n.interstitialAssetListLoadPolicy.default,p={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},b={onSuccess:(P,N,de,me)=>{const Ye=P.data,Le=Ye?.ASSETS;if(!Array.isArray(Le)){const tt=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),de.url,N,me);this.hls.trigger(Events.ERROR,tt);return}e.assetListResponse=Ye,this.hls.trigger(Events.ASSET_LIST_LOADED,{event:e,assetListResponse:Ye,networkDetails:me})},onError:(P,N,de,me)=>{const Ye=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${P.code} ${P.text} (${N.url})`),N.url,me,de);this.hls.trigger(Events.ERROR,Ye)},onTimeout:(P,N,de)=>{const me=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${N.url})`),N.url,P,de);this.hls.trigger(Events.ERROR,me)}};return l.load(u,p,b),this.hls.trigger(Events.ASSET_LIST_LOADING,{event:e}),l}assignAssetListError(e,t,r,s,n,a){return e.error=r,{type:ErrorTypes.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:r,networkDetails:a,stats:n}}}function playWithCatch(i){i?.play().catch(()=>{})}function timelineMessage(i,e){return`[${i}] Advancing timeline position to ${e}`}class InterstitialsController extends Logger{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled||!this.schedule)return;const s=r-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const a=s<=-.01;this.timelinePos=r,this.bufferedPos=r;const l=this.playingItem;if(!l){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(r,r-s)&&this.updateSchedule(!0),this.checkBuffer(),a&&r<l.start||r>=l.end){var u;const N=this.findItemIndex(l);let de=this.schedule.findItemIndexAtTime(r);if(de===-1&&(de=N+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${r} (resolving from ${N} to ${de})`)),!this.isInterstitial(l)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!a&&de>N){const me=this.schedule.findJumpRestrictedIndex(N+1,de);if(me>N){this.setSchedulePosition(me);return}}this.setSchedulePosition(de);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(l)){const N=l.event.assetList[0];N&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,N))}return}const p=c.timelineStart,b=c.duration||0;if(a&&r<p||r>=p+b){var P;(P=l.event)!=null&&P.appendInPlace&&(this.clearInterstitial(l.event,l),this.flushFrontBuffer(r)),this.setScheduleToAssetAtTime(r,c)}},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(r>=s.end){this.timelinePos=s.end;const l=this.findItemIndex(s);this.setSchedulePosition(l+1)}const n=this.playingAsset;if(!n)return;const a=n.timelineStart+(n.duration||0);r>=a&&this.setScheduleToAssetAtTime(r,n)},this.onScheduleUpdate=(r,s)=>{const n=this.schedule;if(!n)return;const a=this.playingItem,l=n.events||[],u=n.items||[],c=n.durations,p=r.map(me=>me.identifier),b=!!(l.length||p.length);(b||s)&&this.log(`INTERSTITIALS_UPDATED (${l.length}): ${l}
Schedule: ${u.map(me=>segmentToString(me))} pos: ${this.timelinePos}`),p.length&&this.log(`Removed events ${p}`);let P=null,N=null;a&&(P=this.updateItem(a,this.timelinePos),this.itemsMatch(a,P)?this.playingItem=P:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const de=this.bufferingItem;if(de&&(N=this.updateItem(de,this.bufferedPos),this.itemsMatch(de,N)?this.bufferingItem=N:de.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(de.event,null))),r.forEach(me=>{me.assetList.forEach(Ye=>{this.clearAssetPlayer(Ye.identifier,null)})}),this.playerQueue.forEach(me=>{if(me.interstitial.appendInPlace){const Ye=me.assetItem.timelineStart,Le=me.timelineOffset-Ye;if(Le)try{me.timelineOffset=Ye}catch(tt){Math.abs(Le)>ALIGNED_END_THRESHOLD_SECONDS&&this.warn(`${tt} ("${me.assetId}" ${me.timelineOffset}->${Ye})`)}}}),b||s){if(this.hls.trigger(Events.INTERSTITIALS_UPDATED,{events:l.slice(0),schedule:u.slice(0),durations:c,removedIds:p}),this.isInterstitial(a)&&p.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(P,a),de&&N!==P&&this.trimInPlace(N,de),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new AssetListLoader(e),this.schedule=new InterstitialsSchedule(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Events.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Events.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Events.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Events.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Events.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Events.MEDIA_ENDED,this.onMediaEnded,this),e.on(Events.ERROR,this.onError,this),e.on(Events.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Events.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Events.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Events.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Events.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Events.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Events.MEDIA_ENDED,this.onMediaEnded,this),e.off(Events.ERROR,this.onError,this),e.off(Events.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){removeEventListener(e,"play",this.onPlay),removeEventListener(e,"pause",this.onPause),removeEventListener(e,"seeking",this.onSeeking),removeEventListener(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const r=this.media=t.media;addEventListener(r,"seeking",this.onSeeking),addEventListener(r,"timeupdate",this.onTimeupdate),addEventListener(r,"play",this.onPlay),addEventListener(r,"pause",this.onPause)}onMediaAttached(e,t){const r=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!s){this.clearScheduleState();const n=this.findItemIndex(r);this.setSchedulePosition(n)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const r=!!t.transferMedia,s=this.media;if(this.media=null,!r&&(s&&this.removeMediaListeners(s),this.detachedData)){const n=this.getBufferingPlayer();n&&(this.log(`Removing schedule state for detachedData and ${n}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,n.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,r=b=>b&&e.getAssetPlayer(b.identifier),s=(b,P,N,de,me)=>{if(b){let Ye=b[P].start;const Le=b.event;if(Le){if(P==="playout"||Le.timelineOccupancy!==TimelineOccupancy.Point){const tt=r(N);tt?.interstitial===Le&&(Ye+=tt.assetItem.startOffset+tt[me])}}else{const tt=de==="bufferedPos"?a():e[de];Ye+=tt-b.start}return Ye}return 0},n=(b,P)=>{var N;if(b!==0&&P!=="primary"&&(N=e.schedule)!=null&&N.length){var de;const me=e.schedule.findItemIndexAtTime(b),Ye=(de=e.schedule.items)==null?void 0:de[me];if(Ye){const Le=Ye[P].start-Ye.start;return b+Le}}return b},a=()=>{const b=e.bufferedPos;return b===Number.MAX_VALUE?l("primary"):Math.max(b,0)},l=b=>{var P,N;return(P=e.primaryDetails)!=null&&P.live?e.primaryDetails.edge:((N=e.schedule)==null?void 0:N.durations[b])||0},u=(b,P)=>{var N,de;const me=e.effectivePlayingItem;if(me!=null&&(N=me.event)!=null&&N.restrictions.skip||!e.schedule)return;e.log(`seek to ${b} "${P}"`);const Ye=e.effectivePlayingItem,Le=e.schedule.findItemIndexAtTime(b,P),tt=(de=e.schedule.items)==null?void 0:de[Le],Be=e.getBufferingPlayer(),nt=Be?.interstitial,ft=nt?.appendInPlace,mt=Ye&&e.itemsMatch(Ye,tt);if(Ye&&(ft||mt)){const ht=r(e.playingAsset),Et=ht?.media||e.primaryMedia;if(Et){const St=P==="primary"?Et.currentTime:s(Ye,P,e.playingAsset,"timelinePos","currentTime"),bt=b-St,Pt=(ft?St:Et.currentTime)+bt;if(Pt>=0&&(!ht||ft||Pt<=ht.duration)){Et.currentTime=Pt;return}}}if(tt){let ht=b;if(P!=="primary"){const St=tt[P].start,bt=b-St;ht=tt.start+bt}const Et=!e.isInterstitial(tt);if((!e.isInterstitial(Ye)||Ye.event.appendInPlace)&&(Et||tt.event.appendInPlace)){const St=e.media||(ft?Be?.media:null);St&&(St.currentTime=ht)}else if(Ye){const St=e.findItemIndex(Ye);if(Le>St){const Pt=e.schedule.findJumpRestrictedIndex(St+1,Le);if(Pt>St){e.setSchedulePosition(Pt);return}}let bt=0;if(Et)e.timelinePos=ht,e.checkBuffer();else{const Pt=tt.event.assetList,Rt=b-(tt[P]||tt).start;for(let Dt=Pt.length;Dt--;){const kt=Pt[Dt];if(kt.duration&&Rt>=kt.startOffset&&Rt<kt.startOffset+kt.duration){bt=Dt;break}}}e.setSchedulePosition(Le,bt)}}},c=()=>{const b=e.effectivePlayingItem;if(e.isInterstitial(b))return b;const P=t();return e.isInterstitial(P)?P:null},p={get bufferedEnd(){const b=t(),P=e.bufferingItem;if(P&&P===b){var N;return s(P,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-P.playout.start||((N=e.bufferingAsset)==null?void 0:N.startOffset)||0}return 0},get currentTime(){const b=c(),P=e.effectivePlayingItem;return P&&P===b?s(P,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-P.playout.start:0},set currentTime(b){const P=c(),N=e.effectivePlayingItem;N&&N===P&&u(b+N.playout.start,"playout")},get duration(){const b=c();return b?b.playout.end-b.playout.start:0},get assetPlayers(){var b;const P=(b=c())==null?void 0:b.event.assetList;return P?P.map(N=>e.getAssetPlayer(N.identifier)):[]},get playingIndex(){var b;const P=(b=c())==null?void 0:b.event;return P&&e.effectivePlayingAsset?P.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var b;return((b=e.schedule)==null||(b=b.events)==null?void 0:b.slice(0))||[]},get schedule(){var b;return((b=e.schedule)==null||(b=b.items)==null?void 0:b.slice(0))||[]},get interstitialPlayer(){return c()?p:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const b=t();return e.findItemIndex(b)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const b=e.effectivePlayingItem;return e.findItemIndex(b)},primary:{get bufferedEnd(){return a()},get currentTime(){const b=e.timelinePos;return b>0?b:0},set currentTime(b){u(b,"primary")},get duration(){return l("primary")},get seekableStart(){var b;return((b=e.primaryDetails)==null?void 0:b.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(b){u(b,"integrated")},get duration(){return l("integrated")},get seekableStart(){var b;return n(((b=e.primaryDetails)==null?void 0:b.fragmentStart)||0,"integrated")}},skip:()=>{const b=e.effectivePlayingItem,P=b?.event;if(P&&!P.restrictions.skip){const N=e.findItemIndex(b);if(P.appendInPlace){const de=b.playout.start+b.event.duration;u(de+.001,"playout")}else e.advanceAfterAssetEnded(P,N,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!r?!1:this.findItemIndex(t)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(s=this.primaryMedia);const n=(t=s)==null?void 0:t.currentTime;if(!(n===void 0||!isFiniteNumber(n)))return n}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)}transferMediaFromPlayer(e,t){const r=e.interstitial.appendInPlace,s=e.media;if(r&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s){this.detachedData={media:s};return}const n=e.transferMedia();this.log(`transfer MediaSource from ${e} ${stringify(n)}`),this.detachedData=n}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var r,s;if(e.media===t)return;let n=null;const a=this.hls,l=e!==a,u=l&&e.interstitial.appendInPlace,c=(r=this.detachedData)==null?void 0:r.mediaSource;let p;if(a.media)u&&(n=a.transferMedia(),this.detachedData=n),p="Primary";else if(c){const de=this.getBufferingPlayer();de?(n=de.transferMedia(),p=`${de}`):p="detached MediaSource"}else p="detached media";if(!n){if(c)n=this.detachedData,this.log(`using detachedData: MediaSource ${stringify(n)}`);else if(!this.detachedData||a.media===t){const de=this.playerQueue;de.length>1&&de.forEach(me=>{if(l&&me.interstitial.appendInPlace!==u){const Ye=me.interstitial;this.clearInterstitial(me.interstitial,null),Ye.appendInPlace=!1,Ye.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${Ye}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const b=n&&"mediaSource"in n&&((s=n.mediaSource)==null?void 0:s.readyState)!=="closed",P=b&&n?n:t;this.log(`${b?"transfering MediaSource":"attaching media"} to ${l?e:"Primary"} from ${p} (media.currentTime: ${t.currentTime})`);const N=this.schedule;if(P===n&&N){const de=l&&e.assetId===N.assetIdAtEnd;P.overrides={duration:N.duration,endOfStream:!l||de,cueRemoval:!l}}e.attachMedia(P)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,s=this.effectivePlayingItem;if(r===-1){const n=this.hls.startPosition;if(this.log(timelineMessage("checkStart",n)),this.timelinePos=n,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(n>=0||!this.primaryLive){const a=this.timelinePos=n>0?n:0,l=e.findItemIndexAtTime(a);this.setSchedulePosition(l)}}else if(s&&!this.playingItem){const n=e.findItemIndex(s);this.setSchedulePosition(n)}}advanceAssetBuffering(e,t){const r=e.event,s=r.findAssetIndex(t),n=getNextAssetIndex(r,s);if(!r.isAssetPastPlayoutLimit(n))this.bufferedToEvent(e,n);else if(this.schedule){var a;const l=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];l&&this.bufferedToItem(l)}}advanceAfterAssetEnded(e,t,r){const s=getNextAssetIndex(e,r);if(e.isAssetPastPlayoutLimit(s)){if(this.schedule){const n=this.schedule.items;if(n){const a=t+1,l=n.length;if(a>=l){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.log(timelineMessage("advanceAfterAssetEnded",u)),this.timelinePos=u,e.appendInPlace&&this.advanceInPlace(u),this.checkBuffer(this.bufferedPos<u)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const n=e.assetList[s];n&&this.advanceInPlace(n.timelineStart)}this.setSchedulePosition(t,s)}}setScheduleToAssetAtTime(e,t){const r=this.schedule;if(!r)return;const s=t.parentIdentifier,n=r.getEvent(s);if(n){const a=r.findEventIndex(s),l=r.findAssetIndex(n,e);this.advanceAfterAssetEnded(n,a,l-1)}}setSchedulePosition(e,t){var r;const s=(r=this.schedule)==null?void 0:r.items;if(!s||this.playbackDisabled)return;const n=e>=0?s[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${n&&segmentToString(n)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,l=this.playingLastItem;if(this.isInterstitial(a)){const p=a.event,b=this.playingAsset,P=b?.identifier,N=P?this.getAssetPlayer(P):null;if(N&&P&&(!this.eventItemsMatch(a,n)||t!==void 0&&P!==p.assetList[t].identifier)){var u;const de=p.findAssetIndex(b);if(this.log(`INTERSTITIAL_ASSET_ENDED ${de+1}/${p.assetList.length} ${eventAssetToString(b)}`),this.endedAsset=b,this.playingAsset=null,this.hls.trigger(Events.INTERSTITIAL_ASSET_ENDED,{asset:b,assetListIndex:de,event:p,schedule:s.slice(0),scheduleIndex:e,player:N}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(p,this.findItemIndex(this.playingItem),de);return}this.retreiveMediaSource(P,n),N.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&N.detachMedia()}if(!this.eventItemsMatch(a,n)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${p} ${segmentToString(a)}`),p.hasPlayed=!0,this.hls.trigger(Events.INTERSTITIAL_ENDED,{event:p,schedule:s.slice(0),scheduleIndex:e}),p.cue.once)){var c;this.updateSchedule();const de=(c=this.schedule)==null?void 0:c.items;if(n&&de){const me=this.findItemIndex(n);this.advanceSchedule(me,de,t,a,l)}return}}this.advanceSchedule(e,s,t,a,l)}advanceSchedule(e,t,r,s,n){const a=this.schedule;if(!a)return;const l=t[e]||null,u=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(p=>{const b=p.interstitial,P=a.findEventIndex(b.identifier);(P<e||P>e+1)&&this.clearInterstitial(b,l)}),this.isInterstitial(l)){this.timelinePos=Math.min(Math.max(this.timelinePos,l.start),l.end);const p=l.event;if(r===void 0){r=a.findAssetIndex(p,this.timelinePos);const de=getNextAssetIndex(p,r-1);if(p.isAssetPastPlayoutLimit(de)||p.appendInPlace&&this.timelinePos===l.end){this.advanceAfterAssetEnded(p,e,r);return}r=de}const b=this.waitingItem;this.assetsBuffered(l,u)||this.setBufferingItem(l);let P=this.preloadAssets(p,r);if(this.eventItemsMatch(l,b||s)||(this.waitingItem=l,this.log(`INTERSTITIAL_STARTED ${segmentToString(l)} ${p.appendInPlace?"append in place":""}`),this.hls.trigger(Events.INTERSTITIAL_STARTED,{event:p,schedule:t.slice(0),scheduleIndex:e})),!p.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${p}`);return}if(p.assetListLoader&&(p.assetListLoader.destroy(),p.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${p}`);return}this.waitingItem=this.endedItem=null,this.playingItem=l;const N=p.assetList[r];if(!N){this.advanceAfterAssetEnded(p,e,r||0);return}if(P||(P=this.getAssetPlayer(N.identifier)),P===null||P.destroyed){const de=p.assetList.length;this.warn(`asset ${r+1}/${de} player destroyed ${p}`),P=this.createAssetPlayer(p,N,r),P.loadSource()}if(!this.eventItemsMatch(l,this.bufferingItem)&&p.appendInPlace&&this.isAssetBuffered(N))return;this.startAssetPlayer(P,r,t,e,u),this.shouldPlay&&playWithCatch(P.media)}else l?(this.resumePrimary(l,e,s),this.shouldPlay&&playWithCatch(this.hls.media)):n&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,r){var s,n;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${segmentToString(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let l=this.timelinePos;(l<e.start||l>=e.end)&&(l=this.getPrimaryResumption(e,t),this.log(timelineMessage("resumePrimary",l)),this.timelinePos=l),this.attachPrimary(l,e)}if(!r)return;const a=(n=this.schedule)==null?void 0:n.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${segmentToString(e)}`),this.hls.trigger(Events.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const r=e.start;if(this.primaryLive){const s=this.primaryDetails;if(t===0)return this.hls.startPosition;if(s&&(r<s.fragmentStart||r>s.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:BufferHelper.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const n=this.hls;n.media?this.checkBuffer():(this.transferMediaTo(n,s),r&&this.startLoadingPrimaryAt(e,r)),r||(this.log(timelineMessage("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,t){var r;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((r=s.mainForwardBufferInfo)==null?void 0:r.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Events.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const r=this.hls.levels[t.level],s=_objectSpread2(_objectSpread2({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const r=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=_objectSpread2(_objectSpread2({},this.altSelection),{},{audio:r});return}const n=_objectSpread2(_objectSpread2({},s),{},{audio:r});this.mediaSelection=n}onSubtitleTrackUpdated(e,t){const r=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=_objectSpread2(_objectSpread2({},this.altSelection),{},{subtitles:r});return}const n=_objectSpread2(_objectSpread2({},s),{},{subtitles:r});this.mediaSelection=n}onAudioTrackSwitching(e,t){const r=getBasicSelectionOption(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setAudioOption(t)||s.setAudioOption(r)))}onSubtitleTrackSwitch(e,t){const r=getBasicSelectionOption(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setSubtitleOption(t)||t.id!==-1&&s.setSubtitleOption(r)))}onBufferCodecs(e,t){const r=t.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let s=0;s<t.length;s++){const n=t[s];if(n.cue.post){var r;const a=this.schedule.findEventIndex(n.identifier),l=(r=this.schedule.items)==null?void 0:r[a];this.isInterstitial(l)&&this.eventItemsMatch(l,this.bufferingItem)&&this.bufferedToItem(l,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const r=this.findItemIndex(t);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,t){var r;const s=(r=this.schedule)==null?void 0:r.items;if(e&&s){const n=this.findItemIndex(e,t);return s[n]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((n,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(n.identifier,null)});const r=e.end+.25,s=BufferHelper.bufferInfo(this.primaryMedia,r,0);(s.end>r||(s.nextStart||0)>r)&&(this.log(`trim buffered interstitial ${segmentToString(e)} (was ${segmentToString(t)})`),this.attachPrimary(r,null,!0),this.flushFrontBuffer(r))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var r;return!!t&&(e===t||e.event.identifier===((r=t.event)==null?void 0:r.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const r=this.mediaSelection;r&&((t=this.schedule)==null||t.updateSchedule(r,[],e))}checkBuffer(e){var t;const r=(t=this.schedule)==null?void 0:t.items;if(!r)return;const s=BufferHelper.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=s.len<1),this.updateBufferedPos(s.end,r,e)}updateBufferedPos(e,t,r){const s=this.schedule,n=this.bufferingItem;if(this.bufferedPos>e||!s)return;if(t.length===1&&this.itemsMatch(t[0],n)){this.bufferedPos=e;return}const a=this.playingItem,l=this.findItemIndex(a);let u=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const p=this.findItemIndex(n),b=Math.min(p+1,t.length-1),P=t[b];if((u===-1&&n&&e>=n.end||(c=P.event)!=null&&c.appendInPlace&&e+.01>=P.start)&&(u=b),this.isInterstitial(n)){const N=n.event;if(b-l>1&&N.appendInPlace===!1||N.assetList.length===0&&N.assetListLoader)return}if(this.bufferedPos=e,u>p&&u>l)this.bufferedToItem(P);else{const N=this.primaryDetails;this.primaryLive&&N&&e>N.edge-N.targetduration&&P.start<N.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(P)&&this.preloadAssets(P.event,0)}}else r&&a&&!this.itemsMatch(a,n)&&(u===l?this.bufferedToItem(a):u===l+1&&this.bufferedToItem(t[u]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const n=this.getAssetPlayer(s.identifier);return!(n!=null&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,r=this.schedule;if(!this.itemsMatch(e,t)&&r){const{items:s,events:n}=r;if(!s||!n)return t;const a=this.isInterstitial(e),l=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=l?l.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${segmentToString(e)}`+(t?` (${u.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const c=r.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((p,b)=>{const P=this.getAssetPlayer(p.identifier);P&&(b===c&&P.loadSource(),P.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(Events.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:n.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(r!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,t){const r=e.event,s=r.assetList.length===0&&!r.assetListLoader,n=r.cue.once;if(s||!n){const a=this.preloadAssets(r,t);if(a!=null&&a.interstitial.appendInPlace){const l=this.primaryMedia;l&&this.bufferAssetPlayer(a,l)}}}preloadAssets(e,t){const r=e.assetUrl,s=e.assetList.length,n=s===0&&!e.assetListLoader,a=e.cue.once;if(n){const u=e.timelineStart;if(e.appendInPlace){var l;const P=this.playingItem;!this.isInterstitial(P)&&(P==null||(l=P.nextEvent)==null?void 0:l.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let c,p=0;if(!this.playingItem&&this.primaryLive&&(p=this.hls.startPosition,p===-1&&(p=this.hls.liveSyncPosition||0)),p&&!(e.cue.pre||e.cue.post)){const P=p-u;P>0&&(c=Math.round(P*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${r?1:s} ${e}${c?` live-start: ${p} start-offset: ${c}`:""}`),r)return this.createAsset(e,0,0,u,e.duration,r);const b=this.assetListLoader.loadAssetList(e,c);b&&(e.assetListLoader=b)}else if(!a&&s){for(let c=t;c<s;c++){const p=e.assetList[c],b=this.getAssetPlayerQueueIndex(p.identifier);(b===-1||this.playerQueue[b].destroyed)&&!p.error&&this.createAssetPlayer(e,p,c)}const u=e.assetList[t];if(u){const c=this.getAssetPlayer(u.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(s=>{this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let r=0;r<e.length;r++)if(e[r].media===t)return e[r]}return null}createAsset(e,t,r,s,n,a){const l={parentIdentifier:e.identifier,identifier:generateAssetIdentifier(e,a,t),duration:n,startOffset:r,timelineStart:s,uri:a};return this.createAssetPlayer(e,l,t)}createAssetPlayer(e,t,r){const s=this.hls,n=s.userConfig;let a=n.videoPreference;const l=s.loadLevelObj||s.levels[s.currentLevel];(a||l)&&(a=_extends$1({},a),l.videoCodec&&(a.videoCodec=l.videoCodec),l.videoRange&&(a.allowedVideoRanges=[l.videoRange]));const u=s.audioTracks[s.audioTrack],c=s.subtitleTracks[s.subtitleTrack];let p=0;if(this.primaryLive||e.appendInPlace){const nt=this.timelinePos-t.timelineStart;if(nt>1){const ft=t.duration;ft&&nt<ft&&(p=nt)}}const b=t.identifier,P=_objectSpread2(_objectSpread2({},n),{},{maxMaxBufferLength:Math.min(180,s.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:b,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:p,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:u||n.audioPreference,subtitlePreference:c||n.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(P.timelineOffset=t.timelineStart));const N=P.cmcd;N!=null&&N.sessionId&&N.contentId&&(P.cmcd=_extends$1({},N,{contentId:hash(t.uri)})),this.getAssetPlayer(b)&&this.warn(`Duplicate date range identifier ${e} and asset ${b}`);const de=new HlsAssetPlayer(this.HlsPlayerClass,P,e,t);this.playerQueue.push(de),e.assetList[r]=t;let me=!0;const Ye=nt=>{if(nt.live){var ft;const Et=new Error(`Interstitials MUST be VOD assets ${e}`),St={fatal:!0,type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,error:Et},bt=((ft=this.schedule)==null?void 0:ft.findEventIndex(e.identifier))||-1;this.handleAssetItemError(St,e,bt,r,Et.message);return}const mt=nt.edge-nt.fragmentStart,ht=t.duration;(me||ht===null||mt>ht)&&(me=!1,this.log(`Interstitial asset "${b}" duration change ${ht} > ${mt}`),t.duration=mt,this.updateSchedule())};de.on(Events.LEVEL_UPDATED,(nt,{details:ft})=>Ye(ft)),de.on(Events.LEVEL_PTS_UPDATED,(nt,{details:ft})=>Ye(ft)),de.on(Events.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const Le=(nt,ft)=>{const mt=this.getAssetPlayer(b);if(mt&&ft.tracks){mt.off(Events.BUFFER_CODECS,Le),mt.tracks=ft.tracks;const ht=this.primaryMedia;this.bufferingAsset===mt.assetItem&&ht&&!mt.media&&this.bufferAssetPlayer(mt,ht)}};de.on(Events.BUFFER_CODECS,Le);const tt=()=>{var nt;const ft=this.getAssetPlayer(b);if(this.log(`buffered to end of asset ${ft}`),!ft||!this.schedule)return;const mt=this.schedule.findEventIndex(e.identifier),ht=(nt=this.schedule.items)==null?void 0:nt[mt];this.isInterstitial(ht)&&this.advanceAssetBuffering(ht,t)};de.on(Events.BUFFERED_TO_END,tt);const Be=nt=>()=>{if(!this.getAssetPlayer(b)||!this.schedule)return;this.shouldPlay=!0;const mt=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,mt,nt)};return de.once(Events.MEDIA_ENDED,Be(r)),de.once(Events.PLAYOUT_LIMIT_REACHED,Be(1/0)),de.on(Events.ERROR,(nt,ft)=>{if(!this.schedule)return;const mt=this.getAssetPlayer(b);if(ft.details===ErrorDetails.BUFFER_STALLED_ERROR){if(mt!=null&&mt.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(ft,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${ft.error} ${e}`)}),de.on(Events.DESTROYING,()=>{if(!this.getAssetPlayer(b)||!this.schedule)return;const ft=new Error(`Asset player destroyed unexpectedly ${b}`),mt={fatal:!0,type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,error:ft};this.handleAssetItemError(mt,e,this.schedule.findEventIndex(e.identifier),r,ft.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${eventAssetToString(t)}`),this.hls.trigger(Events.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:de}),de}clearInterstitial(e,t){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,t){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){const s=this.playerQueue[r];this.log(`clear ${s} toSegment: ${t&&segmentToString(t)}`),this.transferMediaFromPlayer(s,t),this.playerQueue.splice(r,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,r,s,n){const{interstitial:a,assetItem:l,assetId:u}=e,c=a.assetList.length,p=this.playingAsset;this.endedAsset=null,this.playingAsset=l,(!p||p.identifier!==u)&&(p&&(this.clearAssetPlayer(p.identifier,r[s]),delete p.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${eventAssetToString(l)}`),this.hls.trigger(Events.INTERSTITIAL_ASSET_STARTED,{asset:l,assetListIndex:t,event:a,schedule:r.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,n)}bufferAssetPlayer(e,t){var r,s;if(!this.schedule)return;const{interstitial:n,assetItem:a}=e,l=this.schedule.findEventIndex(n.identifier),u=(r=this.schedule.items)==null?void 0:r[l];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=a;const c=this.getBufferingPlayer();if(c===e)return;const p=n.appendInPlace;if(p&&c?.interstitial.appendInPlace===!1)return;const b=c?.tracks||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(p&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(b&&!isCompatibleTrackChange(b,e.tracks)){const P=new Error(`Asset ${eventAssetToString(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(b)}')`),N={fatal:!0,type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,error:P},de=n.findAssetIndex(a);this.handleAssetItemError(N,n,l,de,P.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,r=this.primaryMedia;if(!t||!r)return;const s=r.currentTime,n=t.findAssetIndex(e,s),a=e.assetList[n];if(a){const l=this.getAssetPlayer(a.identifier);if(l){const u=l.currentTime||s-a.timelineStart,c=l.duration-u;if(this.warn(`Stalled at ${u} of ${u+c} in ${l} ${e} (media.currentTime: ${s})`),u&&(c/r.playbackRate<.5||l.bufferedInPlaceToEnd(r))&&l.hls){const p=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,p,n)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,r,s,n){if(e.details===ErrorDetails.BUFFER_STALLED_ERROR)return;const a=t.assetList[s]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&eventAssetToString(a)} ${e.error}`),!this.schedule)return;const l=a?.identifier||"",u=this.getAssetPlayerQueueIndex(l),c=this.playerQueue[u]||null,p=this.schedule.items,b=_extends$1({},e,{fatal:!1,errorAction:createDoNothingErrorAction(!0),asset:a,assetListIndex:s,event:t,schedule:p,scheduleIndex:r,player:c});if(this.hls.trigger(Events.INTERSTITIAL_ASSET_ERROR,b),!e.fatal)return;const P=this.playingAsset,N=this.bufferingAsset,de=new Error(n);if(a&&(this.clearAssetPlayer(l,null),a.error=de),!t.assetList.some(me=>!me.error))t.error=de;else for(let me=s;me<t.assetList.length;me++)this.resetAssetPlayer(t.assetList[me].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):P&&P.identifier===l?this.advanceAfterAssetEnded(t,r,s):N&&N.identifier===l&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,N)}primaryFallback(e){const t=e.timelineStart,r=this.effectivePlayingItem;if(r){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${segmentToString(r)} error: ${e.error}`);let s=this.timelinePos;s===-1&&(s=this.hls.startPosition);const n=this.updateItem(r,s);if(this.itemsMatch(r,n)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const a=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var r,s;const n=t.event,a=n.identifier,l=t.assetListResponse.ASSETS;if(!((r=this.schedule)!=null&&r.hasEvent(a)))return;const u=n.timelineStart,c=n.duration;let p=0;l.forEach((me,Ye)=>{const Le=parseFloat(me.DURATION);this.createAsset(n,Ye,p,u+p,Le,me.URI),p+=Le}),n.duration=p,this.log(`Loaded asset-list with duration: ${p} (was: ${c}) ${n}`);const b=this.waitingItem,P=b?.event.identifier===a;this.updateSchedule();const N=(s=this.bufferingItem)==null?void 0:s.event;if(P){var de;const me=this.schedule.findEventIndex(a),Ye=(de=this.schedule.items)==null?void 0:de[me];if(Ye){if(!this.playingItem&&this.timelinePos>Ye.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==me){n.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${n}`),this.updateSchedule(!0),this.primaryFallback(n);return}this.setBufferingItem(Ye)}this.setSchedulePosition(me)}else if(N?.identifier===a){const me=n.assetList[0];if(me){const Ye=this.getAssetPlayer(me.identifier);if(N.appendInPlace){const Le=this.primaryMedia;Ye&&Le&&this.bufferAssetPlayer(Ye,Le)}else Ye&&Ye.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case ErrorDetails.ASSET_LIST_PARSING_ERROR:case ErrorDetails.ASSET_LIST_LOAD_ERROR:case ErrorDetails.ASSET_LIST_LOAD_TIMEOUT:{const r=t.interstitial;r&&(this.updateSchedule(!0),this.primaryFallback(r));break}case ErrorDetails.BUFFER_STALLED_ERROR:{const r=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&r.event.appendInPlace){this.handleInPlaceStall(r.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const TICK_INTERVAL$2=500;class SubtitleStreamController extends BaseStreamController{constructor(e,t,r){super(e,t,r,"subtitle-stream-controller",PlaylistLevelType.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=State.IDLE,this.setInterval(TICK_INTERVAL$2),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:s}=t;if(this.fragContextChanged(r)||(isMediaFragment(r)&&(this.fragPrevious=r),this.state=State.IDLE),!s)return;const n=this.tracksBuffered[this.currentTrackId];if(!n)return;let a;const l=r.start;for(let c=0;c<n.length;c++)if(l>=n[c].start&&l<=n[c].end){a=n[c];break}const u=r.start+r.duration;a?a.end=u:(a={start:l,end:u},n.push(a)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:r,endOffset:s}=t;if(r===0&&s!==Number.POSITIVE_INFINITY){const n=s-1;if(n<=0)return;t.endOffsetSubtitles=Math.max(0,n),this.tracksBuffered.forEach(a=>{for(let l=0;l<a.length;){if(a[l].end<=n){a.shift();continue}else if(a[l].start<n)a[l].start=n;else break;l++}}),this.fragmentTracker.removeFragmentsInRange(r,n,PlaylistLevelType.SUBTITLE)}}onError(e,t){const r=t.frag;r?.type===PlaylistLevelType.SUBTITLE&&(t.details===ErrorDetails.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==State.STOPPED&&(this.state=State.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&subtitleOptionsIdentical(this.levels,t)){this.levels=t.map(r=>new Level(r));return}this.tracksBuffered=[],this.levels=t.map(r=>{const s=new Level(r);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,PlaylistLevelType.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==State.STOPPED&&this.setInterval(TICK_INTERVAL$2)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:s,levels:n}=this,{details:a,id:l}=t;if(!n){this.warn(`Subtitle tracks were reset while loading level ${l}`);return}const u=n[l];if(l>=n.length||!u)return;this.log(`Subtitle track ${l} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(r=u.details)!=null&&r.live){if(a.deltaUpdateFailed)return;const b=this.mainDetails;if(!b){this.startFragRequested=!1;return}const P=b.fragments[0];if(!u.details)a.hasProgramDateTime&&b.hasProgramDateTime?(alignMediaPlaylistByPDT(a,b),c=a.fragmentStart):P&&(c=P.start,addSliding(a,c));else{var p;c=this.alignPlaylists(a,u.details,(p=this.levelLastLoaded)==null?void 0:p.details),c===0&&P&&(c=P.start,addSliding(a,c))}b&&!this.startFragRequested&&this.setStartPosition(b,c)}u.details=a,this.levelLastLoaded=u,l===s&&(this.hls.trigger(Events.SUBTITLE_TRACK_UPDATED,{details:a,id:l,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===State.IDLE&&(findFragmentByPTS(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,s=t.decryptdata,n=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&s!=null&&s.key&&s.iv&&isFullSegmentEncryption(s.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(r),s.key.buffer,s.iv.buffer,getAesModeFromFullSegmentMethod(s.method)).catch(l=>{throw n.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:t}),l}).then(l=>{const u=performance.now();n.trigger(Events.FRAG_DECRYPTED,{frag:t,payload:l,stats:{tstart:a,tdecrypt:u}})}).catch(l=>{this.warn(`${l.name}: ${l.message}`),this.state=State.IDLE})}}doTick(){if(!this.media){this.state=State.IDLE;return}if(this.state===State.IDLE){const{currentTrackId:e,levels:t}=this,r=t?.[e];if(!r||!t.length||!r.details||this.waitForLive(r))return;const{config:s}=this,n=this.getLoadPosition(),a=BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,s.maxBufferHole),{end:l,len:u}=a,c=r.details,p=this.hls.maxBufferLength+c.levelTargetDuration;if(u>p)return;const b=c.fragments,P=b.length,N=c.edge;let de=null;const me=this.fragPrevious;if(l<N){const tt=s.maxFragLookUpTolerance,Be=l>N-tt?0:tt;de=findFragmentByPTS(me,b,Math.max(b[0].start,l),Be),!de&&me&&me.start<b[0].start&&(de=b[0])}else de=b[P-1];if(de=this.filterReplacedPrimary(de,r.details),!de)return;const Ye=de.sn-c.startSN,Le=b[Ye-1];if(Le&&Le.cc===de.cc&&this.fragmentTracker.getState(Le)===FragmentState.NOT_LOADED&&(de=Le),this.fragmentTracker.getState(de)===FragmentState.NOT_LOADED){const tt=this.mapToInitFragWhenRequired(de);tt&&this.loadFragment(tt,r,l)}}}loadFragment(e,t,r){isMediaFragment(e)?super.loadFragment(e,t,r):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new BufferableInstance(this.tracksBuffered[this.currentTrackId]||[])}}class BufferableInstance{constructor(e){this.buffered=void 0;const t=(r,s,n)=>{if(s=s>>>0,s>n-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${n})`);return e[s][r]};this.buffered={get length(){return e.length},end(r){return t("end",r,e.length)},start(r){return t("start",r,e.length)}}}}const specialCea608CharsCodes={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},getCharForByte=i=>String.fromCharCode(specialCea608CharsCodes[i]||i),NR_ROWS=15,NR_COLS=100,rowsLowCh1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rowsHighCh1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rowsLowCh2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rowsHighCh2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},backgroundColors=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CaptionsLogger{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r=typeof t=="function"?t():t;logger.log(`${this.time} [${e}] ${r}`)}}}const numArrayToHexArray=function i(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class PenState{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const s=t[r];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class StyledUnicodeChar{constructor(){this.uchar=" ",this.penState=new PenState}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Row{constructor(e){this.chars=[],this.pos=0,this.currPenState=new PenState,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<NR_COLS;t++)this.chars.push(new StyledUnicodeChar);this.logger=e}equals(e){for(let t=0;t<NR_COLS;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<NR_COLS;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<NR_COLS;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>NR_COLS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=NR_COLS)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=getCharForByte(e);if(this.pos>=NR_COLS){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<NR_COLS;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<NR_COLS;r++){const s=this.chars[r].uchar;s!==" "&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class CaptionScreen{constructor(e){this.rows=[],this.currRow=NR_ROWS-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<NR_ROWS;t++)this.rows.push(new Row(e));this.logger=e}reset(){for(let e=0;e<NR_ROWS;e++)this.rows[e].clear();this.currRow=NR_ROWS-1}equals(e){let t=!0;for(let r=0;r<NR_ROWS;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<NR_ROWS;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<NR_ROWS;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let l=0;l<NR_ROWS;l++)this.rows[l].clear();const n=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const l=a.rows[n].cueStartTime,u=this.logger.time;if(l!==null&&u!==null&&l<u)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[n+c])}}this.currRow=t;const r=this.rows[this.currRow];if(e.indent!==null){const n=e.indent,a=Math.max(n-1,0);r.setCursor(e.indent),e.color=r.chars[a].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",s=-1;for(let n=0;n<NR_ROWS;n++){const a=this.rows[n].getTextString();a&&(s=n+1,e?t.push("Row "+s+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?r="["+t.join(" | ")+"]":r=t.join(`
`)),r}getTextAndFormat(){return this.rows}}class Cea608Channel{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new CaptionScreen(r),this.nonDisplayedMemory=new CaptionScreen(r),this.lastOutputScreen=new CaptionScreen(r),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[r]}this.logger.log(2,"MIDROW: "+stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Cea608Parser{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=createCmdHistory(),this.logger=void 0;const s=this.logger=new CaptionsLogger;this.channels=[null,new Cea608Channel(e,t,s),new Cea608Channel(e+1,r,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const s=t[r]&127,n=t[r+1]&127;let a=!1,l=null;if(s===0&&n===0)continue;this.logger.log(3,()=>"["+numArrayToHexArray([t[r],t[r+1]])+"] -> ("+numArrayToHexArray([s,n])+")");const u=this.cmdHistory;if(s>=16&&s<=31){if(hasCmdRepeated(s,n,u)){setLastCmd(null,null,u),this.logger.log(3,()=>"Repeated command ("+numArrayToHexArray([s,n])+") is dropped");continue}setLastCmd(s,n,this.cmdHistory),a=this.parseCmd(s,n),a||(a=this.parseMidrow(s,n)),a||(a=this.parsePAC(s,n)),a||(a=this.parseBackgroundAttributes(s,n))}else setLastCmd(null,null,u);if(!a&&(l=this.parseChars(s,n),l)){const p=this.currentChannel;p&&p>0?this.channels[p].insertChars(l):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!l&&this.logger.log(2,()=>"Couldn't parse cleaned data "+numArrayToHexArray([s,n])+" orig: "+numArrayToHexArray([t[r],t[r+1]]))}}parseCmd(e,t){const r=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(r||s))return!1;const n=e===20||e===21||e===23?1:2,a=this.channels[n];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let r=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[r];return s?(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+numArrayToHexArray([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let r;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,n=(e===16||e===24)&&t>=64&&t<=95;if(!(s||n))return!1;const a=e<=23?1:2;t>=64&&t<=95?r=a===1?rowsLowCh1[e]:rowsLowCh2[e]:r=a===1?rowsHighCh1[e]:rowsHighCh2[e];const l=this.channels[a];return l?(l.setPAC(this.interpretPAC(r,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let r;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?r=t-96:r=t-64,s.underline=(r&1)===1,r<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((r-16)/2)*4,s}parseChars(e,t){let r,s=null,n=null;if(e>=25?(r=2,n=e-8):(r=1,n=e),n>=17&&n<=19){let a;n===17?a=t+80:n===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+getCharForByte(a)+"' in channel "+r),s=[a]}else e>=32&&e<=127&&(s=t===0?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+numArrayToHexArray(s).join(",")),s}parseBackgroundAttributes(e,t){const r=(e===16||e===24)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=45&&t<=47;if(!(r||s))return!1;let n;const a={};e===16||e===24?(n=Math.floor((t-32)/2),a.background=backgroundColors[n],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const l=e<=23?1:2;return this.channels[l].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}setLastCmd(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function setLastCmd(i,e,t){t.a=i,t.b=e}function hasCmdRepeated(i,e,t){return t.a===i&&t.b===e}function createCmdHistory(){return{a:null,b:null}}var VTTCue=function(){if(optionalSelf!=null&&optionalSelf.VTTCue)return self.VTTCue;const i=["","lr","rl"],e=["start","middle","end","left","right"];function t(l,u){if(typeof u!="string"||!Array.isArray(l))return!1;const c=u.toLowerCase();return~l.indexOf(c)?c:!1}function r(l){return t(i,l)}function s(l){return t(e,l)}function n(l,...u){let c=1;for(;c<arguments.length;c++){const p=arguments[c];for(const b in p)l[b]=p[b]}return l}function a(l,u,c){const p=this,b={enumerable:!0};p.hasBeenReset=!1;let P="",N=!1,de=l,me=u,Ye=c,Le=null,tt="",Be=!0,nt="auto",ft="start",mt=50,ht="middle",Et=50,St="middle";Object.defineProperty(p,"id",n({},b,{get:function(){return P},set:function(bt){P=""+bt}})),Object.defineProperty(p,"pauseOnExit",n({},b,{get:function(){return N},set:function(bt){N=!!bt}})),Object.defineProperty(p,"startTime",n({},b,{get:function(){return de},set:function(bt){if(typeof bt!="number")throw new TypeError("Start time must be set to a number.");de=bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"endTime",n({},b,{get:function(){return me},set:function(bt){if(typeof bt!="number")throw new TypeError("End time must be set to a number.");me=bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"text",n({},b,{get:function(){return Ye},set:function(bt){Ye=""+bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"region",n({},b,{get:function(){return Le},set:function(bt){Le=bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"vertical",n({},b,{get:function(){return tt},set:function(bt){const Pt=r(bt);if(Pt===!1)throw new SyntaxError("An invalid or illegal string was specified.");tt=Pt,this.hasBeenReset=!0}})),Object.defineProperty(p,"snapToLines",n({},b,{get:function(){return Be},set:function(bt){Be=!!bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"line",n({},b,{get:function(){return nt},set:function(bt){if(typeof bt!="number"&&bt!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");nt=bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"lineAlign",n({},b,{get:function(){return ft},set:function(bt){const Pt=s(bt);if(!Pt)throw new SyntaxError("An invalid or illegal string was specified.");ft=Pt,this.hasBeenReset=!0}})),Object.defineProperty(p,"position",n({},b,{get:function(){return mt},set:function(bt){if(bt<0||bt>100)throw new Error("Position must be between 0 and 100.");mt=bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"positionAlign",n({},b,{get:function(){return ht},set:function(bt){const Pt=s(bt);if(!Pt)throw new SyntaxError("An invalid or illegal string was specified.");ht=Pt,this.hasBeenReset=!0}})),Object.defineProperty(p,"size",n({},b,{get:function(){return Et},set:function(bt){if(bt<0||bt>100)throw new Error("Size must be between 0 and 100.");Et=bt,this.hasBeenReset=!0}})),Object.defineProperty(p,"align",n({},b,{get:function(){return St},set:function(bt){const Pt=s(bt);if(!Pt)throw new SyntaxError("An invalid or illegal string was specified.");St=Pt,this.hasBeenReset=!0}})),p.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class StringDecoder{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function parseTimeStamp(i){function e(r,s,n,a){return(r|0)*3600+(s|0)*60+(n|0)+parseFloat(a||0)}const t=i.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class Settings{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let s=0;s<r.length;++s)if(t===r[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function parseOptions(i,e,t,r){const s=r?i.split(r):[i];for(const n in s){if(typeof s[n]!="string")continue;const a=s[n].split(t);if(a.length!==2)continue;const l=a[0],u=a[1];e(l,u)}}const defaults$1=new VTTCue(0,0,""),center=defaults$1.align==="middle"?"middle":"center";function parseCue(i,e,t){const r=i;function s(){const l=parseTimeStamp(i);if(l===null)throw new Error("Malformed timestamp: "+r);return i=i.replace(/^[^\sa-zA-Z-]+/,""),l}function n(l,u){const c=new Settings;parseOptions(l,function(P,N){let de;switch(P){case"region":for(let me=t.length-1;me>=0;me--)if(t[me].id===N){c.set(P,t[me].region);break}break;case"vertical":c.alt(P,N,["rl","lr"]);break;case"line":de=N.split(","),c.integer(P,de[0]),c.percent(P,de[0])&&c.set("snapToLines",!1),c.alt(P,de[0],["auto"]),de.length===2&&c.alt("lineAlign",de[1],["start",center,"end"]);break;case"position":de=N.split(","),c.percent(P,de[0]),de.length===2&&c.alt("positionAlign",de[1],["start",center,"end","line-left","line-right","auto"]);break;case"size":c.percent(P,N);break;case"align":c.alt(P,N,["start",center,"end","left","right"]);break}},/:/,/\s/),u.region=c.get("region",null),u.vertical=c.get("vertical","");let p=c.get("line","auto");p==="auto"&&defaults$1.line===-1&&(p=-1),u.line=p,u.lineAlign=c.get("lineAlign","start"),u.snapToLines=c.get("snapToLines",!0),u.size=c.get("size",100),u.align=c.get("align",center);let b=c.get("position","auto");b==="auto"&&defaults$1.position===50&&(b=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=b}function a(){i=i.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),i.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);i=i.slice(3),a(),e.endTime=s(),a(),n(i,e)}function fixLineBreaks(i){return i.replace(/<br(?: \/)?>/gi,`
`)}class VTTParser{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new StringDecoder,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function r(){let n=t.buffer,a=0;for(n=fixLineBreaks(n);a<n.length&&n[a]!=="\r"&&n[a]!==`
`;)++a;const l=n.slice(0,a);return n[a]==="\r"&&++a,n[a]===`
`&&++a,t.buffer=n.slice(a),l}function s(n){parseOptions(n,function(a,l){},/:/)}try{let n="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;n=r();const l=n.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(l!=null&&l[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:n=r(),t.state){case"HEADER":/:/.test(n)?s(n):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new VTTCue(0,0,""),t.state="CUE",n.indexOf("-->")===-1){t.cue.id=n;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{parseCue(n,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const l=n.indexOf("-->")!==-1;if(!n||l&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=n}continue;case"BADCUE":n||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const LINEBREAKS=/\r\n|\n\r|\n|\r/g,startsWith=function i(e,t,r=0){return e.slice(r,r+t.length)===t},cueString2millis=function i(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),n=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!isFiniteNumber(t)||!isFiniteNumber(r)||!isFiniteNumber(s)||!isFiniteNumber(n))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=60*1e3*s,t+=3600*1e3*n,t};function generateCueId(i,e,t){return hash(i.toString())+hash(e.toString())+hash(t)}const calculateOffset=function i(e,t,r){let s=e[t],n=e[s.prevCC];if(!n||!n.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(a=n)!=null&&a.new;){var a;e.ccOffset+=s.start-n.start,s.new=!1,s=n,n=e[s.prevCC]}e.presentationOffset=r};function parseWebVTT(i,e,t,r,s,n,a){const l=new VTTParser,u=utf8ArrayToStr(new Uint8Array(i)).trim().replace(LINEBREAKS,`
`).split(`
`),c=[],p=e?toMpegTsClockFromTimescale(e.baseTime,e.timescale):0;let b="00:00.000",P=0,N=0,de,me=!0;l.oncue=function(Ye){const Le=t[r];let tt=t.ccOffset;const Be=(P-p)/9e4;if(Le!=null&&Le.new&&(N!==void 0?tt=t.ccOffset=Le.start:calculateOffset(t,r,Be)),Be){if(!e){de=new Error("Missing initPTS for VTT MPEGTS");return}tt=Be-t.presentationOffset}const nt=Ye.endTime-Ye.startTime,ft=normalizePts((Ye.startTime+tt-N)*9e4,s*9e4)/9e4;Ye.startTime=Math.max(ft,0),Ye.endTime=Math.max(ft+nt,0);const mt=Ye.text.trim();Ye.text=decodeURIComponent(encodeURIComponent(mt)),Ye.id||(Ye.id=generateCueId(Ye.startTime,Ye.endTime,mt)),Ye.endTime>0&&c.push(Ye)},l.onparsingerror=function(Ye){de=Ye},l.onflush=function(){if(de){a(de);return}n(c)},u.forEach(Ye=>{if(me)if(startsWith(Ye,"X-TIMESTAMP-MAP=")){me=!1,Ye.slice(16).split(",").forEach(Le=>{startsWith(Le,"LOCAL:")?b=Le.slice(6):startsWith(Le,"MPEGTS:")&&(P=parseInt(Le.slice(7)))});try{N=cueString2millis(b)/1e3}catch(Le){de=Le}return}else Ye===""&&(me=!1);l.parse(Ye+`
`)}),l.flush()}const IMSC1_CODEC="stpp.ttml.im1t",HMSF_REGEX=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TIME_UNIT_REGEX=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,textAlignToLineAlign={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(i,e,t,r){const s=findBox(new Uint8Array(i),["mdat"]);if(s.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const n=s.map(l=>utf8ArrayToStr(l)),a=toTimescaleFromScale(e.baseTime,1,e.timescale);try{n.forEach(l=>t(parseTTML(l,a)))}catch(l){r(l)}}function parseTTML(i,e){const s=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(n).reduce((b,P)=>(b[P]=s.getAttribute(`ttp:${P}`)||n[P],b),{}),l=s.getAttribute("xml:space")!=="preserve",u=collectionToDictionary(getElementCollection(s,"styling","style")),c=collectionToDictionary(getElementCollection(s,"layout","region")),p=getElementCollection(s,"body","[begin]");return[].map.call(p,b=>{const P=getTextContent(b,l);if(!P||!b.hasAttribute("begin"))return null;const N=parseTtmlTime(b.getAttribute("begin"),a),de=parseTtmlTime(b.getAttribute("dur"),a);let me=parseTtmlTime(b.getAttribute("end"),a);if(N===null)throw timestampParsingError(b);if(me===null){if(de===null)throw timestampParsingError(b);me=N+de}const Ye=new VTTCue(N-e,me-e,P);Ye.id=generateCueId(Ye.startTime,Ye.endTime,Ye.text);const Le=c[b.getAttribute("region")],tt=u[b.getAttribute("style")],Be=getTtmlStyles(Le,tt,u),{textAlign:nt}=Be;if(nt){const ft=textAlignToLineAlign[nt];ft&&(Ye.lineAlign=ft),Ye.align=nt}return _extends$1(Ye,Be),Ye}).filter(b=>b!==null)}function getElementCollection(i,e,t){const r=i.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function collectionToDictionary(i){return i.reduce((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function getTextContent(i,e){return[].slice.call(i.childNodes).reduce((t,r,s)=>{var n;return r.nodeName==="br"&&s?t+`
`:(n=r.childNodes)!=null&&n.length?getTextContent(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function getTtmlStyles(i,e,t){const r="http://www.w3.org/ns/ttml#styling";let s=null;const n=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=i!=null&&i.hasAttribute("style")?i.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(s=t[a]),n.reduce((l,u)=>{const c=getAttributeNS(e,r,u)||getAttributeNS(i,r,u)||getAttributeNS(s,r,u);return c&&(l[u]=c),l},{})}function getAttributeNS(i,e,t){return i&&i.hasAttributeNS(e,t)?i.getAttributeNS(e,t):null}function timestampParsingError(i){return new Error(`Could not parse ttml timestamp ${i}`)}function parseTtmlTime(i,e){if(!i)return null;let t=parseTimeStamp(i);return t===null&&(HMSF_REGEX.test(i)?t=parseHoursMinutesSecondsFrames(i,e):TIME_UNIT_REGEX.test(i)&&(t=parseTimeUnits(i,e))),t}function parseHoursMinutesSecondsFrames(i,e){const t=HMSF_REGEX.exec(i),r=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+r/e.frameRate}function parseTimeUnits(i,e){const t=TIME_UNIT_REGEX.exec(i),r=Number(t[1]);switch(t[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class OutputFilter{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class TimelineController{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Events.FRAG_LOADING,this.onFragLoading,this),e.on(Events.FRAG_LOADED,this.onFragLoaded,this),e.on(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Events.FRAG_LOADING,this.onFragLoading,this),e.off(Events.FRAG_LOADED,this.onFragLoaded,this),e.off(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new OutputFilter(this,"textTrack1"),t=new OutputFilter(this,"textTrack2"),r=new OutputFilter(this,"textTrack3"),s=new OutputFilter(this,"textTrack4");this.cea608Parser1=new Cea608Parser(1,e,t),this.cea608Parser2=new Cea608Parser(3,r,s)}addCues(e,t,r,s,n){let a=!1;for(let l=n.length;l--;){const u=n[l],c=intersection(u[0],u[1],t,r);if(c>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],r),a=!0,c/(r-t)>.5))return}if(a||n.push([t,r]),this.config.renderTextTracksNatively){const l=this.captionsTracks[e];this.Cues.newCue(l,t,r,s)}else{const l=this.Cues.newCue(null,t,r,s);this.hls.trigger(Events.CUES_PARSED,{type:"captions",cues:l,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:s,timescale:n,trackId:a}){const{unparsedVttFrags:l}=this;r===PlaylistLevelType.MAIN&&(this.initPTS[t.cc]={baseTime:s,timescale:n,trackId:a}),l.length&&(this.unparsedVttFrags=[],l.forEach(u=>{this.initPTS[u.frag.cc]?this.onFragLoaded(Events.FRAG_LOADED,u):this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let s=0;s<r.textTracks.length;s++){const n=r.textTracks[s];if(canReuseVttTextTrack(n,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return n}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:s}=this,{label:n,languageCode:a}=t[e],l=this.getExistingTrack(n,a);if(l)r[e]=l,clearCurrentCues(r[e]),sendAddTrackEvent(r[e],s);else{const u=this.createTextTrack("captions",n,a);u&&(u[e]=!0,r[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r=t.label,s={_id:e,label:r,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,r){const s=this.media;if(s)return s.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const r=!!t.transferMedia;if(this.media=null,r)return;const{captionsTracks:s}=this;Object.keys(s).forEach(n=>{clearCurrentCues(s[n]),delete s[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)clearCurrentCues(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],s=r.some(n=>n.textCodec===IMSC1_CODEC);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(subtitleOptionsIdentical(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const a=this.media,l=a?filterSubtitleTracks(a.textTracks):null;if(this.tracks.forEach((u,c)=>{let p;if(l){let b=null;for(let P=0;P<l.length;P++)if(l[P]&&canReuseVttTextTrack(l[P],u)){b=l[P],l[P]=null;break}b&&(p=b)}if(p)clearCurrentCues(p);else{const b=captionsOrSubtitlesFromCharacteristics(u);p=this.createTextTrack(b,u.name,u.lang),p&&(p.mode="disabled")}p&&this.textTracks.push(p)}),l!=null&&l.length){const u=l.filter(c=>c!==null).map(c=>c.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(l=>({label:l.name,kind:l.type.toLowerCase(),default:l.default,subtitleTrack:l}));this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(r=>{const s=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!s)return;const n=`textTrack${s[1]}`,a=this.captionsProperties[n];a&&(a.label=r.name,r.lang&&(a.languageCode=r.lang),a.media=r)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===PlaylistLevelType.MAIN){var r,s;const{cea608Parser1:n,cea608Parser2:a,lastSn:l}=this,{cc:u,sn:c}=t.frag,p=(r=(s=t.part)==null?void 0:s.index)!=null?r:-1;n&&a&&(c!==l+1||c===l&&p!==this.lastPartIndex+1||u!==this.lastCc)&&(n.reset(),a.reset()),this.lastCc=u,this.lastSn=c,this.lastPartIndex=p}}onFragLoaded(e,t){const{frag:r,payload:s}=t;if(r.type===PlaylistLevelType.SUBTITLE)if(s.byteLength){const n=r.decryptdata,a="stats"in t;if(n==null||!n.encrypted||a){const l=this.tracks[r.level],u=this.vttCCs;u[r.cc]||(u[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),l&&l.textCodec===IMSC1_CODEC?this._parseIMSC1(r,s):this._parseVTTs(t)}}else this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;parseIMSC1(t,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),r.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{r.logger.log(`Failed to parse IMSC1: ${s}`),r.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var t;const{frag:r,payload:s}=e,{initPTS:n,unparsedVttFrags:a}=this,l=n.length-1;if(!n[r.cc]&&l===-1){a.push(e);return}const u=this.hls,c=(t=r.initSegment)!=null&&t.data?appendUint8Array(r.initSegment.data,new Uint8Array(s)).buffer:s;parseWebVTT(c,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,p=>{this._appendCues(p,r.level),u.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},p=>{const b=p.message==="Missing initPTS for VTT MPEGTS";b?a.push(e):this._fallbackToIMSC1(r,s),u.logger.log(`Failed to parse VTT cue: ${p}`),!(b&&l>r.cc)&&u.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:p})})}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||parseIMSC1(t,this.initPTS[e.cc],()=>{r.textCodec=IMSC1_CODEC,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[t];if(!s||s.mode==="disabled")return;e.forEach(n=>addCueToTrack(s,n))}else{const s=this.tracks[t];if(!s)return;const n=s.default?"default":"subtitles"+t;r.trigger(Events.CUES_PARSED,{type:"subtitles",cues:e,track:n})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===PlaylistLevelType.SUBTITLE&&this.onFragLoaded(Events.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:s}=t;if(!(r.type===PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let n=0;n<s.length;n++){const a=s[n].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const l=this.extractCea608Data(a);this.cea608Parser1.addData(s[n].pts,l[0]),this.cea608Parser2.addData(s[n].pts,l[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:s,type:n}){const{media:a}=this;if(!(!a||a.currentTime<r)){if(!n||n==="video"){const{captionsTracks:l}=this;Object.keys(l).forEach(u=>removeCuesInRange(l[u],t,r))}if(this.config.renderTextTracksNatively&&t===0&&s!==void 0){const{textTracks:l}=this;Object.keys(l).forEach(u=>removeCuesInRange(l[u],t,s))}}}extractCea608Data(e){const t=[[],[]],r=e[0]&31;let s=2;for(let n=0;n<r;n++){const a=e[s++],l=127&e[s++],u=127&e[s++];if(l===0&&u===0)continue;if((4&a)!==0){const p=3&a;(p===0||p===1)&&(t[p].push(l),t[p].push(u))}}return t}}function captionsOrSubtitlesFromCharacteristics(i){return i.characteristics&&/transcribes-spoken-dialog/gi.test(i.characteristics)&&/describes-music-and-sound/gi.test(i.characteristics)?"captions":"subtitles"}function canReuseVttTextTrack(i,e){return!!i&&i.kind===captionsOrSubtitlesFromCharacteristics(e)&&subtitleTrackMatchesTextTrack(e,i)}function intersection(i,e,t,r){return Math.min(e,r)-Math.max(i,t)}function newVTTCCs(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const WHITESPACE_CHAR=/\s/,Cues={newCue(i,e,t,r){const s=[];let n,a,l,u,c;const p=self.VTTCue||self.TextTrackCue;for(let P=0;P<r.rows.length;P++)if(n=r.rows[P],l=!0,u=0,c="",!n.isEmpty()){var b;for(let me=0;me<n.chars.length;me++)WHITESPACE_CHAR.test(n.chars[me].uchar)&&l?u++:(c+=n.chars[me].uchar,l=!1);n.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const N=fixLineBreaks(c.trim()),de=generateCueId(e,t,N);i!=null&&(b=i.cues)!=null&&b.getCueById(de)||(a=new p(e,t,N),a.id=de,a.line=P+1,a.align="left",a.position=10+Math.min(80,Math.floor(u*8/32)*10),s.push(a))}return i&&s.length&&(s.sort((P,N)=>P.line==="auto"||N.line==="auto"?0:P.line>8&&N.line>8?N.line-P.line:P.line-N.line),s.forEach(P=>addCueToTrack(i,P))),s}};function fetchSupported(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const BYTERANGE=/(\d+)-(\d+)\/(\d+)/;class FetchLoader{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||getRequest,this.controller=new self.AbortController,this.stats=new LoadStats}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const n=getRequestParameters(e,this.controller.signal),a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,n),self.clearTimeout(this.requestTimeout),t.timeout=u&&isFiniteNumber(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},t.timeout),(isPromise(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(b=>{var P;this.response=this.loader=b;const N=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},c-(N-s.loading.start)),!b.ok){const{status:me,statusText:Ye}=b;throw new FetchError(Ye||"fetch, bad network response",me,b)}s.loading.first=N,s.total=getContentLength(b.headers)||s.total;const de=(P=this.callbacks)==null?void 0:P.onProgress;return de&&isFiniteNumber(t.highWaterMark)?this.loadProgressively(b,s,e,t.highWaterMark,de):a?b.arrayBuffer():e.responseType==="json"?b.json():b.text()}).then(b=>{var P,N;const de=this.response;if(!de)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const me=b[l];me&&(s.loaded=s.total=me);const Ye={url:de.url,data:b,code:de.status},Le=(P=this.callbacks)==null?void 0:P.onProgress;Le&&!isFiniteNumber(t.highWaterMark)&&Le(s,e,b,de),(N=this.callbacks)==null||N.onSuccess(Ye,s,e,de)}).catch(b=>{var P;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const N=b&&b.code||0,de=b?b.message:null;(P=this.callbacks)==null||P.onError({code:N,text:de},e,b?b.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,s=0,n){const a=new ChunkCache,l=e.body.getReader(),u=()=>l.read().then(c=>{if(c.done)return a.dataLength&&n(t,r,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const p=c.value,b=p.length;return t.loaded+=b,b<s||a.dataLength?(a.push(p),a.dataLength>=s&&n(t,r,a.flush().buffer,e)):n(t,r,p.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function getRequestParameters(i,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(_extends$1({},i.headers))};return i.rangeEnd&&t.headers.set("Range","bytes="+i.rangeStart+"-"+String(i.rangeEnd-1)),t}function getByteRangeLength(i){const e=BYTERANGE.exec(i);if(e)return parseInt(e[2])-parseInt(e[1])+1}function getContentLength(i){const e=i.get("Content-Range");if(e){const r=getByteRangeLength(e);if(isFiniteNumber(r))return r}const t=i.get("Content-Length");if(t)return parseInt(t)}function getRequest(i,e){return new self.Request(i.url,e)}class FetchError extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const AGE_HEADER_LINE_REGEX=/^age:\s*[\d.]+\s*$/im;class XhrLoader{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new LoadStats,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const n=this.xhrSetup;n?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return n(r,t.url)}).catch(a=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",t.url,!0),n(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(a=>{var l;(l=this.callbacks)==null||l.onError({code:r.status,text:a.message},t,r,s)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:n,maxLoadTimeMs:a}=r.loadPolicy;if(s)for(const l in s)e.setRequestHeader(l,s[l]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=n&&isFiniteNumber(n)?n:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const s=t.readyState,n=this.config;if(!r.aborted&&s>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,p=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const de=p??t.response;if(de!=null){var a,l;r.loading.end=Math.max(self.performance.now(),r.loading.first);const me=t.responseType==="arraybuffer"?de.byteLength:de.length;r.loaded=r.total=me,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const Ye=(a=this.callbacks)==null?void 0:a.onProgress;Ye&&Ye(r,e,de,t);const Le={url:t.responseURL,data:de,code:c};(l=this.callbacks)==null||l.onSuccess(Le,r,e,t);return}}const b=n.loadPolicy.errorRetry,P=r.retry,N={url:e.url,data:void 0,code:c};if(shouldRetry(b,P,!1,N))this.retry(b);else{var u;logger.error(`${c} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:c,text:t.statusText},e,t,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(shouldRetry(e,t,!0))this.retry(e);else{var r;logger.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=getRetryDelay(e,r.retry),r.retry++,logger.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const defaultLoadPolicy={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},hlsDefaultConfig=_objectSpread2(_objectSpread2({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:XhrLoader,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AbrController,bufferController:BufferController,capLevelController:CapLevelController,errorController:ErrorController,fpsController:FPSController,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:requestMediaKeySystemAccess,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:defaultLoadPolicy},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},timelineConfig()),{},{subtitleStreamController:SubtitleStreamController,subtitleTrackController:SubtitleTrackController,timelineController:TimelineController,audioStreamController:AudioStreamController,audioTrackController:AudioTrackController,emeController:EMEController,cmcdController:CMCDController,contentSteeringController:ContentSteeringController,interstitialsController:InterstitialsController});function timelineConfig(){return{cueHandler:Cues,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mergeConfig(i,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=deepCpy(i),s=["manifest","level","frag"],n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(a=>{const l=`${a==="level"?"playlist":a}LoadPolicy`,u=e[l]===void 0,c=[];n.forEach(p=>{const b=`${a}Loading${p}`,P=e[b];if(P!==void 0&&u){c.push(b);const N=r[l].default;switch(e[l]={default:N},p){case"TimeOut":N.maxLoadTimeMs=P,N.maxTimeToFirstByteMs=P;break;case"MaxRetry":N.errorRetry.maxNumRetry=P,N.timeoutRetry.maxNumRetry=P;break;case"RetryDelay":N.errorRetry.retryDelayMs=P,N.timeoutRetry.retryDelayMs=P;break;case"MaxRetryTimeout":N.errorRetry.maxRetryDelayMs=P,N.timeoutRetry.maxRetryDelayMs=P;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${l}": ${stringify(e[l])}`)}),_objectSpread2(_objectSpread2({},r),e)}function deepCpy(i){return i&&typeof i=="object"?Array.isArray(i)?i.map(deepCpy):Object.keys(i).reduce((e,t)=>(e[t]=deepCpy(i[t]),e),{}):i}function enableStreamingMode(i,e){const t=i.loader;t!==FetchLoader&&t!==XhrLoader?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),i.progressive=!1):fetchSupported()&&(i.loader=FetchLoader,i.progressive=!0,i.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const MAX_START_GAP_JUMP=2,SKIP_BUFFER_HOLE_STEP_SECONDS=.1,SKIP_BUFFER_RANGE_START=.05,TICK_INTERVAL$1=100;class GapController extends TaskLoop{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(Events.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(TICK_INTERVAL$1),this.mediaSource=t.mediaSource;const r=this.media=t.media;addEventListener(r,"playing",this.onMediaPlaying),addEventListener(r,"waiting",this.onMediaWaiting),addEventListener(r,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:r}=this;r&&(removeEventListener(r,"playing",this.onMediaPlaying),removeEventListener(r,"waiting",this.onMediaWaiting),removeEventListener(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var r,s;const n=(r=this.hls)==null?void 0:r.config;if(!n)return;const a=this.media;if(!a)return;const{seeking:l}=a,u=this.seeking&&!l,c=!this.seeking&&l,p=a.paused&&!l||a.ended||a.playbackRate===0;if(this.seeking=l,e!==t){t&&(this.ended=0),this.moved=!0,l||(this.nudgeRetry=0,n.nudgeOnVideoHole&&!p&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||u){u&&this.stallResolved(e);return}if(p){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(Events.MEDIA_ENDED,{stalled:!1}));return}if(!BufferHelper.getBuffered(a).length){this.nudgeRetry=0;return}const b=BufferHelper.bufferInfo(a,e,0),P=b.nextStart||0,N=this.fragmentTracker;if(l&&N&&this.hls){const mt=getInFlightDependency(this.hls.inFlightFragments,e),ht=b.len>MAX_START_GAP_JUMP,Et=!P||mt||P-e>MAX_START_GAP_JUMP&&!N.getPartialFragment(e);if(ht||Et)return;this.moved=!1}const de=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&N){if(!(b.len>0)&&!P)return;const ht=Math.max(P,b.start||0)-e,St=!!(de!=null&&de.live)?de.targetduration*2:MAX_START_GAP_JUMP,bt=appendedFragAtPosition(e,N);if(ht>0&&(ht<=St||bt)){a.paused||this._trySkipBufferHole(bt);return}}const me=n.detectStallWithCurrentTimeMs,Ye=self.performance.now(),Le=this.waiting;let tt=this.stalled;if(tt===null)if(Le>0&&Ye-Le<me)tt=this.stalled=Le;else{this.stalled=Ye;return}const Be=Ye-tt;if(!l&&(Be>=me||Le)&&this.hls){var nt;if(((nt=this.mediaSource)==null?void 0:nt.readyState)==="ended"&&!(de!=null&&de.live)&&Math.abs(e-(de?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(Events.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(b),!this.media||!this.hls)return}const ft=BufferHelper.bufferInfo(a,e,n.maxBufferHole);this._tryFixBufferStall(ft,Be,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(Events.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var r;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&s&&s.length>1&&e>s.end(0)){const n=BufferHelper.bufferedInfo(BufferHelper.timeRangesToArray(this.buffered.audio),e,0);if(n.len>1&&t>=n.start){const a=BufferHelper.timeRangesToArray(s),l=BufferHelper.bufferedInfo(a,t,0).bufferedIndex;if(l>-1&&l<a.length-1){const u=BufferHelper.bufferedInfo(a,e,0).bufferedIndex,c=a[l].end,p=a[l+1].start;if((u===-1||u>l)&&p-c<1&&e-c<2){const b=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${p} buffered index: ${u}`);this.warn(b.message),this.media.currentTime+=1e-6;let P=appendedFragAtPosition(e,this.fragmentTracker);P&&"fragment"in P?P=P.fragment:P||(P=void 0);const N=BufferHelper.bufferInfo(this.media,e,0);this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:b,reason:b.message,frag:P,buffer:N.len,bufferInfo:N})}}}}}_tryFixBufferStall(e,t,r){var s,n;const{fragmentTracker:a,media:l}=this,u=(s=this.hls)==null?void 0:s.config;if(!l||!a||!u)return;const c=(n=this.hls)==null?void 0:n.latestLevelDetails,p=appendedFragAtPosition(r,a);if((p||c!=null&&c.live&&r<c.fragmentStart)&&(this._trySkipBufferHole(p)||!this.media))return;const b=e.buffered,P=this.adjacentTraversal(e,r);(b&&b.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-r<u.maxBufferHole||P))&&(t>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const r=this.fragmentTracker,s=e.nextStart;if(r&&s){const n=r.getFragAtPos(t,PlaylistLevelType.MAIN),a=r.getFragAtPos(s,PlaylistLevelType.MAIN);if(n&&a)return a.sn-n.sn<2}return!1}_reportStall(e){const{hls:t,media:r,stallReported:s,stalled:n}=this;if(!s&&n!==null&&r&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${stringify(e)})`);this.warn(a.message),t.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:n}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:r,media:s}=this,n=(t=this.hls)==null?void 0:t.config;if(!s||!r||!n)return 0;const a=s.currentTime,l=BufferHelper.bufferInfo(s,a,0),u=a<l.start?l.start:l.nextStart;if(u&&this.hls){const p=l.len<=n.maxBufferHole,b=l.len>0&&l.len<1&&s.readyState<3,P=u-a;if(P>0&&(p||b)){if(P>n.maxBufferHole){let de=!1;if(a===0){const me=r.getAppendedFrag(0,PlaylistLevelType.MAIN);me&&u<me.end&&(de=!0)}if(!de&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||getInFlightDependency(this.hls.inFlightFragments,u))return 0;let Ye=!1,Le=e.end;for(;Le<u;){const tt=appendedFragAtPosition(Le,r);if(tt)Le+=tt.duration;else{Ye=!0;break}}if(Ye)return 0}}const N=Math.max(u+SKIP_BUFFER_RANGE_START,a+SKIP_BUFFER_HOLE_STEP_SECONDS);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${N}`),this.moved=!0,s.currentTime=N,!(e!=null&&e.gap)){const de=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${N}`),me={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:de,reason:de.message,buffer:l.len,bufferInfo:l};e&&("fragment"in e?me.part=e:me.frag=e),this.hls.trigger(Events.ERROR,me)}return N}}return 0}_tryNudgeBuffer(e){const{hls:t,media:r,nudgeRetry:s}=this,n=t?.config;if(!r||!n)return 0;const a=r.currentTime;if(this.nudgeRetry++,s<n.nudgeMaxRetry){const l=a+(s+1)*n.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${a} to ${l}`);this.warn(u.message),r.currentTime=l,t.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const l=new Error(`Playhead still not moving while enough data buffered @${a} after ${n.nudgeMaxRetry} nudges`);this.error(l.message),t.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,error:l,fatal:!0,buffer:e.len,bufferInfo:e})}}}function getInFlightDependency(i,e){const t=inFlight(i.main);if(t&&t.start<=e)return t;const r=inFlight(i.audio);return r&&r.start<=e?r:null}function inFlight(i){if(!i)return null;switch(i.state){case State.IDLE:case State.STOPPED:case State.ENDED:case State.ERROR:return null}return i.frag}function appendedFragAtPosition(i,e){return e.getAppendedFrag(i,PlaylistLevelType.MAIN)||e.getPartialFragment(i)}const MIN_CUE_DURATION=.25;function getCueClass(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function createCueWithDataFields(i,e,t,r,s){let n=new i(e,t,"");try{n.value=r,s&&(n.type=s)}catch{n=new i(e,t,stringify(s?_objectSpread2({type:s},r):r))}return n}const MAX_CUE_ENDTIME=(()=>{const i=getCueClass();try{i&&new i(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class ID3TrackController{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(Events.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Events.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Events.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var r;this.media=t.media,((r=t.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&clearCurrentCues(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if(r.kind==="metadata"&&r.label==="id3")return sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:r,enableID3MetadataCues:s}=this.hls.config;if(!r&&!s)return;const{samples:n}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=getCueClass();if(a)for(let l=0;l<n.length;l++){const u=n[l].type;if(u===MetadataSchema.emsg&&!r||!s)continue;const c=getId3Frames(n[l].data),p=n[l].pts;let b=p+n[l].duration;b>MAX_CUE_ENDTIME&&(b=MAX_CUE_ENDTIME),b-p<=0&&(b=p+MIN_CUE_DURATION);for(let N=0;N<c.length;N++){const de=c[N];if(!isId3TimestampFrame(de)){this.updateId3CueEnds(p,u);const me=createCueWithDataFields(a,p,b,de,u);me&&this.id3Track.addCue(me)}}}}updateId3CueEnds(e,t){var r;const s=(r=this.id3Track)==null?void 0:r.cues;if(s)for(let n=s.length;n--;){const a=s[n];a.type===t&&a.startTime<e&&a.endTime===MAX_CUE_ENDTIME&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:s}){const{id3Track:n,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:l,enableID3MetadataCues:u}}=a;if(n&&(l||u)){let c;s==="audio"?c=p=>p.type===MetadataSchema.audioId3&&u:s==="video"?c=p=>p.type===MetadataSchema.emsg&&l:c=p=>p.type===MetadataSchema.audioId3&&u||p.type===MetadataSchema.emsg&&l,removeCuesInRange(n,t,r,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:s,enableDateRangeMetadataCues:n,interstitialsController:a}=this.hls.config;if(!n)return;const l=getCueClass();if(r&&s&&!a){const{fragmentStart:me,fragmentEnd:Ye}=e;let Le=this.assetCue;Le?(Le.startTime=me,Le.endTime=Ye):l&&(Le=this.assetCue=createCueWithDataFields(l,me,Ye,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),Le&&(Le.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(Le),Le.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:u}=this,{dateRanges:c}=e,p=Object.keys(c);let b=this.dateRangeCuesAppended;if(u&&t){var P;if((P=u.cues)!=null&&P.length){const me=Object.keys(b).filter(Ye=>!p.includes(Ye));for(let Ye=me.length;Ye--;){var N;const Le=me[Ye],tt=(N=b[Le])==null?void 0:N.cues;delete b[Le],tt&&Object.keys(tt).forEach(Be=>{const nt=tt[Be];if(nt){nt.removeEventListener("enter",this.onEventCueEnter);try{u.removeCue(nt)}catch{}}})}}else b=this.dateRangeCuesAppended={}}const de=e.fragments[e.fragments.length-1];if(!(p.length===0||!isFiniteNumber(de?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let me=0;me<p.length;me++){const Ye=p[me],Le=c[Ye],tt=Le.startTime,Be=b[Ye],nt=Be?.cues||{};let ft=Be?.durationKnown||!1,mt=MAX_CUE_ENDTIME;const{duration:ht,endDate:Et}=Le;if(Et&&ht!==null)mt=tt+ht,ft=!0;else if(Le.endOnNext&&!ft){const bt=p.reduce((Pt,Rt)=>{if(Rt!==Le.id){const Dt=c[Rt];if(Dt.class===Le.class&&Dt.startDate>Le.startDate&&(!Pt||Le.startDate<Pt.startDate))return Dt}return Pt},null);bt&&(mt=bt.startTime,ft=!0)}const St=Object.keys(Le.attr);for(let bt=0;bt<St.length;bt++){const Pt=St[bt];if(!isDateRangeCueAttribute(Pt))continue;const Rt=nt[Pt];if(Rt)ft&&!(Be!=null&&Be.durationKnown)?Rt.endTime=mt:Math.abs(Rt.startTime-tt)>.01&&(Rt.startTime=tt,Rt.endTime=mt);else if(l){let Dt=Le.attr[Pt];isSCTE35Attribute(Pt)&&(Dt=hexToArrayBuffer(Dt));const Lt=createCueWithDataFields(l,tt,mt,{key:Pt,data:Dt},MetadataSchema.dateRange);Lt&&(Lt.id=Ye,this.id3Track.addCue(Lt),nt[Pt]=Lt,a&&(Pt==="X-ASSET-LIST"||Pt==="X-ASSET-URL")&&Lt.addEventListener("enter",this.onEventCueEnter))}}b[Ye]={cues:nt,dateRange:Le,durationKnown:ft}}}}}class LatencyController{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,r=this.levelDetails;if(!t||!r)return;this.currentTime=t.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:n,maxLiveSyncPlaybackRate:a}=this.config;if(!n||a===1||!r.live)return;const l=this.targetLatency;if(l===null)return;const u=s-l,c=Math.min(this.maxLatency,l+r.targetduration);if(u<c&&u>.05&&this.forwardBufferLength>1){const b=Math.min(2,Math.max(1,a)),P=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,N=Math.min(b,Math.max(1,P));this.changeMediaPlaybackRate(t,N)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:r,targetduration:s}=e,{liveSyncDuration:n,liveSyncDurationCount:a,lowLatencyMode:l}=this.config,u=this.hls.userConfig;let c=l&&r||t;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||c===0)&&(c=n!==void 0?n:a*s);const p=s;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,p)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const r=this.levelDetails;if(r===null)return null;const s=r.edge,n=e-t-this.edgeStalled,a=s-r.totalduration,l=s-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,n),l)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Events.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Events.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var r;t.details===ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var r,s;e.playbackRate!==t&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class LevelController extends BasePlaylistController{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Events.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Events.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,s=[],n={},a={};let l=!1,u=!1,c=!1;t.levels.forEach(p=>{const b=p.attrs;let{audioCodec:P,videoCodec:N}=p;P&&(p.audioCodec=P=getCodecCompatibleName(P,r)||void 0),N&&(N=p.videoCodec=convertAVC1ToAVCOTI(N));const{width:de,height:me,unknownCodecs:Ye}=p;let Le=Ye?Ye.length:0;if(Ye)for(let bt=Le;bt--;){const Pt=Ye[bt];this.isAudioSupported(Pt)?(p.audioCodec=P=P?`${P},${Pt}`:Pt,Le--,sampleEntryCodesISO.audio[P.substring(0,4)]=2):this.isVideoSupported(Pt)&&(p.videoCodec=N=N?`${N},${Pt}`:Pt,Le--,sampleEntryCodesISO.video[N.substring(0,4)]=2)}if(l||(l=!!(de&&me)),u||(u=!!N),c||(c=!!P),Le||P&&!this.isAudioSupported(P)||N&&!this.isVideoSupported(N)){this.log(`Some or all CODECS not supported "${b.CODECS}"`);return}const{CODECS:tt,"FRAME-RATE":Be,"HDCP-LEVEL":nt,"PATHWAY-ID":ft,RESOLUTION:mt,"VIDEO-RANGE":ht}=b,St=`${`${ft||"."}-`}${p.bitrate}-${mt}-${Be}-${tt}-${ht}-${nt}`;if(n[St])if(n[St].uri!==p.url&&!p.attrs["PATHWAY-ID"]){const bt=a[St]+=1;p.attrs["PATHWAY-ID"]=new Array(bt+1).join(".");const Pt=this.createLevel(p);n[St]=Pt,s.push(Pt)}else n[St].addGroupId("audio",b.AUDIO),n[St].addGroupId("text",b.SUBTITLES);else{const bt=this.createLevel(p);n[St]=bt,a[St]=1,s.push(bt)}}),this.filterAndSortMediaOptions(s,t,l,u,c)}createLevel(e){const t=new Level(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(s.message),t.supportedResult=getUnsupportedResult(s,[])}return t}isAudioSupported(e){return areCodecsMediaSourceSupported(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return areCodecsMediaSourceSupported(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,r,s,n){let a=[],l=[],u=e;if((r||s)&&n&&(u=u.filter(({videoCodec:Ye,videoRange:Le,width:tt,height:Be})=>(!!Ye||!!(tt&&Be))&&isVideoRange(Le))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let Ye="no level with compatible codecs found in manifest",Le=Ye;t.levels.length&&(Le=`one or more CODECS in variant not supported: ${stringify(t.levels.map(Be=>Be.attrs.CODECS).filter((Be,nt,ft)=>ft.indexOf(Be)===nt))}`,this.warn(Le),Ye+=` (${Le})`);const tt=new Error(Ye);this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:tt,reason:Le})}});return}t.audioTracks&&(a=t.audioTracks.filter(Ye=>!Ye.audioCodec||this.isAudioSupported(Ye.audioCodec)),assignTrackIdsByGroup(a)),t.subtitles&&(l=t.subtitles,assignTrackIdsByGroup(l));const c=u.slice(0);u.sort((Ye,Le)=>{if(Ye.attrs["HDCP-LEVEL"]!==Le.attrs["HDCP-LEVEL"])return(Ye.attrs["HDCP-LEVEL"]||"")>(Le.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&Ye.height!==Le.height)return Ye.height-Le.height;if(Ye.frameRate!==Le.frameRate)return Ye.frameRate-Le.frameRate;if(Ye.videoRange!==Le.videoRange)return VideoRangeValues.indexOf(Ye.videoRange)-VideoRangeValues.indexOf(Le.videoRange);if(Ye.videoCodec!==Le.videoCodec){const tt=videoCodecPreferenceValue(Ye.videoCodec),Be=videoCodecPreferenceValue(Le.videoCodec);if(tt!==Be)return Be-tt}if(Ye.uri===Le.uri&&Ye.codecSet!==Le.codecSet){const tt=codecsSetSelectionPreferenceValue(Ye.codecSet),Be=codecsSetSelectionPreferenceValue(Le.codecSet);if(tt!==Be)return Be-tt}return Ye.averageBitrate!==Le.averageBitrate?Ye.averageBitrate-Le.averageBitrate:0});let p=c[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==c.length)){for(let Ye=0;Ye<c.length;Ye++)if(c[Ye].pathwayId===u[0].pathwayId){p=c[Ye];break}}this._levels=u;for(let Ye=0;Ye<u.length;Ye++)if(u[Ye]===p){var b;this._firstLevel=Ye;const Le=p.bitrate,tt=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${Le}`),((b=this.hls.userConfig)==null?void 0:b.abrEwmaDefaultEstimate)===void 0){const Be=Math.min(Le,this.hls.config.abrEwmaDefaultEstimateMax);Be>tt&&tt===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=Be)}break}const P=n&&!s,N=this.hls.config,de=!!(N.audioStreamController&&N.audioTrackController),me={levels:u,audioTracks:a,subtitleTracks:l,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:n,video:s,altAudio:de&&!P&&a.some(Ye=>!!Ye.url)};this.hls.trigger(Events.MANIFEST_PARSED,me)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const p=new Error("invalid level idx"),b=e<0;if(this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:b,error:p,reason:p.message}),b)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,s=this.currentLevel,n=s?s.attrs["PATHWAY-ID"]:void 0,a=t[e],l=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,r===e&&s&&n===l)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${l?" with Pathway "+l:""} from level ${r}${n?" with Pathway "+n:""}`);const u={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(Events.LEVEL_SWITCHING,u);const c=a.details;if(!c||c.live){const p=this.switchParams(a.uri,s?.details,c);this.loadPlaylist(p)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),r=e.filter(s=>t.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=r}}onError(e,t){t.fatal||!t.context||t.context.type===PlaylistContextType.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===PlaylistLevelType.MAIN){const r=t.elementaryStreams;if(!Object.keys(r).some(n=>!!r[n]))return;const s=this._levels[t.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,t){var r;const{level:s,details:n}=t,a=t.levelInfo;if(!a){var l;this.warn(`Invalid level index ${s}`),(l=t.deliveryDirectives)!=null&&l.skip&&(n.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let u=a.details;u===t.details&&u.advanced&&(u=void 0),this.playlistLoaded(s,t,u)}else(r=t.deliveryDirectives)!=null&&r.skip&&(n.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,n=e.attrs["PATHWAY-ID"],a=e.details,l=a?.age;this.log(`Loading level index ${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${n?" Pathway "+n:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(Events.LEVEL_LOADING,{url:r,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const r=this._levels.filter((n,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(n),n===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,n.details&&n.details.fragments.forEach(l=>l.level=-1)),!1));reassignFragmentLevelIndexes(r),this._levels=r,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=r.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(Events.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(Events.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function assignTrackIdsByGroup(i){const e={};i.forEach(t=>{const r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++})}function getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}function isMSESupported(){if(!getMediaSource())return!1;const e=getSourceBuffer();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function isSupported(){if(!isMSESupported())return!1;const i=getMediaSource();return typeof i?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>i.isTypeSupported(mimeTypeForCodec(e,"video")))||["mp4a.40.2","fLaC"].some(e=>i.isTypeSupported(mimeTypeForCodec(e,"audio"))))}function changeTypeSupported(){var i;const e=getSourceBuffer();return typeof(e==null||(i=e.prototype)==null?void 0:i.changeType)=="function"}const TICK_INTERVAL=100;class StreamController extends BaseStreamController{constructor(e,t,r){super(e,t,r,"stream-controller",PlaylistLevelType.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,n=s?s.currentTime:null;if(n===null||!isFiniteNumber(n)||(this.log(`Media seeked to ${n.toFixed(3)}`),!this.getBufferedFrag(n)))return;const a=this.getFwdBufferInfoAtPos(s,n,PlaylistLevelType.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${n} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:r,hls:s}=this;if(this.stopLoad(),this.setInterval(TICK_INTERVAL),this.level=-1,!this.startFragRequested){let n=s.startLevel;n===-1&&(s.config.testBandwidth&&this.levels.length>1?(n=0,this.bitrateTest=!0):n=s.firstAutoLevel),s.nextLoadLevel=n,this.level=s.loadLevel,this._hasEnoughToStart=!!t}r>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=State.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=State.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case State.WAITING_LEVEL:{const{levels:e,level:t}=this,r=e?.[t],s=r?.details;if(s&&(!s.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(s))break;this.state=State.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=State.IDLE;break}break}case State.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===State.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:s}=this;if(t===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const n=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[n]))return;const a=r[n],l=this.getMainFwdBufferInfo();if(l===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(l,u)){const me={};this.altAudio===2&&(me.type="video"),this.hls.trigger(Events.BUFFER_EOS,me),this.state=State.ENDED;return}if(!this.buffering)return;e.loadLevel!==n&&e.manualLevel===-1&&this.log(`Adapting to level ${n} from level ${this.level}`),this.level=e.nextLoadLevel=n;const c=a.details;if(!c||this.state===State.WAITING_LEVEL||this.waitForLive(a)){this.level=n,this.state=State.WAITING_LEVEL,this.startFragRequested=!1;return}const p=l.len,b=this.getMaxBufferLength(a.maxBitrate);if(p>=b)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const P=this.backtrackFragment?this.backtrackFragment.start:l.end;let N=this.getNextFragment(P,c);if(this.couldBacktrack&&!this.fragPrevious&&N&&isMediaFragment(N)&&this.fragmentTracker.getState(N)!==FragmentState.OK){var de;const Ye=((de=this.backtrackFragment)!=null?de:N).sn-c.startSN,Le=c.fragments[Ye-1];Le&&N.cc===Le.cc&&(N=Le,this.fragmentTracker.removeFragment(Le))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(N&&this.isLoopLoading(N,P)){if(!N.gap){const Ye=this.audioOnly&&!this.altAudio?ElementaryStreamTypes.AUDIO:ElementaryStreamTypes.VIDEO,Le=(Ye===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Le&&this.afterBufferFlushed(Le,Ye,PlaylistLevelType.MAIN)}N=this.getNextFragmentLoopLoading(N,c,l,PlaylistLevelType.MAIN,b)}N&&(N.initSegment&&!N.initSegment.data&&!this.bitrateTest&&(N=N.initSegment),this.loadFragment(N,a,P))}loadFragment(e,t,r){const s=this.fragmentTracker.getState(e);s===FragmentState.NOT_LOADED||s===FragmentState.PARTIAL?isMediaFragment(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,r):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,PlaylistLevelType.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let r;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const n=this.getLevelDetails();if(n!=null&&n.live){const l=this.getMainFwdBufferInfo();if(!l||l.len<n.targetduration*2)return}if(!t.paused&&e){const l=this.hls.nextLoadLevel,u=e[l],c=this.fragLastKbps;c&&this.fragCurrent?r=this.fragCurrent.duration*u.maxBitrate/(1e3*c)+1:r=0}else r=0;const a=this.getBufferedFrag(t.currentTime+r);if(a){const l=this.followingBufferedFrag(a);if(l){this.abortCurrentFrag();const u=l.maxStartPTS?l.maxStartPTS:l.start,c=l.duration,p=Math.max(a.end,u+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(p,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case State.KEY_LOADING:case State.FRAG_LOADING:case State.FRAG_LOADING_WAITING_RETRY:case State.PARSING:case State.PARSED:this.state=State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;addEventListener(r,"playing",this.onMediaPlaying),addEventListener(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:r}=this;r&&(removeEventListener(r,"playing",this.onMediaPlaying),removeEventListener(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(Events.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let r=!1,s=!1;for(let n=0;n<t.levels.length;n++){const a=t.levels[n].audioCodec;a&&(r=r||a.indexOf("mp4a.40.2")!==-1,s=s||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=r&&s&&!changeTypeSupported(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==State.IDLE)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=State.WAITING_LEVEL)}onLevelLoaded(e,t){var r;const{levels:s,startFragRequested:n}=this,a=t.level,l=t.details,u=l.totalduration;if(!s){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""}, cc [${l.startCC}, ${l.endCC}] duration:${u}`);const c=t.levelInfo,p=this.fragCurrent;p&&(this.state===State.FRAG_LOADING||this.state===State.FRAG_LOADING_WAITING_RETRY)&&p.level!==t.level&&p.loader&&this.abortCurrentFrag();let b=0;if(l.live||(r=c.details)!=null&&r.live){var P;if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;b=this.alignPlaylists(l,c.details,(P=this.levelLastLoaded)==null?void 0:P.details)}if(c.details=l,this.levelLastLoaded=c,n||this.setStartPosition(l,b),this.hls.trigger(Events.LEVEL_UPDATED,{details:l,level:a}),this.state===State.WAITING_LEVEL){if(this.waitForCdnTuneIn(l))return;this.state=State.IDLE}n&&l.live&&this.synchronizeToLiveEdge(l),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const s=this.hls.liveSyncPosition,n=this.getLoadPosition(),a=e.fragmentStart,l=e.edge,u=n>=a-t.maxFragLookUpTolerance&&n<=l;if(s!==null&&r.duration>s&&(n<s||!u)){const p=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!u&&r.readyState<4||n<l-p)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),r.readyState))if(this.warn(`Playback: ${n.toFixed(3)} is located too far from the end of live sliding playlist: ${l}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const b=BufferHelper.bufferInfo(r,s,0);if(!((c=b.buffered)!=null&&c.length)){r.currentTime=s;return}if(b.start<=n){r.currentTime=s;return}const{nextStart:N}=BufferHelper.bufferedInfo(b.buffered,n,0);N&&(r.currentTime=N)}else r.currentTime=s}}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:s,payload:n}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const l=a[r.level];if(!l){this.warn(`Level ${r.level} not found on progress`);return}const u=l.details;if(!u){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const c=l.videoCodec,p=u.PTSKnown||!u.live,b=(t=r.initSegment)==null?void 0:t.data,P=this._getAudioCodec(l),N=this.transmuxer=this.transmuxer||new TransmuxerInterface(this.hls,PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),de=s?s.index:-1,me=de!==-1,Ye=new ChunkMetadata(r.level,r.sn,r.stats.chunkCount,n.byteLength,de,me),Le=this.initPTS[r.cc];N.push(n,b,P,c,r,s,u.totalduration,p,Ye,Le)}onAudioTrackSwitching(e,t){const r=this.hls,s=this.altAudio===2;if(useAlternateAudio(t.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.fragmentTracker.removeAllFragments(),r.once(Events.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(Events.AUDIO_TRACK_SWITCHED,t)}),r.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(Events.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=useAlternateAudio(t.url,this.hls);if(r){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,t){const r=t.tracks;let s,n,a=!1;for(const l in r){const u=r[l];if(u.id==="main"){if(n=l,s=u,l==="video"){const c=r[l];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&s?(this.log(`Alternate track found, use ${n}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:s}=t,n=r.type===PlaylistLevelType.MAIN;if(n){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===State.PARSED&&(this.state=State.IDLE);return}const l=s?s.stats:r.stats;this.fragLastKbps=Math.round(8*l.total/(l.buffering.end-l.loading.first)),isMediaFragment(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,s)}const a=this.media;a&&(!this._hasEnoughToStart&&BufferHelper.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),n&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var r;if(t.fatal){this.state=State.ERROR;return}switch(t.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.MAIN,t);break;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===State.WAITING_LEVEL&&((r=t.context)==null?void 0:r.type)===PlaylistContextType.LEVEL&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case ErrorDetails.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=State.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==ElementaryStreamTypes.AUDIO||!this.altAudio){const r=(t===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,t,PlaylistLevelType.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${t}`);return}const s=this.timelineOffset;s&&r&&(r+=s);const n=this.getLevelDetails(),a=BufferHelper.getBuffered(e),l=a.length?a.start(0):0,u=l-r,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<c||this.loadingParts&&u<2*(n?.partTarget||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),r+=u,this.startPosition=r),t<r&&(this.log(`seek to target start position ${r} from current time ${t} buffer start ${l}`),e.currentTime=r)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(r=>{const{hls:s}=this,n=r?.frag;if(!n||this.fragContextChanged(n))return;t.fragmentError=0,this.state=State.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=n.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),s.trigger(Events.FRAG_LOADED,r),n.bitrateTest=!1}).catch(r=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:r}=this,{remuxResult:s,chunkMeta:n}=e,a=this.getCurrentContext(n);if(!a){this.resetWhenMissingContext(n);return}const{frag:l,part:u,level:c}=a,{video:p,text:b,id3:P,initSegment:N}=s,{details:de}=c,me=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=State.PARSING,N){const Ye=N.tracks;if(Ye){const nt=l.initSegment||l;if(this.unhandledEncryptionError(N,l))return;this._bufferInitSegment(c,Ye,nt,n),r.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:nt,id:t,tracks:Ye})}const Le=N.initPTS,tt=N.timescale,Be=this.initPTS[l.cc];if(isFiniteNumber(Le)&&(!Be||Be.baseTime!==Le||Be.timescale!==tt)){const nt=N.trackId;this.initPTS[l.cc]={baseTime:Le,timescale:tt,trackId:nt},r.trigger(Events.INIT_PTS_FOUND,{frag:l,id:t,initPTS:Le,timescale:tt,trackId:nt})}}if(p&&de){me&&p.type==="audiovideo"&&this.logMuxedErr(l);const Ye=de.fragments[l.sn-1-de.startSN],Le=l.sn===de.startSN,tt=!Ye||l.cc>Ye.cc;if(s.independent!==!1){const{startPTS:Be,endPTS:nt,startDTS:ft,endDTS:mt}=p;if(u)u.elementaryStreams[p.type]={startPTS:Be,endPTS:nt,startDTS:ft,endDTS:mt};else if(p.firstKeyFrame&&p.independent&&n.id===1&&!tt&&(this.couldBacktrack=!0),p.dropped&&p.independent){const ht=this.getMainFwdBufferInfo(),Et=(ht?ht.end:this.getLoadPosition())+this.config.maxBufferHole,St=p.firstKeyFramePTS?p.firstKeyFramePTS:Be;if(!Le&&Et<St-this.config.maxBufferHole&&!tt){this.backtrack(l);return}else tt&&(l.gap=!0);l.setElementaryStreamInfo(p.type,l.start,nt,l.start,mt,!0)}else Le&&Be-(de.appliedTimelineOffset||0)>MAX_START_GAP_JUMP&&(l.gap=!0);l.setElementaryStreamInfo(p.type,Be,nt,ft,mt),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(p,l,u,n,Le||tt)}else if(Le||tt)l.gap=!0;else{this.backtrack(l);return}}if(me){const{startPTS:Ye,endPTS:Le,startDTS:tt,endDTS:Be}=me;u&&(u.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:Ye,endPTS:Le,startDTS:tt,endDTS:Be}),l.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,Ye,Le,tt,Be),this.bufferFragmentData(me,l,u,n)}if(de&&P!=null&&P.samples.length){const Ye={id:t,frag:l,details:de,samples:P.samples};r.trigger(Events.FRAG_PARSING_METADATA,Ye)}if(de&&b){const Ye={id:t,frag:l,details:de,samples:b.samples};r.trigger(Events.FRAG_PARSING_USERDATA,Ye)}}logMuxedErr(e){this.warn(`${isMediaFragment(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,r,s){if(this.state!==State.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));const{audio:n,video:a,audiovideo:l}=t;if(n){const c=e.audioCodec;let p=pickMostCompleteCodecName(n.codec,c);p==="mp4a"&&(p="mp4a.40.5");const b=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){p&&(p.indexOf("mp4a.40.5")!==-1?p="mp4a.40.2":p="mp4a.40.5");const P=n.metadata;P&&"channelCount"in P&&(P.channelCount||1)!==1&&b.indexOf("firefox")===-1&&(p="mp4a.40.5")}p&&p.indexOf("mp4a.40.5")!==-1&&b.indexOf("android")!==-1&&n.container!=="audio/mpeg"&&(p="mp4a.40.2",this.log(`Android: force audio codec to ${p}`)),c&&c!==p&&this.log(`Swapping manifest audio codec "${c}" for "${p}"`),n.levelCodec=p,n.id=PlaylistLevelType.MAIN,this.log(`Init audio buffer, container:${n.container}, codecs[selected/level/parsed]=[${p||""}/${c||""}/${n.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=PlaylistLevelType.MAIN;const c=a.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}l&&(this.log(`Init audiovideo buffer, container:${l.container}, codecs[level/parsed]=[${e.codecs}/${l.codec}]`),delete t.video,delete t.audio);const u=Object.keys(t);if(u.length){if(this.hls.trigger(Events.BUFFER_CODECS,t),!this.hls)return;u.forEach(c=>{const b=t[c].initSegment;b!=null&&b.byteLength&&this.hls.trigger(Events.BUFFER_APPENDING,{type:c,data:b,frag:r,part:null,chunkMeta:s,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,PlaylistLevelType.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,r=e?.[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=State.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(BufferHelper.isBuffered(e,r)?t=this.getAppendedFrag(r):BufferHelper.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const s=this.fragPlaying,n=t.level;(!s||t.sn!==s.sn||s.level!==n)&&(this.fragPlaying=t,this.hls.trigger(Events.FRAG_CHANGED,{frag:t}),(!s||s.level!==n)&&this.hls.trigger(Events.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return isFiniteNumber(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(isFiniteNumber(t)){const r=this.getLevelDetails(),s=this.currentFrag||(r?findFragmentByPTS(null,r.fragments,t):null);if(s){const n=s.programDateTime;if(n!==null){const a=n+(t-s.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class KeyLoader extends Logger{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyIdToKeyInfo){const s=this.keyIdToKeyInfo[r].loader;if(s){var t;if(e&&e!==((t=s.context)==null?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=ErrorDetails.KEY_LOAD_ERROR,r,s,n){return new LoadError({type:ErrorTypes.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:n,error:r,networkDetails:s})}loadClear(e,t,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let s=0,n=t.length;s<n;s++){const a=t[s];if(e.cc<=a.cc&&(!isMediaFragment(e)||!isMediaFragment(a)||e.sn<a.sn)||!r&&s==n-1)return this.emeController.selectKeySystemFormat(a).then(l=>{if(!this.emeController)return;a.setKeyFormat(l);const u=keySystemFormatToKeySystemDomain(l);if(u)return this.emeController.getKeySystemAccess([u])})}if(this.config.requireKeySystemAccessOnStart){const s=getKeySystemsForConfig(this.config);if(s.length)return this.emeController.getKeySystemAccess(s)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,s;t&&e.setKeyFormat(t);const n=e.decryptdata;if(!n){const p=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,ErrorDetails.KEY_LOAD_ERROR,p))}const a=n.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,ErrorDetails.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const l=getKeyId(n);let u=this.keyIdToKeyInfo[l];if((r=u)!=null&&r.decryptdata.key)return n.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if((s=u)!=null&&s.keyLoadPromise){var c;switch((c=u.mediaKeySessionContext)==null?void 0:c.keyStatus){case"usable":case"usable-in-future":return u.keyLoadPromise.then(b=>{const{keyInfo:P}=b;return n.key=P.decryptdata.key,{frag:e,keyInfo:P}})}}switch(this.log(`Loading key ${arrayToHex(n.keyId||[])} from ${e.type} ${e.level}`),u=this.keyIdToKeyInfo[l]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return n.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,ErrorDetails.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${n.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(r);return(e.keyLoadPromise=s.then(n=>(e.mediaKeySessionContext=n,r))).catch(n=>{throw e.keyLoadPromise=null,n.data&&(n.data.frag=t),n})}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,s=r.loader,n=new s(r);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise((a,l)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=r.keyLoadPolicy.default,p={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},b={onSuccess:(P,N,de,me)=>{const{frag:Ye,keyInfo:Le,url:tt}=de,Be=getKeyId(Le.decryptdata)||tt;if(!Ye.decryptdata||Le!==this.keyIdToKeyInfo[Be])return l(this.createKeyLoadError(Ye,ErrorDetails.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),me));Le.decryptdata.key=Ye.decryptdata.key=new Uint8Array(P.data),Ye.keyLoader=null,Le.loader=null,a({frag:Ye,keyInfo:Le})},onError:(P,N,de,me)=>{this.resetLoader(N),l(this.createKeyLoadError(t,ErrorDetails.KEY_LOAD_ERROR,new Error(`HTTP Error ${P.code} loading key ${P.text}`),de,_objectSpread2({url:u.url,data:void 0},P)))},onTimeout:(P,N,de)=>{this.resetLoader(N),l(this.createKeyLoadError(t,ErrorDetails.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),de))},onAbort:(P,N,de)=>{this.resetLoader(N),l(this.createKeyLoadError(t,ErrorDetails.INTERNAL_ABORTED,new Error("key loading aborted"),de))}};n.load(u,p,b)})}resetLoader(e){const{frag:t,keyInfo:r,url:s}=e,n=r.loader;t.keyLoader===n&&(t.keyLoader=null,r.loader=null);const a=getKeyId(r.decryptdata)||s;delete this.keyIdToKeyInfo[a],n&&n.destroy()}}function getKeyId(i){const e=i.keyId;return e?arrayToHex(e):i.uri}function mapContextToLevelType(i){const{type:e}=i;switch(e){case PlaylistContextType.AUDIO_TRACK:return PlaylistLevelType.AUDIO;case PlaylistContextType.SUBTITLE_TRACK:return PlaylistLevelType.SUBTITLE;default:return PlaylistLevelType.MAIN}}function getResponseUrl(i,e){let t=i.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class PlaylistLoader{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,s=t.loader,n=r||s,a=new n(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:PlaylistContextType.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:r,level:s,pathwayId:n,url:a,deliveryDirectives:l,levelInfo:u}=t;this.load({id:r,level:s,pathwayId:n,responseType:"text",type:PlaylistContextType.LEVEL,url:a,deliveryDirectives:l,levelOrTrack:u})}onAudioTrackLoading(e,t){const{id:r,groupId:s,url:n,deliveryDirectives:a,track:l}=t;this.load({id:r,groupId:s,level:null,responseType:"text",type:PlaylistContextType.AUDIO_TRACK,url:n,deliveryDirectives:a,levelOrTrack:l})}onSubtitleTrackLoading(e,t){const{id:r,groupId:s,url:n,deliveryDirectives:a,track:l}=t;this.load({id:r,groupId:s,level:null,responseType:"text",type:PlaylistContextType.SUBTITLE_TRACK,url:n,deliveryDirectives:a,levelOrTrack:l})}onLevelsUpdated(e,t){const r=this.loaders[PlaylistContextType.LEVEL];if(r){const s=r.context;s&&!t.levels.some(n=>n===s.levelOrTrack)&&(r.abort(),delete this.loaders[PlaylistContextType.LEVEL])}}load(e){var t;const r=this.hls.config;let s=this.getInternalLoader(e);if(s){const c=this.hls.logger,p=s.context;if(p&&p.levelOrTrack===e.levelOrTrack&&(p.url===e.url||p.deliveryDirectives&&!e.deliveryDirectives)){p.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${p.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let n;if(e.type===PlaylistContextType.MANIFEST?n=r.manifestLoadPolicy.default:n=_extends$1({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),isFiniteNumber((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===PlaylistContextType.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===PlaylistContextType.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===PlaylistContextType.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const p=c.partTarget,b=c.targetduration;if(p&&b){const P=Math.max(p*3,b*.8)*1e3;n=_extends$1({},n,{maxTimeToFirstByteMs:Math.min(P,n.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(P,n.maxTimeToFirstByteMs)})}}}const a=n.errorRetry||n.timeoutRetry||{},l={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,p,b,P)=>{const N=this.getInternalLoader(b);this.resetInternalLoader(b.type);const de=c.data;if(de.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,b,new Error("no EXTM3U delimiter"),P||null,p);return}p.parsing.start=performance.now(),M3U8Parser.isMediaPlaylist(de)||b.type!==PlaylistContextType.MANIFEST?this.handleTrackOrLevelPlaylist(c,p,b,P||null,N):this.handleMasterPlaylist(c,p,b,P)},onError:(c,p,b,P)=>{this.handleNetworkError(p,b,!1,c,P)},onTimeout:(c,p,b)=>{this.handleNetworkError(p,b,!0,void 0,c)}};s.load(e,l,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,r,s){const n=this.hls,a=e.data,l=getResponseUrl(e,r),u=M3U8Parser.parseMasterPlaylist(a,l);if(u.playlistParsingError){this.handleManifestParsingError(e,r,u.playlistParsingError,s,t);return}const{contentSteering:c,levels:p,sessionData:b,sessionKeys:P,startTimeOffset:N,variableList:de}=u;this.variableList=de;const{AUDIO:me=[],SUBTITLES:Ye,"CLOSED-CAPTIONS":Le}=M3U8Parser.parseMasterPlaylistMedia(a,l,u);me.length&&!me.some(Be=>!Be.url)&&p[0].audioCodec&&!p[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),me.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new AttrList({}),bitrate:0,url:""})),n.trigger(Events.MANIFEST_LOADED,{levels:p,audioTracks:me,subtitles:Ye,captions:Le,contentSteering:c,url:l,stats:t,networkDetails:s,sessionData:b,sessionKeys:P,startTimeOffset:N,variableList:de})}handleTrackOrLevelPlaylist(e,t,r,s,n){const a=this.hls,{id:l,level:u,type:c}=r,p=getResponseUrl(e,r),b=isFiniteNumber(u)?u:isFiniteNumber(l)?l:0,P=mapContextToLevelType(r),N=M3U8Parser.parseLevelPlaylist(e.data,p,b,P,0,this.variableList);if(c===PlaylistContextType.MANIFEST){const de={attrs:new AttrList({}),bitrate:0,details:N,name:"",url:p};N.requestScheduled=t.loading.start+computeReloadInterval(N,0),a.trigger(Events.MANIFEST_LOADED,{levels:[de],audioTracks:[],url:p,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=N,this.handlePlaylistLoaded(N,e,t,r,s,n)}handleManifestParsingError(e,t,r,s,n){this.hls.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===PlaylistContextType.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:s,stats:n})}handleNetworkError(e,t,r=!1,s,n){let a=`A network ${r?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===PlaylistContextType.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===PlaylistContextType.AUDIO_TRACK||e.type===PlaylistContextType.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const l=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let u=ErrorDetails.UNKNOWN,c=!1;const p=this.getInternalLoader(e);switch(e.type){case PlaylistContextType.MANIFEST:u=r?ErrorDetails.MANIFEST_LOAD_TIMEOUT:ErrorDetails.MANIFEST_LOAD_ERROR,c=!0;break;case PlaylistContextType.LEVEL:u=r?ErrorDetails.LEVEL_LOAD_TIMEOUT:ErrorDetails.LEVEL_LOAD_ERROR,c=!1;break;case PlaylistContextType.AUDIO_TRACK:u=r?ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case PlaylistContextType.SUBTITLE_TRACK:u=r?ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:ErrorDetails.SUBTITLE_LOAD_ERROR,c=!1;break}p&&this.resetInternalLoader(e.type);const b={type:ErrorTypes.NETWORK_ERROR,details:u,fatal:c,url:e.url,loader:p,context:e,error:l,networkDetails:t,stats:n};if(s){const P=t?.url||e.url;b.response=_objectSpread2({url:P,data:void 0},s)}this.hls.trigger(Events.ERROR,b)}handlePlaylistLoaded(e,t,r,s,n,a){const l=this.hls,{type:u,level:c,id:p,groupId:b,deliveryDirectives:P}=s,N=getResponseUrl(t,s),de=mapContextToLevelType(s),me=typeof s.level=="number"&&de===PlaylistLevelType.MAIN?c:void 0;if(!e.fragments.length){const Le=e.playlistParsingError=new Error("No Segments found in Playlist");l.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:N,error:Le,reason:Le.message,response:t,context:s,level:me,parent:de,networkDetails:n,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const Ye=e.playlistParsingError;if(Ye){if(this.hls.logger.warn(`${Ye} ${e.url}`),!l.config.ignorePlaylistParsingErrors){l.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:N,error:Ye,reason:Ye.message,response:t,context:s,level:me,parent:de,networkDetails:n,stats:r});return}e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case PlaylistContextType.MANIFEST:case PlaylistContextType.LEVEL:l.trigger(Events.LEVEL_LOADED,{details:e,levelInfo:s.levelOrTrack||l.levels[0],level:me||0,id:p||0,stats:r,networkDetails:n,deliveryDirectives:P,withoutMultiVariant:u===PlaylistContextType.MANIFEST});break;case PlaylistContextType.AUDIO_TRACK:l.trigger(Events.AUDIO_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:p||0,groupId:b||"",stats:r,networkDetails:n,deliveryDirectives:P});break;case PlaylistContextType.SUBTITLE_TRACK:l.trigger(Events.SUBTITLE_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:p||0,groupId:b||"",stats:r,networkDetails:n,deliveryDirectives:P});break}}}class Hls{static get version(){return version}static isMSESupported(){return isMSESupported()}static isSupported(){return isSupported()}static getMediaSource(){return getMediaSource()}static get Events(){return Events}static get MetadataSchema(){return MetadataSchema}static get ErrorTypes(){return ErrorTypes}static get ErrorDetails(){return ErrorDetails}static get DefaultConfig(){return Hls.defaultConfig?Hls.defaultConfig:hlsDefaultConfig}static set DefaultConfig(e){Hls.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new EventEmitter,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=enableLogs(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=mergeConfig(Hls.DefaultConfig,e,t);this.userConfig=e,r.progressive&&enableStreamingMode(r,t);const{abrController:s,bufferController:n,capLevelController:a,errorController:l,fpsController:u}=r,c=new l(this),p=this.abrController=new s(this),b=new FragmentTracker(this),P=r.interstitialsController,N=P?this.interstitialsController=new P(this,Hls):null,de=this.bufferController=new n(this,b),me=this.capLevelController=new a(this),Ye=new u(this),Le=new PlaylistLoader(this),tt=r.contentSteeringController,Be=tt?new tt(this):null,nt=this.levelController=new LevelController(this,Be),ft=new ID3TrackController(this),mt=new KeyLoader(this.config,this.logger),ht=this.streamController=new StreamController(this,b,mt),Et=this.gapController=new GapController(this,b);me.setStreamController(ht),Ye.setStreamController(ht);const St=[Le,nt,ht];N&&St.splice(1,0,N),Be&&St.splice(1,0,Be),this.networkControllers=St;const bt=[p,de,Et,me,Ye,ft,b];this.audioTrackController=this.createController(r.audioTrackController,St);const Pt=r.audioStreamController;Pt&&St.push(this.audioStreamController=new Pt(this,b,mt)),this.subtitleTrackController=this.createController(r.subtitleTrackController,St);const Rt=r.subtitleStreamController;Rt&&St.push(this.subtititleStreamController=new Rt(this,b,mt)),this.createController(r.timelineController,bt),mt.emeController=this.emeController=this.createController(r.emeController,bt),this.cmcdController=this.createController(r.cmcdController,bt),this.latencyController=this.createController(LatencyController,bt),this.coreComponents=bt,St.push(c);const Dt=c.onErrorOut;typeof Dt=="function"&&this.on(Events.ERROR,Dt,c),this.on(Events.MANIFEST_LOADED,Le.onManifestLoaded,Le)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,s){this._emitter.off(e,t,r,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const s=e===Events.ERROR;this.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:s,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const n=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.ATTACH_MEDIA_ERROR,fatal:!0,error:n});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,r=t?e.media:e,s=t?e:{media:r};this._media=r,this.trigger(Events.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(Events.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(Events.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,r=this._url,s=this._url=urlToolkitExports.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&r&&(r!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Events.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[PlaylistLevelType.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[PlaylistLevelType.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[PlaylistLevelType.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=uuid()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){isHdcpLevel(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let s=0;s<r;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let s;if(t===-1&&e!=null&&e.length?s=e.length-1:s=t,r)for(let n=s;n--;){const a=e[n].attrs["HDCP-LEVEL"];if(a&&a<=r)return n}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const r=getAudioTracksByGroup(t);return getMediaDecodingInfoPromise(e,r,navigator.mediaCapabilities)}}Hls.defaultConfig=void 0;const SocialVideoCard=({src:i,title:e,width:t,isActive:r,badgeText:s="Coming Soon"})=>{const n=reactExports.useRef(null),a=reactExports.useRef(null),[l,u]=reactExports.useState(null),[c,p]=reactExports.useState(null),[b,P]=reactExports.useState([]),[N,de]=reactExports.useState(-1);return reactExports.useEffect(()=>{const me=n.current;let Ye;if(me&&Hls.isSupported()){const Le=new Hls;return a.current=Le,Ye=performance.now(),Le?.loadSource(i),Le?.attachMedia(me),Le.on(Hls.Events.MANIFEST_PARSED,()=>{P(Le.levels)}),me.addEventListener("canplay",()=>{const tt=performance.now()-Ye;p(tt);const nt=(me.buffered.length?me.buffered.end(0):0)/(tt/1e3);u(nt)}),()=>{Le.destroy()}}},[i]),reactExports.useEffect(()=>{const me=n.current;r&&me?me.play().catch(()=>{}):!r&&me&&me.pause()},[r]),jsxRuntimeExports.jsxs("div",{className:"group relative bg-white/5 rounded-2xl overflow-hidden border border-white/10 hover:border-lime-500/50 transition-all duration-300 ",children:[jsxRuntimeExports.jsxs("div",{className:"relative aspect-[9/16] bg-gradient-to-br from-lime-500/20 to-green-500/20 flex items-center justify-center overflow-hidden",children:[jsxRuntimeExports.jsx("video",{ref:n,controls:!1,width:t,muted:!0,className:"absolute inset-0 w-full h-full object-cover opacity-60 transition-transform duration-500 text-transparent",loop:!0}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors duration-300 active-bg"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex flex-col justify-between p-4",children:jsxRuntimeExports.jsx("h3",{className:"text-white font-bold text-sm mb-3 group-hover:text-lime-400 transition-colors duration-300",children:e})})]})};function isObject$2(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function extend$2(i,e){i===void 0&&(i={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof i[r]>"u"?i[r]=e[r]:isObject$2(e[r])&&isObject$2(i[r])&&Object.keys(e[r]).length>0&&extend$2(i[r],e[r])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const i=typeof document<"u"?document:{};return extend$2(i,ssrDocument),i}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function i(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function getWindow(){const i=typeof window<"u"?window:{};return extend$2(i,ssrWindow),i}function classesToTokens(i){return i===void 0&&(i=""),i.trim().split(" ").filter(e=>!!e.trim())}function deleteProps(i){const e=i;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function nextTick(i,e){return e===void 0&&(e=0),setTimeout(i,e)}function now(){return Date.now()}function getComputedStyle$1(i){const e=getWindow();let t;return e.getComputedStyle&&(t=e.getComputedStyle(i,null)),!t&&i.currentStyle&&(t=i.currentStyle),t||(t=i.style),t}function getTranslate(i,e){e===void 0&&(e="x");const t=getWindow();let r,s,n;const a=getComputedStyle$1(i);return t.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(l=>l.replace(",",".")).join(", ")),n=new t.WebKitCSSMatrix(s==="none"?"":s)):(n=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=n.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=n.m41:r.length===16?s=parseFloat(r[12]):s=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?s=n.m42:r.length===16?s=parseFloat(r[13]):s=parseFloat(r[5])),s||0}function isObject$1(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function isNode(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function extend$1(){const i=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!isNode(r)){const s=Object.keys(Object(r)).filter(n=>e.indexOf(n)<0);for(let n=0,a=s.length;n<a;n+=1){const l=s[n],u=Object.getOwnPropertyDescriptor(r,l);u!==void 0&&u.enumerable&&(isObject$1(i[l])&&isObject$1(r[l])?r[l].__swiper__?i[l]=r[l]:extend$1(i[l],r[l]):!isObject$1(i[l])&&isObject$1(r[l])?(i[l]={},r[l].__swiper__?i[l]=r[l]:extend$1(i[l],r[l])):i[l]=r[l])}}}return i}function setCSSProperty(i,e,t){i.style.setProperty(e,t)}function animateCSSModeScroll(i){let{swiper:e,targetPosition:t,side:r}=i;const s=getWindow(),n=-e.translate;let a=null,l;const u=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const c=t>n?"next":"prev",p=(P,N)=>c==="next"&&P>=N||c==="prev"&&P<=N,b=()=>{l=new Date().getTime(),a===null&&(a=l);const P=Math.max(Math.min((l-a)/u,1),0),N=.5-Math.cos(P*Math.PI)/2;let de=n+N*(t-n);if(p(de,t)&&(de=t),e.wrapperEl.scrollTo({[r]:de}),p(de,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:de})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(b)};b()}function getSlideTransformEl(i){return i.querySelector(".swiper-slide-transform")||i.shadowRoot&&i.shadowRoot.querySelector(".swiper-slide-transform")||i}function elementChildren(i,e){e===void 0&&(e="");const t=getWindow(),r=[...i.children];return t.HTMLSlotElement&&i instanceof HTMLSlotElement&&r.push(...i.assignedElements()),e?r.filter(s=>s.matches(e)):r}function elementIsChildOfSlot(i,e){const t=[e];for(;t.length>0;){const r=t.shift();if(i===r)return!0;t.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function elementIsChildOf(i,e){const t=getWindow();let r=e.contains(i);return!r&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(i),r||(r=elementIsChildOfSlot(i,e))),r}function showWarning(i){try{console.warn(i);return}catch{}}function createElement(i,e){e===void 0&&(e=[]);const t=document.createElement(i);return t.classList.add(...Array.isArray(e)?e:classesToTokens(e)),t}function elementPrevAll(i,e){const t=[];for(;i.previousElementSibling;){const r=i.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),i=r}return t}function elementNextAll(i,e){const t=[];for(;i.nextElementSibling;){const r=i.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),i=r}return t}function elementStyle(i,e){return getWindow().getComputedStyle(i,null).getPropertyValue(e)}function elementIndex(i){let e=i,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function elementParents(i,e){const t=[];let r=i.parentElement;for(;r;)t.push(r),r=r.parentElement;return t}function elementOuterSize(i,e,t){const r=getWindow();return i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function getRotateFix(i){return e=>Math.abs(e)>0&&i.browser&&i.browser.need3dFix&&Math.abs(e)%90===0?e+.001:e}function setInnerHTML(i,e){e===void 0&&(e=""),typeof trustedTypes<"u"?i.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):i.innerHTML=e}function effectInit(i){const{effect:e,swiper:t,on:r,setTranslate:s,setTransition:n,overwriteParams:a,perspective:l,recreateShadows:u,getEffectParams:c}=i;r("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),l&&l()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const b=a?a():{};Object.assign(t.params,b),Object.assign(t.originalParams,b)}),r("setTranslate _virtualUpdated",()=>{t.params.effect===e&&s()}),r("setTransition",(b,P)=>{t.params.effect===e&&n(P)}),r("transitionEnd",()=>{if(t.params.effect===e&&u){if(!c||!c().slideShadows)return;t.slides.forEach(b=>{b.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(P=>P.remove())}),u()}});let p;r("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(p=!0),requestAnimationFrame(()=>{p&&t.slides&&t.slides.length&&(s(),p=!1)}))})}function effectTarget(i,e){const t=getSlideTransformEl(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function createShadow(i,e,t){const r=`swiper-slide-shadow${t?`-${t}`:""}${` swiper-slide-shadow-${i}`}`,s=getSlideTransformEl(e);let n=s.querySelector(`.${r.split(" ").join(".")}`);return n||(n=createElement("div",r.split(" ")),s.append(n)),n}function EffectCoverflow(i){let{swiper:e,extendParams:t,on:r}=i;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),effectInit({effect:"coverflow",swiper:e,on:r,setTranslate:()=>{const{width:a,height:l,slides:u,slidesSizesGrid:c}=e,p=e.params.coverflowEffect,b=e.isHorizontal(),P=e.translate,N=b?-P+a/2:-P+l/2,de=b?p.rotate:-p.rotate,me=p.depth,Ye=getRotateFix(e);for(let Le=0,tt=u.length;Le<tt;Le+=1){const Be=u[Le],nt=c[Le],ft=Be.swiperSlideOffset,mt=(N-ft-nt/2)/nt,ht=typeof p.modifier=="function"?p.modifier(mt):mt*p.modifier;let Et=b?de*ht:0,St=b?0:de*ht,bt=-me*Math.abs(ht),Pt=p.stretch;typeof Pt=="string"&&Pt.indexOf("%")!==-1&&(Pt=parseFloat(p.stretch)/100*nt);let Rt=b?0:Pt*ht,Dt=b?Pt*ht:0,kt=1-(1-p.scale)*Math.abs(ht);Math.abs(Dt)<.001&&(Dt=0),Math.abs(Rt)<.001&&(Rt=0),Math.abs(bt)<.001&&(bt=0),Math.abs(Et)<.001&&(Et=0),Math.abs(St)<.001&&(St=0),Math.abs(kt)<.001&&(kt=0);const Lt=`translate3d(${Dt}px,${Rt}px,${bt}px)  rotateX(${Ye(St)}deg) rotateY(${Ye(Et)}deg) scale(${kt})`,vt=effectTarget(p,Be);if(vt.style.transform=Lt,Be.style.zIndex=-Math.abs(Math.round(ht))+1,p.slideShadows){let xt=b?Be.querySelector(".swiper-slide-shadow-left"):Be.querySelector(".swiper-slide-shadow-top"),gt=b?Be.querySelector(".swiper-slide-shadow-right"):Be.querySelector(".swiper-slide-shadow-bottom");xt||(xt=createShadow("coverflow",Be,b?"left":"top")),gt||(gt=createShadow("coverflow",Be,b?"right":"bottom")),xt&&(xt.style.opacity=ht>0?ht:0),gt&&(gt.style.opacity=-ht>0?-ht:0)}}},setTransition:a=>{e.slides.map(u=>getSlideTransformEl(u)).forEach(u=>{u.style.transitionDuration=`${a}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${a}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}let support;function calcSupport(){const i=getWindow(),e=getDocument();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(i){let{userAgent:e}=i===void 0?{}:i;const t=getSupport(),r=getWindow(),s=r.navigator.platform,n=e||r.navigator.userAgent,a={ios:!1,android:!1},l=r.screen.width,u=r.screen.height,c=n.match(/(Android);?[\s\/]+([\d.]+)?/);let p=n.match(/(iPad).*OS\s([\d_]+)/);const b=n.match(/(iPod)(.*OS\s([\d_]+))?/),P=!p&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),N=s==="Win32";let de=s==="MacIntel";const me=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!p&&de&&t.touch&&me.indexOf(`${l}x${u}`)>=0&&(p=n.match(/(Version)\/([\d.]+)/),p||(p=[0,1,"13_0_0"]),de=!1),c&&!N&&(a.os="android",a.android=!0),(p||P||b)&&(a.os="ios",a.ios=!0),a}function getDevice(i){return i===void 0&&(i={}),deviceCached||(deviceCached=calcDevice(i)),deviceCached}let browser;function calcBrowser(){const i=getWindow(),e=getDevice();let t=!1;function r(){const l=i.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(r()){const l=String(i.navigator.userAgent);if(l.includes("Version/")){const[u,c]=l.split("Version/")[1].split(" ")[0].split(".").map(p=>Number(p));t=u<16||u===16&&c<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),n=r(),a=n||s&&e.ios;return{isSafari:t||n,needPerspectiveFix:t,need3dFix:a,isWebView:s}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize(i){let{swiper:e,on:t,emit:r}=i;const s=getWindow();let n=null,a=null;const l=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},u=()=>{!e||e.destroyed||!e.initialized||(n=new ResizeObserver(b=>{a=s.requestAnimationFrame(()=>{const{width:P,height:N}=e;let de=P,me=N;b.forEach(Ye=>{let{contentBoxSize:Le,contentRect:tt,target:Be}=Ye;Be&&Be!==e.el||(de=tt?tt.width:(Le[0]||Le).inlineSize,me=tt?tt.height:(Le[0]||Le).blockSize)}),(de!==P||me!==N)&&l()})}),n.observe(e.el))},c=()=>{a&&s.cancelAnimationFrame(a),n&&n.unobserve&&e.el&&(n.unobserve(e.el),n=null)},p=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){u();return}s.addEventListener("resize",l),s.addEventListener("orientationchange",p)}),t("destroy",()=>{c(),s.removeEventListener("resize",l),s.removeEventListener("orientationchange",p)})}function Observer(i){let{swiper:e,extendParams:t,on:r,emit:s}=i;const n=[],a=getWindow(),l=function(p,b){b===void 0&&(b={});const P=a.MutationObserver||a.WebkitMutationObserver,N=new P(de=>{if(e.__preventObserver__)return;if(de.length===1){s("observerUpdate",de[0]);return}const me=function(){s("observerUpdate",de[0])};a.requestAnimationFrame?a.requestAnimationFrame(me):a.setTimeout(me,0)});N.observe(p,{attributes:typeof b.attributes>"u"?!0:b.attributes,childList:e.isElement||(typeof b.childList>"u"?!0:b).childList,characterData:typeof b.characterData>"u"?!0:b.characterData}),n.push(N)},u=()=>{if(e.params.observer){if(e.params.observeParents){const p=elementParents(e.hostEl);for(let b=0;b<p.length;b+=1)l(p[b])}l(e.hostEl,{childList:e.params.observeSlideChildren}),l(e.wrapperEl,{attributes:!1})}},c=()=>{n.forEach(p=>{p.disconnect()}),n.splice(0,n.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",u),r("destroy",c)}var eventsEmitter={on(i,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const s=t?"unshift":"push";return i.split(" ").forEach(n=>{r.eventsListeners[n]||(r.eventsListeners[n]=[]),r.eventsListeners[n][s](e)}),r},once(i,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function s(){r.off(i,s),s.__emitterProxy&&delete s.__emitterProxy;for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];e.apply(r,a)}return s.__emitterProxy=e,r.on(i,s,t)},onAny(i,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(i)<0&&t.eventsAnyListeners[r](i),t},offAny(i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(i);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(i,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||i.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((s,n)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[r].splice(n,1)})}),t},emit(){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let e,t,r;for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return typeof n[0]=="string"||Array.isArray(n[0])?(e=n[0],t=n.slice(1,n.length),r=i):(e=n[0].events,t=n[0].data,r=n[0].context||i),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(u=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(c=>{c.apply(r,[u,...t])}),i.eventsListeners&&i.eventsListeners[u]&&i.eventsListeners[u].forEach(c=>{c.apply(r,t)})}),i}};function updateSize(){const i=this;let e,t;const r=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=r.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?t=i.params.height:t=r.clientHeight,!(e===0&&i.isHorizontal()||t===0&&i.isVertical())&&(e=e-parseInt(elementStyle(r,"padding-left")||0,10)-parseInt(elementStyle(r,"padding-right")||0,10),t=t-parseInt(elementStyle(r,"padding-top")||0,10)-parseInt(elementStyle(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(i,{width:e,height:t,size:i.isHorizontal()?e:t}))}function updateSlides(){const i=this;function e(bt,Pt){return parseFloat(bt.getPropertyValue(i.getDirectionLabel(Pt))||0)}const t=i.params,{wrapperEl:r,slidesEl:s,size:n,rtlTranslate:a,wrongRTL:l}=i,u=i.virtual&&t.virtual.enabled,c=u?i.virtual.slides.length:i.slides.length,p=elementChildren(s,`.${i.params.slideClass}, swiper-slide`),b=u?i.virtual.slides.length:p.length;let P=[];const N=[],de=[];let me=t.slidesOffsetBefore;typeof me=="function"&&(me=t.slidesOffsetBefore.call(i));let Ye=t.slidesOffsetAfter;typeof Ye=="function"&&(Ye=t.slidesOffsetAfter.call(i));const Le=i.snapGrid.length,tt=i.slidesGrid.length;let Be=t.spaceBetween,nt=-me,ft=0,mt=0;if(typeof n>"u")return;typeof Be=="string"&&Be.indexOf("%")>=0?Be=parseFloat(Be.replace("%",""))/100*n:typeof Be=="string"&&(Be=parseFloat(Be)),i.virtualSize=-Be,p.forEach(bt=>{a?bt.style.marginLeft="":bt.style.marginRight="",bt.style.marginBottom="",bt.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(setCSSProperty(r,"--swiper-centered-offset-before",""),setCSSProperty(r,"--swiper-centered-offset-after",""));const ht=t.grid&&t.grid.rows>1&&i.grid;ht?i.grid.initSlides(p):i.grid&&i.grid.unsetSlides();let Et;const St=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(bt=>typeof t.breakpoints[bt].slidesPerView<"u").length>0;for(let bt=0;bt<b;bt+=1){Et=0;let Pt;if(p[bt]&&(Pt=p[bt]),ht&&i.grid.updateSlide(bt,Pt,p),!(p[bt]&&elementStyle(Pt,"display")==="none")){if(t.slidesPerView==="auto"){St&&(p[bt].style[i.getDirectionLabel("width")]="");const Rt=getComputedStyle(Pt),Dt=Pt.style.transform,kt=Pt.style.webkitTransform;if(Dt&&(Pt.style.transform="none"),kt&&(Pt.style.webkitTransform="none"),t.roundLengths)Et=i.isHorizontal()?elementOuterSize(Pt,"width"):elementOuterSize(Pt,"height");else{const Lt=e(Rt,"width"),vt=e(Rt,"padding-left"),xt=e(Rt,"padding-right"),gt=e(Rt,"margin-left"),_t=e(Rt,"margin-right"),yt=Rt.getPropertyValue("box-sizing");if(yt&&yt==="border-box")Et=Lt+gt+_t;else{const{clientWidth:At,offsetWidth:wt}=Pt;Et=Lt+vt+xt+gt+_t+(wt-At)}}Dt&&(Pt.style.transform=Dt),kt&&(Pt.style.webkitTransform=kt),t.roundLengths&&(Et=Math.floor(Et))}else Et=(n-(t.slidesPerView-1)*Be)/t.slidesPerView,t.roundLengths&&(Et=Math.floor(Et)),p[bt]&&(p[bt].style[i.getDirectionLabel("width")]=`${Et}px`);p[bt]&&(p[bt].swiperSlideSize=Et),de.push(Et),t.centeredSlides?(nt=nt+Et/2+ft/2+Be,ft===0&&bt!==0&&(nt=nt-n/2-Be),bt===0&&(nt=nt-n/2-Be),Math.abs(nt)<1/1e3&&(nt=0),t.roundLengths&&(nt=Math.floor(nt)),mt%t.slidesPerGroup===0&&P.push(nt),N.push(nt)):(t.roundLengths&&(nt=Math.floor(nt)),(mt-Math.min(i.params.slidesPerGroupSkip,mt))%i.params.slidesPerGroup===0&&P.push(nt),N.push(nt),nt=nt+Et+Be),i.virtualSize+=Et+Be,ft=Et,mt+=1}}if(i.virtualSize=Math.max(i.virtualSize,n)+Ye,a&&l&&(t.effect==="slide"||t.effect==="coverflow")&&(r.style.width=`${i.virtualSize+Be}px`),t.setWrapperSize&&(r.style[i.getDirectionLabel("width")]=`${i.virtualSize+Be}px`),ht&&i.grid.updateWrapperSize(Et,P),!t.centeredSlides){const bt=[];for(let Pt=0;Pt<P.length;Pt+=1){let Rt=P[Pt];t.roundLengths&&(Rt=Math.floor(Rt)),P[Pt]<=i.virtualSize-n&&bt.push(Rt)}P=bt,Math.floor(i.virtualSize-n)-Math.floor(P[P.length-1])>1&&P.push(i.virtualSize-n)}if(u&&t.loop){const bt=de[0]+Be;if(t.slidesPerGroup>1){const Pt=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/t.slidesPerGroup),Rt=bt*t.slidesPerGroup;for(let Dt=0;Dt<Pt;Dt+=1)P.push(P[P.length-1]+Rt)}for(let Pt=0;Pt<i.virtual.slidesBefore+i.virtual.slidesAfter;Pt+=1)t.slidesPerGroup===1&&P.push(P[P.length-1]+bt),N.push(N[N.length-1]+bt),i.virtualSize+=bt}if(P.length===0&&(P=[0]),Be!==0){const bt=i.isHorizontal()&&a?"marginLeft":i.getDirectionLabel("marginRight");p.filter((Pt,Rt)=>!t.cssMode||t.loop?!0:Rt!==p.length-1).forEach(Pt=>{Pt.style[bt]=`${Be}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let bt=0;de.forEach(Rt=>{bt+=Rt+(Be||0)}),bt-=Be;const Pt=bt>n?bt-n:0;P=P.map(Rt=>Rt<=0?-me:Rt>Pt?Pt+Ye:Rt)}if(t.centerInsufficientSlides){let bt=0;de.forEach(Rt=>{bt+=Rt+(Be||0)}),bt-=Be;const Pt=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(bt+Pt<n){const Rt=(n-bt-Pt)/2;P.forEach((Dt,kt)=>{P[kt]=Dt-Rt}),N.forEach((Dt,kt)=>{N[kt]=Dt+Rt})}}if(Object.assign(i,{slides:p,snapGrid:P,slidesGrid:N,slidesSizesGrid:de}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){setCSSProperty(r,"--swiper-centered-offset-before",`${-P[0]}px`),setCSSProperty(r,"--swiper-centered-offset-after",`${i.size/2-de[de.length-1]/2}px`);const bt=-i.snapGrid[0],Pt=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(Rt=>Rt+bt),i.slidesGrid=i.slidesGrid.map(Rt=>Rt+Pt)}if(b!==c&&i.emit("slidesLengthChange"),P.length!==Le&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),N.length!==tt&&i.emit("slidesGridLengthChange"),t.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!u&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const bt=`${t.containerModifierClass}backface-hidden`,Pt=i.el.classList.contains(bt);b<=t.maxBackfaceHiddenSlides?Pt||i.el.classList.add(bt):Pt&&i.el.classList.remove(bt)}}function updateAutoHeight(i){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let s=0,n;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);const a=l=>r?e.slides[e.getSlideIndexByData(l)]:e.slides[l];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(l=>{t.push(l)});else for(n=0;n<Math.ceil(e.params.slidesPerView);n+=1){const l=e.activeIndex+n;if(l>e.slides.length&&!r)break;t.push(a(l))}else t.push(a(e.activeIndex));for(n=0;n<t.length;n+=1)if(typeof t[n]<"u"){const l=t[n].offsetHeight;s=l>s?l:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function updateSlidesOffset(){const i=this,e=i.slides,t=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(i.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-i.cssOverflowAdjustment()}const toggleSlideClasses$1=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function updateSlidesProgress(i){i===void 0&&(i=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:s,snapGrid:n}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-i;s&&(a=i),e.visibleSlidesIndexes=[],e.visibleSlides=[];let l=t.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*e.size:typeof l=="string"&&(l=parseFloat(l));for(let u=0;u<r.length;u+=1){const c=r[u];let p=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(p-=r[0].swiperSlideOffset);const b=(a+(t.centeredSlides?e.minTranslate():0)-p)/(c.swiperSlideSize+l),P=(a-n[0]+(t.centeredSlides?e.minTranslate():0)-p)/(c.swiperSlideSize+l),N=-(a-p),de=N+e.slidesSizesGrid[u],me=N>=0&&N<=e.size-e.slidesSizesGrid[u],Ye=N>=0&&N<e.size-1||de>1&&de<=e.size||N<=0&&de>=e.size;Ye&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(u)),toggleSlideClasses$1(c,Ye,t.slideVisibleClass),toggleSlideClasses$1(c,me,t.slideFullyVisibleClass),c.progress=s?-b:b,c.originalProgress=s?-P:P}}function updateProgress(i){const e=this;if(typeof i>"u"){const p=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*p||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:n,isEnd:a,progressLoop:l}=e;const u=n,c=a;if(r===0)s=0,n=!0,a=!0;else{s=(i-e.minTranslate())/r;const p=Math.abs(i-e.minTranslate())<1,b=Math.abs(i-e.maxTranslate())<1;n=p||s<=0,a=b||s>=1,p&&(s=0),b&&(s=1)}if(t.loop){const p=e.getSlideIndexByData(0),b=e.getSlideIndexByData(e.slides.length-1),P=e.slidesGrid[p],N=e.slidesGrid[b],de=e.slidesGrid[e.slidesGrid.length-1],me=Math.abs(i);me>=P?l=(me-P)/de:l=(me+de-N)/de,l>1&&(l-=1)}Object.assign(e,{progress:s,progressLoop:l,isBeginning:n,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(i),n&&!u&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(u&&!n||c&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}const toggleSlideClasses=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function updateSlidesClasses(){const i=this,{slides:e,params:t,slidesEl:r,activeIndex:s}=i,n=i.virtual&&t.virtual.enabled,a=i.grid&&t.grid&&t.grid.rows>1,l=b=>elementChildren(r,`.${t.slideClass}${b}, swiper-slide${b}`)[0];let u,c,p;if(n)if(t.loop){let b=s-i.virtual.slidesBefore;b<0&&(b=i.virtual.slides.length+b),b>=i.virtual.slides.length&&(b-=i.virtual.slides.length),u=l(`[data-swiper-slide-index="${b}"]`)}else u=l(`[data-swiper-slide-index="${s}"]`);else a?(u=e.find(b=>b.column===s),p=e.find(b=>b.column===s+1),c=e.find(b=>b.column===s-1)):u=e[s];u&&(a||(p=elementNextAll(u,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!p&&(p=e[0]),c=elementPrevAll(u,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(b=>{toggleSlideClasses(b,b===u,t.slideActiveClass),toggleSlideClasses(b,b===p,t.slideNextClass),toggleSlideClasses(b,b===c,t.slidePrevClass)}),i.emitSlidesClasses()}const processLazyPreloader=(i,e)=>{if(!i||i.destroyed||!i.params)return;const t=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,r=e.closest(t());if(r){let s=r.querySelector(`.${i.params.lazyPreloaderClass}`);!s&&i.isElement&&(r.shadowRoot?s=r.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(s=r.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},unlazy=(i,e)=>{if(!i.slides[e])return;const t=i.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},preload=i=>{if(!i||i.destroyed||!i.params)return;let e=i.params.lazyPreloadPrevNext;const t=i.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),s=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const a=s,l=[a-e];l.push(...Array.from({length:e}).map((u,c)=>a+r+c)),i.slides.forEach((u,c)=>{l.includes(u.column)&&unlazy(i,c)});return}const n=s+r-1;if(i.params.rewind||i.params.loop)for(let a=s-e;a<=n+e;a+=1){const l=(a%t+t)%t;(l<s||l>n)&&unlazy(i,l)}else for(let a=Math.max(s-e,0);a<=Math.min(n+e,t-1);a+=1)a!==s&&(a>n||a<s)&&unlazy(i,a)};function getActiveIndexByTranslate(i){const{slidesGrid:e,params:t}=i,r=i.rtlTranslate?i.translate:-i.translate;let s;for(let n=0;n<e.length;n+=1)typeof e[n+1]<"u"?r>=e[n]&&r<e[n+1]-(e[n+1]-e[n])/2?s=n:r>=e[n]&&r<e[n+1]&&(s=n+1):r>=e[n]&&(s=n);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function updateActiveIndex(i){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:s,activeIndex:n,realIndex:a,snapIndex:l}=e;let u=i,c;const p=N=>{let de=N-e.virtual.slidesBefore;return de<0&&(de=e.virtual.slides.length+de),de>=e.virtual.slides.length&&(de-=e.virtual.slides.length),de};if(typeof u>"u"&&(u=getActiveIndexByTranslate(e)),r.indexOf(t)>=0)c=r.indexOf(t);else{const N=Math.min(s.slidesPerGroupSkip,u);c=N+Math.floor((u-N)/s.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),u===n&&!e.params.loop){c!==l&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(u===n&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=p(u);return}const b=e.grid&&s.grid&&s.grid.rows>1;let P;if(e.virtual&&s.virtual.enabled&&s.loop)P=p(u);else if(b){const N=e.slides.find(me=>me.column===u);let de=parseInt(N.getAttribute("data-swiper-slide-index"),10);Number.isNaN(de)&&(de=Math.max(e.slides.indexOf(N),0)),P=Math.floor(de/s.grid.rows)}else if(e.slides[u]){const N=e.slides[u].getAttribute("data-swiper-slide-index");N?P=parseInt(N,10):P=u}else P=u;Object.assign(e,{previousSnapIndex:l,snapIndex:c,previousRealIndex:a,realIndex:P,previousIndex:n,activeIndex:u}),e.initialized&&preload(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==P&&e.emit("realIndexChange"),e.emit("slideChange"))}function updateClickedSlide(i,e){const t=this,r=t.params;let s=i.closest(`.${r.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(i)&&[...e.slice(e.indexOf(i)+1,e.length)].forEach(l=>{!s&&l.matches&&l.matches(`.${r.slideClass}, swiper-slide`)&&(s=l)});let n=!1,a;if(s){for(let l=0;l<t.slides.length;l+=1)if(t.slides[l]===s){n=!0,a=l;break}}if(s&&n)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(i){i===void 0&&(i=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:s,wrapperEl:n}=e;if(t.virtualTranslate)return r?-s:s;if(t.cssMode)return s;let a=getTranslate(n,i);return a+=e.cssOverflowAdjustment(),r&&(a=-a),a||0}function setTranslate(i,e){const t=this,{rtlTranslate:r,params:s,wrapperEl:n,progress:a}=t;let l=0,u=0;const c=0;t.isHorizontal()?l=r?-i:i:u=i,s.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?l:u,s.cssMode?n[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-l:-u:s.virtualTranslate||(t.isHorizontal()?l-=t.cssOverflowAdjustment():u-=t.cssOverflowAdjustment(),n.style.transform=`translate3d(${l}px, ${u}px, ${c}px)`);let p;const b=t.maxTranslate()-t.minTranslate();b===0?p=0:p=(i-t.minTranslate())/b,p!==a&&t.updateProgress(i),t.emit("setTranslate",t.translate,e)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(i,e,t,r,s){i===void 0&&(i=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const n=this,{params:a,wrapperEl:l}=n;if(n.animating&&a.preventInteractionOnTransition)return!1;const u=n.minTranslate(),c=n.maxTranslate();let p;if(r&&i>u?p=u:r&&i<c?p=c:p=i,n.updateProgress(p),a.cssMode){const b=n.isHorizontal();if(e===0)l[b?"scrollLeft":"scrollTop"]=-p;else{if(!n.support.smoothScroll)return animateCSSModeScroll({swiper:n,targetPosition:-p,side:b?"left":"top"}),!0;l.scrollTo({[b?"left":"top"]:-p,behavior:"smooth"})}return!0}return e===0?(n.setTransition(0),n.setTranslate(p),t&&(n.emit("beforeTransitionStart",e,s),n.emit("transitionEnd"))):(n.setTransition(e),n.setTranslate(p),t&&(n.emit("beforeTransitionStart",e,s),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(P){!n||n.destroyed||P.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,n.animating=!1,t&&n.emit("transitionEnd"))}),n.wrapperEl.addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(i,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${i}ms`,t.wrapperEl.style.transitionDelay=i===0?"0ms":""),t.emit("setTransition",i,e)}function transitionEmit(i){let{swiper:e,runCallbacks:t,direction:r,step:s}=i;const{activeIndex:n,previousIndex:a}=e;let l=r;l||(n>a?l="next":n<a?l="prev":l="reset"),e.emit(`transition${s}`),t&&l==="reset"?e.emit(`slideResetTransition${s}`):t&&n!==a&&(e.emit(`slideChangeTransition${s}`),l==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`))}function transitionStart(i,e){i===void 0&&(i=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),transitionEmit({swiper:t,runCallbacks:i,direction:e,step:"Start"}))}function transitionEnd(i,e){i===void 0&&(i=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),transitionEmit({swiper:t,runCallbacks:i,direction:e,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(i,e,t,r,s){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));const n=this;let a=i;a<0&&(a=0);const{params:l,snapGrid:u,slidesGrid:c,previousIndex:p,activeIndex:b,rtlTranslate:P,wrapperEl:N,enabled:de}=n;if(!de&&!r&&!s||n.destroyed||n.animating&&l.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=n.params.speed);const me=Math.min(n.params.slidesPerGroupSkip,a);let Ye=me+Math.floor((a-me)/n.params.slidesPerGroup);Ye>=u.length&&(Ye=u.length-1);const Le=-u[Ye];if(l.normalizeSlideIndex)for(let ht=0;ht<c.length;ht+=1){const Et=-Math.floor(Le*100),St=Math.floor(c[ht]*100),bt=Math.floor(c[ht+1]*100);typeof c[ht+1]<"u"?Et>=St&&Et<bt-(bt-St)/2?a=ht:Et>=St&&Et<bt&&(a=ht+1):Et>=St&&(a=ht)}if(n.initialized&&a!==b&&(!n.allowSlideNext&&(P?Le>n.translate&&Le>n.minTranslate():Le<n.translate&&Le<n.minTranslate())||!n.allowSlidePrev&&Le>n.translate&&Le>n.maxTranslate()&&(b||0)!==a))return!1;a!==(p||0)&&t&&n.emit("beforeSlideChangeStart"),n.updateProgress(Le);let tt;a>b?tt="next":a<b?tt="prev":tt="reset";const Be=n.virtual&&n.params.virtual.enabled;if(!(Be&&s)&&(P&&-Le===n.translate||!P&&Le===n.translate))return n.updateActiveIndex(a),l.autoHeight&&n.updateAutoHeight(),n.updateSlidesClasses(),l.effect!=="slide"&&n.setTranslate(Le),tt!=="reset"&&(n.transitionStart(t,tt),n.transitionEnd(t,tt)),!1;if(l.cssMode){const ht=n.isHorizontal(),Et=P?Le:-Le;if(e===0)Be&&(n.wrapperEl.style.scrollSnapType="none",n._immediateVirtual=!0),Be&&!n._cssModeVirtualInitialSet&&n.params.initialSlide>0?(n._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{N[ht?"scrollLeft":"scrollTop"]=Et})):N[ht?"scrollLeft":"scrollTop"]=Et,Be&&requestAnimationFrame(()=>{n.wrapperEl.style.scrollSnapType="",n._immediateVirtual=!1});else{if(!n.support.smoothScroll)return animateCSSModeScroll({swiper:n,targetPosition:Et,side:ht?"left":"top"}),!0;N.scrollTo({[ht?"left":"top"]:Et,behavior:"smooth"})}return!0}const mt=getBrowser().isSafari;return Be&&!s&&mt&&n.isElement&&n.virtual.update(!1,!1,a),n.setTransition(e),n.setTranslate(Le),n.updateActiveIndex(a),n.updateSlidesClasses(),n.emit("beforeTransitionStart",e,r),n.transitionStart(t,tt),e===0?n.transitionEnd(t,tt):n.animating||(n.animating=!0,n.onSlideToWrapperTransitionEnd||(n.onSlideToWrapperTransitionEnd=function(Et){!n||n.destroyed||Et.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onSlideToWrapperTransitionEnd),n.onSlideToWrapperTransitionEnd=null,delete n.onSlideToWrapperTransitionEnd,n.transitionEnd(t,tt))}),n.wrapperEl.addEventListener("transitionend",n.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(i,e,t,r){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const n=s.grid&&s.params.grid&&s.params.grid.rows>1;let a=i;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)a=a+s.virtual.slidesBefore;else{let l;if(n){const P=a*s.params.grid.rows;l=s.slides.find(N=>N.getAttribute("data-swiper-slide-index")*1===P).column}else l=s.getSlideIndexByData(a);const u=n?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:c}=s.params;let p=s.params.slidesPerView;p==="auto"?p=s.slidesPerViewDynamic():(p=Math.ceil(parseFloat(s.params.slidesPerView,10)),c&&p%2===0&&(p=p+1));let b=u-l<p;if(c&&(b=b||l<Math.ceil(p/2)),r&&c&&s.params.slidesPerView!=="auto"&&!n&&(b=!1),b){const P=c?l<s.activeIndex?"prev":"next":l-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:P,slideTo:!0,activeSlideIndex:P==="next"?l+1:l-u+1,slideRealIndex:P==="next"?s.realIndex:void 0})}if(n){const P=a*s.params.grid.rows;a=s.slides.find(N=>N.getAttribute("data-swiper-slide-index")*1===P).column}else a=s.getSlideIndexByData(a)}return requestAnimationFrame(()=>{s.slideTo(a,e,t,r)}),s}function slideNext(i,e,t){e===void 0&&(e=!0);const r=this,{enabled:s,params:n,animating:a}=r;if(!s||r.destroyed)return r;typeof i>"u"&&(i=r.params.speed);let l=n.slidesPerGroup;n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(l=Math.max(r.slidesPerViewDynamic("current",!0),1));const u=r.activeIndex<n.slidesPerGroupSkip?1:l,c=r.virtual&&n.virtual.enabled;if(n.loop){if(a&&!c&&n.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&n.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+u,i,e,t)}),!0}return n.rewind&&r.isEnd?r.slideTo(0,i,e,t):r.slideTo(r.activeIndex+u,i,e,t)}function slidePrev(i,e,t){e===void 0&&(e=!0);const r=this,{params:s,snapGrid:n,slidesGrid:a,rtlTranslate:l,enabled:u,animating:c}=r;if(!u||r.destroyed)return r;typeof i>"u"&&(i=r.params.speed);const p=r.virtual&&s.virtual.enabled;if(s.loop){if(c&&!p&&s.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const b=l?r.translate:-r.translate;function P(tt){return tt<0?-Math.floor(Math.abs(tt)):Math.floor(tt)}const N=P(b),de=n.map(tt=>P(tt)),me=s.freeMode&&s.freeMode.enabled;let Ye=n[de.indexOf(N)-1];if(typeof Ye>"u"&&(s.cssMode||me)){let tt;n.forEach((Be,nt)=>{N>=Be&&(tt=nt)}),typeof tt<"u"&&(Ye=me?n[tt]:n[tt>0?tt-1:tt])}let Le=0;if(typeof Ye<"u"&&(Le=a.indexOf(Ye),Le<0&&(Le=r.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(Le=Le-r.slidesPerViewDynamic("previous",!0)+1,Le=Math.max(Le,0))),s.rewind&&r.isBeginning){const tt=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(tt,i,e,t)}else if(s.loop&&r.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(Le,i,e,t)}),!0;return r.slideTo(Le,i,e,t)}function slideReset(i,e,t){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof i>"u"&&(i=r.params.speed),r.slideTo(r.activeIndex,i,e,t)}function slideToClosest(i,e,t,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const s=this;if(s.destroyed)return;typeof i>"u"&&(i=s.params.speed);let n=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,n),l=a+Math.floor((n-a)/s.params.slidesPerGroup),u=s.rtlTranslate?s.translate:-s.translate;if(u>=s.snapGrid[l]){const c=s.snapGrid[l],p=s.snapGrid[l+1];u-c>(p-c)*r&&(n+=s.params.slidesPerGroup)}else{const c=s.snapGrid[l-1],p=s.snapGrid[l];u-c<=(p-c)*r&&(n-=s.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,s.slidesGrid.length-1),s.slideTo(n,i,e,t)}function slideToClickedSlide(){const i=this;if(i.destroyed)return;const{params:e,slidesEl:t}=i,r=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView;let s=i.getSlideIndexWhenGrid(i.clickedIndex),n;const a=i.isElement?"swiper-slide":`.${e.slideClass}`,l=i.grid&&i.params.grid&&i.params.grid.rows>1;if(e.loop){if(i.animating)return;n=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i.slideToLoop(n):s>(l?(i.slides.length-r)/2-(i.params.grid.rows-1):i.slides.length-r)?(i.loopFix(),s=i.getSlideIndex(elementChildren(t,`${a}[data-swiper-slide-index="${n}"]`)[0]),nextTick(()=>{i.slideTo(s)})):i.slideTo(s)}else i.slideTo(s)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(i,e){const t=this,{params:r,slidesEl:s}=t;if(!r.loop||t.virtual&&t.params.virtual.enabled)return;const n=()=>{elementChildren(s,`.${r.slideClass}, swiper-slide`).forEach((N,de)=>{N.setAttribute("data-swiper-slide-index",de)})},a=()=>{const P=elementChildren(s,`.${r.slideBlankClass}`);P.forEach(N=>{N.remove()}),P.length>0&&(t.recalcSlides(),t.updateSlides())},l=t.grid&&r.grid&&r.grid.rows>1;r.loopAddBlankSlides&&(r.slidesPerGroup>1||l)&&a();const u=r.slidesPerGroup*(l?r.grid.rows:1),c=t.slides.length%u!==0,p=l&&t.slides.length%r.grid.rows!==0,b=P=>{for(let N=0;N<P;N+=1){const de=t.isElement?createElement("swiper-slide",[r.slideBlankClass]):createElement("div",[r.slideClass,r.slideBlankClass]);t.slidesEl.append(de)}};if(c){if(r.loopAddBlankSlides){const P=u-t.slides.length%u;b(P),t.recalcSlides(),t.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else if(p){if(r.loopAddBlankSlides){const P=r.grid.rows-t.slides.length%r.grid.rows;b(P),t.recalcSlides(),t.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else n();t.loopFix({slideRealIndex:i,direction:r.centeredSlides?void 0:"next",initial:e})}function loopFix(i){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:s,activeSlideIndex:n,initial:a,byController:l,byMousewheel:u}=i===void 0?{}:i;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:p,allowSlidePrev:b,allowSlideNext:P,slidesEl:N,params:de}=c,{centeredSlides:me,initialSlide:Ye}=de;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&de.virtual.enabled){t&&(!de.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):de.centeredSlides&&c.snapIndex<de.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=b,c.allowSlideNext=P,c.emit("loopFix");return}let Le=de.slidesPerView;Le==="auto"?Le=c.slidesPerViewDynamic():(Le=Math.ceil(parseFloat(de.slidesPerView,10)),me&&Le%2===0&&(Le=Le+1));const tt=de.slidesPerGroupAuto?Le:de.slidesPerGroup;let Be=me?Math.max(tt,Math.ceil(Le/2)):tt;Be%tt!==0&&(Be+=tt-Be%tt),Be+=de.loopAdditionalSlides,c.loopedSlides=Be;const nt=c.grid&&de.grid&&de.grid.rows>1;p.length<Le+Be||c.params.effect==="cards"&&p.length<Le+Be*2?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):nt&&de.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const ft=[],mt=[],ht=nt?Math.ceil(p.length/de.grid.rows):p.length,Et=a&&ht-Ye<Le&&!me;let St=Et?Ye:c.activeIndex;typeof n>"u"?n=c.getSlideIndex(p.find(vt=>vt.classList.contains(de.slideActiveClass))):St=n;const bt=r==="next"||!r,Pt=r==="prev"||!r;let Rt=0,Dt=0;const Lt=(nt?p[n].column:n)+(me&&typeof s>"u"?-Le/2+.5:0);if(Lt<Be){Rt=Math.max(Be-Lt,tt);for(let vt=0;vt<Be-Lt;vt+=1){const xt=vt-Math.floor(vt/ht)*ht;if(nt){const gt=ht-xt-1;for(let _t=p.length-1;_t>=0;_t-=1)p[_t].column===gt&&ft.push(_t)}else ft.push(ht-xt-1)}}else if(Lt+Le>ht-Be){Dt=Math.max(Lt-(ht-Be*2),tt),Et&&(Dt=Math.max(Dt,Le-ht+Ye+1));for(let vt=0;vt<Dt;vt+=1){const xt=vt-Math.floor(vt/ht)*ht;nt?p.forEach((gt,_t)=>{gt.column===xt&&mt.push(_t)}):mt.push(xt)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&p.length<Le+Be*2&&(mt.includes(n)&&mt.splice(mt.indexOf(n),1),ft.includes(n)&&ft.splice(ft.indexOf(n),1)),Pt&&ft.forEach(vt=>{p[vt].swiperLoopMoveDOM=!0,N.prepend(p[vt]),p[vt].swiperLoopMoveDOM=!1}),bt&&mt.forEach(vt=>{p[vt].swiperLoopMoveDOM=!0,N.append(p[vt]),p[vt].swiperLoopMoveDOM=!1}),c.recalcSlides(),de.slidesPerView==="auto"?c.updateSlides():nt&&(ft.length>0&&Pt||mt.length>0&&bt)&&c.slides.forEach((vt,xt)=>{c.grid.updateSlide(xt,vt,c.slides)}),de.watchSlidesProgress&&c.updateSlidesOffset(),t){if(ft.length>0&&Pt){if(typeof e>"u"){const vt=c.slidesGrid[St],gt=c.slidesGrid[St+Rt]-vt;u?c.setTranslate(c.translate-gt):(c.slideTo(St+Math.ceil(Rt),0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-gt,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-gt))}else if(s){const vt=nt?ft.length/de.grid.rows:ft.length;c.slideTo(c.activeIndex+vt,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(mt.length>0&&bt)if(typeof e>"u"){const vt=c.slidesGrid[St],gt=c.slidesGrid[St-Dt]-vt;u?c.setTranslate(c.translate-gt):(c.slideTo(St-Dt,0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-gt,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-gt))}else{const vt=nt?mt.length/de.grid.rows:mt.length;c.slideTo(c.activeIndex-vt,0,!1,!0)}}if(c.allowSlidePrev=b,c.allowSlideNext=P,c.controller&&c.controller.control&&!l){const vt={slideRealIndex:e,direction:r,setTranslate:s,activeSlideIndex:n,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(xt=>{!xt.destroyed&&xt.params.loop&&xt.loopFix({...vt,slideTo:xt.params.slidesPerView===de.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...vt,slideTo:c.controller.control.params.slidesPerView===de.slidesPerView?t:!1})}c.emit("loopFix")}function loopDestroy(){const i=this,{params:e,slidesEl:t}=i;if(!e.loop||!t||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const r=[];i.slides.forEach(s=>{const n=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[n]=s}),i.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{t.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(i){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=i?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function unsetGrabCursor(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(i,e){e===void 0&&(e=this);function t(r){if(!r||r===getDocument()||r===getWindow())return null;r.assignedSlot&&(r=r.assignedSlot);const s=r.closest(i);return!s&&!r.getRootNode?null:s||t(r.getRootNode().host)}return t(e)}function preventEdgeSwipe(i,e,t){const r=getWindow(),{params:s}=i,n=s.edgeSwipeDetection,a=s.edgeSwipeThreshold;return n&&(t<=a||t>=r.innerWidth-a)?n==="prevent"?(e.preventDefault(),!0):!1:!0}function onTouchStart(i){const e=this,t=getDocument();let r=i;r.originalEvent&&(r=r.originalEvent);const s=e.touchEventsData;if(r.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==r.pointerId)return;s.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(s.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){preventEdgeSwipe(e,r,r.targetTouches[0].pageX);return}const{params:n,touches:a,enabled:l}=e;if(!l||!n.simulateTouch&&r.pointerType==="mouse"||e.animating&&n.preventInteractionOnTransition)return;!e.animating&&n.cssMode&&n.loop&&e.loopFix();let u=r.target;if(n.touchEventsTarget==="wrapper"&&!elementIsChildOf(u,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||s.isTouched&&s.isMoved)return;const c=!!n.noSwipingClass&&n.noSwipingClass!=="",p=r.composedPath?r.composedPath():r.path;c&&r.target&&r.target.shadowRoot&&p&&(u=p[0]);const b=n.noSwipingSelector?n.noSwipingSelector:`.${n.noSwipingClass}`,P=!!(r.target&&r.target.shadowRoot);if(n.noSwiping&&(P?closestElement(b,u):u.closest(b))){e.allowClick=!0;return}if(n.swipeHandler&&!u.closest(n.swipeHandler))return;a.currentX=r.pageX,a.currentY=r.pageY;const N=a.currentX,de=a.currentY;if(!preventEdgeSwipe(e,r,N))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=N,a.startY=de,s.touchStartTime=now(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,n.threshold>0&&(s.allowThresholdMove=!1);let me=!0;u.matches(s.focusableElements)&&(me=!1,u.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==u&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!u.matches(s.focusableElements))&&t.activeElement.blur();const Ye=me&&e.allowTouchMove&&n.touchStartPreventDefault;(n.touchStartForcePreventDefault||Ye)&&!u.isContentEditable&&r.preventDefault(),n.freeMode&&n.freeMode.enabled&&e.freeMode&&e.animating&&!n.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function onTouchMove(i){const e=getDocument(),t=this,r=t.touchEventsData,{params:s,touches:n,rtlTranslate:a,enabled:l}=t;if(!l||!s.simulateTouch&&i.pointerType==="mouse")return;let u=i;if(u.originalEvent&&(u=u.originalEvent),u.type==="pointermove"&&(r.touchId!==null||u.pointerId!==r.pointerId))return;let c;if(u.type==="touchmove"){if(c=[...u.changedTouches].find(ft=>ft.identifier===r.touchId),!c||c.identifier!==r.touchId)return}else c=u;if(!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",u);return}const p=c.pageX,b=c.pageY;if(u.preventedByNestedSwiper){n.startX=p,n.startY=b;return}if(!t.allowTouchMove){u.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(n,{startX:p,startY:b,currentX:p,currentY:b}),r.touchStartTime=now());return}if(s.touchReleaseOnEdges&&!s.loop)if(t.isVertical()){if(b<n.startY&&t.translate<=t.maxTranslate()||b>n.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(a&&(p>n.startX&&-t.translate<=t.maxTranslate()||p<n.startX&&-t.translate>=t.minTranslate()))return;if(!a&&(p<n.startX&&t.translate<=t.maxTranslate()||p>n.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==u.target&&u.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&u.target===e.activeElement&&u.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}r.allowTouchCallbacks&&t.emit("touchMove",u),n.previousX=n.currentX,n.previousY=n.currentY,n.currentX=p,n.currentY=b;const P=n.currentX-n.startX,N=n.currentY-n.startY;if(t.params.threshold&&Math.sqrt(P**2+N**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let ft;t.isHorizontal()&&n.currentY===n.startY||t.isVertical()&&n.currentX===n.startX?r.isScrolling=!1:P*P+N*N>=25&&(ft=Math.atan2(Math.abs(N),Math.abs(P))*180/Math.PI,r.isScrolling=t.isHorizontal()?ft>s.touchAngle:90-ft>s.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",u),typeof r.startMoving>"u"&&(n.currentX!==n.startX||n.currentY!==n.startY)&&(r.startMoving=!0),r.isScrolling||u.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!s.cssMode&&u.cancelable&&u.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&u.stopPropagation();let de=t.isHorizontal()?P:N,me=t.isHorizontal()?n.currentX-n.previousX:n.currentY-n.previousY;s.oneWayMovement&&(de=Math.abs(de)*(a?1:-1),me=Math.abs(me)*(a?1:-1)),n.diff=de,de*=s.touchRatio,a&&(de=-de,me=-me);const Ye=t.touchesDirection;t.swipeDirection=de>0?"prev":"next",t.touchesDirection=me>0?"prev":"next";const Le=t.params.loop&&!s.cssMode,tt=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(Le&&tt&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const ft=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(ft)}r.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",u)}if(new Date().getTime(),s._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&Ye!==t.touchesDirection&&Le&&tt&&Math.abs(de)>=1){Object.assign(n,{startX:p,startY:b,currentX:p,currentY:b,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}t.emit("sliderMove",u),r.isMoved=!0,r.currentTranslate=de+r.startTranslate;let Be=!0,nt=s.resistanceRatio;if(s.touchReleaseOnEdges&&(nt=0),de>0?(Le&&tt&&r.allowThresholdMove&&r.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(Be=!1,s.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+de)**nt))):de<0&&(Le&&tt&&r.allowThresholdMove&&r.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(Be=!1,s.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-de)**nt))),Be&&(u.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),s.threshold>0)if(Math.abs(de)>s.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,r.currentTranslate=r.startTranslate,n.diff=t.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY;return}}else{r.currentTranslate=r.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function onTouchEnd(i){const e=this,t=e.touchEventsData;let r=i;r.originalEvent&&(r=r.originalEvent);let s;if(r.type==="touchend"||r.type==="touchcancel"){if(s=[...r.changedTouches].find(ft=>ft.identifier===t.touchId),!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||r.pointerId!==t.pointerId)return;s=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:a,touches:l,rtlTranslate:u,slidesGrid:c,enabled:p}=e;if(!p||!a.simulateTouch&&r.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",r),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&a.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}a.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const b=now(),P=b-t.touchStartTime;if(e.allowClick){const ft=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(ft&&ft[0]||r.target,ft),e.emit("tap click",r),P<300&&b-t.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(t.lastClickTime=now(),nextTick(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||l.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let N;if(a.followFinger?N=u?e.translate:-e.translate:N=-t.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:N});return}const de=N>=-e.maxTranslate()&&!e.params.loop;let me=0,Ye=e.slidesSizesGrid[0];for(let ft=0;ft<c.length;ft+=ft<a.slidesPerGroupSkip?1:a.slidesPerGroup){const mt=ft<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[ft+mt]<"u"?(de||N>=c[ft]&&N<c[ft+mt])&&(me=ft,Ye=c[ft+mt]-c[ft]):(de||N>=c[ft])&&(me=ft,Ye=c[c.length-1]-c[c.length-2])}let Le=null,tt=null;a.rewind&&(e.isBeginning?tt=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(Le=0));const Be=(N-c[me])/Ye,nt=me<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(P>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(Be>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?Le:me+nt):e.slideTo(me)),e.swipeDirection==="prev"&&(Be>1-a.longSwipesRatio?e.slideTo(me+nt):tt!==null&&Be<0&&Math.abs(Be)>a.longSwipesRatio?e.slideTo(tt):e.slideTo(me))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(me+nt):e.slideTo(me):(e.swipeDirection==="next"&&e.slideTo(Le!==null?Le:me+nt),e.swipeDirection==="prev"&&e.slideTo(tt!==null?tt:me))}}function onResize(){const i=this,{params:e,el:t}=i;if(t&&t.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:s,snapGrid:n}=i,a=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const l=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!l?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!a?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=s,i.allowSlideNext=r,i.params.watchOverflow&&n!==i.snapGrid&&i.checkOverflow()}function onClick(i){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function onScroll(){const i=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=i;if(!r)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let s;const n=i.maxTranslate()-i.minTranslate();n===0?s=0:s=(i.translate-i.minTranslate())/n,s!==i.progress&&i.updateProgress(t?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function onLoad(i){const e=this;processLazyPreloader(e,i.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function onDocumentTouchStart(){const i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}const events=(i,e)=>{const t=getDocument(),{params:r,el:s,wrapperEl:n,device:a}=i,l=!!r.nested,u=e==="on"?"addEventListener":"removeEventListener",c=e;!s||typeof s=="string"||(t[u]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:l}),s[u]("touchstart",i.onTouchStart,{passive:!1}),s[u]("pointerdown",i.onTouchStart,{passive:!1}),t[u]("touchmove",i.onTouchMove,{passive:!1,capture:l}),t[u]("pointermove",i.onTouchMove,{passive:!1,capture:l}),t[u]("touchend",i.onTouchEnd,{passive:!0}),t[u]("pointerup",i.onTouchEnd,{passive:!0}),t[u]("pointercancel",i.onTouchEnd,{passive:!0}),t[u]("touchcancel",i.onTouchEnd,{passive:!0}),t[u]("pointerout",i.onTouchEnd,{passive:!0}),t[u]("pointerleave",i.onTouchEnd,{passive:!0}),t[u]("contextmenu",i.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&s[u]("click",i.onClick,!0),r.cssMode&&n[u]("scroll",i.onScroll),r.updateOnWindowResize?i[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):i[c]("observerUpdate",onResize,!0),s[u]("load",i.onLoad,{capture:!0}))};function attachEvents(){const i=this,{params:e}=i;i.onTouchStart=onTouchStart.bind(i),i.onTouchMove=onTouchMove.bind(i),i.onTouchEnd=onTouchEnd.bind(i),i.onDocumentTouchStart=onDocumentTouchStart.bind(i),e.cssMode&&(i.onScroll=onScroll.bind(i)),i.onClick=onClick.bind(i),i.onLoad=onLoad.bind(i),events(i,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function setBreakpoint(){const i=this,{realIndex:e,initialized:t,params:r,el:s}=i,n=r.breakpoints;if(!n||n&&Object.keys(n).length===0)return;const a=getDocument(),l=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",u=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?i.el:a.querySelector(r.breakpointsBase),c=i.getBreakpoint(n,l,u);if(!c||i.currentBreakpoint===c)return;const b=(c in n?n[c]:void 0)||i.originalParams,P=isGridEnabled(i,r),N=isGridEnabled(i,b),de=i.params.grabCursor,me=b.grabCursor,Ye=r.enabled;P&&!N?(s.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),i.emitContainerClasses()):!P&&N&&(s.classList.add(`${r.containerModifierClass}grid`),(b.grid.fill&&b.grid.fill==="column"||!b.grid.fill&&r.grid.fill==="column")&&s.classList.add(`${r.containerModifierClass}grid-column`),i.emitContainerClasses()),de&&!me?i.unsetGrabCursor():!de&&me&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(mt=>{if(typeof b[mt]>"u")return;const ht=r[mt]&&r[mt].enabled,Et=b[mt]&&b[mt].enabled;ht&&!Et&&i[mt].disable(),!ht&&Et&&i[mt].enable()});const Le=b.direction&&b.direction!==r.direction,tt=r.loop&&(b.slidesPerView!==r.slidesPerView||Le),Be=r.loop;Le&&t&&i.changeDirection(),extend$1(i.params,b);const nt=i.params.enabled,ft=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),Ye&&!nt?i.disable():!Ye&&nt&&i.enable(),i.currentBreakpoint=c,i.emit("_beforeBreakpoint",b),t&&(tt?(i.loopDestroy(),i.loopCreate(e),i.updateSlides()):!Be&&ft?(i.loopCreate(e),i.updateSlides()):Be&&!ft&&i.loopDestroy()),i.emit("breakpoint",b)}function getBreakpoint(i,e,t){if(e===void 0&&(e="window"),!i||e==="container"&&!t)return;let r=!1;const s=getWindow(),n=e==="window"?s.innerHeight:t.clientHeight,a=Object.keys(i).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const u=parseFloat(l.substr(1));return{value:n*u,point:l}}return{value:l,point:l}});a.sort((l,u)=>parseInt(l.value,10)-parseInt(u.value,10));for(let l=0;l<a.length;l+=1){const{point:u,value:c}=a[l];e==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(r=u):c<=t.clientWidth&&(r=u)}return r||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(i,e){const t=[];return i.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(s=>{r[s]&&t.push(e+s)}):typeof r=="string"&&t.push(e+r)}),t}function addClasses(){const i=this,{classNames:e,params:t,rtl:r,el:s,device:n}=i,a=prepareClasses(["initialized",t.direction,{"free-mode":i.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:n.android},{ios:n.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),s.classList.add(...e),i.emitContainerClasses()}function removeClasses(){const i=this,{el:e,classNames:t}=i;!e||typeof e=="string"||(e.classList.remove(...t),i.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const i=this,{isLocked:e,params:t}=i,{slidesOffsetBefore:r}=t;if(r){const s=i.slides.length-1,n=i.slidesGrid[s]+i.slidesSizesGrid[s]+r*2;i.isLocked=i.size>n}else i.isLocked=i.snapGrid.length===1;t.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),t.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(i,e){return function(r){r===void 0&&(r={});const s=Object.keys(r)[0],n=r[s];if(typeof n!="object"||n===null){extend$1(e,r);return}if(i[s]===!0&&(i[s]={enabled:!0}),s==="navigation"&&i[s]&&i[s].enabled&&!i[s].prevEl&&!i[s].nextEl&&(i[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&i[s]&&i[s].enabled&&!i[s].el&&(i[s].auto=!0),!(s in i&&"enabled"in n)){extend$1(e,r);return}typeof i[s]=="object"&&!("enabled"in i[s])&&(i[s].enabled=!0),i[s]||(i[s]={enabled:!1}),extend$1(e,r)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class Ns{constructor(){let e,t;for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=extend$1({},t),e&&!t.el&&(t.el=e);const a=getDocument();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const p=[];return a.querySelectorAll(t.el).forEach(b=>{const P=extend$1({},t,{el:b});p.push(new Ns(P))}),p}const l=this;l.__swiper__=!0,l.support=getSupport(),l.device=getDevice({userAgent:t.userAgent}),l.browser=getBrowser(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],t.modules&&Array.isArray(t.modules)&&l.modules.push(...t.modules);const u={};l.modules.forEach(p=>{p({params:t,swiper:l,extendParams:moduleExtendParams(t,u),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const c=extend$1({},defaults,u);return l.params=extend$1({},c,extendedDefaults,t),l.originalParams=extend$1({},l.params),l.passedParams=extend$1({},t),l.params&&l.params.on&&Object.keys(l.params.on).forEach(p=>{l.on(p,l.params.on[p])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:r}=this,s=elementChildren(t,`.${r.slideClass}, swiper-slide`),n=elementIndex(s[0]);return elementIndex(e)-n}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=elementChildren(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const s=r.minTranslate(),a=(r.maxTranslate()-s)*e+s;r.translateTo(a,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const s=e.getSlideClasses(r);t.push({slideEl:r,classNames:s}),e.emit("_slideClass",r,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:s,slides:n,slidesGrid:a,slidesSizesGrid:l,size:u,activeIndex:c}=r;let p=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let b=n[c]?Math.ceil(n[c].swiperSlideSize):0,P;for(let N=c+1;N<n.length;N+=1)n[N]&&!P&&(b+=Math.ceil(n[N].swiperSlideSize),p+=1,b>u&&(P=!0));for(let N=c-1;N>=0;N-=1)n[N]&&!P&&(b+=n[N].swiperSlideSize,p+=1,b>u&&(P=!0))}else if(e==="current")for(let b=c+1;b<n.length;b+=1)(t?a[b]+l[b]-a[c]<u:a[b]-a[c]<u)&&(p+=1);else for(let b=c-1;b>=0;b-=1)a[c]-a[b]<u&&(p+=1);return p}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&processLazyPreloader(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let n;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)s(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const a=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;n=e.slideTo(a.length-1,0,!1,!0)}else n=e.slideTo(e.activeIndex,0,!1,!0);n||s()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,s=r.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${s}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(n=>{e==="vertical"?n.style.width="":n.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(s()):elementChildren(r,s())[0];return!a&&t.params.createElements&&(a=createElement("div",t.params.wrapperClass),r.append(a),elementChildren(r,`.${t.params.slideClass}`).forEach(l=>{a.append(l)})),Object.assign(t,{el:r,wrapperEl:a,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:a,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||elementStyle(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||elementStyle(r,"direction")==="rtl"),wrongRTL:elementStyle(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(n=>{n.complete?processLazyPreloader(t,n):n.addEventListener("load",a=>{processLazyPreloader(t,a.target)})}),preload(t),t.initialized=!0,preload(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:s,el:n,wrapperEl:a,slides:l}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),t&&(r.removeClasses(),n&&typeof n!="string"&&n.removeAttribute("style"),a&&a.removeAttribute("style"),l&&l.length&&l.forEach(u=>{u.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),u.removeAttribute("style"),u.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(u=>{r.off(u)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),deleteProps(r)),r.destroyed=!0),null}static extendDefaults(e){extend$1(extendedDefaults,e)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(e){Ns.prototype.__modules__||(Ns.prototype.__modules__=[]);const t=Ns.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Ns.installModule(t)),Ns):(Ns.installModule(e),Ns)}};Object.keys(prototypes).forEach(i=>{Object.keys(prototypes[i]).forEach(e=>{Swiper$1.prototype[e]=prototypes[i][e]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function extend(i,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof i[r]>"u"?i[r]=e[r]:isObject(e[r])&&isObject(i[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?i[r]=e[r]:extend(i[r],e[r]):i[r]=e[r]})}function needsNavigation(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function needsPagination(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function needsScrollbar(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function uniqueClasses(i){i===void 0&&(i="");const e=i.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function wrapperClass(i){return i===void 0&&(i=""),i?i.includes("swiper-wrapper")?i:`swiper-wrapper ${i}`:"swiper-wrapper"}function updateSwiper(i){let{swiper:e,slides:t,passedParams:r,changedParams:s,nextEl:n,prevEl:a,scrollbarEl:l,paginationEl:u}=i;const c=s.filter(St=>St!=="children"&&St!=="direction"&&St!=="wrapperClass"),{params:p,pagination:b,navigation:P,scrollbar:N,virtual:de,thumbs:me}=e;let Ye,Le,tt,Be,nt,ft,mt,ht;s.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&p.thumbs&&(!p.thumbs.swiper||p.thumbs.swiper.destroyed)&&(Ye=!0),s.includes("controller")&&r.controller&&r.controller.control&&p.controller&&!p.controller.control&&(Le=!0),s.includes("pagination")&&r.pagination&&(r.pagination.el||u)&&(p.pagination||p.pagination===!1)&&b&&!b.el&&(tt=!0),s.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||l)&&(p.scrollbar||p.scrollbar===!1)&&N&&!N.el&&(Be=!0),s.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||n)&&(p.navigation||p.navigation===!1)&&P&&!P.prevEl&&!P.nextEl&&(nt=!0);const Et=St=>{e[St]&&(e[St].destroy(),St==="navigation"?(e.isElement&&(e[St].prevEl.remove(),e[St].nextEl.remove()),p[St].prevEl=void 0,p[St].nextEl=void 0,e[St].prevEl=void 0,e[St].nextEl=void 0):(e.isElement&&e[St].el.remove(),p[St].el=void 0,e[St].el=void 0))};s.includes("loop")&&e.isElement&&(p.loop&&!r.loop?ft=!0:!p.loop&&r.loop?mt=!0:ht=!0),c.forEach(St=>{if(isObject(p[St])&&isObject(r[St]))Object.assign(p[St],r[St]),(St==="navigation"||St==="pagination"||St==="scrollbar")&&"enabled"in r[St]&&!r[St].enabled&&Et(St);else{const bt=r[St];(bt===!0||bt===!1)&&(St==="navigation"||St==="pagination"||St==="scrollbar")?bt===!1&&Et(St):p[St]=r[St]}}),c.includes("controller")&&!Le&&e.controller&&e.controller.control&&p.controller&&p.controller.control&&(e.controller.control=p.controller.control),s.includes("children")&&t&&de&&p.virtual.enabled?(de.slides=t,de.update(!0)):s.includes("virtual")&&de&&p.virtual.enabled&&(t&&(de.slides=t),de.update(!0)),s.includes("children")&&t&&p.loop&&(ht=!0),Ye&&me.init()&&me.update(!0),Le&&(e.controller.control=p.controller.control),tt&&(e.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-pagination"),u.part.add("pagination"),e.el.appendChild(u)),u&&(p.pagination.el=u),b.init(),b.render(),b.update()),Be&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),e.el.appendChild(l)),l&&(p.scrollbar.el=l),N.init(),N.updateSize(),N.setTranslate()),nt&&(e.isElement&&((!n||typeof n=="string")&&(n=document.createElement("div"),n.classList.add("swiper-button-next"),setInnerHTML(n,e.hostEl.constructor.nextButtonSvg),n.part.add("button-next"),e.el.appendChild(n)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),setInnerHTML(a,e.hostEl.constructor.prevButtonSvg),a.part.add("button-prev"),e.el.appendChild(a))),n&&(p.navigation.nextEl=n),a&&(p.navigation.prevEl=a),P.init(),P.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),s.includes("direction")&&e.changeDirection(r.direction,!1),(ft||ht)&&e.loopDestroy(),(mt||ht)&&e.loopCreate(),e.update()}function getParams(i,e){i===void 0&&(i={}),e===void 0&&(e=!0);const t={on:{}},r={},s={};extend(t,defaults),t._emitClasses=!0,t.init=!1;const n={},a=paramsList.map(u=>u.replace(/_/,"")),l=Object.assign({},i);return Object.keys(l).forEach(u=>{typeof i[u]>"u"||(a.indexOf(u)>=0?isObject(i[u])?(t[u]={},s[u]={},extend(t[u],i[u]),extend(s[u],i[u])):(t[u]=i[u],s[u]=i[u]):u.search(/on[A-Z]/)===0&&typeof i[u]=="function"?e?r[`${u[2].toLowerCase()}${u.substr(3)}`]=i[u]:t.on[`${u[2].toLowerCase()}${u.substr(3)}`]=i[u]:n[u]=i[u])}),["navigation","pagination","scrollbar"].forEach(u=>{t[u]===!0&&(t[u]={}),t[u]===!1&&delete t[u]}),{params:t,passedParams:s,rest:n,events:r}}function mountSwiper(i,e){let{el:t,nextEl:r,prevEl:s,paginationEl:n,scrollbarEl:a,swiper:l}=i;needsNavigation(e)&&r&&s&&(l.params.navigation.nextEl=r,l.originalParams.navigation.nextEl=r,l.params.navigation.prevEl=s,l.originalParams.navigation.prevEl=s),needsPagination(e)&&n&&(l.params.pagination.el=n,l.originalParams.pagination.el=n),needsScrollbar(e)&&a&&(l.params.scrollbar.el=a,l.originalParams.scrollbar.el=a),l.init(t)}function getChangedParams(i,e,t,r,s){const n=[];if(!e)return n;const a=u=>{n.indexOf(u)<0&&n.push(u)};if(t&&r){const u=r.map(s),c=t.map(s);u.join("")!==c.join("")&&a("children"),r.length!==t.length&&a("children")}return paramsList.filter(u=>u[0]==="_").map(u=>u.replace(/_/,"")).forEach(u=>{if(u in i&&u in e)if(isObject(i[u])&&isObject(e[u])){const c=Object.keys(i[u]),p=Object.keys(e[u]);c.length!==p.length?a(u):(c.forEach(b=>{i[u][b]!==e[u][b]&&a(u)}),p.forEach(b=>{i[u][b]!==e[u][b]&&a(u)}))}else i[u]!==e[u]&&a(u)}),n}const updateOnVirtualData=i=>{!i||i.destroyed||!i.params.virtual||i.params.virtual&&!i.params.virtual.enabled||(i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),i.emit("_virtualUpdated"),i.parallax&&i.params.parallax&&i.params.parallax.enabled&&i.parallax.setTranslate())};function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},_extends.apply(this,arguments)}function isChildSwiperSlide(i){return i.type&&i.type.displayName&&i.type.displayName.includes("SwiperSlide")}function processChildren(i){const e=[];return React.Children.toArray(i).forEach(t=>{isChildSwiperSlide(t)?e.push(t):t.props&&t.props.children&&processChildren(t.props.children).forEach(r=>e.push(r))}),e}function getChildren(i){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(i).forEach(r=>{if(isChildSwiperSlide(r))e.push(r);else if(r.props&&r.props.slot&&t[r.props.slot])t[r.props.slot].push(r);else if(r.props&&r.props.children){const s=processChildren(r.props.children);s.length>0?s.forEach(n=>e.push(n)):t["container-end"].push(r)}else t["container-end"].push(r)}),{slides:e,slots:t}}function renderVirtual(i,e,t){if(!t)return null;const r=p=>{let b=p;return p<0?b=e.length+p:b>=e.length&&(b=b-e.length),b},s=i.isHorizontal()?{[i.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:n,to:a}=t,l=i.params.loop?-e.length:0,u=i.params.loop?e.length*2:e.length,c=[];for(let p=l;p<u;p+=1)p>=n&&p<=a&&c.push(e[r(p)]);return c.map((p,b)=>React.cloneElement(p,{swiper:i,style:s,key:p.props.virtualIndex||p.key||`slide-${b}`}))}function useIsomorphicLayoutEffect(i,e){return typeof window>"u"?reactExports.useEffect(i,e):reactExports.useLayoutEffect(i,e)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(i,e){let{className:t,tag:r="div",wrapperTag:s="div",children:n,onSwiper:a,...l}=i===void 0?{}:i,u=!1;const[c,p]=reactExports.useState("swiper"),[b,P]=reactExports.useState(null),[N,de]=reactExports.useState(!1),me=reactExports.useRef(!1),Ye=reactExports.useRef(null),Le=reactExports.useRef(null),tt=reactExports.useRef(null),Be=reactExports.useRef(null),nt=reactExports.useRef(null),ft=reactExports.useRef(null),mt=reactExports.useRef(null),ht=reactExports.useRef(null),{params:Et,passedParams:St,rest:bt,events:Pt}=getParams(l),{slides:Rt,slots:Dt}=getChildren(n),kt=()=>{de(!N)};Object.assign(Et.on,{_containerClasses(_t,yt){p(yt)}});const Lt=()=>{Object.assign(Et.on,Pt),u=!0;const _t={...Et};if(delete _t.wrapperClass,Le.current=new Swiper$1(_t),Le.current.virtual&&Le.current.params.virtual.enabled){Le.current.virtual.slides=Rt;const yt={cache:!1,slides:Rt,renderExternal:P,renderExternalUpdate:!1};extend(Le.current.params.virtual,yt),extend(Le.current.originalParams.virtual,yt)}};Ye.current||Lt(),Le.current&&Le.current.on("_beforeBreakpoint",kt);const vt=()=>{u||!Pt||!Le.current||Object.keys(Pt).forEach(_t=>{Le.current.on(_t,Pt[_t])})},xt=()=>{!Pt||!Le.current||Object.keys(Pt).forEach(_t=>{Le.current.off(_t,Pt[_t])})};reactExports.useEffect(()=>()=>{Le.current&&Le.current.off("_beforeBreakpoint",kt)}),reactExports.useEffect(()=>{!me.current&&Le.current&&(Le.current.emitSlidesClasses(),me.current=!0)}),useIsomorphicLayoutEffect(()=>{if(e&&(e.current=Ye.current),!!Ye.current)return Le.current.destroyed&&Lt(),mountSwiper({el:Ye.current,nextEl:nt.current,prevEl:ft.current,paginationEl:mt.current,scrollbarEl:ht.current,swiper:Le.current},Et),a&&!Le.current.destroyed&&a(Le.current),()=>{Le.current&&!Le.current.destroyed&&Le.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect(()=>{vt();const _t=getChangedParams(St,tt.current,Rt,Be.current,yt=>yt.key);return tt.current=St,Be.current=Rt,_t.length&&Le.current&&!Le.current.destroyed&&updateSwiper({swiper:Le.current,slides:Rt,passedParams:St,changedParams:_t,nextEl:nt.current,prevEl:ft.current,scrollbarEl:ht.current,paginationEl:mt.current}),()=>{xt()}}),useIsomorphicLayoutEffect(()=>{updateOnVirtualData(Le.current)},[b]);function gt(){return Et.virtual?renderVirtual(Le.current,Rt,b):Rt.map((_t,yt)=>React.cloneElement(_t,{swiper:Le.current,swiperSlideIndex:yt}))}return React.createElement(r,_extends({ref:Ye,className:uniqueClasses(`${c}${t?` ${t}`:""}`)},bt),React.createElement(SwiperContext.Provider,{value:Le.current},Dt["container-start"],React.createElement(s,{className:wrapperClass(Et.wrapperClass)},Dt["wrapper-start"],gt(),Dt["wrapper-end"]),needsNavigation(Et)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:ft,className:"swiper-button-prev"}),React.createElement("div",{ref:nt,className:"swiper-button-next"})),needsScrollbar(Et)&&React.createElement("div",{ref:ht,className:"swiper-scrollbar"}),needsPagination(Et)&&React.createElement("div",{ref:mt,className:"swiper-pagination"}),Dt["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(i,e){let{tag:t="div",children:r,className:s="",swiper:n,zoom:a,lazy:l,virtualIndex:u,swiperSlideIndex:c,...p}=i===void 0?{}:i;const b=reactExports.useRef(null),[P,N]=reactExports.useState("swiper-slide"),[de,me]=reactExports.useState(!1);function Ye(nt,ft,mt){ft===b.current&&N(mt)}useIsomorphicLayoutEffect(()=>{if(typeof c<"u"&&(b.current.swiperSlideIndex=c),e&&(e.current=b.current),!(!b.current||!n)){if(n.destroyed){P!=="swiper-slide"&&N("swiper-slide");return}return n.on("_slideClass",Ye),()=>{n&&n.off("_slideClass",Ye)}}}),useIsomorphicLayoutEffect(()=>{n&&b.current&&!n.destroyed&&N(n.getSlideClasses(b.current))},[n]);const Le={isActive:P.indexOf("swiper-slide-active")>=0,isVisible:P.indexOf("swiper-slide-visible")>=0,isPrev:P.indexOf("swiper-slide-prev")>=0,isNext:P.indexOf("swiper-slide-next")>=0},tt=()=>typeof r=="function"?r(Le):r,Be=()=>{me(!0)};return React.createElement(t,_extends({ref:b,className:uniqueClasses(`${P}${s?` ${s}`:""}`),"data-swiper-slide-index":u,onLoad:Be},p),a&&React.createElement(SwiperSlideContext.Provider,{value:Le},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},tt(),l&&!de&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&React.createElement(SwiperSlideContext.Provider,{value:Le},tt(),l&&!de&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";var cssMediaquery={},hasRequiredCssMediaquery;function requireCssMediaquery(){if(hasRequiredCssMediaquery)return cssMediaquery;hasRequiredCssMediaquery=1,cssMediaquery.match=n,cssMediaquery.parse=a;var i=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,e=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,t=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,s=/(dpi|dpcm|dppx)?$/;function n(p,b){return a(p).some(function(P){var N=P.inverse,de=P.type==="all"||b.type===P.type;if(de&&N||!(de||N))return!1;var me=P.expressions.every(function(Ye){var Le=Ye.feature,tt=Ye.modifier,Be=Ye.value,nt=b[Le];if(!nt)return!1;switch(Le){case"orientation":case"scan":return nt.toLowerCase()===Be.toLowerCase();case"width":case"height":case"device-width":case"device-height":Be=c(Be),nt=c(nt);break;case"resolution":Be=u(Be),nt=u(nt);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":Be=l(Be),nt=l(nt);break;case"grid":case"color":case"color-index":case"monochrome":Be=parseInt(Be,10)||1,nt=parseInt(nt,10)||0;break}switch(tt){case"min":return nt>=Be;case"max":return nt<=Be;default:return nt===Be}});return me&&!N||!me&&N})}function a(p){return p.split(",").map(function(b){b=b.trim();var P=b.match(i),N=P[1],de=P[2],me=P[3]||"",Ye={};return Ye.inverse=!!N&&N.toLowerCase()==="not",Ye.type=de?de.toLowerCase():"all",me=me.match(/\([^\)]+\)/g)||[],Ye.expressions=me.map(function(Le){var tt=Le.match(e),Be=tt[1].toLowerCase().match(t);return{modifier:Be[1],feature:Be[2],value:tt[2]}}),Ye})}function l(p){var b=Number(p),P;return b||(P=p.match(/^(\d+)\s*\/\s*(\d+)$/),b=P[1]/P[2]),b}function u(p){var b=parseFloat(p),P=String(p).match(s)[1];switch(P){case"dpcm":return b/2.54;case"dppx":return b*96;default:return b}}function c(p){var b=parseFloat(p),P=String(p).match(r)[1];switch(P){case"em":return b*16;case"rem":return b*16;case"cm":return b*96/2.54;case"mm":return b*96/2.54/10;case"in":return b*96;case"pt":return b*72;case"pc":return b*72/12;default:return b}}return cssMediaquery}var matchmediaquery,hasRequiredMatchmediaquery;function requireMatchmediaquery(){if(hasRequiredMatchmediaquery)return matchmediaquery;hasRequiredMatchmediaquery=1;var i=requireCssMediaquery().match,e=typeof window<"u"?window.matchMedia:null;function t(s,n,a){var l=this,u;e&&!a&&(u=e.call(window,s)),u?(this.matches=u.matches,this.media=u.media,u.addListener(b)):(this.matches=i(s,n),this.media=s),this.addListener=c,this.removeListener=p,this.dispose=P;function c(N){u&&u.addListener(N)}function p(N){u&&u.removeListener(N)}function b(N){l.matches=N.matches,l.media=N.media}function P(){u&&u.removeListener(b)}}function r(s,n,a){return new t(s,n,a)}return matchmediaquery=r,matchmediaquery}var matchmediaqueryExports=requireMatchmediaquery();const matchMedia$1=getDefaultExportFromCjs$1(matchmediaqueryExports);var uppercasePattern=/[A-Z]/g,msPattern=/^ms-/,cache={};function toHyphenLower(i){return"-"+i.toLowerCase()}function hyphenateStyleName(i){if(cache.hasOwnProperty(i))return cache[i];var e=i.replace(uppercasePattern,toHyphenLower);return cache[i]=msPattern.test(e)?"-"+e:e}function shallowEqualObjects(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),r=Object.keys(e),s=t.length;if(r.length!==s)return!1;for(let n=0;n<s;n++){const a=t[n];if(i[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=i,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var i=requireReactPropTypesSecret();function e(){}function t(){}return t.resetWarningCache=e,factoryWithThrowingShims=function(){function r(a,l,u,c,p,b){if(b!==i){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}r.isRequired=r;function s(){return r}var n={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return n.PropTypes=n,n},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs$1(propTypesExports),stringOrNumber=PropTypes.oneOfType([PropTypes.string,PropTypes.number]),types={all:PropTypes.bool,grid:PropTypes.bool,aural:PropTypes.bool,braille:PropTypes.bool,handheld:PropTypes.bool,print:PropTypes.bool,projection:PropTypes.bool,screen:PropTypes.bool,tty:PropTypes.bool,tv:PropTypes.bool,embossed:PropTypes.bool},matchers={orientation:PropTypes.oneOf(["portrait","landscape"]),scan:PropTypes.oneOf(["progressive","interlace"]),aspectRatio:PropTypes.string,deviceAspectRatio:PropTypes.string,height:stringOrNumber,deviceHeight:stringOrNumber,width:stringOrNumber,deviceWidth:stringOrNumber,color:PropTypes.bool,colorIndex:PropTypes.bool,monochrome:PropTypes.bool,resolution:stringOrNumber,type:Object.keys(types)},{type,...featureMatchers}=matchers,features={minAspectRatio:PropTypes.string,maxAspectRatio:PropTypes.string,minDeviceAspectRatio:PropTypes.string,maxDeviceAspectRatio:PropTypes.string,minHeight:stringOrNumber,maxHeight:stringOrNumber,minDeviceHeight:stringOrNumber,maxDeviceHeight:stringOrNumber,minWidth:stringOrNumber,maxWidth:stringOrNumber,minDeviceWidth:stringOrNumber,maxDeviceWidth:stringOrNumber,minColor:PropTypes.number,maxColor:PropTypes.number,minColorIndex:PropTypes.number,maxColorIndex:PropTypes.number,minMonochrome:PropTypes.number,maxMonochrome:PropTypes.number,minResolution:stringOrNumber,maxResolution:stringOrNumber,...featureMatchers},all={...types,...features};var mq={all};const negate=i=>`not ${i}`,keyVal=(i,e)=>{const t=hyphenateStyleName(i);return typeof e=="number"&&(e=`${e}px`),e===!0?t:e===!1?negate(t):`(${t}: ${e})`},join=i=>i.join(" and "),toQuery=i=>{const e=[];return Object.keys(mq.all).forEach(t=>{const r=i[t];r!=null&&e.push(keyVal(t,r))}),join(e)},Context=reactExports.createContext(void 0),makeQuery=i=>i.query||toQuery(i),hyphenateKeys=i=>i?Object.keys(i).reduce((t,r)=>(t[hyphenateStyleName(r)]=i[r],t),{}):void 0,useIsUpdate=()=>{const i=reactExports.useRef(!1);return reactExports.useEffect(()=>{i.current=!0},[]),i.current},useDevice=i=>{const e=reactExports.useContext(Context),t=()=>hyphenateKeys(i)||hyphenateKeys(e),[r,s]=reactExports.useState(t);return reactExports.useEffect(()=>{const n=t();shallowEqualObjects(r,n)||s(n)},[i,e]),r},useQuery=i=>{const e=()=>makeQuery(i),[t,r]=reactExports.useState(e);return reactExports.useEffect(()=>{const s=e();t!==s&&r(s)},[i]),t},useMatchMedia=(i,e)=>{const t=()=>matchMedia$1(i,e||{},!!e),[r,s]=reactExports.useState(t),n=useIsUpdate();return reactExports.useEffect(()=>{if(n){const a=t();return s(a),()=>{a&&a.dispose()}}},[i,e]),r},useMatches=i=>{const[e,t]=reactExports.useState(i.matches);return reactExports.useEffect(()=>{const r=s=>{t(s.matches)};return i.addListener(r),t(i.matches),()=>{i.removeListener(r)}},[i]),e},useMediaQuery=(i,e,t)=>{const r=useDevice(e),s=useQuery(i);if(!s)throw new Error("Invalid or missing MediaQuery!");const n=useMatchMedia(s,r),a=useMatches(n);return useIsUpdate(),reactExports.useEffect(()=>{},[a]),reactExports.useEffect(()=>()=>{n&&n.dispose()},[]),a},ContextProviderWrapper=reactExports.createContext(null),ContextProvider=({children:i})=>{const e=useMediaQuery({minWidth:1024}),t=useMediaQuery({maxWidth:1023,minWidth:768}),r=useMediaQuery({maxWidth:767});return jsxRuntimeExports.jsx(ContextProviderWrapper.Provider,{value:{isDesktop:e,isTablet:t,isMobile:r},children:i})},Social=()=>{const i=reactExports.useRef(null),e=useInView(i,{once:!0,margin:"-100px"}),t=reactExports.useRef(null),r=useInView(t,{once:!0,margin:"-100px"}),[s,n]=reactExports.useState(0),{isDesktop:a}=reactExports.useContext(ContextProviderWrapper),l=[{full:!0,video:"/assets/video/blueprint-box-face-decor/master.m3u8"},{video:"/assets/video/google-mlkit/master.m3u8"},{video:"/assets/video/face-id-test/master.m3u8"},{video:"/assets/video/gradient-skia/master.m3u8"},{video:"/assets/video/swift-anim-text/master.m3u8"},{full:!0,video:"/assets/video/myvng-maestro/master.m3u8"},{video:"/assets/video/gen-text/master.m3u8"},{video:"/assets/video/blueprint-circle-anim/master.m3u8"},{video:"/assets/video/circle-anim-v2/master.m3u8"},{video:"/assets/video/video_02/master.m3u8"},{video:"/assets/video/circle-ring/master.m3u8"}];return jsxRuntimeExports.jsx(SocialContainer,{className:"relative w-full min-h-screen py-20 pt-32 bg-gradient-to-b from-black via-gray-950 to-gray-900",children:jsxRuntimeExports.jsx("div",{className:"wrapper",children:jsxRuntimeExports.jsx("div",{className:"relative z-10 w-full flex flex-col justify-center min-h-screen",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",ref:i,children:[jsxRuntimeExports.jsxs(motion.div,{className:"inline-flex items-center gap-2 px-6 py-3 bg-lime-500/10 border border-lime-500/30 rounded-full text-lime-400 text-sm font-medium mb-6",initial:{opacity:0,y:200},animate:e?{opacity:1,y:0}:{opacity:0,y:200},transition:{duration:.5},children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-video w-4 h-4","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"})]}),"Chia Sẻ Kiến Thức"]}),jsxRuntimeExports.jsxs(motion.h2,{className:"text-3xl lg:text-5xl font-black text-white mb-6 leading-tight",initial:{opacity:0,y:200},animate:e?{opacity:1,y:0}:{opacity:0,y:200},transition:{duration:.5,delay:.3},children:[jsxRuntimeExports.jsx("span",{className:"text-lime-500",children:"CONTENT "}),jsxRuntimeExports.jsx("span",{className:"text-white/90",children:"CONTENT"})]}),jsxRuntimeExports.jsx(motion.p,{className:"text-xl text-white/60 max-w-lg mx-auto leading-relaxed",initial:{opacity:0,y:200},animate:e?{opacity:1,y:0}:{opacity:0,y:200},transition:{duration:.5,delay:.6},children:"Mình muốn hoàn thiện bản thân mỗi ngày và chia sẻ điều đó. Tìm mình trên:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 md:gap-6 mt-12 max-w-4xl mx-auto px-4",children:[jsxRuntimeExports.jsx(motion.div,{className:"w-full sm:max-w-xs",initial:{opacity:0,scale:0},animate:e?{opacity:1,scale:1}:{opacity:0,scale:0},transition:{duration:.5,delay:.9},children:jsxRuntimeExports.jsxs("div",{className:"relative rounded-3xl border border-neutral-800 overflow-hidden p-4 md:p-6 lg:p-8 bg-white/5 hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500 ease-in-out"}),jsxRuntimeExports.jsxs("a",{href:"https://www.tiktok.com/@lehuythaidotcom",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-music w-12 h-12 md:w-16 md:h-16 text-pink-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"M9 18V5l12-2v13"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsx("h3",{className:"text-lg md:text-xl font-bold text-pink-400",children:"TikTok"})})]})]})}),jsxRuntimeExports.jsx(motion.div,{className:"w-full sm:max-w-xs",initial:{opacity:0,scale:0,rotate:360},animate:e?{opacity:1,scale:1,rotate:0}:{opacity:0,scale:0,rotate:360},transition:{duration:.5,delay:1},children:jsxRuntimeExports.jsxs("div",{className:"relative rounded-3xl border border-neutral-800 overflow-hidden p-4 md:p-6 lg:p-8 bg-white/5 hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500 ease-in-out"}),jsxRuntimeExports.jsxs("a",{href:"https://www.facebook.com/lehuythaidotcom/",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-facebook w-12 h-12 md:w-16 md:h-16 text-blue-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsx("h3",{className:"text-lg md:text-xl font-bold text-blue-400",children:"Facebook"})})]})]})}),jsxRuntimeExports.jsx(motion.div,{className:"w-full sm:max-w-xs",initial:{opacity:0,x:200},animate:e?{opacity:1,x:0}:{opacity:0,x:200},transition:{duration:.5,delay:1.2},children:jsxRuntimeExports.jsxs("div",{className:"relative rounded-3xl border border-neutral-800 overflow-hidden p-4 md:p-6 lg:p-8 bg-white/5 hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500 ease-in-out"}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/@lehuythaidotcom",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-youtube w-12 h-12 md:w-16 md:h-16 text-red-400 group-hover:scale-110 transition-transform duration-300","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"}),jsxRuntimeExports.jsx("path",{d:"m10 15 5-3-5-3z"})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsx("h3",{className:"text-lg md:text-xl font-bold text-red-400",children:"YouTube"})})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-16",ref:t,children:[jsxRuntimeExports.jsxs(motion.div,{className:"text-center mb-12",initial:{opacity:0,y:200},animate:e?{opacity:1,y:0}:{opacity:0,y:200},transition:{duration:.5},children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Video Mới nhất"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 max-w-lg mx-auto",children:"Đừng bỏ lỡ những video mới nhất của mình."})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:200},animate:r?{opacity:1,y:0}:{opacity:0,y:200},transition:{duration:.5},children:jsxRuntimeExports.jsx(Swiper,{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:a?"auto":2,onSlideChange:u=>n(u.realIndex),coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:!0,modules:[EffectCoverflow],className:"mySwiper",children:l.map((u,c)=>jsxRuntimeExports.jsx(SwiperSlide,{children:jsxRuntimeExports.jsx(SocialVideoCard,{src:u.video,title:"Lorem ipsum dolor sit amet consectetur adipisicing elit",isActive:c===s})}))})})]})]})})})})},ContactContainer=dt.section``,Contact=()=>{const i=reactExports.useRef(null),e=useInView(i,{once:!0,margin:"-100px"});return jsxRuntimeExports.jsx(ContactContainer,{className:"relative w-full min-h-screen py-20 pt-32 bg-gradient-to-t from-gray-950 via-black to-gray-900 overflow-hidden flex items-center justify-center",ref:i,children:jsxRuntimeExports.jsx("div",{className:"wrapper",children:jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-20",children:[jsxRuntimeExports.jsxs(motion.div,{className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-500/10 border border-blue-500/30 rounded-full text-blue-400 text-sm font-medium mb-6",initial:{opacity:0,y:200},animate:e?{opacity:1,y:0}:{opacity:0,y:200},transition:{duration:.5},children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-share2 lucide-share-2 w-4 h-4","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"18",cy:"5",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"12",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"19",r:"3"}),jsxRuntimeExports.jsx("line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49"}),jsxRuntimeExports.jsx("line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49"})]}),"Kết Nối Với Tôi"]}),jsxRuntimeExports.jsxs(motion.h2,{className:"text-3xl lg:text-5xl font-black text-white mb-6 leading-tight",initial:{opacity:0,x:200},animate:e?{opacity:1,x:0}:{opacity:0,x:200},transition:{duration:.5,delay:.25},children:[jsxRuntimeExports.jsx("span",{className:"text-blue-400",children:"LET'S "}),jsxRuntimeExports.jsx("span",{className:"text-white/90",children:"CONNECT"})]})]}),jsxRuntimeExports.jsx(motion.div,{className:"text-center",initial:{opacity:0,scale:0,rotate:360},animate:e?{opacity:1,scale:1,rotate:0}:{opacity:0,scale:0,rotate:360},transition:{duration:.5,delay:.25},children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto p-8 bg-white/5 border border-white/10 rounded-3xl backdrop-blur-sm",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-send w-8 h-8 text-white","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),jsxRuntimeExports.jsx("path",{d:"m21.854 2.147-10.94 10.939"})]})})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Bắt đầu cuộc trò chuyện"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 mb-8 leading-relaxed max-w-lg mx-auto",children:"Tôi luôn sẵn sàng thảo luận về các ý tưởng mới, cơ hội hợp tác hoặc chỉ đơn giản là trò chuyện về bất cứ điều gì."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center",children:[jsxRuntimeExports.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 px-6 py-2 md:px-8 md:py-3 bg-blue-500 hover:bg-blue-600 text-white text-sm md:text-base font-medium md:font-bold rounded-full transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail w-6 h-6","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"})]}),"Email"]}),jsxRuntimeExports.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 px-6 py-2 md:px-8 md:py-3 bg-white/10 hover:bg-white/20 text-white text-sm md:text-base font-medium md:font-bold rounded-full border border-white/20 hover:border-white/40 transition-all duration-300 hover:scale-105",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-facebook w-6 h-6","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),"Facebook"]})]})]})})]})})})},HomePage=()=>jsxRuntimeExports.jsxs(HomeContainer,{children:[jsxRuntimeExports.jsx(Squares,{speed:.5,squareSize:40,direction:"diagonal",borderColor:"#392e4e",hoverFillColor:"#222"}),jsxRuntimeExports.jsx(Keyvisual,{}),jsxRuntimeExports.jsx(Intro,{}),jsxRuntimeExports.jsx(Skill,{}),jsxRuntimeExports.jsx(Social,{}),jsxRuntimeExports.jsx(Contact,{})]}),AboutPage=()=>jsxRuntimeExports.jsx("div",{children:"AboutPage"});function Router(){return useRoutes([{path:"/",element:jsxRuntimeExports.jsx(Mainlayout,{}),children:[{element:jsxRuntimeExports.jsx(HomePage,{}),index:!0},{path:"about-us",element:jsxRuntimeExports.jsx(AboutPage,{})}]},{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/404",replace:!0})}])}const ContainerMain=dt.div``;function App(){return reactExports.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(i=>console.log("✅ Service Worker registered",i)).catch(i=>console.error("❌ Service Worker error",i))})},[]),jsxRuntimeExports.jsx(ContextProvider,{children:jsxRuntimeExports.jsxs(ContainerMain,{children:[jsxRuntimeExports.jsx(ScrollToTop,{}),jsxRuntimeExports.jsx(Router,{})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}));
